<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 24. &#1052;&#1077;&#1093;&#1072;&#1085;&#1080;&#1079;&#1084; &#1088;&#1072;&#1079;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1103; &#1076;&#1072;&#1085;&#1085;&#1099;&#1093;</title>
		<LINK REL="stylesheet" href="/db/content/v8310doc/src/руководство разработчика/style.css?_=1496848987">
		<script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 24. механизм разделения данных.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script charset="windows-1251" type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script charset="windows-1251" type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref449622688"></a><a name="_ref335321555"></a><a name="_ref335321549"></a><a name="_ref327790237"></a><a name="_ref325101955"></a><a name="_ref322431911"></a><a name="_ref315878147"></a><a id="TI000000876" class="bookmark"><h1>Глава 24.  Механизм разделения данных</h1></a>

<a name="_ref283220863"></a><a name="_ref393800764"></a><a id="TI000000877" class="bookmark" name="issogl1_24.1_общая_информация"><h2>24.1. Общая информация</h2></a>

<p class="MsoNormal">Механизм
<span class="Bold">разделения данных</span> – специальный механизм,
позволяющий разделить все хранимые данные, а также работу прикладного решения
на отдельные части. Если у общего реквизита (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref429580590">здесь</a>) свойство <span class="Interface">Разделение данных</span>
установлено в значение <span class="Interface">Разделять</span>, то
включается режим разделения данных. При этом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
изменяется поведение объектов конфигурации,
входящих в состав общего реквизита (далее – <span class="Bold">разделителя</span>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
для каждого разделителя в информационной базе
определяется текущее значение разделителя и признак использования данного
разделителя;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
объекты конфигурации, входящие в состав такого
общего реквизита, называются <span class="Bold">разделенными объектами конфигурации</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
конфигурация с такими общими реквизитами считается
<span class="Bold">разделенной конфигурацией</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
информационная база с разделенной конфигурацией
называется <span class="Bold">разделенной информационной базой</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
данные информационной базы, доступные для
выбранных значений разделителей, и данные неразделенных объектов конфигурации
называются <span class="Bold">областью данных</span>.</p>

<p class="MsoNormal">Во
всех операциях чтения записей базы данных «1С:Предприятие» автоматически
отбирает только те записи, в которых значения используемых разделителей
совпадают с текущими значениями разделителей. При записи данных платформа
проверяет, что записываемые данные содержат значения используемых разделителей,
равные текущим значениям разделителей или равные значениям по умолчанию для
соответствующих типов. Если это не так, то вызывается исключение.</p>

<p class="Lang-subheader">Например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Изначально объект записан со значением разделителя Абонент = 1</span>
Объект <span class="operator">=</span> СсылкаНаОбъект<span class="operator">.</span>ПолучитьОбъект<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Меняем значение разделителя в текущем сеансе</span>
ПараметрыСеанса<span class="operator">.</span>АбонентЗначение <span class="operator">=</span> <span class="number">2</span><span class="operator">;</span>
<span class="comment">// Объект не будет записан, и будет вызвано исключение</span>
Объект<span class="operator">.</span>Записать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Если
записываемые данные содержат значения разделителей, равные значениям по
умолчанию для соответствующих типов, то в разделители объекта будут записаны
значения используемых разделителей текущего сеанса. Для неиспользуемых в
текущем сеансе разделителей:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
при чтении данных отбор по этим разделителям не
выполняется;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
при модификации данных используются значения,
содержащиеся в записываемых данных.</p>

<p class="MsoNormal">В
состав разделителя могут входить следующие объекты конфигурации:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
константы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочники,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
документы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
последовательности,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
журналы документов,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
планы видов характеристик,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
планы счетов,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
планы видов расчета,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
бизнес-процессы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
задачи,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
регистры сведений,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
регистры накопления,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
регистры бухгалтерского учета,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
регистры расчета,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
планы обмена,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
регламентные задания,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
пользователи информационной базы (см. <a href="#_ref330911552">здесь</a>).</p>

<p class="MsoNormalCxSpFirst">Следует
помнить, что последовательности и журналы документов являются разделенными
объектами только в том случае, если в их состав входят разделенные объекты
конфигурации. Состав разделителей для объектов, входящих в состав
последовательности или журнала документов, должен быть идентичным.</p>

<p class="MsoNormalCxSpMiddle">Разделитель
в режиме <span class="Interface">Независимо и совместно</span> может использоваться в
ограничениях доступа к данным (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref73775184">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Тип
разделителя <span class="Bold">не может быть составным</span>.</p>

<p class="Regularbeforepicture">Если
общий реквизит выступает в роли разделителя, то у него появляется несколько
дополнительных свойств, влияющих на поведение системы, а также изменяется
поведение объектов конфигурации, входящих в состав разделителя. В следующих
разделах эти свойства будут рассмотрены подробнее.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00474.gif?_=1496848987" WIDTH="350" ALT HEIGHT="444"></p>

<p class="MsoCaption">Рис.
466. Общий реквизит с разделением</p>

<p class="NoteCxSpFirst"><span class="Note">Внимание!</span> Если использовать разделитель с типом <span class="Term">Строка</span>, не допускается изменение языка
региональных настроек информационной базы при работе с Microsoft SQL Server.</p>

<p class="NoteCxSpLast">Внимание! Не поддерживается
разделение данных на СУБД Microsoft SQL Server 2000, IBM DB2 9.1, а также на
СУБД IBM DB2 других версий, если в СУБД установлено сравнение строк,
чувствительное к регистру букв (параметр <span class="Term">COLLATION_SEQUENCE</span> не равен значению <span class="Term">UCA500R1_LROOT_AN_CX_EX_FX_HX_NX_S2</span>).</p>

<a id="TI000000878" class="bookmark" name="issogl1_24.2_свойства_общего_реквизита"><h2>24.2. Свойства общего реквизита</h2></a>

<a name="_ref283132058"></a><a id="TI000000879" class="bookmark" name="issogl2_24.2.1_использование_разделяемых_данных"><h3>24.2.1. Использование разделяемых данных</h3></a>

<p class="MsoNormal">Свойство
<span class="Interface">Использование разделяемых данных</span> определяет возможность
использования данных разделенных объектов конфигурации в том случае, если в
режиме 1С:<span class="Interface">Предприятие</span> разделитель не используется:</p>

<p class="MsoListBullet">&#9679; 
Значение<span class="Interface"> Независимо</span> –
запрещается любое обращение к разделенным объектам (кроме планов обмена,
подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref287015827">здесь</a>), если в текущем сеансе работы с информационной базой
разделитель не используется. При этом разделитель недоступен в объектной
модели, в языке запросов, в формате выгрузки в XML и XDTO, а также ограничениях
доступа к данным. При записи разделенных данных система автоматически заполняет
значения общего реквизита значениями, установленными в текущем сеансе.</p>

<p class="Indentlist">Данный
режим может использоваться в тех случаях, когда прикладное решение в своей
работе использует только данные одной области данных.</p>

<p class="Note"><span class="Note">Внимание!</span> В этом режиме <span class="Bold">ссылки
объектов</span> базы данных <span class="Bold">могут быть одинаковыми</span> для
объектов, записанных в разных областях данных.</p>

<p class="MsoListBullet">&#9679; 
Значение <span class="Interface">Независимо и совместно</span> –
разрешается работа с разделяемыми объектами независимо от использования разделителя
в сеансе. Для такого режима будет доступна область данных, которую определяют
значения используемых разделителей. При этом разделитель доступен в объектной
модели, в языке запросов, в формате выгрузки в XML и XDTO, а также в
ограничениях доступа к данным. В этом режиме невозможно создание предопределенных
элементов для объектов, входящих в состав такого разделителя. Если в сеансе
используются не все разделители, в состав которых входит объект, то работа с
этим объектом будет менее эффективной.</p>

<p class="Indentlist">Данный
режим может использоваться в тех случаях, когда прикладное решение в
большинстве случаев работает только с данными одной области данных (например,
при вводе документов), а в некоторых режимах может использовать данные нескольких
или всех областей, например, для получения консолидированной отчетности.</p>

<p class="Note"><span class="Note">Внимание!</span> В этом режиме <span class="Bold">ссылки
объектов</span> базы данных <span class="Bold">не могут быть одинаковыми</span>
для разных объектов, записанных в разных областях данных.</p>

<a name="_ref290560516"></a><a name="_ref470185385"></a><a name="_ref470180309"></a><a id="TI000000880" class="bookmark" name="issogl2_24.2.2_значение_разделителя_и_признак_использования"><h3>24.2.2. Значение разделителя и признак использования</h3></a>

<p class="MsoNormal">Свойство
<span class="Interface">Значение разделения данных</span> определяет параметр сеанса,
который хранит установленное в текущем сеансе <span class="Bold">значение разделителя</span>.
Тип параметра сеанса в точности должен совпадать с типом разделителя.</p>

<p class="Regularbeforepicture">Свойство
<span class="Interface">Использование разделения данных</span> определяет параметр
сеанса (типа <span class="Term">Булево</span>),
который управляет использованием разделителя. Если значение указанного
параметра сеанса равно <span class="Term">Истина</span>, то это означает, что в данном сеансе <span class="Bold">разделитель используется</span>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00475.gif?_=1496848987" WIDTH="655" ALT HEIGHT="296"></p>

<p class="MsoCaption">Рис.
467. Параметры сеанса и общий реквизит</p>

<p class="MsoNormalCxSpFirst">Изменять
значения параметров сеанса в процессе работы системы можно в том случае, если у
пользователя, от лица которого работает сеанс, есть права на изменение
необходимых параметров сеанса. «1С:Предприятие» не гарантирует целостность данных
приложения после изменения параметров сеанса.</p>

<p class="MsoNormalCxSpLast">Изменение
из встроенного языка значения параметра сеанса, на который ссылается хотя бы
один разделитель, приводит к следующим действиям:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
очищается кеш объектов;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
удаляются повторно используемые значения
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref293398982">здесь</a>) и на стороне клиента, и на стороне сервера.</p>

<p class="MsoNormal"><a name="_ref282618794">Значение разделителя можно указать в командной строке
запуска «1С:Предприятия 8» с помощью параметра </a><span class="Interface">Z</span> или в строке соединения с помощью параметра <span class="Interface">Zn</span> (см. <a href="#_ref280872160">здесь</a>).</p>

<a name="_ref330978228"></a><a name="_ref330978227"></a><a name="_ref330911552"></a><a id="TI000000881" class="bookmark" name="issogl2_24.2.3_разделение_пользователей"><h3>24.2.3. Разделение пользователей</h3></a>

<p class="MsoNormal">Свойство
<span class="Interface">Разделение пользователей</span> определяет, какая часть списка
пользователей будет доступна в зависимости от того, используется данный
разделитель или нет. Если свойство установлено в значение <span class="Interface">Не использовать</span>,
то используется единый список пользователей для любых значений разделителя.
Разделение пользователей используется при программном доступе к списку
пользователей, а также в конфигураторе при редактировании списка пользователей.</p>

<p class="Regularbeforetable">Для
определения того, доступен пользователь в сеансе или нет, можно использовать
следующую таблицу (по отношению к одному разделителю):</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"> </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Разделитель
  в сеансе<br>
  используется</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Разделитель
  в сеансе<br>
  не используется</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Значение
  для пользователя<br>
  установлено</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Доступен
  при равенстве значений разделителя</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Доступен</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Значение
  для пользователя<br>
  не установлено</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Недоступен</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Доступен</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast"><a name="_ref283800394"></a>При
редактировании пользователя имеется возможность указания значений для всех
разделителей, заданных в конфигурации, а не только тех, для которых свойство <span class="Interface">Разделение пользователей</span> установлено в значение <span class="Interface">Разделять</span>. Значения разделителей, указанные в свойствах
пользователя информационной базы, будут использоваться для установки значений
разделителей при начале сеанса этого пользователя. Значения разделителей в
командной строке или строке соединения имеют более высокий приоритет, чем
значения, указанные в свойствах пользователя, если пользователь имеет права на
изменение соответствующих параметров сеанса.</p>

<a id="TI000000882" class="bookmark" name="issogl2_24.2.4_разделение_аутентификации"><h3>24.2.4. Разделение аутентификации</h3></a>

<p class="MsoNormal">Свойство
<span class="Interface">Разделение аутентификации</span> служит для управления возможностью
создания одноименных пользователей для разных областей данных. Если свойство
установлено в значение <span class="Interface">Не использовать</span>,
то уникальность имен пользователей отслеживается для всех областей данных. Если
свойство установлено в значение <span class="Interface">Разделять</span>, то
существует возможность создавать одноименных пользователей в разных областях
данных. Например, можно создать несколько пользователей <span class="Interface">Администратор</span>,
которые будут различаться только значениями разделителей (в том числе и для
незаданного значения разделителя).</p>

<p class="Regularbeforetable">Если
существует разделитель <span class="Term">Абонент</span> (типа <span class="Term">Число</span>) и для него значение свойства <span class="Interface">Разделение
аутентификации</span> установлено в значение <span class="Term">Разделять</span>, то имеется возможность создать
следующий список пользователей:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Имя
  пользователя</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Значение
  разделителя Абонент</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1634</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">2245</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1245</p>
  </td>
  
 </tr>
</table>

<p class="Regularbeforetable">Если
значение свойства <span class="Interface">Разделение аутентификации</span> для этого
разделителя установлено в значение <span class="Interface">Не использовать</span>,
то такой список создать нельзя. Имена пользователей должны быть уникальны, например:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Имя
  пользователя</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Значение
  разделителя Абонент</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">АдминистраторИБ</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор1634</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1634</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор2245</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">2245</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Администратор1245</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1245</p>
  </td>
  
 </tr>
</table>

<a name="_ref470180363"></a><a id="TI000001891" class="bookmark" name="issogl2_24.2.5_разделение_расширений_конфигурации"><h3>24.2.5. Разделение расширений конфигурации</h3></a>

<p class="MsoNormalCxSpFirst">Свойство
<span class="Interface">Разделение расширений конфигурации</span> предназначено для управления
возможностью разделения расширений между различными областями данных.</p>

<p class="MsoNormalCxSpMiddle">Если
свойство установлено в значение <span class="Interface">Разделять</span>, то
это означает, что пользователю будут доступны для использования только те
расширения, которые были подключены с тем же значением разделителя, что и у
самого пользователя. Если свойство установлено в значение <span class="Interface">Не использовать</span>,
то значения такого разделителя не будут учитываться при подключени расширений и
при определении доступности расширений для текущего пользователя.</p>

<p class="MsoNormalCxSpLast">При
изменении значения данного свойства у разделителя, следует помнить о следующих
особенностях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При смене значения свойства с <span class="Interface">Разделять</span> на <span class="Interface">Не использовать</span>,
данный разделитель перестает учитываться при определении доступности уже
загруженных расширений.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При смене значения свойства с <span class="Interface">Не использовать</span>
на <span class="Interface">Разделять</span>, все существующие расширения становятся
доступными в области данных, которая соответствует особому значению
разделителя, описывающему отключенный разделитель.</p>

<p class="MsoNormalCxSpFirst">Рекомендуется
отключать разделение расширений для разделителя, который находится в режиме <span class="Interface">Независимо и совместно</span>.</p>

<p class="MsoNormalCxSpLast">Смотри
также:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<A href="/db/content/v8310doc/src/руководство разработчика/глава 32. расширение конфигурации.htm?_=1496848987#_ref405464478">Расширение
конфигурации</a>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<a href="#_ref470185385">Значение
разделителя и признак использования</a>.</p>

<a name="_ref280872160"></a><a name="_ref283204062"></a><a id="TI000000883" class="bookmark" name="issogl2_24.2.6_условное_разделение"><h3>24.2.6. Условное разделение</h3></a>

<a name="_ref283906900"></a><a id="TI000000884" class="bookmark" name="issogl3_24.2.6.1_общее_описание"><h4>24.2.6.1. Общее описание</h4></a>

<p class="MsoNormalCxSpFirst">Условное
разделение необходимо в тех случаях, когда прикладное решение предполагается
использовать как в разделенном, так и в неразделенном вариантах. Например,
прикладное решение может использоваться для автономной работы – в этом
случае разделители не используются, но в самом решении они предусмотрены, а
может использоваться для работы некоторого количества абонентов, никак не
связанных друг с другом (с независимым набором данных в информационной базе). Такое
поведение можно реализовать с помощью условного разделения: в случае
автономного использования разделение будет выключено, а в разделенном
режиме – включено.</p>

<p class="MsoNormalCxSpLast">Условное
разделение устроено следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
для разделителя (или объекта, входящего в состав
разделителя) возможно задание объекта, который хранит состояние разделения по
данному разделителю;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
изменяя значение этого объекта, можно включать
или выключать разделение по данному разделителю для всех (если условное разделение
установлено для самого разделителя) или выбранных объектов (если условное
разделение задано для объекта, входящего в состав разделителя);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
если разделитель условно выключен, то в качестве
значения разделителя будет использовать значение по умолчанию для типа
разделителя.</p>

<p class="Note"><span class="Note">Примечание.</span> Для каждого разделителя значение условного
разделения не может прямо или косвенно зависеть от значения самого разделителя.</p>

<p class="MsoNormalCxSpFirst">Возможно
рекурсивное управление условным разделением, когда для разделителя,
используемого для определения условного разделения другого разделителя,
настроено условное разделение и т. д. В этом случае определение
состояния условного разделения будет начинаться с такого разделителя, значение
которого условно не разделяется (но оказывает влияние на другие объекты,
участвующие в условном разделении) и далее по связанным разделителям до тех
пор, пока не будет определено состояние условного разделения для разделителя,
от состояния которого не зависит более ни один разделитель. Создать зацикленное
условное разделение невозможно.</p>

<p class="MsoNormalCxSpLast">Условное
разделение может включать или отключать разделение следующими способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для всех объектов, входящих в состав
разделителя. В этом случае следует использовать свойство разделителя <span class="Interface">Условное разделение</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для отдельных объектов, входящих в состав
разделителя. Для этого следует воспользоваться колонкой <span class="Interface">Условное разделение</span>
в окне редактирования состава разделителя.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Комбинацией описанных выше свойств.</p>

<p class="MsoNormal">При
организации условного разделения следует принимать во внимание следующие
особенности:</p>

<p class="MsoListBullet">&#9679; 
В качестве объекта, хранящего значение условного
разделения, может выступать:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Константа типа <span class="Term">Булево</span>, не входящая в состав разделителя, для
которого настраивается условное разделение.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Реквизит типа <span class="Term">Булево</span> у ссылочного объекта конфигурации,
который:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Не входит в состав разделителя, для которого
настраивается условное разделение.</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Должен выступать в качестве типа другого
разделителя, и разделитель такого типа должен быть единственным.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При запуске системы выполняется начальная
установка значений параметров сеанса, хранящих признак использования и значений
разделителей, в соответствии с параметрами командной строки запуска или
значениями, указанными для пользователя информационной базы. Подробнее об
установке значений разделителей при запуске см. <a href="#_ref283800467">здесь</a>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если разделение общего реквизита условно
выключено, то:</p>

<p class="MsoListBullet2">&#9679; 
При чтении и записи данных текущие значения
параметров сеанса, отвечающих за значение и использование разделителя,
игнорируются. При этом используются следующие значения:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Признак использования – <span class="Term">Истина</span> (разделитель используется).</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Значение разделителя – значение по
умолчанию для типа разделителя.</p>

<p class="MsoListBullet2">&#9679; 
При чтении и записи пользователей информационной
базы текущие значения параметров сеанса, отвечающих за значение и использование
разделителя, игнорируются. При этом используются следующие значения:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Признак использования – <span class="Term">Ложь</span> (разделитель не используется).</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Значение разделителя – не используется.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если значение, определяющее условное разделение,
не прочитано или неоднозначно, будет выдано исключение.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если разделитель, который используется в
условном разделении другого разделителя, не используется, то другой разделитель
также считается неиспользуемым.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если в сеансе выключены все разделители (с
помощью условного разделения), то становятся доступными действия с информационной
базой, которые недоступны, если используется хотя бы один разделитель.</p>

<p class="MsoNormal">Если
настроено условное разделение <span class="Bold">и</span> в свойстве общего
реквизита (свойство общего реквизита <span class="Interface">Условное разделение</span>),
<span class="Bold">и</span> с помощью колонки <span class="Interface">Условное разделение</span>
состава общего реквизита, то в качестве значения разделителя будет использовано
одно из следующих значений:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Текущее значение разделителя (установленное в
соответствующий параметр сеанса) в том случае, если разделение условно включено
<span class="Bold">и</span> объектом (реквизит или константа), указанным в соответствующей
колонке состава общего реквизита, <span class="Bold">и</span> объектом (реквизит
или константа), указанным в свойстве самого разделителя.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Значение по умолчанию для типа разделителя, если
условное разделение выключено любым способом.</p>

<p class="MsoNormal"><a name="_ref281488180">Примечание. Условное
разделение не работает в конфигураторе. Считается, что в сеансе конфигуратора
реквизиты всегда условно включены.</a></p>

<a id="TI000000885" class="bookmark" name="issogl3_24.2.6.2_условное_разделение_задаваемое_в_свойствах_общего_реквизита"><h4>24.2.6.2. Условное разделение, задаваемое в свойствах общего реквизита</h4></a>

<a name="_ref289954843"></a><a id="TI000000886" class="bookmark" name="issogl4_24.2.6.2.1_с_помощью_константы"><h5>24.2.6.2.1. С помощью константы</h5></a>

<p class="Regularbeforepicture">Разделитель
можно полностью отключать с помощью константы. Константа должна иметь тип <span class="Term">Булево</span> и не должна разделяться самим реквизитом.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00476.gif?_=1496848987" WIDTH="800" ALT HEIGHT="612"></p>

<p class="MsoCaption">Рис.
468. Условное разделение с помощью константы</p>

<p class="Note"><span class="Note">Внимание!</span> При первом запуске «1С:Предприятия» (после
добавления условного разделения) значение константы будет равно <span class="Term">Ложь,</span> и разделение будет <span class="Bold">выключено</span>.</p>

<p class="MsoNormal">Рассмотрим
этот случай подробнее.</p>

<p class="Regularbeforetable">Имеется
общий реквизит <span class="Term">Абонент</span> с типом <span class="Term">Число</span>. В состав этого реквизита входит
справочник <span class="Term">Товары</span> со следующим содержимым:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Код</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Абонент</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Босоножки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">0</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">2</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ботинки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">3</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Валенки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">2</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">4</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Кроссовки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">5</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Сланцы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">0</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Для
общего реквизита используется условное разделение, управляемое константой <span class="Term">РазделениеПоАбонентам</span>. Если значение константы
равно <span class="Term">Ложь</span>,
то это означает, что разделитель не работает (разделение <span class="Bold">выключено</span>).
Если значение константы равно <span class="Term">Истина</span>, то это означает, что разделитель
работает (разделение <span class="Bold">включено</span>).</p>

<p class="MsoNormalCxSpLast">Таким
образом, можно выделить следующие ситуации:</p>

<p class="MsoListBullet">&#9679; 
Значение разделителя <span class="Term">Абонент</span> равно <span class="Term">1</span>, разделитель используется, значение
константы <span class="Term">РазделениеПоАбонентам</span> равно <span class="Term">Истина</span>. В данном сеансе <span class="Bold">разделение</span>
условно <span class="Bold">включено</span> (для разделителя <span class="Term">Абонент</span>). В этой ситуации в справочнике
доступны следующие элементы:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Код</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Абонент</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">2</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ботинки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">4</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Кроссовки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
 </tr>
</table>

<p class="MsoListBullet">&#9679; 
Значение константы <span class="Term">РазделениеПоАбонентам</span> равно <span class="Term">Ложь</span>. В данном сеансе <span class="Bold">разделение</span>
условно <span class="Bold">выключено</span> (для разделителя <span class="Term">Абонент</span>). В этой ситуации, независимо от значения
параметров сеанса <span class="Term">АбонентИспользование</span> и <span class="Term">АбонентЗначение</span>, в справочнике доступны
следующие элементы:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Код</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Абонент</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Босоножки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">0</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">5</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Сланцы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">0</p>
  </td>
  
 </tr>
</table>

<a name="_ref289954837"></a><a id="TI000000887" class="bookmark" name="issogl4_24.2.6.2.2_с_помощью_реквизита_объекта"><h5>24.2.6.2.2. С помощью реквизита объекта</h5></a>

<p class="MsoNormalCxSpFirst">Более
сложный вариант управления условным разделением используется в том случае, если
для условного разделения одного разделителя используются данные другого
разделителя. Тогда в рамках разных областей данных возможно разное поведение
разделителя, описывающего другую область данных.</p>

<p class="MsoNormalCxSpLast">Допустим,
существует набор объектов конфигурации, описывающих нормативно-справочную
информацию (далее НСИ): справочники <span class="Interface">Банки</span>, <span class="Interface">Валюты</span>, <span class="Interface">Ставки НДС</span>.
Необходимо реализовать следующую возможность:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
в информационной базе можно вести учет для
разных групп компаний;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
каждая группа компаний состоит из организаций;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
содержимое объектов НСИ может быть как общим для
всех организаций группы компаний, так и индивидуальным для каждой организации.</p>

<p class="MsoNormal">Реализация
такой схемы потребует следующие объекты конфигурации:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
справочник <span class="Term">ГруппыКомпаний</span> с реквизитом <span class="Term">ЕдинаяНСИ</span> типа <span class="Term">Булево</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">Организации</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">Банки</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">Валюты</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">СтавкиНДС</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
разделитель <span class="Term">ГруппаКомпаний</span> типа <span class="Term">СправочникСсылка.ГруппыКомпаний</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
разделитель <span class="Term">Организация</span> типа <span class="Term">СправочникСсылка.Организации</span>. В состав этого разделителя
входят только объекты, описывающие НСИ:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
справочник <span class="Term">Банки</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
справочник <span class="Term">Валюты</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
справочник <span class="Term">СтавкиНДС</span>.</p>

<p class="Regularbeforepicture">В
состав разделителя <span class="Term">ГруппаКомпаний</span> входят все рассматриваемые
справочники (кроме справочника <span class="Term">ГруппыКомпаний</span>), т. к. для каждой
группы компаний нам нужен свой список организаций и содержимое НСИ.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00477.gif?_=1496848987" WIDTH="778" ALT HEIGHT="409"></p>

<p class="MsoCaption">Рис.
469. Состав разделителя «ГруппаКомпаний»</p>

<p class="MsoNormal">В
состав разделителя <span class="Term">Организация</span> входят только справочники <span class="Term">Банки</span>, <span class="Term">Валюты</span> и <span class="Term">СтавкиНДС</span>. Именно эти справочники являются НСИ,
и именно для них нужно два варианта использования:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
для каждой организации выбранной группы компаний,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
для всех организаций выбранной группы компаний.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00478.gif?_=1496848987" WIDTH="739" ALT HEIGHT="426"></p>

<p class="MsoCaption">Рис.
470. Состав разделителя «Организация»</p>

<p class="MsoNormalCxSpFirst">Справочник
<span class="Term">ГруппыКомпаний</span>
не входит в состав разделителя <span class="Term">Организация</span>, так как этого требуют правила
организации условного разделения (см. <a href="#_ref283906900">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Теперь
для каждого значения разделителя <span class="Term">ГруппаКомпаний</span> (элемент справочника <span class="Term">ГруппыКомпаний</span>) можно указать значение реквизита
<span class="Term">ЕдинаяНСИ</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Реквизит установлен в значение <span class="Term">Ложь</span> – условное разделение <span class="Bold">выключено,</span> и для любого значения разделителя <span class="Term">Организация</span> (в рамках одного значения
разделителя <span class="Term">ГруппаКомпаний</span>) будет <span class="Bold">единый</span>
набор значений справочников <span class="Term">Банки</span>, <span class="Term">Валюты</span> и <span class="Term">СтавкиНДС</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Реквизит установлен в значение <span class="Term">Истина</span> – условное разделение <span class="Bold">включено,</span> и для любого значения разделителя <span class="Term">Организация</span> (в рамках одного значения
разделителя <span class="Term">ГруппаКомпаний</span>) будет <span class="Bold">свой</span>
набор значений справочников <span class="Term">Банки</span>, <span class="Term">Валюты</span> и <span class="Term">СтавкиНДС</span>.</p>

<p class="MsoNormal">Фактически,
изменяя значение свойства <span class="Term">ЕдинаяНСИ</span>, происходит включение или выключение
разделения по разделителю <span class="Term">Организация</span>.</p>

<p class="Regularbeforetable">Пусть
в справочнике <span class="Term">ГруппыКомпаний</span> существуют следующие записи:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>ЕдинаяНСИ</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Ссылка</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Прогресс</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">Ложь</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Торговый дом</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">Истина</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК2</span></p>
  </td>
  
 </tr>
</table>

<p class="Regularbeforetable">В
справочнике <span class="Term">Организации</span> существуют следующие записи (по
две для каждого значения разделителя <span class="Term">ГруппаКомпаний</span>):</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>ГруппаКомпаний</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Ссылка</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">База комплектующих</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР1</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Мир кондиционеров</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР2</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">СтройТоргВсе</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК2</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР3</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Лайт</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК2</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР4</span></p>
  </td>
  
 </tr>
</table>

<p class="Regularbeforetable">В
справочнике <span class="Term">Банки</span> будет следующая информация:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>ГруппаКомпаний</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Организация</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">АльфаБанк</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Пустая ссылка</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">СберБанк</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР1</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">ВТБ</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК1</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР2</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Авангард</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК2</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР1</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Уралсиб</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ГК2</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">ОР2</span></p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast">Теперь
рассмотрим на примере, какие данные будут доступны в каком случае.</p>

<p class="Lang-subheader">Пример
1:</p>

<p class="MsoNormalCxSpFirst">Реквизит
<span class="Term">ЕдинаяНСИ</span>
для элемента <span class="Interface">Прогресс</span>
установлен в значение <span class="Term">Ложь</span>.</p>

<p class="MsoNormalCxSpLast">Это
значит, что разделение для справочника <span class="Term">Банки</span> <span class="Bold">выключено</span>. Значит,
содержимое этого справочника не зависит от значения разделителя <span class="Term">Организация</span> и в элемент справочника <span class="Term">Банки</span> (для разделителя <span class="Term">Организация</span>) в этом случае будет записываться
значение, равное значению по умолчанию для типа разделителя. В нашем случае
таким значением является пустая ссылка (так как тип разделителя <span class="Term">Организация</span> – ссылка на справочник).
Поэтому если разделитель <span class="Term">ГруппаКомпаний</span> установлен в значение <span class="Term">ГК1</span>, то список справочника <span class="Term">Банки</span> будет показывать только одну запись: <span class="Interface">АльфаБанк</span>.</p>

<p class="Lang-subheader">Пример
2:</p>

<p class="MsoNormalCxSpFirst">Реквизит
<span class="Term">ЕдинаяНСИ</span>
для элемента <span class="Interface">Прогресс</span> установлен
в значение <span class="Term">Истина</span>.</p>

<p class="MsoNormalCxSpMiddle">Это
значит, что разделение для справочника <span class="Term">Банки</span> <span class="Bold">включено</span>. Значит,
содержимое этого справочника зависит <span class="Bold">и</span> от значения
разделителя <span class="Term">ГруппаКомпаний,</span> <span class="Bold">и</span> от
значения разделителя <span class="Term">Организация</span>.</p>

<p class="MsoNormalCxSpMiddle">Поэтому
для группы компаний <span class="Interface">Прогресс</span> и
организации <span class="Interface">Мир кондиционеров</span>
в списке банков будет только банк <span class="Interface">ВТБ</span>.</p>

<p class="MsoNormalCxSpLast">Меняя
значение реквизита <span class="Term">ЕдинаяНСИ</span> (и значения разделителей) во время
работы системы, можно получить тот или иной состав списка справочника <span class="Term">Банки</span> (в соответствии с правилами условного
разделения).</p>

<a name="_ref289954751"></a><a id="TI000000888" class="bookmark" name="issogl3_24.2.6.3_условное_разделение_задаваемое_для_объекта_в_свойстве_состав"><h4>24.2.6.3. Условное разделение, задаваемое для объекта (в свойстве «Состав»)</h4></a>

<p class="MsoNormalCxSpFirst">Условное
разделение можно задавать для каждого объекта конфигурации, входящего в состав
разделителя. В этом случае будет отключаться разделение не для всех объектов, входящих
в состав разделителя, а только для тех объектов, для которых настроено условное
разделение.</p>

<p class="MsoNormalCxSpMiddle">Условное
разделение может управляться как константой, так и реквизитом объекта
конфигурации (см. <a href="#_ref283906900">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Рассмотрим
пример такого разделения.</p>

<p class="MsoNormalCxSpMiddle">Допустим,
в одной информационной базе могут вести учет несколько абонентов, причем в
рамках каждого абонента можно вести учет от лица нескольких дружественных
организаций. При этом возможна ситуация, когда все дружественные организации оперируют
единым списком складов, и возможна ситуация, когда для каждой организации можно
сформировать свой список складов.</p>

<p class="MsoNormalCxSpLast">Реализация
такой схемы потребует следующие объекты конфигурации:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
справочник <span class="Term">Абоненты</span> с реквизитом <span class="Term">РаздельныйСписокСкладов</span> типа <span class="Term">Булево</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">Организации</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
справочник <span class="Term">Склады</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
разделитель <span class="Term">Абонент</span> типа <span class="Term">СправочникСсылка.Абоненты</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
разделитель <span class="Term">Организация</span> типа <span class="Term">СправочникСсылка.Организации</span>.</p>

<p class="MsoNormal">Для
организации рассмотренной схемы нам требуется выполнить следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
из состава разделителя <span class="Term">Организация</span> нужно исключить справочник <span class="Term">Организации</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
для справочника <span class="Term">Склады</span> (в составе разделителя <span class="Term">Организация</span>) нужно задать условное разделение
через реквизит <span class="Term">РаздельныйСписокСкладов</span> справочника <span class="Term">Абоненты</span>.</p>

<p class="Regularbeforetable">Пусть
в справочнике <span class="Term">Абоненты</span> есть две записи:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Наименование</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>РаздельныйСписокСкладов</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Абонент 3453</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">Истина</span></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Абонент 4617</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Term">Ложь</span></p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Если
пользователь входит от имени абонента № 3453, то для каждой организации будет
возможно вести индивидуальный список складов, т. к. реквизит <span class="Term">РаздельныйСписокСкладов</span> установлен в значение <span class="Term">Истина</span> (включено разделение справочника <span class="Term">Склады</span> в разделителе <span class="Term">Организация</span>).</p>

<p class="MsoNormalCxSpLast">В
то же время при входе в систему от имени абонента № 4617 список складов будет
един для всех организаций, реквизит <span class="Term">РаздельныйСписокСкладов</span> установлен в значение <span class="Term">Ложь</span> (выключено разделение справочника <span class="Term">Склады</span> в разделителе <span class="Term">Организация</span>).</p>

<a id="TI000000889" class="bookmark" name="issogl3_24.2.6.4_особенности_условного_разделения_в_распределенной_системе"><h4>24.2.6.4. Особенности условного разделения в распределенной системе</h4></a>

<p class="MsoNormalCxSpFirst">Использование
условного разделения в распределенной системе имеет некоторые особенности. Эти
особенности можно разделить на «логические» и «технические».</p>

<p class="MsoNormalCxSpMiddle">К
«техническим» особенностям следует отнести невозможность произвольно изменять
состояние объекта, управляющего условным разделением, в разделенном сеансе,
если этот объект входит в состав разделенного плана обмена. Это связано с
особенностями автоматической регистрации изменений объектов разделенными
планами обмена (см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref287015827">здесь</a>). При автоматической регистрации изменений изменять
объект, управляющий условным разделением, можно или в неразделенном сеансе, или
в том случае, когда текущее состояние объекта равно <span class="Term">Ложь</span>. То есть можно только включить условное
разделение, и нельзя его выключить (в автоматическом режиме).</p>

<p class="MsoNormalCxSpMiddle">«Логическая»
особенность заключается в том, что изменение состояния условного разделения в
главном узле распределенной информационной базы оказывает существенное влияние
на состояние и поведение всей распределенной информационной системы. Такое
изменение может затрагивать одну область данных, если условное разделение
управляется реквизитом объекта, служащего типом другого разделителя (описание
примера см. <a href="#_ref289954837">здесь</a>). Также изменение состояния условного разделения
может затрагивать всю информационную базу в том случае, если условное
разделение служит для переключения между двумя режимами работы прикладного
решения (описание примера см. <a href="#_ref289954843">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Так,
в первом случае (пример с НСИ) при изменении условного разделения в
периферийной базе у пользователей «пропадет» нормативно-справочная информация.
Поэтому доступ к изменению реквизита, управляющего условным разделением,
следует предоставлять только администратору области данных или человеку, обладающему
достаточными полномочиями для принятия такого рода изменения.</p>

<p class="MsoNormalCxSpLast">Второй
пример (изменение режима работы прикладного решения) будет оказывать влияние в
целом на всю информационную базу. В периферийных базах пользователи могут
«потерять» все свои данные (из-за смены значения разделителя) и т. д.
Очевидно, что выполнять столь критическое изменение может только администратор
всей информационной базы (или лицо, уполномоченное для таких действий), в то
время как другие пользователи могут не иметь даже возможности чтения данного
реквизита (или константы).</p>

<a id="TI000000890" class="bookmark" name="issogl1_24.3_определение_возможности_выполнения_действия_или_набора_данных"><h2>24.3. Определение возможности выполнения действия или набора данных</h2></a>

<p class="MsoNormal">В том случае, когда в системе используется
несколько разделителей, для определения доступности некоторого действия с тем
или иным объектом, следует применять следующее правило:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для каждого разделителя, который разделяет
требуемый объект, определяется возможность выполнения необходимого действия
так, как будто разделитель в системе один (при этом, естественно, учитывается
режим разделения – независимый или независимый и совместный).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Результат по всем разделителям складывается «по
И».</p>

<p class="MsoNormalCxSpFirst">В дальнейших разделах будет рассматриваться выполнение
того или иного действия с объектом для одного разделителя (если не будет явно
описано обратное). Затем будет необходимо применить данное правило для
получения итогового действия, если объект входит в состав нескольких
разделителей.</p>

<p class="MsoNormalCxSpLast">Например, в системе есть два независимых
разделителя: <span class="Term">Абонент</span> и <span class="Term">Организация</span>.
Существуют два справочника: <span class="Term">Номенклатура</span>
и <span class="Term">Контрагенты</span>. Каждый справочник разделен обоими
разделителями.</p>

<p class="Lang-subheader">Пример 1:</p>

<p class="MsoNormalCxSpFirst">Необходимо определить возможность получения
списка номенклатуры в случае, если разделитель <span class="Term">Абонент</span>
используется, а разделитель <span class="Term">Организация</span> –
нет.</p>

<p class="MsoNormalCxSpLast">Так как оба разделителя независимые, то для
получения списка справочника необходимо, чтобы разделитель использовался. Следовательно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для разделителя <span class="Term">Абонент</span>
список номенклатуры получить можно, т. к. разделитель используется.
Результат равен значению <span class="Term">Истина</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для разделителя <span class="Term">Организация</span>
список номенклатуры получить нельзя, т. к. разделитель не
используется. Результат равен значению <span class="Term">Ложь</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Таким образом, в сеансе с такими установками
разделителей, просмотр списка справочника будет (<span class="Term">Истина</span>
<span class="Bold">И</span> <span class="Term">Ложь</span>
= <span class="Term">Ложь</span>) <span class="Bold">невозможен</span>.</p>

<p class="Lang-subheader">Пример 2:</p>

<p class="MsoNormalCxSpFirst">Необходимо определить возможность получения
списка контрагентов, если используются оба разделителя.</p>

<p class="MsoNormalCxSpLast">Так как оба разделителя независимые, то для
получения списка справочника необходимо, чтобы разделитель использовался.
Следовательно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для разделителя <span class="Term">Абонент</span>
список контрагентов получить можно, т. к. разделитель используется.
Результат равен значению <span class="Term">Истина</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для разделителя <span class="Term">Организация</span>
список контрагентов получить можно, т. к. разделитель используется.
Результат равен значению <span class="Term">Истина</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Таким образом, в сеансе с такими установками
разделителей просмотр списка справочника будет (<span class="Term">Истина</span>
<span class="Bold">И</span> <span class="Term">Истина</span>
= <span class="Term">Истина</span>)<span class="Bold"> возможен</span>.</p>

<p class="Lang-subheader">Пример 3:</p>

<p class="MsoNormal">Необходимо определить, какие значения для
колонки <span class="Term">Пользователь</span>
вернет метод <span class="Term">ПолучитьЗначенияОтбораЖурналаРегистрации()</span>.
В системе создано два разделителя, при этом в текущем сеансе используется первый
разделитель и не используется второй. Следовательно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
для первого разделителя метод вернет только тех
пользователей, которые зарегистрированы в журнале регистрации для значений
разделителя, равному значению в текущем сеансе;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
для второго разделителя метод вернет всех
пользователей (подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref291611191">здесь</a>);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
таким образом, в сеансе с указанным состоянием
разделителей метод вернет только тех пользователей, которые будут пересечением
списков для первого и второго разделителей (операция <span class="Bold">И</span>).</p>

<a name="_ref283800467"></a><a id="TI000000891" class="bookmark" name="issogl1_24.4_установка_значений_разделителей_при_запуске"><h2>24.4. Установка значений разделителей при запуске</h2></a>

<p class="MsoNormalCxSpFirst">При
запуске «1С:Предприятия» может возникнуть необходимость указать значение
разделителя непосредственно в командной строке запуска (например, для
проведения аутентификации, если выбрано разделение аутентификации).</p>

<p class="MsoNormalCxSpMiddle">Если
в командной строке не указано одно или несколько значений разделителей, то
недостающие разделители берутся из разделителей, указанных для текущего
пользователя. Если один и тот же разделитель указан и у пользователя, и в
командной строке и их значения не совпадают, то использование и значение
разделителя будут установлены из командной строки, если пользователь информационной
базы имеет право на установку параметров сеанса, хранящих использование и
значение разделителя. Иначе аутентификация пользователя выполнена не будет.</p>

<p class="MsoNormalCxSpMiddle">При
отладке клиента, запущенного из конфигуратора, можно задать разделители в
диалоге настройки запуска в конфигураторе (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref292461330">здесь</a>). При указании пользователя, от имени которого нужно
выполнить запуск, доступен выбор пользователей. Список ограничивается установленными
значениями разделителей, разделяющих аутентификацию.</p>

<p class="MsoNormalCxSpMiddle">В
процессе аутентификации пользователя информационной базы значения параметров
сеанса, на которые ссылаются свойства <span class="Interface">Использование
разделителя</span> и <span class="Interface">Значение разделителя</span> объекта
метаданных <span class="Interface">Общий реквизит</span>, устанавливаются в значения, указанные
для пользователя. К моменту исполнения любого кода на встроенном языке (в том
числе и в модуле сеанса) значения этих параметров сеанса будут установлены, и
при обращении к ним не будет вызываться обработчик события <span class="Term">УстановкаПараметровСеанса</span>.</p>

<p class="MsoNormalCxSpMiddle">Следует
помнить, что определение значения разделителя по его переданному идентификатору
выполняется без учета использования других разделителей. То есть определение
значения разделителя не зависит от порядка установки значений (и признака
использования) других разделителей. Если система не может однозначно определить
значение разделителя по его идентификатору (например, существуют два элемента
справочника с одинаковым кодом), то будет вызвано исключение.</p>

<p class="MsoNormalCxSpLast">Если
использование и значение разделителя (см. далее), указанные в строке запуска, отличаются
от значений, указанных для пользователя, то:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
если пользователь имеет права на изменение
параметров сеанса, хранящих значение и признак использования разделителя, то выполняется
установка этих значений из командной строки запуска;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
если такие права отсутствуют, аутентификация
завершается с ошибкой.</p>

<a name="_ref283800118"></a><a id="TI000000892" class="bookmark" name="issogl2_24.4.1_командная_строка_клиентского_приложения"><h3>24.4.1. Командная строка клиентского приложения</h3></a>

<p class="MsoNormal">Для
указания значений разделителей используется параметр командной строки <span class="Interface">Z</span>.</p>

<p class="Lang-subheader">Синтаксис
параметра:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">/Z &quot;[&lt;Признак&gt;][&lt;Значение&gt;][,[&lt;Признак&gt;][&lt;Значение&gt;]]&quot;</pre>

<p class="Lang-subheader">Описание:</p>

<p class="MsoNormal">Каждая
пара <span class="Term">&lt;Признак&gt;&lt;Значение&gt;</span>
отвечает за установку одного разделителя. Пропуск разделителей невозможен.
Порядок следования пар <span class="Term">&lt;Признак&gt;&lt;Значение&gt;</span> соответствует
порядку расположения разделителей в окне конфигурации. Если порядок общих
реквизитов меняется (например, выполнена сортировка списка общих реквизитов),
необходимо изменить расположение значений в параметре <span class="Interface">Z</span>. Пары <span class="Term">&lt;Признак&gt;&lt;Значение&gt;</span> разделяются
запятыми (&quot;<span class="Interface">,</span>&quot;).</p>

<p class="Lang-subheader">Параметры:</p>

<p class="Lang-parameter">&lt;Признак&gt;</p>

<p class="MsoNormalCxSpFirst">Признак
использования данного разделителя. Может принимать значения «<span class="Interface">+</span>» (значение по
умолчанию) и «<span class="Interface">-</span>». Если перед значением разделителя
указан признак «<span class="Interface">+</span>» (или не указано ничего), то
указанное значение будет записано в параметр сеанса, хранящий значение общего
реквизита, и в параметр сеанса, хранящий использование общего реквизита, будет
установлено значение <span class="Term">Истина</span>.</p>

<p class="MsoNormalCxSpLast">Если
перед значением разделителя указан признак «<span class="Interface">-</span>», то это
означает, что разделитель не используется в данном сеансе (в параметр сеанса,
отвечающий за использование разделителя, будет установлено значение <span class="Term">Ложь</span>). Но если значение указано, оно будет
записано в параметр сеанса, хранящий значение общего реквизита.</p>

<p class="Lang-parameter">&lt;Значение&gt;</p>

<p class="MsoNormal">Указывает
значение, которое будет установлено в параметр сеанса, хранящий значение
соответствующего разделителя. Значение разделителя задается в текстовом виде и
имеет следующий формат (в зависимости от типа разделителя):</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для типа <span class="Term">Булево</span> указываются значения <span class="Interface">0</span> (<span class="Term">Ложь</span>) или <span class="Interface">1</span> (<span class="Term">Истина</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для типа <span class="Term">Число</span> указывается число в каноническом виде.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для типа <span class="Term">Дата</span> указывается дата в формате <span class="Interface">ггггммддччиисс</span>,
где:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">гггг</span> – год (4
цифры);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">мм</span> – номер
месяца (2 цифры);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">дд</span> – номер дня
(2 цифры);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">чч</span> – номер
часа (2 цифры);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">ии</span> – номер
минуты (2 цифры);</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">сс</span> – секунды
(2 цифры).</p>

<p class="Indentlist">При
задании параметра необходимо указывать все составляющие даты, т. е.
параметр состоит из 14 цифр.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для типа <span class="Term">Строка</span> указывается собственно текст.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для ссылочных типов указывается текстовое
представление стандартного реквизита <span class="Term">Код</span> или <span class="Term">Номер</span>. Коды и номера должны быть уникальны
среди всех значений соответствующего объекта конфигурации. Не допускается
использование справочников с длиной кода, равной 0, и документов с
нумераторами.</p>

<p class="MsoNormalCxSpFirst">Если
в начале значения параметра должен быть символ «<span class="Interface">+</span>» или «<span class="Interface">-</span>», он
удваивается. Если в текстовой строке, описывающей значение разделителя, должен
быть символ «<span class="Interface">,</span>», то этот символ удваивается.</p>

<p class="MsoNormalCxSpMiddle">Если
значение, указанное в параметре командной строки, может соответствовать
одновременно значениям разных типов (например, значение «<span class="Interface">1</span>» может
являться значением <span class="Term">Истина</span>,
числом «<span class="Interface">1</span>», кодом справочника «<span class="Interface">1</span>» и номером
документа «<span class="Interface">1</span>»), правило конвертации определяется исходя из типа
соответствующего разделителя.</p>

<p class="MsoNormalCxSpLast">Если
в командной строке указан только признак («<span class="Interface">+</span>» или «<span class="Interface">-</span>»), но не
указано значение, то в качестве значения разделителя используется значение по
умолчанию соответствующего типа.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">/Z &quot;-0,+001,+,---3&quot;</pre>

<p class="MsoNormal">В
данном примере:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
первый разделитель не используется, но указано
его значение: «<span class="Interface">0</span>»;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
второй разделитель используется, и его значение
равно «<span class="Interface">001</span>»;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
третий разделитель используется, и его значением
будет значение по умолчанию для типа, указанного в качестве типа общего реквизита;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
четвертый разделитель не используется, но его
значением будет «<span class="Interface">-3</span>».</p>

<a name="_ref283221546"></a><a id="TI000000893" class="bookmark" name="issogl2_24.4.2_веб-клиент_или_тонкий_клиент_подключенный_через_веб-сервер"><h3>24.4.2. Веб-клиент или тонкий клиент, подключенный через веб-сервер</h3></a>

<p class="MsoNormal">Указание
значений разделителей при запуске веб-клиента (или тонкого клиента,
подключенного через веб-сервер) возможно двумя способами: в адресной
(командной) строке запуска с помощью параметра <span class="Interface">Z</span> и в файле <span class="Interface">default.vrd</span>.</p>

<a id="TI000000894" class="bookmark" name="issogl3_24.4.2.1_с_помощью_параметра_z"><h4>24.4.2.1. С помощью параметра Z</h4></a>

<p class="MsoNormal">Значения
разделителей могут задаваться в адресной строке с помощью параметра <span class="Interface">Z</span>. Формат
параметра для веб-клиента аналогичен командной строке запуска клиентского
приложения.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">http://localhost/infobase?Z=&quot;-ПервыйРазделитель,+&quot;</pre>

<p class="MsoNormal">Символы,
недопустимые в URL (<span class="Interface">RFC 1738</span>, <a href="http://tools.ietf.org/html/rfc1738.html" target="_blank">http://tools.ietf.org/html/rfc1738.html</a>), преобразуются в кодировку UTF-8 и кодируются
в соответствии с разделом <span class="Interface">2.2. </span><span class="Interface">URL </span><span class="Interface">Character </span><span class="Interface">Encoding </span><span class="Interface">Issues</span> стандарта <span class="Interface">RFC 1738</span> (с
помощью символа «<span class="Interface">%</span>» и двух шестнадцатеричных
символов).</p>

<a name="_ref281578232"></a><a id="TI000000895" class="bookmark" name="issogl3_24.4.2.2_в_файле_default.vrd"><h4>24.4.2.2. В файле default.vrd</h4></a>

<p class="MsoNormalCxSpFirst">Существует
возможность настроить доступ в информационную базу таким образом, что
конкретные значения разделителей будут задаваться адресом информационной базы,
а не с помощью параметра командной строки <span class="Interface">Z</span> или строки
соединения с информационной базой. Для этого следует настроить соответствующим
образом элемент <span class="Term">&lt;zones&gt;</span>
файла <span class="Interface">default.vrd</span>.</p>

<p class="MsoNormalCxSpMiddle">Также
существует возможность запретить изменение значений объектов, связанных с
механизмом разделения данных, в том случае, если доступ к информационной базе
осуществляется с помощью веб-клиента или тонкого клиента, подключенного через
веб-сервер (безопасный сеанс). Такую возможность нужно использовать, если нужна
гарантия, что при доступе к информационной базе через Интернет будет невозможно
получить доступ к другой области данных.</p>

<p class="MsoNormalCxSpLast">Подробнее
о параметрах настройки файла <span class="Interface">default.vrd</span> см. <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">здесь</a>.</p>

<a id="TI000000896" class="bookmark" name="issogl2_24.4.3_внешнее_соединение_и_строка_соединения"><h3>24.4.3. Внешнее соединение и строка соединения</h3></a>

<p class="MsoNormal">В
строке соединения и при запуске внешнего соединения используется параметр <span class="Interface">Zn</span>. Формат
параметра аналогичен командной строке запуска клиентского приложения.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">Srvr=localhost;Ref=Demo82Srv;Zn=&quot;-ПервыйРазделитель,+,---3&quot;</pre>

<p class="MsoNormalCxSpFirst">Также
этот параметр можно указывать в файле <span class="Interface">default.vrd</span> (в
строке соединения с информационной базой) при публикации на веб-сервере.</p>

<p class="MsoNormalCxSpLast">В
файле <span class="Interface">default.vrd</span> возможен еще один способ задания значений разделителей,
подробнее о котором см. <a href="#_ref281578232">здесь</a>.</p>

<a name="_ref322969532"></a><a name="_ref323226939"></a><a id="TI000000897" class="bookmark" name="issogl1_24.5_безопасный_режим_разделения_данных"><h2>24.5. Безопасный режим разделения данных</h2></a>

<p class="MsoNormalCxSpFirst">При
использовании различных регламентных операций, выполняемых в рамках сеансов с
неиспользуемыми значениями разделителей, может исполняться программный код прикладного
решения, «надежность» которого, в общем случае, проверить не представляется
возможным. Под «надежностью» понимается работа строго в рамках поставленных
ограничений, без злоупотреблений. Например, вызываемый код должен работать в
рамках только тех значений разделителей, которые ему установила вызывающая
сторона, без попыток перехода в другие области данных. Такая попытка может
привести к несанкционированному доступу к данным «чужой» области данных.</p>

<p class="MsoNormalCxSpMiddle">Для
предотвращения попыток смены значений разделителей (и, как следствие, области
данных, в которой работа программный код) существует возможность установить
безопасный режим разделения данных. Для этого используется метод УстановитьБезопасныйРежимРазделенияДанных(). Использование данного метода для разделителя
аналогично указанию для данного разделителя значения атрибута <span class="Term">safe=&quot;true&quot;</span> для элемента <span class="Term">zone</span> файла <span class="Interface">default.vrd</span>. Описание
данного файла см. <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">здесь</a>. Если безопасный режим
разделения данных включен с помощью файла <span class="Interface">default.vrd</span>, то
отключить его с помощью метода <span class="Term">УстановитьБезопасныйРежимРазделенияДанных()</span>
невозможно.</p>

<p class="MsoNormalCxSpLast">В
безопасном режиме разделения данных запрещено:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Выключать использование разделителя, если
разделение не является условно выключенным.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Изменять значение используемого разделителя,
если разделение не является условно выключенным.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Изменять объекты, которые управляют условным
разделением:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Указанные для самого разделителя;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Указанные для объектов, входящих в состав
разделителя.</p>

<p class="MsoNormalCxSpFirst">Безопасный
режим разделения данных можно устанавливать по каждому разделителю отдельно. Количество
включений безопасного режима разделения данных должно совпадать с количеством
выключений. Однако если внутри процедуры или функции происходило включение безопасного
режима разделения данных (один раз или более), но не происходило его
выключение, то система автоматически выполнит выключение столько раз, сколько
незавершенных включений было в покидаемой процедуре или функции.</p>

<p class="MsoNormalCxSpMiddle">Если
в процедуре или функции безопасный режим разделения данных для выбранного разделителя
выключался большее количество раз, чем включался, то будет вызвано исключение.</p>

<p class="MsoNormalCxSpLast">Применение
этого механизма может выглядеть следующим образом (в системе существует
независимый разделитель <span class="Term">Абонент</span>):</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Для</span> <span class="keyword">Каждого</span> ЗначениеРазделителя <span class="keyword">Из</span> СписокЗначенийРазделителей <span class="keyword">Цикл</span>
    <span class="comment">// &quot;переходим&quot; в нужную область</span>
    УстановитьЗначениеРазделителя<span class="operator">(</span>ЗначениеРазделителя<span class="operator">)</span><span class="operator">;</span>
 <span class="comment">// установим безопасный режим разделения данных</span>
    УстановитьБезопасныйРежимРазделенияДанных<span class="operator">(</span><span class="string">&quot;Абонент&quot;</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// вызвать нужный программный код</span>
    ОбработатьДанныеОбласти<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// отключить безопасный режим разделения данных</span>
    УстановитьБезопасныйРежимРазделенияДанных<span class="operator">(</span><span class="string">&quot;Абонент&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span></pre>

<p class="MsoNormal">Проверить
состояние безопасного режима разделения данных можно с помощью метода <span class="Term">БезопасныйРежимРазделенияДанных()</span>.</p>

<a name="_ref323282704"></a><a name="_ref323282703"></a><a name="_ref459387797"></a><a name="_ref459387796"></a><a id="TI000000898" class="bookmark" name="issogl1_24.6_удаление_области_данных"><h2>24.6. Удаление области данных</h2></a>

<p class="MsoNormalCxSpFirst">В процессе эксплуатации системы может
возникнуть ситуация, когда область данных становится невостребованной.
Например, абонент перестает пользоваться услугами сервиса (каждый абонент
работает в одной области данных), или происходит реорганизация группы компаний
(каждая компания в группе работает в своей области).</p>

<p class="MsoNormalCxSpMiddle">Также возможна ситуация, когда из системы
удаляются разделители. Но если в состав разделителей входят объекты конфигурации
с предопределенными данными, то удалить разделитель не получится до тех пор,
пока не будут удалены предопределенные данные (см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref322967861">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Удаление области данных осуществляется с
помощью метода глобального контекста <span class="Term">УдалитьДанныеИнформационнойБазы()</span>
или с помощью параметра командной строки <span class="Term">/EraseData</span>
пакетного режима запуска Конфигуратора. Для метода встроенного языка удаляемая
область определяется значениями параметров сеанса, определяющих значения
разделителей в сеансе, откуда происходит вызов метода:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если в текущем сеансе не используется ни один
разделитель, то удаляются <span class="Bold">все данные информационной базы</span>.
После удаления состояние информационной становится таким же, как после создания
новой, пустой, информационной базы и загрузки в нее конфигурации.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если в текущем сеансе используется хотя бы один
разделитель, то удаляются <span class="Bold">полностью разделенные данные</span>
текущей области данных. Иначе говоря, выполняется удаление только тех данных
текущей области, которые разделены всеми разделителями, которые используются в
текущем сеансе. Удаление данных области приводит область в такое же состояние,
как после первой установки текущего набора значений используемых разделителей
до начала выполнения операций с данными.</p>

<p class="Note"><span class="Note">Совет</span><span class="Bold">.</span>
Сразу после выполнения метода рекомендуется сменить значения разделителей,
определяющих область данных.</p>

<p class="MsoNormalCxSpFirst">Для вызова метода требуется наличие у
пользователя права <span class="Term">Администрирование</span>
и возможности получения монопольного доступа к информационной базе. Монопольный
доступ необходимо установить с помощью явного вызова метода глобального
контекста <span class="Term">УстановитьМонопольныйРежим()</span>.</p>

<p class="MsoNormalCxSpMiddle">При удалении области данных с помощью
пакетного режима запуска Конфигуратора, удаляемая область определяется с помощью
параметра <span class="Term">/Z</span> командной
строки запуска (см. <a href="#_ref283800467">здесь</a>). Если заданы не все разделители, то область
определяется аналогично вызову метода <span class="Term">УдалитьДанныеИнформационнойБазы()</span>
(см. выше). Система пытается автоматически получить монопольный доступ к
информационной базе. В случае ошибки получения монопольного доступа, выполнение
пакетного режима запуска Конфигуратора завершается с ошибкой.</p>

<p class="MsoNormalCxSpLast">Во время удаления будут удалены следующие
данные:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Из таблиц, связанных с объектами конфигурации,
входящих в состав разделителей (включая предопределенные данные);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Хранилищ настроек;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Истории работы пользователя;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Списка пользователей информационной базы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Расширения конфигурации;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Часовой пояс информационной базы – если в
конфигурации не определено независимых разделителей, то значение это параметра становится
неопределенным, в противном случае – значение удаляется.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если в сеансе не используется ни один
разделитель, то следующие настройки информационной базы заполняются значениями
по умолчанию:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Время ожидания блокировки данных;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Минимальная длина паролей пользователей;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Проверка сложности паролей пользователей;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Разрешение полнотекстового поиска.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При установленном режиме совместимости с версией
8.3.2 или младше, предопределенные данные получаются значения, определенные в
конфигураторе или значения по умолчанию. При отключенном режиме совместимости
предопределенные данные будут созданы при первом обращении к ним;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значения реквизитов элемента <span class="Term">ЭтотУзел</span>
планов обмена будут установлены в значения по умолчанию;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значения неразделенных констант получают
значения по умолчанию, а значения разделенных констант удаляются.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Данные регистрации информационной базы в сервисе
взаимодействия.</p>

<a id="TI000000899" class="bookmark" name="issogl1_24.7_особенности_поведения_объектов_системы"><h2>24.7. Особенности поведения объектов системы</h2></a>

<p class="MsoNormalCxSpFirst">Особенности поведения объектов системы в случае использования
разделителей см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref292461486">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>