<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 28. &#1054;&#1090;&#1083;&#1072;&#1076;&#1082;&#1072; &#1080; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1080;&#1082;&#1083;&#1072;&#1076;&#1085;&#1099;&#1093; &#1088;&#1077;&#1096;&#1077;&#1085;&#1080;&#1081;</title>
		<LINK REL="stylesheet" href="style.css?_=1496848987">
		<SCRIPT src="script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 28. отладка и тестирование прикладных решений.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref335650513"></a><a name="_ref335650512"></a><a name="_ref237783564"></a><a id="TI000001030" class="bookmark"><h1>Глава 28.  Отладка и тестирование прикладных решений</h1></a>

<a id="TI000001714" class="bookmark" name="issogl1_28.1_общая_информация"><h2>28.1. Общая информация</h2></a>

<p class="MsoNormalCxSpFirst"><span class="Bold">Отладка</span> – этап разработки прикладного решения, в
процессе которого происходит обнаружение, локализация и устранение ошибок в прикладном
решении.</p>

<p class="MsoNormalCxSpMiddle">В
процессе отладки можно пользоваться отладчиком (см. <a href="#_ref235869330">здесь</a>), использовать результаты замера производительности (см. <a href="#_ref235868961">здесь</a>), использовать механизмы отображения вызовов сервера
(см. <a href="#_ref224451837">здесь</a>), имитировать задержки при вызове сервера (см. <a href="#_ref235869044">здесь</a>). Также существует возможность выполнить сценарий
автоматизированного тестирования (см. <a href="#_ref335650539">здесь</a>). При этом под <span class="Bold">тестированием</span>
понимается процесс испытания программного продукта, предназначенный для
выявления ситуаций, когда поведение прикладного решения является не
соответствующим спецификациям.</p>

<p class="MsoNormalCxSpLast">В
данной главе приводится описание инструментов платформы, которые помогают в
процессе отладки прикладного решения и его тестирования.</p>

<a name="_ref235869330"></a><a id="TI000001031" class="bookmark" name="issogl1_28.2_отладчик"><h2>28.2. Отладчик</h2></a>

<a name="_ref422152494"></a><a name="_ref422152492"></a><a id="TI000001551" class="bookmark" name="issogl2_28.2.1_общая_информация"><h3>28.2.1. Общая информация</h3></a>

<p class="MsoNormal"><span class="Bold">Отладчик</span> – инструмент,
облегчающий разработку и отладку программных модулей системы «1С:Предприятие».
Отладчик предоставляет следующие возможности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
возможность отладки выполнения модулей, как в
файловом, так и в клиент-серверном варианте, фоновых заданий;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
пошаговое выполнение модуля (см. <a href="#_ref421700583">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
расстановка точек останова (см. <a href="#_ref421700594">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
прерывание и продолжение выполнения модуля;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
возможность отладки нескольких модулей одновременно;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
вычисление выражений для анализа состояния переменных
(см. <a href="#_ref414272567">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
изменение значений переменных во время отладки
(см. <a href="#_ref422322500">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
просмотр стека вызовов процедур и функций
(см. <a href="#_ref421700646">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
возможность остановки по возникновению ошибки;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
возможность редактирования модуля в процессе отладки.</p>

<p class="MsoNormalCxSpFirst">Отладка может выполняться с помощью двух
различных протоколов отладки: по TCP/IP (см. <a href="#_ref421635498">здесь</a>) и по HTTP (см. <a href="#_ref421635506">здесь</a>). Возможности, предоставляемые обоими протоколами
отладки, достаточно близки. Дальнейший текст относится одинаково к обоим
протоколам, если явным образом не оговорены те или иные особенности или
ограничения.</p>

<p class="MsoNormalCxSpLast">В отладчике используется понятие предмета
отладки. <span class="Bold">Предмет отладки</span> – это контекст
встроенного языка, характеризуемый совокупностью параметров:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
имя пользователя, от имени которого исполняется
код на встроенном языке;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
тип предмета отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
номер используемого сеанса;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
сетевое имя компьютера, на котором исполняется
код на встроенном языке (для протокола отладки TCP/IP);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
номер IP-порта, через который отладчик управляет
работой предмета отладки (для протокола отладки TCP/IP);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
имя информационной базы (для протокола отладки HTTP).</p>

<p class="Note"><span class="Note">Примечание.</span> Если в клиент-серверном
варианте и при наличии нескольких рабочих процессов в кластере, в процессе отладки
кода веб-клиента или сервера сеанс был переназначен на другой рабочий процесс,
то отладка становится невозможной. Подробнее о сеансах см. <a href="/db/v8310doc/bookmark/cs/TI000000025" target="_top">здесь</a>.</p>

<p class="MsoNormal">К типам предметов отладки относятся:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">тонкий клиент</span> – код
на встроенном языке, исполняемый в тонком клиенте;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">веб-клиент</span> – код на
встроенном языке, исполняемый в веб-клиенте;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">толстый клиент</span> – код
на встроенном языке, исполняемый в толстом клиенте;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">клиент (мобильное приложение)*</span> –
код на встроенном языке, исполняемый в клиентском приложении, на мобильном устройстве;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">сервер</span> – код на
встроенном языке, исполняемый на сервере;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">сервер (файловый вариант)</span> –
код на встроенном языке, исполняемый на сервере, в файловом варианте;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">сервер (мобильное приложение)*</span> –
код на встроенном языке, исполняемый на сервере, в файловом варианте, на
мобильном устройстве;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">COM-соединение</span> – код
на встроенном языке, исполняемый через внешнее соединение;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Web-сервис</span> – код на
встроенном языке, исполняемый при вызовах методов Web-сервисов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">HTTP-сервис</span> – код
на встроенном языке, исполняемый при вызовах методов HTTP-сервисов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">фоновое задание</span> – код
на встроенном языке, исполняемый в фоновом задании;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">фоновое задание (файловый
вариант)</span> – код на встроенном языке, исполняемый в фоновом задании
(в файловом варианте);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">фоновое задание (мобильное
приложение)*</span> – код на встроенном языке, исполняемый в фоновом задании
(в файловом варианте) на мобильном устройстве.</p>

<p class="MsoNormalCxSpFirst">Предметы отладки, помеченные символом &quot;<span class="Bold">*</span>&quot; используются только в том случае, если применяется
протокол отладки по HTTP.</p>

<p class="MsoNormalCxSpMiddle">Во время отладки, для указания адресов
компонентов системы, могут использовать как символические адреса (например, <span class="Interface">pc-name</span>) так и IP-адреса (например, <span class="Interface">192.168.1.1</span>). Во время работы подсистемы «1С:Предприятия»
занимаются преобразованием символических имен в IP-адреса, например, для
получения IP-адреса отладчика, который указан с помощью символического имени.
Для этого используются специализированные сервисы используемых операционных
систем (DNS). Желательно, чтобы при разрешении символических имен не возникало
неоднозначностей.</p>

<p class="MsoNormalCxSpLast">В зависимости от используемого протокола
отладки, «1С:Предприятие» по-разному организует взаимодействия компонентов
системы. Однако, вне зависимости от используемого протокола, при работе
отладчика используются некоторые порты протокола, лежащего в основе работы
отладчика. Если на компьютере запрещено использование необходимых (для отладки)
портов (порты «закрыты»), то отладка будет невозможна. Также может наблюдаться
следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
увеличение времени запуска клиентского
приложения;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
замедление работы рабочего процесса сервера (<span class="Interface">rphost</span>) «1С:Предприятия» во время работы, если сервер
работает в режиме отладки (ключ <span class="Interface">-debug</span>).</p>

<p class="MsoNormal">При работе отладчика используются следующие
порты:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При использовании протокола отладки TCP/IP: <span class="Interface">1560-1591</span> (по умолчанию). Диапазон портов может быть
изменен. Порты используются и на стороне отладчика и на стороне предмета
отладки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При использовании протокола отладки HTTP: порт
сервера отладки, который явно указывается при запуске. При работе в
клиент-серверном варианте сервер отладки использует порт <span class="Interface">1550</span> (по умолчанию). При работе в файловом варианте порт
назначается явным образом или выбирается конфигуратором из интервала портов <span class="Interface">1560-1591</span> (по умолчанию). Диапазон портов может быть
изменен. Порт используется только на компьютере, где запущен сервер отладки.</p>

<p class="MsoNormal">При работе по протоколу отладки TCP/IP,
диапазон портов может быть изменен с помощью параметров настройки используемых
компонентов системы или конфигурационных файлов (<span class="Interface">debugcfg.xml</span>, см. <a href="#_ref274145651">здесь</a>). Используемые порты (один или диапазон) должны быть разрешены
для использования («открыты») на компьютерах, которые участвуют в процессе отладки.
Для протокола отладки TCP/IP это все компьютеры, участвующие в отладке, а для
протокола отладки HTTP – это компьютер сервера отладки.</p>

<a id="TI000001032" class="bookmark" name="issogl2_28.2.2_использование_отладчика"><h3>28.2.2. Использование отладчика</h3></a>

<a name="_ref421635498"></a><a name="_ref422152590"></a><a id="TI000001597" class="bookmark" name="issogl3_28.2.2.1_протокол_отладки_tcp_ip"><h4>28.2.2.1. Протокол отладки TCP/IP</h4></a>

<a id="TI000001552" class="bookmark" name="issogl4_28.2.2.1.1_общая_схема"><h5>28.2.2.1.1. Общая схема</h5></a>

<p class="MsoNormalCxSpFirst">Чтобы
иметь возможность отлаживать код на встроенном языке, нужно обеспечить работу
приложения, в котором исполняется код, в отладочном режиме. Для работы режима отладки
необходимо, чтобы на компьютере была включена поддержка используемого сетевого
протокола TCP/IP.</p>

<p class="MsoNormalCxSpMiddle">Если
режим 1С:Предприятие не запущен, то для начала отладки нужно выбрать пункт <span class="Interface">Отладка – Начать
отладку</span>. Конфигуратор запускает клиентское приложение в отладочном режиме.</p>

<p class="MsoNormalCxSpMiddle">Если
в настройках конфигуратора установлен режим разрешения отладки или указано, что
отладка будет начата при запуске (окно настроек открывается с помощью команды <span class="Interface">Сервис – Параметры</span>
закладка <span class="Interface">Запуск 1С:Предприятия</span>, см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref225771522">здесь</a>), то для начала отладки также можно использовать
режим запуска, выполняемый командой <span class="Interface">Сервис – 1С:Предприятие</span>.
Если требуется выполнить отладку кода, выполняемого определенным пользователем,
то в форме настроек можно указывать пользователя, от лица которого запускается
отладочный режим.</p>

<p class="MsoNormalCxSpLast">Отладчик
и предметы отладки при поиске друг друга используют IP-адрес <span class="Interface">127.0.0.1</span>. Для
устойчивой работы службы транспорта данных необходимо определить соответствие
адреса <span class="Interface">127.0.0.1</span> символическому имени <span class="Interface">localhost</span>. Для
этого можно в файл <span class="Interface">C:\Windows\system32\drivers\etc\hosts</span> вписать соответствие:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">127.0.0.1 localhost</pre>

<a id="TI000001033" class="bookmark" name="issogl4_28.2.2.1.2_настройка_приложения_для_работы_в_отладочном_режиме"><h5>28.2.2.1.2. Настройка приложения для работы в отладочном режиме</h5></a>

<a id="TI000001622" class="bookmark" name="issogl5_общая_информация"><h6>Общая информация</h6></a>

<p class="MsoNormal">В
данном разделе считается, что конфигуратор настроен для отладки с
использованием протокола отладки TCP/IP. Настройка конфигуратора выполняется с
помощью диалога параметров конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref421706974">здесь</a>). Далее необходимость выполнения такой настройки
отдельно не упоминается.</p>

<a id="TI000001034" class="bookmark" name="issogl5_отладка_клиентского_приложения"><h6>Отладка клиентского приложения</h6></a>

<p class="MsoNormal">Для
установки отладочного режима можно использовать следующие варианты запуска:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В режиме Конфигуратор в форме настроек (меню <span class="Interface">Сервис – Параметры</span>),
на закладке <span class="Interface">Запуск 1С:Предприятия – Дополнительные</span> установить
флажок <span class="Interface">Устанавливать режим разрешения отладки</span>, далее выполнить
подключение предмета отладки. Также можно установить флажок <span class="Interface">Начинать отладку при
запуске</span>; в этом случае при запуске системы «1С:Предприятие» подключение
будет выполнено автоматически. При этом для отладки должен использоваться
протокол TCP/IP (диалог <span class="Interface">Сервис – Параметры</span>, закладка <span class="Interface">Отладка</span>,
свойство <span class="Interface">Протокол отладки</span> должно быть установлено в значение <span class="Interface">Отладка по протоколу
TCP/IP</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Открыть информационную базу в режиме
1С:Предприятие с ключом командной строки <span class="Interface">/debug -tcp</span> (отладочный
режим).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если запущено клиентское приложение, то в форме
настроек (открыть с помощью меню <span class="Interface">Сервис – Параметры</span>) установить
отладочный режим. Для этого свойство <span class="Interface">Отладка в текущем
сеансе</span> необходимо установить в значение<span class="Interface"> Разрешена (протокол
TCP/IP)</span>. Следует иметь в виду, что после применения настроек изменить
значение свойства нельзя.</p>

<a name="_ref310422649"></a><a id="TI000001035" class="bookmark" name="issogl5_отладка_кода_на_сервере"><h6>Отладка кода на сервере</h6></a>

<p class="MsoNormalCxSpFirst">В
отладочном режиме загрузка объектов конфигурации производится по мере необходимости,
а не при начале работы системы, как в обычном режиме работы сервера. Это ускоряет
процесс запуска «1С:Предприятия» при изменении конфигурации, то есть ускоряет
процесс разработки.</p>

<p class="MsoNormalCxSpMiddle">Также
следует учитывать, что в отладочном режиме производительность системы будет
ниже, чем при обычной работе. Поэтому не рекомендуется использовать отладочный
режим работы сервера для реальной работы пользователей.</p>

<p class="MsoNormalCxSpLast">Расположение
и параметры конфигурационного файла <span class="Interface">srv1cv83</span>, а
также о параметрах командной строки запуска сервера «1С:Предприятия» можно
посмотреть <a href="/db/v8310doc/bookmark/cs/TI000000115" target="_top">в книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<p class="Lang">Сервер
как приложение</p>

<p class="MsoNormal">Если
сервер «1С:Предприятия» работает в режиме приложения (в любой ОС), то следует
остановить сервер и перезапустить его так, чтобы в числе параметров командной
строки был параметр <span class="Interface">-debug</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent -debug &lt;остальные параметры командной строки&gt;</pre>

<p class="Lang">Сервер
как служба ОС Windows</p>

<p class="MsoNormal">Если
сервер работает как служба ОС Windows,
то необходимо выполнить следующие операции:</p>

<p class="MsoListNumber">1.  Остановить
сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent –stop</pre>

<p class="MsoListNumber">2.  Выполнить
повторную регистрацию агента сервера в качестве службы Windows таким образом, чтобы в числе параметров команды <span class="Interface">ragent</span> был
параметр <span class="Interface">-debug</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent -instsrvc -debug &lt;остальные параметры командной строки&gt;</pre>

<p class="MsoListNumber">3.  Запустить
сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent -start</pre>

<p class="Lang">Сервер
как «демон» ОС Linux</p>

<p class="MsoNormal">Если
в отладочный режим необходимо перевести сервер «1С:Предприятия» работающего в
режиме «демона» в ОС Linux, то необходимо
выполнить следующие операции:</p>

<p class="MsoListNumber">1.  Остановить
сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">/etc/init.d/srv1cv83 stop</pre>

<p class="MsoListNumber">2. 
В конфигурационном файле <span class="Interface">srv1cv83</span>
установить значение параметра <span class="Term">SRV1CV8_DEBUG</span>
в значение <span class="Term">1</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">SRV1CV8_DEBUG=1</pre>

<p class="MsoListNumberCxSpFirst">3. 
Сохранить конфигурационный файл.</p>

<p class="MsoListNumberCxSpLast">4. 
Запустить сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">/etc/init.d/srv1cv83 start</pre>

<a id="TI000001036" class="bookmark" name="issogl5_отладка_внешнего_соединения"><h6>Отладка внешнего соединения</h6></a>

<p class="MsoNormal">Для
указания внешнему соединению необходимости запуска в отладочном режиме используются
настройки, размещенные в xml-файле <span class="Interface">comcntrcfg.xml</span>, который расположен
в каталоге конфигурационных файлов системы «1С:Предприятие». Если файл не
найден, приложение открывается в обычном режиме.</p>

<p class="Lang-subheader">Пример
файла comcntrcfg.xml:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
&lt;config xmlns=&quot;http://v8.1c.ru/v8/comcntrcfg&quot;&gt;
    &lt;debugconfig debug=&quot;true&quot; protocol=&quot;tcp&quot; debuggerURL=&quot;tcp://localhost:1560&quot;/&gt;
&lt;/config&gt;
</pre>

<p class="MsoNormalCxSpFirst">Подробнее о файле <span class="Interface">comcntrcfg.xml</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000375" target="_top">в книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpLast">Если
для элемента <span class="Interface">debug</span> указан атрибут <span class="Interface">debuggerURL</span>, то
к моменту обращения к внешнему соединению по указанному URL должен быть
доступен конфигуратор. В противном случае исполнение внешнего соединения будет
приостановлено и система будет ожидать доступность конфигуратора. При этом для
продолжения работы в конфигураторе следует подключить необходимый предмет
отладки.</p>

<a name="_ref407114206"></a><a id="TI000001037" class="bookmark" name="issogl5_отладка_web-сервиса_http-сервиса_и_доступа_через_стандартный_интерфейс_odata"><h6>Отладка Web-сервиса, HTTP-сервиса и доступа через стандартный интерфейс OData</h6></a>

<p class="MsoNormal">Для
указания сервису необходимости запуска в отладочном режиме (только для
файлового варианта информационной базы) используются настройки, размещенные в файле
<span class="Interface">default.vrd</span>, который должен располагаться в каталоге
виртуального приложения. В этом файле необходимо указать элемент <span class="Interface">debug</span>, отсутствие которого
означает невозможность отладки Web-сервиса.</p>

<p class="Lang-subheader">Пример
элемента debug из файла default.vrd:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">&lt;debug enable=&quot;true&quot; protocol=&quot;tcp&quot; url=&quot;tcp://localhost&quot;/&gt;</pre>

<p class="MsoNormalCxSpFirst">Подробнее
о файле <span class="Interface">default.vrd</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">в
книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpMiddle">Если
для элемента <span class="Interface">debug</span> указан атрибут <span class="Interface">url</span>, то в
момент обращения к сервису, по указанному URL должен быть доступен конфигуратор.
В противном случае исполнение сервиса будет приостановлено и система будет
ожидать доступность конфигуратора. При этом для продолжения работы в конфигураторе
следует подключить необходимый предмет отладки.</p>

<p class="MsoNormalCxSpLast">Для
необходимости отладки сервиса в клиент-серверном варианте информационной базы
следует включить режим отладки на сервере с помощью ключа командной строки <span class="Interface">debug</span>. Подробнее о ключах
командной строки запуска сервера «1С:Предприятия» можно посмотреть <a href="/db/v8310doc/bookmark/cs/TI000000116" target="_top">в
книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<p class="Note"><span class="Note">Примечание.</span> Для отладки HTTP-сервиса и работы со
стандартным интерфейсом OData не рекомендуется
использовать веб-браузер Microsoft Internet Explorer 9.0, т. к. в этом веб-браузере имеются ошибки
кодирования URL.</p>

<a name="_ref369791890"></a><a id="TI000001038" class="bookmark" name="issogl5_отладка_веб-клиента"><h6>Отладка веб-клиента</h6></a>

<p class="MsoNormal">Для
установки отладочного режима можно использовать следующие варианты запуска:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В режиме Конфигуратор в форме настроек (меню <span class="Interface">Сервис – Параметры</span>),
на закладке <span class="Interface">Запуск 1С:Предприятия – Дополнительно</span> установить
флажок <span class="Interface">Устанавливать режим разрешения отладки</span>, далее выполнить
подключение предмета отладки. Также можно установить флажок <span class="Interface">Начинать отладку при
запуске</span>. В этом случае при запуске системы «1С:Предприятие» подключение
будет выполнено автоматически.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Открыть информационную базу в режиме
1С:Предприятие с ключом командной строки <span class="Interface">debug</span> (отладочный
режим):</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">http://localhost/demo?debug=tcp</pre>

<p class="MsoListBullet">&#9679; 
Открыть информационную базу в режиме
1С:Предприятие с ключами командной строки <span class="Interface">debug</span> и <span class="Interface">debuggerurl=&quot;IP-адрес&quot;</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">http://localhost/demo?debug=tcp&amp;debuggerurl=&quot;127.0.0.1&quot;</pre>

<p class="MsoListBullet">&#9679; 
<span class="Interface">IP-адрес</span> – это
адрес отладчика. В случае такого запуска отладчик, расположенный по адресу <span class="Interface">127.0.0.1</span>,
выполнит автоматическое подключение предметов отладки (отладчик должен быть
запущен по указанному адресу).</p>

<p class="MsoNormal">Если
необходимо включить отладку серверной части файлового варианта информационной
базы, то это можно сделать двумя способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Запустить отладку непосредственно из конфигуратора,
как указано выше. В этом случае режим отладки для серверной части файлового варианта,
расположенной на компьютере с веб-клиентом, включится автоматически.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Включить режим отладки с помощью файла <span class="Interface">default.vrd</span>,
который должен располагаться в каталоге виртуального приложения. В этом файле необходимо
указать элемент <span class="Interface">debug</span>,
отсутствие которого означает невозможность отладки Web-сервиса.</p>

<p class="Lang-subheader">Пример
элемента debug из файла default.vrd:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">&lt;debug enable=&quot;true&quot; protocol=&quot;tcp&quot; url=&quot;tcp://192.168.0.30&quot;/&gt;</pre>

<p class="Indentlist">Также
следует учитывать, что в отладочном режиме производительность системы будет
ниже, чем при обычной работе. Поэтому не рекомендуется использовать отладочный
режим работы серверной части файлового варианта работы для реальной работы
пользователей.</p>

<p class="MsoNormalCxSpFirst">Подробнее
о файле <span class="Interface">default.vrd</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">в
книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpLast">Во
время отладки веб-клиента нужно помнить следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
не поддерживается возможность интерактивного
включения режима отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается автоматический поиск предметов
отладки на удаленных компьютерах при отладке веб-клиента для файлового варианта
информационной базы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается активизация конфигуратора из
веб-клиента в процессе отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается отладка внешних отчетов и
обработок;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
в случае принудительного прекращения работы
веб-клиента из отладчика, прекращается работа того процесса веб-браузера,
который был запущен при старте веб-клиента из конфигуратора. Однако если
веб-клиент стартует во вкладке уже работающего веб-браузера, то принудительного
закрытия вкладки не происходит, а в окне отлаживаемого веб-клиента открывается
диалоговое окно с информацией о том, что веб-клиент завершается по требованию
отладчика.</p>

<p class="NoteCxSpFirst"><span class="Note">Внимание!</span> Для отладки веб-клиента (в том числе и
клиентского программного кода) в клиент-серверном варианте необходимо, чтобы
сервер «1С:Предприятия» был запущен в отладочном режиме (ключ <span class="Interface">debug</span>).</p>

<p class="NoteCxSpLast"><span class="Note">Примечание.</span> Не рекомендуется использовать отладку
веб-клиента на низкоскоростных каналах связи.</p>

<p class="MsoNormal">Клиент-серверный
вариант работы подробнее описан <a href="/db/v8310doc/bookmark/cs/TI000000020" target="_top">в книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<a name="_ref229046481"></a><a name="_ref229046463"></a><a name="_ref367793578"></a><a id="TI000001039" class="bookmark" name="issogl5_отладка_внешней_обработки_отчета"><h6>Отладка внешней обработки (отчета)</h6></a>

<p class="MsoNormal">Для отладки внешнего отчета (обработки) необходимо
соблюдение двух условий:</p>

<p class="MsoListNumberCxSpFirst">1. 
Внешняя обработка (отчет) открыта в клиентском
приложении из конкретного места файловой системы;</p>

<p class="MsoListNumberCxSpLast">2. 
Конфигуратор, который обслуживает предмет
отладки с отлаживаемой внешней обработкой (отчетом), имеет доступ именно к тому
файлу внешней обработки (отчета), который открыт клиентским приложением.</p>

<p class="MsoNormal">Если эти условия не выполняются – отладка
внешней обработки (отчета) будет невозможна. В частности, не поддерживается
отладка внешних обработок (отчетов), расположенных в информационной базе. В
этом случае рекомендуется извлечь внешнюю обработку (отчет) из информационной
базы на время отладки.</p>

<a name="_ref422152541"></a><a id="TI000001040" class="bookmark" name="issogl4_28.2.2.1.3_подключение_предметов_отладки"><h5>28.2.2.1.3. Подключение предметов отладки</h5></a>

<p class="MsoNormal">Для
выполнения отладки модуля нужно, чтобы предмет отладки был подключен. Для
управления подключением нужно выбрать пункт <span class="Interface">Отладка – Подключение</span>.
На экран выводится окно для выбора предмета отладки. В список попадают только
те предметы отладки, для которых выполняются следующие условия:</p>

<p class="MsoListBullet">&#9679; 
Отладчик и предмет отладки имеют одинаковый
идентификатор информационной базы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Для файлового варианта информационной базы
формируется в момент первого обращения к базе с помощью клиентского приложения
(включая доступ конфигуратором). При следующем первом обращении идентификатор
будет сформирован заново. Под «первым обращением» понимается не абсолютно
первое обращение в момент создания информационной базы, а первое обращение
после того, как к информационной базе не осталось соединений.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для клиент-серверного варианта информационной
базы используется идентификатор информационной базы в кластере серверов «1С:Предприятия».</p>

<p class="MsoListBullet">&#9679; 
В приложении должна быть включена возможность
отладки (для сервера – флажок <span class="Interface">debug</span>, для клиентского приложения – соответствующий
параметр командной строки, или свойство диалога настройки клиентского
приложения, или корректно настроенный конфигурационный файл).</p>

<p class="MsoNormal">Предметы
отладки доступны для подключения на протяжении интервала времени существования
сеанса, в рамках которого работает конкретное фоновое задание, Web-сервис или внешнее соединение. Это интервал может длиться
очень незначительно время, и в этом случае можно воспользоваться настройкой
автоматического подключения предметов отладки.</p>

<p class="Note"><span class="Note">Примечание.</span> При подключении предмета отладки в списке
пользователей информационной базы должны существовать пользователи, которые могут
быть аутентифицированы как в конфигураторе, так и в предмете отладки.</p>

<p class="Regularbeforepicture">Обычно
список содержит одну строку с указанием на запущенную в режиме 1С:Предприятие
конфигурацию. Если запущено несколько приложений системы «1С:Предприятие» с
данной конфигурацией, то список может содержать несколько строк.</p>

<p class="Picture"><IMG src="_img/img00566.gif?_=1496848987" WIDTH="566" ALT HEIGHT="326"></p>

<p class="MsoCaption">Рис.
558.
Подключение предметов отладки</p>

<p class="MsoNormalCxSpFirst">Если
флажок <span class="Interface">Искать предметы отладки на удаленном компьютере</span>
установлен, то в поле, расположенном справа от флажка, следует ввести имя
компьютера (или его сетевой адрес) или выбрать имя из ранее вводимых имен. При
этом в список доступных предметов отладки будут добавлены предметы отладки,
найденные на удаленном компьютере. Список подключенных предметов отладки будет
содержать те предметы отладки, которые уже подключены к отладчику.</p>

<p class="MsoNormalCxSpMiddle">Нажатие
кнопки <span class="Interface">Подключить</span> подключает к отладчику выбранный предмет
отладки. В окне подключения это отображается переносом предмета отладки из
списка доступных в список подключенных предметов отладки.</p>

<p class="MsoNormalCxSpMiddle">Для
исключения предмета отладки нужно указать его в списке подключенных и нажать
кнопку <span class="Interface">Отключить</span>. Для отключенного предмета отладки собственно
отладка больше не выполняется. В частности, это означает, что точки останова,
установленные в отключенных предметах отладки, не будут «срабатывать» при прохождении
выполнения через них. В окне подключения это отображается переносом предмета отладки
из списка подключенных в список доступных предметов, и к нему можно повторно
подключиться.</p>

<p class="MsoNormalCxSpLast">Для
закрытия предмета отладки следует нажать кнопку <span class="Interface">Завершить</span>, для
останова в месте выполнения – кнопку <span class="Interface">Остановить</span>.</p>

<p class="Regularbeforepicture">Чтобы
открыть диалог настройки диапазона, следует нажать кнопку <span class="Interface">Настройки</span>.
Диапазон определяет границы, в рамках которых отладчик ищет предметы отладки на
текущем или указанном компьютере.</p>

<p class="Picture"><IMG src="_img/img00567.gif?_=1496848987" WIDTH="352" ALT HEIGHT="196"></p>

<p class="MsoCaption">Рис.
559.
Настройка отладчика</p>

<p class="MsoNormal">В
поле <span class="Interface">Отладчик</span> диалога содержатся настройки текущего отладчика.
Их можно использовать, например, в командной строке при запуске клиентского
приложения в качестве параметра ключа командной строки <span class="Interface">/debuggerurl</span>
или в xml-файле с настройками отладки для внешнего соединения или Web-сервиса.</p>

<p class="Regularbeforepicture">Для
автоматического подключения предметов отладки на сервере системы «1С:Предприятие»,
работающем в отладочном режиме, можно воспользоваться диалогом <span class="Interface">Автоматическое
подключение</span> и отметить в нем соответствующие типы предметов отладки.</p>

<p class="Picture"><IMG src="_img/img00568.gif?_=1496848987" WIDTH="352" ALT HEIGHT="194"></p>

<p class="MsoCaption">Рис.
560.
Настройка автоматического подключения</p>

<p class="MsoNormalCxSpFirst">Указанные
настройки автоматического подключения действуют только для клиент-серверной
информационной базы, кроме пункта <span class="Interface">Фоновые задания</span>, который позволяет
автоматически подключать фоновые задания, как в клиент-серверном, так и в файловом
варианте использования информационной базы. Если необходимо отлаживать
различные сервисы (WEB-, HTTP– и OData-) в файловом варианте информационной
базы, то отладку в этом случае следует настраивать в диалоге публикации на
веб-сервере.</p>

<p class="MsoNormalCxSpLast">Автоматическое
подключение фонового задания, выполняющегося клиентским приложением или
расширением веб-сервера, данным диалогом регулируется опосредованно. Для
отладки фоновых заданий необходимо одновременное выполнение нескольких условий:</p>

<p class="MsoListBullet">&#9679; 
Для тонкого или толстого клиента:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Разрешить отладку в клиентском приложении;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Разрешить автоматическое подключение к фоновым
заданиям в диалоге настройки автоматического подключения.</p>

<p class="MsoListBullet">&#9679; 
Для веб-сервера:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
В файле публикации (<span class="Interface">default.vrd</span>)
разрешить отладку для отлаживаемой информационной базы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Разрешить автоматическое подключение к фоновым
заданиям в диалоге настройки автоматического подключения.</p>

<a name="_ref421635506"></a><a id="TI000001041" class="bookmark" name="issogl4_28.2.2.1.4_дополнительная_настройка_диапазона_портов"><h5>28.2.2.1.4. Дополнительная настройка диапазона портов</h5></a>

<p class="MsoNormal">Если все порты для подключения в стандартном
диапазоне заняты, существует возможность указать дополнительный диапазон. Этот
диапазон настраивается в файле <span class="Interface">debugcfg.xml</span>, расположенном в каталоге конфигурационных
файлов компьютера, на котором расположен конфигуратор, отлаживаемое клиентское
приложение или выполняется внешнее соединение. Если диапазон портов изменен на
компьютере с отлаживаемым приложением, то эти же порты следует установить и для
конфигуратора, из которого выполняется отладка (если отлаживаемое приложение и
конфигуратор расположены на разных компьютерах). Если файл не найден, то для отладки
используются порты из стандартного диапазона (<span class="Interface">1560:1591</span>). Предметы отладки на сервере используют те же
порты, что и процессы сервера: <span class="Interface">rmngr</span> и <span class="Interface">rphost</span>. Указания дополнительных диапазонов портов для
предметов отладки на сервере не требуется.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
&lt;config xmlns=&quot;http://v8.1c.ru/v8/debugcfg&quot;&gt;
    &lt;debugports range=&quot;1540:1550&quot;/&gt;
&lt;/config&gt;
</pre>

<p class="MsoNormal">Подробнее о файле <span class="Interface">debugcfg.</span><span class="Interface">xml</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000377" target="_top">в книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<a id="TI000001598" class="bookmark" name="issogl3_28.2.2.2_протокол_отладки_http"><h4>28.2.2.2. Протокол отладки HTTP</h4></a>

<a name="_ref421720545"></a><a id="TI000001599" class="bookmark" name="issogl4_28.2.2.2.1_общая_схема"><h5>28.2.2.2.1. Общая схема</h5></a>

<p class="MsoNormalCxSpFirst">Чтобы
иметь возможность отлаживать код на встроенном языке, нужно обеспечить работу
приложения, в котором исполняется код, в отладочном режиме. Для работы режима отладки
необходимо, чтобы на компьютере была включена поддержка сетевого протокола TCP/IP
и не заблокирована работа по протоколу HTTP (различные прокси-сервера,
брандмауэры и т. д.).</p>

<p class="MsoNormalCxSpLast">При
использовании протокола отладки HTTP, для отладки используется специальный <span class="Bold">сервер отладки</span> (<span class="Interface">dbgs</span>). Сервер
отладки выступает в качестве координатора процесса отладки:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Хранит списки предметов отладки, доступных для
использования и списки подключенных предметов отладки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Транслирует команды по управлению процессом
отладки в команды предметам отладки (остановиться, продолжить исполнение и т. д.).</p>

<p class="Regularbeforepicture">Общую
схему отладки, с использованием сервера отладки, можно представить следующим
образом:</p>

<p class="Picture"><IMG src="_img/img00569.gif?_=1496848987" WIDTH="522" ALT HEIGHT="760"></p>

<p class="MsoCaption">Рис.
561. Общая схема работы</p>

<p class="MsoNormalCxSpFirst">Прямой
передачи информации между отладчиком и предметами отладки нет. Всё
взаимодействие организуется через сервер отладки. На сервере отладки
организована очередь сообщений, через которую отладчик и предметы отладки
передают информацию друг другу.</p>

<p class="MsoNormalCxSpMiddle">И
отладчик, и предметы отладки взаимодействуют с сервером отладки по протоколу
HTTP. Расположение предмета отладки не имеет значения для успешной работы
механизма.</p>

<p class="MsoNormalCxSpMiddle">Взаимодействие
с сервером отладки выполняется по инициативе отладчика и предметов отладки. Во
время работы организуется два соединения между сервером отладки и каждым
участником процесса (предметы отладки и отладчик). По одному соединению предмет
отладки сообщает серверу отладки о своем состоянии (достигли точки останова,
выполнили шаг и т. д.). По другому соединению предмет отладки (или
отладчик) узнает, не появилась ли для него информация на сервере отладки. И
если появилась – получить эту информацию.</p>

<p class="MsoNormalCxSpMiddle">Таким
образом, взаимодействие получается одностороннее. Информация всё время
передаётся с сервера отладки в отладчик, и в предметы отладки. При этом
необходимо понимать, что если предмет отладки не запущен в режиме отладки –
сервер отладки не сможет установить с ним соединение. В частности, это
означает, что невозможно отлаживать код на сервере «1С:Предприятия», если
сервер не запущен в режиме отладки.</p>

<p class="MsoNormalCxSpLast">Сервер
отладки может обслуживать отладку произвольного количества предметов отладки из
разных информационных баз. Сопоставление отладчика и предметов отладки на
сервере отладки осуществляется на основе имени информационной базы. Эти имена
различны и зависят от варианта использования информационной базы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Клиент-серверный вариант – используется имя
информационной базы, как оно задано в кластере серверов «1С:Предприятия».</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Файловый вариант – используется
предопределенное имя <span class="Interface">DefAlias</span> (возможность изменения
этого имени не поддерживается). Таким образом, в случае файловой информационной
базы, сервер отладки следует использовать для одновременной работы только с
отладчиком и предметами отладки из одной файловой информационной базы. При
запуске конфигуратора для файловой информационной базы, автоматически запускается
сервер отладки, соответствующий используемой информационной базе. При запуске клиентского
приложения из конфигуратора, ему передается адрес запущенного сервера отладки для
этой информационной базы. Таким образом, при работе с двумя файловыми информационными
базами двумя запущенными конфигураторами, будут использоваться два сервера
отладки, каждый для своей информационной базы. При этом при запуске клиентского
приложения не из конфигуратора, необходимо самостоятельно указать правильный
адрес сервера отладки в командной строке клиентского приложения (при
необходимости выполнения отладки).</p>

<p class="MsoNormalCxSpFirst">В конфигураторе
предоставляется возможность настройки имени информационной базы, с которым отладчик
регистрируется на сервере отладки (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref421706974">здесь</a>). Эта возможность требуется для случаев, когда в конфигураторе
открыта одна информационная база, но требуется отлаживать работу предметов
отладки из другой серверной информационной базы с известным именем на известном
сервере отладки.</p>

<p class="MsoNormalCxSpMiddle">Отдельно
остановимся на том, что происходит при попадании на точку останова при
использовании сервера отладки. После того, как сервер отладки получил сообщение
о том, что определенный предмет отладки остановился на точке останова, он рассылает
сообщение о необходимости остановиться всем подключенным предметам отладки. Каждый
предмет отладки исполняет данную команду до начала исполнения очередной «своей»
строки кода на встроенном языке. «Остановка» подключенных предметов отладки
происходит асинхронно: предметы отладки текущего сеанса (это клиентское
приложение и серверная часть, обслуживающая это клиентское приложение)
остановятся синхронно, а момент остановки остальных предметов отладки в общем
случае определить невозможно. После того, как в отладчике выполнена команда,
например, сделать шаг, сервер отладки сообщает всем подключенным предметам
отладки, что они могут дальше выполнять свою работу. При этом в активном
предмете отладки выполняется указанная команда, а операцию «сделать шаг» можно
представить (с некоторым приближением) как запуск предмета отладки на
выполнение с установкой точки останова на следующей строке. После того, как активный
предмет отладки выполнил затребованную операцию, он сообщает об этом серверу
отладки и процесс повторяется.</p>

<p class="MsoNormalCxSpLast">Из
этого описания следуют два важных факта:</p>

<p class="MsoListNumberCxSpFirst">1.  Невозможна
одновременная пошаговая отладка различных предметов отладки, связанных с одной
информационной базой (в клиент-серверном варианте) или с одним сервером отладки
(в файловом варианте).</p>

<p class="MsoListNumberCxSpLast">2. 
При одиночном шаге в текущем предмете отладки,
невозможно предсказать (в общем случае), в каком месте произойдет остановка в остальных
подключенных предметах отладки. В рамках данного утверждения можно считать, что
клиентский и серверный предметы отладки, связанные с одним номером сеанса,
выступают как один предмет отладки.</p>

<p class="MsoNormal">Также
стоит упомянуть возможность устанавливать пароль на доступ к серверу отладки.
Пароль задается при запуске сервера отладки и должен указываться отладчиком при
доступе к такому серверу отладки.</p>

<a id="TI000001600" class="bookmark" name="issogl4_28.2.2.2.2_настройка_системы_для_работы_в_отладочном_режиме"><h5>28.2.2.2.2. Настройка системы для работы в отладочном режиме</h5></a>

<a id="TI000001601" class="bookmark" name="issogl5_общая_информация1"><h6>Общая информация</h6></a>

<p class="MsoNormal">В
данном разделе считается, что конфигуратор настроен для отладки с
использованием протокола отладки HTTP. Настройка конфигуратора выполняется с
помощью диалога параметров конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref421706974">здесь</a>). Далее необходимость выполнения такой настройки
отдельно не упоминается.</p>

<a name="_ref421796146"></a><a id="TI000001602" class="bookmark" name="issogl5_при_запуске_из_конфигуратора"><h6>При запуске из Конфигуратора</h6></a>

<p class="MsoNormalCxSpFirst">Для
того чтобы при запуске из Конфигуратора клиентское приложение сразу запускалось
в режиме отладки, необходимо запустить клиентское приложение с помощью команды <span class="Interface">Отладка – Начать
отладку</span>. В этом случае клиентское приложение будет запущено в отладочном
режиме и все необходимые компоненты также будут запущены с нужными настройками
или параметрами командной строки. Для запуска будет использоваться то
клиентское приложение, которое выбрано в настройках конфигуратора
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref421795639">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Если
необходимо запустить в режиме отладки конкретное приложение, не меняя настроек
по умолчанию, то запуск можно выполнить с помощью меню команды <span class="Interface">Отладка – Начало
отладки</span>. В меню перечислены клиентские приложения, которые можно
запустить в режиме отладки.</p>

<p class="MsoNormalCxSpLast">Запуск
отладки мобильного приложения из Конфигуратора поддерживается только для
устройств, работающих под управлением ОС Android. В этом случае устройство
должно быть подключено к персональному компьютеру, на котором работает Конфигуратор,
с помощью USB-кабеля, а в настройках запуска мобильного приложения
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref374531917">здесь</a>) должно быть настроено использование Android Debug
Bridge для запуска мобильного приложения. Отладка мобильного приложения на
устройстве, работающем под управлением ОС iOS, возможно только при ручном
запуске прикладного решения на мобильном устройстве. Более подробно про
управление отладкой на мобильном устройстве см. <a href="#_ref427322135">здесь</a>.</p>

<a id="TI000001603" class="bookmark" name="issogl5_разрешение_отладки_в_запущенном_клиентском_приложении"><h6>Разрешение отладки в запущенном клиентском приложении</h6></a>

<p class="MsoNormal">В
том случае, если необходимо выполнить отладку уже запущенного клиентского
приложения без разрешенного режима отладки, необходимо выполнить следующие
действия:</p>

<p class="MsoListNumberCxSpFirst">1.  Открыть
диалог настройки параметров клиентского приложения (команда <span class="Interface">Главное меню – Сервис –
Параметры</span>).</p>

<p class="MsoListNumberCxSpMiddle">2.  Свойство
<span class="Interface">Отладка в текущем сеансе</span> установить в значение <span class="Interface">Разрешена (протокол
HTTP)</span>.</p>

<p class="MsoListNumberCxSpMiddle">3.  В
свойстве <span class="Interface">Сервер отладки</span> указать адрес используемого сервера
отладки.</p>

<p class="MsoListNumberCxSpLast">4.  Нажать
кнопку <span class="Interface">ОK</span>. После разрешения отладки в текущем сеансе, отключить
ее или изменить протокол отладки невозможно.</p>

<p class="MsoNormal">Разрешение
отладки в запущенном экземпляре клиентского приложения не поддерживается при
использовании веб-клиента.</p>

<a id="TI000001604" class="bookmark" name="issogl5_отладка_кода_на_сервере1"><h6>Отладка кода на сервере</h6></a>

<p class="MsoNormalCxSpFirst">В
отладочном режиме загрузка объектов конфигурации производится по мере
необходимости, а не при начале работы системы, как в обычном режиме работы
сервера. Это ускоряет процесс запуска «1С:Предприятия» при изменении
конфигурации, то есть ускоряет процесс разработки.</p>

<p class="MsoNormalCxSpMiddle">Также
следует учитывать, что в отладочном режиме производительность системы будет
ниже, чем при обычной работе. Поэтому не рекомендуется использовать отладочный
режим работы сервера для реальной работы пользователей.</p>

<p class="MsoNormalCxSpLast">Расположение
и параметры конфигурационного файла <span class="Interface">srv1cv83</span>, а
также о параметрах командной строки запуска сервера «1С:Предприятия» можно
посмотреть <a href="/db/v8310doc/bookmark/cs/TI000000115" target="_top">в книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<p class="Lang">Сервер
как приложение</p>

<p class="MsoNormal">Если
сервер «1С:Предприятия» работает в режиме приложения (в любой ОС), то следует
остановить сервер и перезапустить его так, чтобы в числе параметров командной
строки был параметр <span class="Interface">/debug</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent /debug -http &lt;остальные параметры командной строки&gt;</pre>

<p class="MsoNormal">При
необходимости, в командной строке запуска сервера также необходимо указать
значения параметров <span class="Interface">/debugServerAddr</span>, <span class="Interface">/debugServerPort</span>
и <span class="Interface">/debugServerPwd</span>.</p>

<p class="Lang">Сервер
как служба ОС Windows</p>

<p class="MsoNormal">Если
сервер работает как служба ОС Windows, то необходимо выполнить следующие
операции:</p>

<p class="MsoListNumber">1.  Остановить
сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent –stop</pre>

<p class="MsoListNumber">2. 
Выполнить повторную регистрацию агента сервера в
качестве службы Windows таким образом, чтобы в числе параметров команды <span class="Interface">ragent</span> был
параметр <span class="Interface">/debug</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent /instsrvc /debug -http &lt;остальные параметры командной строки&gt;</pre>

<p class="Indentlist">При
необходимости, в командной строке регистрации сервера «1С:Предприятия» также
необходимо указать значения параметров <span class="Interface">/debugServerAddr</span>,
<span class="Interface">/debugServerPort</span> и <span class="Interface">/debugServerPwd</span>.</p>

<p class="MsoListNumber">3. 
Запустить сервер «1С:Предприятия».</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent /start</pre>

<p class="Lang">Сервер
как «демон» ОС Linux</p>

<p class="MsoNormal">Если
сервер «1С:Предприятия» работает в режиме приложения (в любой ОС), то следует
остановить сервер и перезапустить его так, чтобы в числе параметров командной
строки был параметр <span class="Interface">/debug</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">ragent /daemon /debug -http &lt;остальные параметры командной строки&gt;</pre>

<p class="MsoNormal">При
необходимости, в командной строке запуска сервера также необходимо указать
значения параметров <span class="Interface">/debugServerAddr</span>, <span class="Interface">/debugServerPort</span>
и <span class="Interface">/debugServerPwd</span>.</p>

<p class="Note"><span class="Note">внимание!</span> Если в ОС Linux настроен автоматический
запуск кластера серверов «1С:Предприятие» при старте ОС, то в этом случае не
поддерживается использование протокола отладки HTTP.</p>

<a id="TI000001605" class="bookmark" name="issogl5_отладка_внешнего_соединения1"><h6>Отладка внешнего соединения</h6></a>

<p class="MsoNormal">Для
указания внешнему соединению необходимости запуска в отладочном режиме используются
настройки, размещенные в xml-файле <span class="Interface">comcntrcfg.xml</span>,
который расположен в каталоге конфигурационных файлов системы «1С:Предприятие».
Если файл не найден, приложение открывается в обычном режиме.</p>

<p class="Lang-subheader">Пример
файла comcntrcfg.xml:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
&lt;config xmlns=&quot;http://v8.1c.ru/v8/comcntrcfg&quot;&gt;
    &lt;debugconfig debug=&quot;true&quot; protocol=&quot;http&quot; debuggerURL=&quot;http://pc-name:1561&quot;/&gt;
&lt;/config&gt;
</pre>

<p class="MsoNormalCxSpFirst">Подробнее о файле <span class="Interface">comcntrcfg.xml</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000375" target="_top">в книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpLast">Если
для элемента <span class="Interface">debug</span> указан атрибут <span class="Interface">debuggerURL</span>, то
к моменту обращения к внешнему соединению по указанному адресу должен быть
доступен сервер отладки. В противном случае внешнее соединение будет работать в
обычном режиме и его будет невозможно отладить.</p>

<a id="TI000001606" class="bookmark" name="issogl5_отладка_web-сервиса_http-сервиса_и_доступа_через_стандартный_интерфейс_odata1"><h6>Отладка Web-сервиса, HTTP-сервиса и доступа через стандартный интерфейс OData</h6></a>

<p class="MsoNormal">Для
указания сервису необходимости запуска в отладочном режиме (только для
файлового варианта информационной базы) используются настройки, размещенные в файле
<span class="Interface">default.vrd</span>, который должен располагаться в каталоге
виртуального приложения. В этом файле необходимо указать элемент <span class="Interface">debug</span>, отсутствие которого
означает невозможность отладки Web-сервиса.</p>

<p class="Lang-subheader">Пример
элемента debug из файла default.vrd:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">&lt;debug enable=&quot;true&quot; protocol=&quot;http&quot; url=&quot;http://pc-name:1561&quot;/&gt;</pre>

<p class="MsoNormalCxSpFirst">Подробнее
о файле <span class="Interface">default.vrd</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">в
книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpMiddle">Если
для элемента <span class="Interface">debug</span> указан атрибут <span class="Interface">url</span>, то в
момент обращения к сервису, по указанному адресу должен быть доступен сервер
отладки. Если на момент запуска приложения, сервер отладки будет недоступен, отладка
будет невозможна, и система будет работать в обычном режиме.</p>

<p class="MsoNormalCxSpLast">Для
необходимости отладки сервиса в клиент-серверном варианте информационной базы
следует включить режим отладки на сервере с помощью ключа командной строки <span class="Interface">/debug</span>.
Подробнее о ключах командной строки запуска сервера «1С:Предприятия» можно
посмотреть <a href="/db/v8310doc/bookmark/cs/TI000000116" target="_top">в книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<p class="Note"><span class="Note">Примечание.</span> Для отладки HTTP-сервиса и работы со
стандартным интерфейсом OData не рекомендуется использовать веб-браузер Microsoft
Internet Explorer 9.0, т. к. в данном веб-браузере имеются ошибки
кодирования URL.</p>

<a id="TI000001607" class="bookmark" name="issogl5_отладка_веб-клиента1"><h6>Отладка веб-клиента</h6></a>

<p class="MsoNormal">Если
веб-клиент запускается не из конфигуратора, то для отладки клиентской части
необходимо проделать следующие действия:</p>

<p class="MsoListNumberCxSpFirst">1.  Определить
адрес сервера отладки, с которым будет взаимодействовать отладчик. Описание
того, как это сделать см. <a href="#_ref421795881">здесь</a>.</p>

<p class="MsoListNumberCxSpLast">2. 
Открыть информационную базу в режиме
1С:Предприятие с указанием необходимости отладки:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">http://localhost/demo?debug=http,attach&amp;debuggerURL=&quot;addr&quot;</pre>

<p class="Indentlist">Значение
<span class="Interface">addr</span> получается на предыдущем шаге.</p>

<p class="MsoListNumber">3. 
В данном случае будет недоступна отладка
серверной части прикладного кода.</p>

<p class="MsoNormal">Если
необходимо включить отладку серверной части файлового варианта информационной
базы, то это можно сделать двумя способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Запустить отладку непосредственно из
конфигуратора (см. <a href="#_ref421796146">здесь</a>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Включить режим отладки с помощью файла <span class="Interface">default.vrd</span>,
который должен располагаться в каталоге виртуального приложения. В этом файле необходимо
указать элемент <span class="Interface">debug</span>, отсутствие которого означает
невозможность отладки Web-сервиса.</p>

<p class="Lang-subheader">Пример
элемента debug из файла default.vrd:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">&lt;debug enable=&quot;true&quot; protocol=&quot;http&quot; url=&quot;http://pc-name:1561&quot;/&gt;</pre>

<p class="Indentlist">Также
следует учитывать, что в отладочном режиме производительность системы будет
ниже, чем при обычной работе. Поэтому не рекомендуется использовать отладочный
режим работы серверной части файлового варианта работы для реальной работы
пользователей.</p>

<p class="MsoNormalCxSpFirst">Подробнее
о файле <span class="Interface">default.vrd</span> можно посмотреть <a href="/db/v8310doc/bookmark/adm/TI000000379" target="_top">в
книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<p class="MsoNormalCxSpLast">Во
время отладки веб-клиента нужно помнить следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
не поддерживается возможность интерактивного включения
режима отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается автоматический поиск предметов
отладки на удаленных компьютерах при отладке веб-клиента для файлового варианта
информационной базы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается активизация конфигуратора из
веб-клиента в процессе отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
не поддерживается отладка внешних отчетов и
обработок;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
в случае принудительного прекращения работы
веб-клиента из отладчика, прекращается работа того процесса веб-браузера, который
был запущен при старте веб-клиента из конфигуратора. Однако если веб-клиент стартует
во вкладке уже работающего веб-браузера, то принудительного закрытия вкладки не
происходит, а в окне отлаживаемого веб-клиента открывается диалоговое окно с
информацией о том, что веб-клиент завершается по требованию отладчика.</p>

<p class="NoteCxSpFirst"><span class="Note">Внимание!</span> Для отладки веб-клиента (в том числе и
клиентского программного кода) в клиент-серверном варианте необходимо, чтобы
сервер «1С:Предприятия» был запущен в отладочном режиме (ключ <span class="Interface">debug</span>).</p>

<p class="NoteCxSpLast"><span class="Note">Примечание.</span> Не рекомендуется использовать отладку
веб-клиента на низкоскоростных каналах связи.</p>

<p class="MsoNormal">Клиент-серверный
вариант работы подробнее описан <a href="/db/v8310doc/bookmark/cs/TI000000020" target="_top">в книге 1С:Предприятие 8.3. &quot;Клиент-серверный вариант. Руководство администратора&quot;</a>.</p>

<a id="TI000001608" class="bookmark" name="issogl5_отладка_внешней_обработки_отчета1"><h6>Отладка внешней обработки (отчета)</h6></a>

<p class="MsoNormal">Для
отладки внешнего отчета (обработки) необходимо соблюдение двух условий:</p>

<p class="MsoListNumberCxSpFirst">1.  Внешняя
обработка (отчет) открыта в клиентском приложении из конкретного места файловой
системы;</p>

<p class="MsoListNumberCxSpLast">2. 
Конфигуратор, который обслуживает предмет
отладки с отлаживаемой внешней обработкой (отчетом), имеет доступ именно к тому
файлу внешней обработки (отчета), который открыт клиентским приложением.</p>

<p class="MsoNormal">Если
эти условия не выполняются – отладка внешней обработки (отчета) будет
невозможна. В частности, не поддерживается отладка внешних обработок (отчетов),
расположенных в информационной базе. В этом случае рекомендуется извлечь
внешнюю обработку (отчет) из информационной базы на время отладки.</p>

<a name="_ref427322135"></a><a id="TI000001715" class="bookmark" name="issogl5_отладка_мобильного_приложения"><h6>Отладка мобильного приложения</h6></a>

<p class="Lang-parameter">Отладка
при запуске из конфигуратора</p>

<p class="MsoNormalCxSpFirst">Для
запуска отладки из Конфигуратора может использоваться только платформа
разработчика.</p>

<p class="MsoNormalCxSpMiddle">Запуск
отладки мобильного приложения из Конфигуратора поддерживается только для
устройств, работающих под управлением ОС Android. В этом случае устройство
должно быть подключено к персональному компьютеру, на котором работает Конфигуратор,
с помощью USB-кабеля, а в настройках запуска мобильного приложения
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref374531917">здесь</a>) должно быть настроено использование Android Debug
Bridge для запуска мобильного приложения. В этом случае в качестве адреса
сервера отладки используется адрес Конфигуратора, из которого выполняется
запуск отладки.</p>

<p class="MsoNormalCxSpLast">Признак
разрешения отладки и адрес отладчика, указанный в одноименном свойстве
информационной базы, игнорируется.</p>

<p class="Lang-parameter">Отладка
при публикации на веб-сервере</p>

<p class="MsoNormalCxSpFirst">Для
запуска отладки из Конфигуратора может использоваться только платформа
разработчика.</p>

<p class="MsoNormalCxSpLast">Первый
запуск мобильного приложения выполняется на мобильном устройстве вручную. При
первом запуске мобильное приложение использует свойства информационной базы для
определения состояния отладки. Если в настройках информационной базы
установлено свойство <span class="Interface">Перезапуск из конфигуратора</span>, то
состояние отладки при перезапуске будет определяться тем, каким образом был
инициирован этот перезапуск в конфигураторе. Мобильное приложение будет
перезапущено в режиме отладки в том случае, если перезапуск инициирован из
конфигуратора командой <span class="Interface">Начать отладку</span>.
В остальных случаях перезапущенное мобильное приложение будет недоступно для
отладки.</p>

<p class="Note"><span class="Note">внимание!</span> Установка в настройках информационной базы
свойства <span class="Interface">Перезапуск из конфигуратора</span> фактически разрешает отладку
мобильного приложения. Следует аккуратно использовать данную возможность при
отладке мобильных приложений с реальными конфиденциальными данными во избежание
несанкционированного доступа к таким данным.</p>

<p class="MsoNormal">Признак
разрешения отладки и адрес отладчика, указанный в одноименном свойстве
информационной базы, игнорируется (кроме первого запуска мобильного приложения).</p>

<p class="Lang-parameter">Отладка
собранного мобильного приложения</p>

<p class="MsoNormalCxSpFirst">Для
запуска отладки из Конфигуратора может использоваться только собранное
мобильное приложение.</p>

<p class="MsoNormalCxSpLast">Мобильное
приложение может быть запущено только на самом мобильном устройстве. Состояние
отладки определяется настройками используемой информационной базы.</p>

<p class="Lang-parameter">Установка
разрешения отладки и адреса сервера отладки</p>

<p class="MsoNormalCxSpFirst"> </p>

<p class="MsoNormalCxSpLast">Для
установки параметров, управляющих отладкой, необходимо открыть список
информационных баз, найти в списке требуемую базу и в свойствах этой
информаиоцнной базы выполнить следующие действия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Включить переключатель <span class="Interface">Отладка разрешена</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Установить адрес сервера отладки в поле <span class="Interface">Адрес отладки</span>. Адрес
используемого сервера отладки следует получить в конфигураторе, в свойстве <span class="Interface">Сервер отладки</span>
диалога <span class="Interface">Настройка отладчика</span>, который доступен при исполнении
следующей команды <span class="Interface">Главное меню – Отладка – Подключение –
Настройка</span>.</p>

<p class="MsoNormal">Следует
помнить, что настройки отладки, указанные в свойствах информаицонной базы,
могут игнорироваться в некоторых режимах работы (описано выше в данном
разделе).</p>

<a id="TI000001609" class="bookmark" name="issogl4_28.2.2.2.3_подключение_предметов_отладки"><h5>28.2.2.2.3. Подключение предметов отладки</h5></a>

<p class="Regularbeforepicture">Для
выполнения отладки модуля нужно, чтобы предмет отладки был подключен. Для
управления подключением нужно выбрать пункт <span class="Interface">Отладка – Подключение</span>.
На экран выводится окно для выбора предмета отладки. В список <span class="Interface">Доступные предметы
отладки</span> попадают предметы отладки, которые зарегистрированы на
используемом сервере отладки для информационной базы, которая указана в
настройках (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref421706974">здесь</a>) данного отладчика (конфигуратора):</p>

<p class="Picture"><IMG src="_img/img00570.gif?_=1496848987" WIDTH="626" ALT HEIGHT="360"></p>

<p class="MsoCaption">Рис.
562. Предметы отладки</p>

<p class="MsoNormal">Из
списка <span class="Interface">Доступные предметы отладки</span> исключаются:</p>

<p class="MsoListNumberCxSpFirst">1.  Подключенные
предметы отладки (отображаются в списке <span class="Interface">Подключенные предметы
отладки</span>);</p>

<p class="MsoListNumberCxSpLast">2.  Те
предметы отладки, которые не соответствуют отбору, установленному в правой
верхней части окна. Отбор предназначен только для визуального ограничения
списка. Предметы отладки, не соответствующие отбору, все равно являются доступными
для использования и после отключения отбора сразу появятся в списке доступных
предметов отладки.</p>

<p class="MsoNormalCxSpFirst">Нажатие
кнопки <span class="Interface">Подключить</span> подключает к отладчику выбранный предмет
отладки. В окне подключения это отображается переносом предмета отладки из
списка доступных в список подключенных предметов отладки.</p>

<p class="MsoNormalCxSpMiddle">Для
исключения предмета отладки нужно указать его в списке подключенных и нажать
кнопку <span class="Interface">Отключить</span>. В окне подключения это отображается переносом
предмета отладки из списка подключенных в список доступных предметов, и к нему
можно повторно подключиться. При этом точки останова, установленные в
отключенных предметах отладки, не будут «срабатывать» при прохождении
выполнения через них.</p>

<p class="MsoNormalCxSpLast">Для
закрытия предмета отладки следует нажать кнопку <span class="Interface">Завершить</span>, для
останова в месте выполнения – кнопку <span class="Interface">Остановить</span>.</p>

<p class="Regularbeforepicture">Чтобы
открыть диалог с информацией об используемом сервере отладки, следует нажать
кнопку <span class="Interface">Настройки</span>. В открывшемся диалоге будут отображаться
адрес сервера отладки и имя информационной базы.</p>

<p class="Picture"><IMG src="_img/img00571.gif?_=1496848987" WIDTH="712" ALT HEIGHT="329"></p>

<p class="MsoCaption">Рис.
563. Информация о сервере отладки</p>

<p class="Regularbeforepicture">Для
автоматического подключения предметов отладки к текущему отладчику, можно
воспользоваться диалогом <span class="Interface">Автоматическое
подключение</span> и настроить в нем нужные отборы.</p>

<p class="Picture"><IMG src="_img/img00572.gif?_=1496848987" WIDTH="663" ALT HEIGHT="418"></p>

<p class="MsoCaption">Рис.
564. Фильтр предметов отладки для автоматического подключения</p>

<p class="MsoNormal">В
левой части диалога (<span class="Interface">Типы предметов отладки</span>) можно указать,
какие типы предметов отладки будут автоматически подключаться к текущему
отладчику сразу после своей регистрации на используемом сервере отладки. Можно
отметить несколько типов предметов отладки. Так, если будет отмечен тип предмета
отладки <span class="Interface">Фоновое задание</span>, то это означает, что как только на сервере
«1С:Предприятия», который работающет в режиме отладки, начнет исполняться
фоновое задание, оно автоматически будет подключено к текущему отладчику.</p>

<p class="Regularbeforepicture">В
правой части диалога можно указать дополнительный отбор предметов отладки (<span class="Interface">Отборы предметов
отладки</span>). В дополнительный отбор предметов отладки, кроме указания типов
предметов отладки, дополнительно входит отбор по пользователям, а также по
значениям разделителей.</p>

<p class="Picture"><IMG src="_img/img00573.gif?_=1496848987" WIDTH="397" ALT HEIGHT="636"></p>

<p class="MsoCaption">Рис.
565. Отбор предметов отладки</p>

<p class="MsoNormalCxSpFirst">Предмет
отладки будет автоматически подключен к отладчику в том случае, если он
соответствует одному из включенных отборов: этот предмет отладки соответствует
отбору по типам предметов, работает от имени указанного (или одного из
указанных) пользователей и разделители установлены в указанные значения.</p>

<p class="MsoNormalCxSpMiddle">Фильтр,
который настраивается в диалоге <span class="Interface">Автоматическое
подключение предметов отладки на сервере отладки</span> объединяет фильтр по
типам отладки и по отборам предметов отладки «по ИЛИ». Т.е. предмет отладки
будет автоматически подключен, если он соответствует одному из установленных
типов отладки ИЛИ соответствует одному из включенных отборов.</p>

<p class="MsoNormalCxSpMiddle">Значения,
установленные в данном диалоге, начинают работать сразу и до следующей смены
настроек.</p>

<p class="MsoNormalCxSpLast">Для
фильтрации доступных предметов отладки используется общий список. Список
отборов предметов отладки можно выгрузить в файл и загрузить из файла.</p>

<a name="_ref274145651"></a><a id="TI000001610" class="bookmark" name="issogl4_28.2.2.2.4_сервер_отладки"><h5>28.2.2.2.4. Сервер отладки</h5></a>

<a name="_ref454887853"></a><a id="TI000001611" class="bookmark" name="issogl5_общая_информация2"><h6>Общая информация</h6></a>

<p class="MsoNormalCxSpFirst">Сервер
отладки (<span class="Interface">dbgs</span>) – специальное
приложение, которое выступает посредником между отладчиком и различными предметами
отладки (подробнее см. <a href="#_ref421720545">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Сервер
отладки может быть запущен несколькими способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Конфигуратором, при отладке прикладного решения
в файловом варианте.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Кластером серверов в том случае, если для
кластера включен режим отладки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Прикладным разработчиком в случае необходимости
реализации сложных сценариев отладки. В этом случае имеется возможность также
зарегистрировать сервер отладки в качестве сервиса операционной системы (для ОС
Windows) или запускать его как «демона» (для ОС Linux).</p>

<p class="MsoNormalCxSpFirst">В
том случае, если сервер отладки запускается другими компонентами системы «1С:Предприятие»,
все необходимые параметры сервера отладки автоматически устанавливаются этими
компонентами.</p>

<p class="MsoNormalCxSpLast">В
тех случаях, когда возникает необходимость вручную запускать сервер отладки,
следует использовать командную строку, в которой могут быть указаны следующие
параметры:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
dbgs --version --help
    --service | --daemon
    --addr=&lt;host&gt;
    --port=&lt;port&gt;|--range=&lt;range&gt;
    --ownerPID=&lt;PID&gt;
    --password=&lt;pwd&gt;
    --notify=&lt;file&gt;
</pre>

<p class="Lang-parameter">--version или -v</p>

<p class="MsoNormal">Отображает
версию сервера отладки.</p>

<p class="Lang-parameter">--help или -h или -?</p>

<p class="MsoNormal">Отображает
краткую справочную информацию о параметрах командной строки запуска сервера
отладки.</p>

<p class="Lang-parameter">--service    только
для ОС Windows</p>

<p class="MsoNormalCxSpFirst">Регистрирует
сервер отладки в качестве сервиса ОС Windows.</p>

<p class="MsoNormalCxSpLast">Ключ
<span class="Interface">--service</span>
несовместим с ключом <span class="Interface">--daemon</span>.</p>

<p class="Lang-parameter">--daemon    только
для ОС Linux</p>

<p class="MsoNormalCxSpFirst">Данный
ключ позволяет запустить сервер отладки в режиме «демона» ОС Linux, т. е.
в режиме фонового приложения, не выполняющего взаимодействия с терминалом,
откуда это приложение запущено. Запуск сервера отладки с этим ключом не
означает, что после перезагрузки системы агент сервера будет автоматически запущен
на исполнение.</p>

<p class="MsoNormalCxSpLast">Ключ
<span class="Interface">--daemon</span>
несовместим с ключом <span class="Interface">--service</span>.</p>

<p class="Note"><span class="Note">Примечание.</span> При запуске сервера отладки в качестве
сервиса или «демона», следует помнить, что через такой сервер отладки можно
отлаживать предметы отладки информационных баз в файловом варианте и клиентские
предметы отладки клиент-серверных информаицонных базы. Не поддерживается
отладка серверных предметов отладки клиент-серверных информаицонных баз через
такой сервер отладки.</p>

<p class="Lang-parameter">--addr=&lt;host&gt; или -a &lt;host&gt;</p>

<p class="MsoNormal">Позволяет
указать IP-адрес, который будет являться адресом сервера отладки. Имеет смысл в
том случае, если на компьютере установлено несколько сетевых карт с разными
IP-адресами. Если IP-адрес не указан, то будет использован адрес произвольной
сетевой карты.</p>

<p class="Lang-parameter">--port=&lt;port&gt; или -p &lt;port&gt;</p>

<p class="MsoNormalCxSpFirst">Порт,
по которому будет выполняться соединение с сервером отладки. Если указанный
порт будет недоступен, то сервер отладки не запустится и отладка будет
невозможна. Порт необходимо указывать явно, значение по умолчанию отсутствует.
При запуске сервера отладки кластером серверов будет использоваться порт 1550,
который по умолчанию устанавливается кластером и может быть переопределен при
помощи ключей запуска кластера серверов.</p>

<p class="MsoNormalCxSpLast">Если
одновременно указаны одновременно параметры <span class="Interface">--port</span> и <span class="Interface">--range</span>, то
параметр <span class="Interface">--port</span> будет
игнорирован.</p>

<p class="Lang-parameter">--range=&lt;range&gt; или -r &lt;range&gt;</p>

<p class="MsoNormalCxSpFirst">Указывает
диапазон портов, из которых будет выбран порт, по которому будет выполняться
соединение с сервером отладки. Если все порты, указанные в данном параметре,
будут недоступны, то сервер отладки не запустится и отладка будет невозможна.</p>

<p class="MsoNormalCxSpMiddle">Диапазон
портов указывается с помощью символа &quot;<span class="Interface">:</span>&quot;,
несколько диапазонов (или конкретных портов) разделяются символом &quot;<span class="Interface">,</span>&quot;.
Например: <span class="Interface">2560:2590, 4567,
9000:12000</span>. В данном примере для выбора порта будут использоваться порты
в интервале от 2560 до 2590, порт 4567 и порты в интервале от 9000 до 12000. В
результате будет выбран один порт, который и будет использоваться в работе.
Информация о выбранном порте (вместе с адресом сервера отладки) будет записана
в файл, указанный с помощью параметра <span class="Interface">--notify</span>.</p>

<p class="MsoNormalCxSpLast">Если
одновременно указаны одновременно параметры <span class="Interface">--port</span> и <span class="Interface">--range</span>, то
параметр <span class="Interface">--port</span> будет
игнорирован.</p>

<p class="Lang-parameter">--ownerPID=&lt;PID&gt; или -opid &lt;PID&gt;</p>

<p class="MsoNormalCxSpFirst">В
данном параметре указывается идентификатор процесса операционной системы, время
жизни которого определяет время жизни процесса сервера отладки. Сервер отладки
отслеживает состояние процесса с указанным идентификатором. После завершения
этого процесса также завершит свою работу. При этом все процессы отладки,
которые выполняются через данный сервер отладки, также будут завершены.</p>

<p class="MsoNormalCxSpLast">При
отладке файловой информационной базы конфигуратор автоматически устанавливает
для этого параметра собственный идентификатор процесса, а при запуске из
кластера серверов в данный параметр устанавливается идентификатор процесса менеджера
кластера (<span class="Interface">rmngr</span>).</p>

<p class="Lang-parameter">--password=&lt;pwd&gt; или -pwd &lt;pwd&gt;</p>

<p class="MsoNormal">Пароль
доступа к серверу отладки. Указанный пароль будет необходимо указывать для всех
отладчиков, которые хотят отлаживаться с помощью этого сервера отладки.</p>

<p class="Lang-parameter">--notify=&lt;file&gt;</p>

<p class="MsoNormal">Полное
имя файла, в который сервер отладки помещает свой адрес. Конфигуратор или
менеджер кластера считывает информацию об адресе сервера отладки и удаляет
данный файл.</p>

<a name="_ref421795881"></a><a id="TI000001612" class="bookmark" name="issogl5_получение_адреса_отладчика"><h6>Получение адреса отладчика</h6></a>

<p class="MsoNormal">Чтобы
получить адрес сервера отладки, с которым будет взаимодействовать отладчик
конфигуратора, необходимо выполнить следующие действия:</p>

<p class="MsoListNumberCxSpFirst">1.  Открыть
диалог подключения предметов отладки <span class="Interface">Главное меню – Отладка –
Подключение…</span>;</p>

<p class="MsoListNumberCxSpMiddle">2.  Нажать
кнопку <span class="Interface">Настройки…</span>;</p>

<p class="MsoListNumberCxSpLast">3.  Скопировать
информацию из строки <span class="Interface">Сервер отладки:</span>.</p>

<a id="TI000001613" class="bookmark" name="issogl5_проверка_работоспособности_сервера_отладки"><h6>Проверка работоспособности сервера отладки</h6></a>

<p class="MsoNormal">Проверку
работоспособности сервера отладки можно выполнить следующим образом:</p>

<p class="MsoListNumberCxSpFirst">1.  Получить
адрес сервера отладки, например в конфигураторе.</p>

<p class="MsoListNumberCxSpMiddle">2.  Ввести
полученный адрес в строку адреса любого веб-браузера.</p>

<p class="MsoListNumberCxSpLast">3.  Сервер
отладки функционирует нормально, если веб-браузер отображает информацию
следующего вида:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">1C:Enterprise 8.3 Debug Server (8.3.7.1140) © '1C' 1996-2015 – it works!</pre>

<a name="_ref421700594"></a><a id="TI000001042" class="bookmark" name="issogl2_28.2.3_точка_останова"><h3>28.2.3. Точка останова</h3></a>

<p class="MsoNormal"><span class="Bold">Точка останова</span> – это место в программном модуле, в котором
исполнение программного модуля останавливается и управление передается
отладчику.</p>

<p class="Regularbeforepicture">В
левой колонке текста модуля специальными значками показываются текущая точка
останова, места останова и состояние точек останова.</p>

<p class="Picture"><IMG src="_img/img00574.gif?_=1496848987" WIDTH="325" ALT HEIGHT="278"></p>

<p class="MsoCaption"><a name="_ref216238041">Рис. </a>566. Виды точек
останова</p>

<p class="MsoNormalCxSpFirst">Точку
останова можно установить в любой строке модуля, в любой момент работы с
отладчиком. В том случае, если строка, на которой устанавливается точка
останова, не содержит операторов (например, пустая строка), содержит неисполняемый
текст (например, заголовок процедуры или функции, определение переменных) или является
продолжением оператора, начатого на предыдущих строках, положение точки
останова будет автоматически скорректировано. Место нахождения точки останова отмечается
специальным знаком в левой колонке окна модуля. Для включенных и отключенных
точек останова используются разные знаки (см. <a href="#_ref216238041">рис.566</a>).</p>

<p class="MsoNormalCxSpLast">Точку
останова можно также установить или снять с помощью мыши. Для этого в серой
области строки, в которой требуется установить точку останова, нужно дважды щелкнуть
левой кнопкой мыши.</p>

<p class="Regularbeforetable">Для
управления точками останова используются следующие команды меню <span class="Interface">Отладка</span>
главного меню конфигуратора:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Команда</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Пояснение</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Точка останова</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Устанавливает либо стирает точку останова
  на той строке, на которой стоит курсор </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Точка останова</span></p>
  <p class="MsoNormalCxSpMiddle"><span class="Interface">с условием</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Устанавливает точку останова и открывает
  диалог для ввода условия останова – логического выражения. Если условие
  было введено, то открывается диалог для редактирования условия. Если в данной
  строке точка останова была установлена, то открывается диалог для ввода
  условия останова и ставится условие для точки останова с условием. Останов в
  указанной точке будет выполняться только в том случае, если условие останова
  истинно</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Отключить точку
  останова</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Включает либо отключает действие точки
  останова. Доступна, если в текущей строке есть точка останова </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Убрать все точки
  останова</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Стирает все ранее расставленные точки
  останова во всех модулях</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Отключить все точки
  останова</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Запрещает действия всех ранее
  расставленных точек останова во всех модулях, не удаляя их</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Список точек
  останова</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Просмотр и управление точками управления</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Останавливаться</span></p>
  <p class="MsoNormalCxSpMiddle"><span class="Interface">по ошибке</span> </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">При возникновении ошибки отладчик останавливает
  выполнение и переходит к строке модуля, вызвавшей ошибку</p>
  </td>
  
 </tr>
</table>

<p class="Regularbeforepicture">Установленные
точки останова запоминаются при закрытии конфигурации. Для просмотра списка
точек останова нужно открыть конфигурацию и выбрать пункт меню <span class="Interface">Отладка – Список
точек останова</span>.</p>

<p class="Picture"><IMG src="_img/img00575.gif?_=1496848987" WIDTH="562" ALT HEIGHT="391"></p>

<p class="MsoCaption"><a name="_ref216238417">Рис. </a>567. Список точек
останова</p>

<p class="MsoNormalCxSpFirst">С
помощью флажков в колонке <span class="Interface">Вкл./выкл.</span> можно управлять состоянием выбранной точки
останова. Если флажок установлен, то при отладке на данной точке отладчик выполнит
остановку.</p>

<p class="MsoNormalCxSpLast">Назначение
остальных кнопок описано на <a href="#_ref216238417">рис.567</a>.</p>

<a name="_ref421700583"></a><a id="TI000001043" class="bookmark" name="issogl2_28.2.4_пошаговое_выполнение"><h3>28.2.4. Пошаговое выполнение</h3></a>

<p class="MsoNormalCxSpFirst">В
режиме пошагового исполнения предмет отладки, выполнив очередную команду, ждет
от отладчика инструкций о продолжении работы.</p>

<p class="MsoNormalCxSpLast">В
момент подключения первого из предметов отладки в меню <span class="Interface">Отладка</span> система
добавляет пункты, с помощью которых осуществляется управление процессом
отладки.</p>

<p class="Regularbeforetable">На
каждом шаге исполнения модуля существует несколько вариантов продолжения. Для
выбора варианта продолжения используются пункты меню <span class="Interface">Отладка</span>. </p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Команда</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Пояснение</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Шагнуть в</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Если следующим выполняемым оператором
  модуля является вызов функции или процедуры, начинается ее пошаговое
  выполнение, иначе отладчик переходит к следующему оператору</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Шагнуть<br>
  через</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Если следующим выполняемым оператором
  модуля является вызов функции или процедуры, она выполняется целиком (не
  пошагово) и отладчик переходит к следующему оператору</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Шагнуть из</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Прервать пошаговое выполнение функции или
  процедуры и остановиться на первом операторе, находящемся после ее вызова</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Идти<br>
  до курсора</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Прервать пошаговое выполнение модуля,
  выполнять все операторы до той строки, на которой стоит курсор</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><span class="Interface">Продолжить</span></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Прервать пошаговое выполнение модуля и
  продолжить свободное выполнение</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast">При
отладке прикладных решений необходимо помнить следующую особенность: если в
отлаживаемом программном коде встречается оператор <span class="Term">Выполнить()</span>, то:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
не поддерживается пошаговое исполнение
программного кода, переданного в качестве параметра оператора (включая вызовы
процедур и функций);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
поддерживается прерывание исполнения
программного кода с помощью точек останова, которые расположены внутри процедур
и функций, вызываемых из программного кода, переданного в качестве параметра
оператора <span class="Term">Выполнить()</span>.</p>

<p class="MsoNormal">Если
выполняется отладка сразу нескольких предметов отладки, то существует ряд
особенностей пошагового выполнения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
если выполнена остановка одного предмета
отладки, при начале исполнения кода останавливаются и другие;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
выполнение команды <span class="Interface">Продолжить</span> приводит
к продолжению выполнения всех предметов отладки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
выполнение команды <span class="Interface">Шагнуть через</span>
приводит к исполнению продвижения на следующую строку во всех предметах отладки;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
выполнение команды <span class="Interface">Шагнуть в</span> (если
выполняемым оператором модуля является вызов функции или процедуры) приводит к
переходу на первый оператор внутри этого вызова, для других предметов отладки
всегда выполняется команда <span class="Interface">Шагнуть через</span>.</p>

<p class="MsoNormal">Если
производится отладка клиент-серверного варианта и код последовательно
выполняется на клиенте и на сервере (подключение клиентского и серверного
предметов отладки выполнено), то:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
выполнение команды <span class="Interface">Шагнуть в</span> (если
выполняемым оператором модуля является вызов функции или процедуры, исполняемой
на сервере) приводит к переходу на первый оператор внутри этого вызова;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
выполнение команды <span class="Interface">Шагнуть из</span> или
команды <span class="Interface">Шагнуть через</span> для последнего исполняемого оператора (если
выполняемым оператором модуля является код функции или процедуры, исполняемый
на сервере и вызванной из модуля, выполняемого в клиентском приложении) приводит
к переходу на следующий исполняемый оператор внутри этого вызова.</p>

<p class="MsoNormalCxSpFirst">Для
выбора текущего предмета отладки выводится специальная панель инструментов <span class="Interface">Предметы отладки</span>.
Панель состоит из единственного поля выбора, в котором показывается текущий
предмет отладки. Это поле выбора доступно только тогда, когда управление
работой какого-либо из подключенных предметов отладки находится в отладчике
(например, после срабатывания точки останова). При этом в список предметов
отладки попадут только те предметы, управление исполнением которых сейчас также
находится в отладчике, включая текущий предмет отладки.</p>

<p class="MsoNormalCxSpMiddle">С
помощью табло и диалога <span class="Interface">Выражение</span> можно получить значения интересующих выражений
(см. <a href="#_ref270676151">здесь</a>). <span class="Interface">Стек вызовов</span> позволяет проследить
последовательность вызова процедур и функций (см. <a href="#_ref270676170">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Если
выполняется пошаговый процесс выполнения, то стек вызова, значения переменных
(в табло и в окне <span class="Interface">Выражение</span>) показываются для текущего предмета отладки.
При смене предмета отладки стек вызова и значения переменных также меняются.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span> Если выполнено подключение клиентского и серверного
предметов отладки и осуществлен переход из клиентской части в серверную, то на
клиентских уровнях стека вызова любые вычисления не выполняются. Такие уровни
выводятся в окне стека вызовов серым цветом.</p>

<p class="MsoNormalCxSpFirst">Если
необходимо продолжить выполнение модуля, то с помощью команды <span class="Interface">Отладка – Продолжить
отладку</span> нужно разрешить подключенным предметам отладки свободное выполнение
модуля (до следующей точки останова). Если для отладки подключено клиентское
приложение, то оно активизируется автоматически.</p>

<p class="MsoNormalCxSpMiddle">Чтобы
прервать процесс отладки в целом (кроме фоновых заданий), нужно снять все точки
останова со всех модулей и выполнить команду <span class="Interface">Отладка – Продолжить
отладку</span>, если в данный момент сработала точка останова. Если необходимо
прервать отладку и завершить работу подключенных предметов отладки, следует
воспользоваться командой <span class="Interface">Отладка – Завершить</span>. В последнем случае не будут
выполнены процедуры <span class="Term">ПередЗавершениемРаботыСистемы()</span>
и <span class="Term">ПриЗавершенииРаботыСистемы()</span>.</p>

<p class="MsoNormalCxSpLast">В
процессе отладки допускается редактирование текущей конфигурации и сохранение
изменений.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span> Хотя в процессе отладки возможно редактирование
отлаживаемого модуля, отладчик не производит компилирование измененного
кода – продолжается отладка кода конфигурации базы данных (на момент
запуска отладчика или подключения). Для отладки изменений, внесенных в
конфигурацию, необходимо выполнить обновление конфигурации базы данных.</p>

<p class="MsoNormalCxSpFirst">Если
в режиме 1С:Предприятие устанавливается монопольный режим, то сохранение
текущей конфигурации невозможно до тех пор, пока монопольный режим не будет
снят.</p>

<p class="MsoNormalCxSpMiddle">Если
файловый вариант информационной базы находится в состоянии пошагового
выполнения кода на встроенном языке или стоит на точке останова и при этом
существует открытая транзакция (явная или неявная), то выполнение некоторых
операций (например, попытка захвата объектов в хранилище конфигурации) может
сопровождаться ошибкой: <span class="Interface">Ошибка операции с хранилищем конфигурации. (Ошибка при
выполнении сбора информации для хранилища конфигурации) Конфликт блокировок при
выполнении транзакции. Не удалось заблокировать таблицу FILES. Перед повтором
операции рекомендуется завершить работу клиентского приложения</span>. Для
выполнения операции, во время которой произошла ошибка, следует продолжить
выполнение кода на встроенном языке до момента завершения транзакции.</p>

<p class="MsoNormalCxSpLast">Таблицу
сочетаний клавиш для работы с отладчиком можно получить в справке при
использовании программы.</p>

<a id="TI000001044" class="bookmark" name="issogl2_28.2.5_отладка_внешних_обработок_отчетов"><h3>28.2.5. Отладка внешних обработок (отчетов)</h3></a>

<p class="MsoNormalCxSpFirst">Для
отладки модулей внешней обработки (отчета) необходимо открыть файл внешней
обработки в конфигураторе, воспользовавшись пунктом <span class="Interface">Файл – Открыть</span>.</p>

<p class="MsoNormalCxSpLast">В
дальнейшем с модулями внешней обработки (отчета) в отладчике можно работать так
же, как и с любым другим модулем.</p>

<a id="TI000001045" class="bookmark" name="issogl2_28.2.6_управление_отладкой"><h3>28.2.6. Управление отладкой</h3></a>

<p class="MsoNormalCxSpFirst">Команда
<span class="Interface">Отладка – Перезапустить</span> прекращает выполнение
конфигурации и производит повторный ее запуск в режиме 1С:Предприятие. Если
конфигурация была модифицирована, то на экран выдается запрос о необходимости
провести обновление конфигурации базы данных.</p>

<p class="MsoNormalCxSpMiddle">Команда
<span class="Interface">Отладка – Завершить</span> прекращает выполнение модуля и
заканчивает работу текущего предмета отладки.</p>

<p class="MsoNormalCxSpMiddle">Команда
<span class="Interface">Отладка – Остановить</span> останавливает выполнение
модуля на текущем операторе. Данная команда позволяет начать отладку модуля со
следующей исполняемой строки. Эта команда полезна при анализе «зацикливания»
модуля.</p>

<p class="MsoNormalCxSpMiddle">Команда
<span class="Interface">Отладка – Остановка по ошибке</span> открывает диалоговое
окно настройки остановки по ошибке.</p>

<p class="MsoNormalCxSpMiddle">Положение
флажка <span class="Interface">Остановка по ошибке</span> определяет, будет ли приостановлена
отладка, если в процессе выполнения произошла ошибка. При остановке по ошибке
на экран выводится предупреждение: <span class="Interface">Ошибка времени выполнения</span>, и
приводится поясняющий текст о месте и причине возникновения ошибки.</p>

<p class="MsoNormalCxSpMiddle">Если
установлен флажок <span class="Interface">Останавливаться только на ошибках, содержащих текст</span>, то
отладка будет остановлена в месте ошибки (если сообщение об ошибке содержит указанную
в табличном поле подстроку). Если этот флажок не установлен, то остановка по
ошибке будет происходить независимо от текста сообщения об ошибке. При этом
указанная подстрока будет учитываться, только если флажок напротив нее установлен.</p>

<p class="MsoNormalCxSpLast">На
месте возникновения ошибки устанавливается текущая точка исполнения текущего
предмета отладки, а предмет отладки, в котором произошла ошибка, становится
текущим. Просмотр значений выражений и переменных позволяет установить причину
возникновения ошибки.</p>

<a name="_ref270676151"></a><a name="_ref414272568"></a><a name="_ref414272567"></a><a id="TI000001046" class="bookmark" name="issogl2_28.2.7_окно_выражение"><h3>28.2.7. Окно «Выражение»</h3></a>

<p class="Regularbeforepicture">Во
время пошагового выполнения имеется возможность рассчитать выражение с помощью
окна <span class="Interface">Выражение</span>. Это окно вызывается на экран выбором пункта <span class="Interface">Отладка – Вычислить
выражение</span>.</p>

<p class="Picture"><IMG src="_img/img00576.gif?_=1496848987" WIDTH="672" ALT HEIGHT="360"></p>

<p class="MsoCaption">Рис.
568.
Вычислить выражение</p>

<p class="MsoNormalCxSpFirst">В
поле <span class="Interface">Выражение</span> этого окна необходимо ввести выражение на
встроенном языке системы «1С:Предприятие». Выражение можно ввести «вручную» или
из списка ранее введенных выражений.</p>

<p class="MsoNormalCxSpMiddle">Если
при вызове окна <span class="Interface">Выражение</span> курсор в окне модуля находился на каком-либо
выражении или выражение было выделено, оно автоматически подставляется в поле <span class="Interface">Выражение</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
вычисления выражения следует нажать кнопку <span class="Interface">Рассчитать</span>.
Результат вычисления выражения будет выдан в поле <span class="Interface">Значение</span>.
Следует понимать, что вычисление выражений выполняется в реальной системе,
поэтому возможны различные побочные эффекты. Так, например, если рассчитываемое
выражение анализирует наличие в информационной базе какого-то элемента, и
создает нужный элемент при его отсутствии, то такое выражение будет выполнено «по
пути» создания только один раз. Это связано с тем, что после первого выполнения
нужный элемент будет создан в реальной информационной базе.</p>

<p class="MsoNormalCxSpMiddle">Кнопка
<span class="Interface">Включить в табло</span> помещает введенное выражение в табло.
Это позволит в дальнейшем прослеживать изменение результата вычисления
выражения в процессе отладки модуля. При этом выражение размещается в новой
строке табло. Если окна табло на экране нет, то оно открывается.</p>

<p class="MsoNormalCxSpMiddle">Если
выражение имеет тип <span class="Term">Строка</span>
или представляет собой коллекцию значений или массив, то становится доступной
кнопка панели инструментов <span class="Interface">Показать значение</span> в отдельном окне.</p>

<p class="MsoNormalCxSpMiddle">Для
удобства просмотра длинных строк выводится окно <span class="Interface">Просмотр значения</span>
выражения. Окно содержит элемент управления типа <span class="Interface">Надпись</span>, в
которое выводится значение строки для просмотра.</p>

<p class="MsoNormalCxSpLast">Для
удобства просмотра коллекции значений или массива выводится окно, содержащее
табличное поле, колонки которого соответствуют именам реквизитов, а строки содержат
значения. Выводится количество элементов коллекции, а в первой колонке указывается
индекс каждого элемента коллекции.</p>

<p class="Regularbeforepicture">Если,
в свою очередь, конкретное значение также является коллекцией значений или
массивом, а также строкой, то возможен просмотр этих значений в отдельном окне
(как показано на <a href="#_ref212459584">рис.569</a>). Для этого следует выбрать нужное значение и в
контекстном меню выбрать пункт <span class="Interface">Показать значение в отдельном окне</span>
или нажать клавишу <span class="Interface">F2</span>.</p>

<p class="Picture"><IMG src="_img/img00577.gif?_=1496848987" WIDTH="671" ALT HEIGHT="460"></p>

<p class="MsoCaption"><a name="_ref212459584">Рис. </a>569. Отображение значений</p>

<p class="MsoNormalCxSpFirst">Для
строки выводится окно, в котором значение строкового выражения выводится в
многострочное поле. Это значение можно поместить в буфер обмена.</p>

<p class="MsoNormalCxSpMiddle">Содержимое
табличного поля результата расчета можно вывести в текстовый или табличный
документ по кнопке <span class="Interface">Вывести список</span>. Если вычисленное значение представлено в
виде дерева, то будут выводиться данные только раскрытых строк данного дерева.</p>

<p class="MsoNormalCxSpMiddle">Текущее
значение выражения можно также посмотреть, подведя указатель мыши к выражению.
Текущее значение показывается в виде короткой подсказки рядом с переменной.
Просмотр возможен, если значение имеет текстовое представление. Таким же образом
можно просмотреть значение свойства. Если свойство представлено в виде <span class="Term">&lt;Объект&gt;.[&lt;Объект&gt;.…]&lt;Свойство&gt;</span>
(например, <span class="Term">ЭлементыФормы.КоманднаяПанель.Кнопки.Получение.Доступность</span>),
то просмотр значения возможен при подведении указателя мыши к такому тексту.
Значение показывается, если в тексте не используются круглые и квадратные скобки.
Также можно просмотреть значение элемента массива, для которого явно указан его
индекс (в виде числа или переменной, значение которой определено на момент
просмотра). Для этого нужно выделить идентификатор массива и его индекс.</p>

<p class="MsoNormalCxSpLast">При
подведении указателя мыши к отдельному объекту, или выделенному объекту, или
группе объектов в тексте вида <span class="Term">&lt;Объект&gt;.[&lt;Объект&gt;.
…]&lt;Свойство&gt;</span> показывается его тип. Например, если в тексте <span class="Term">ЭлементыФормы.КоманднаяПанель1.Кнопки.Получение.Доступность</span>
выделить <span class="Term">ЭлементыФормы.КоманднаяПанель1</span>,
то будет показан тип <span class="Term">КоманднаяПанель</span>.</p>

<a name="_ref422138645"></a><a id="TI000001047" class="bookmark" name="issogl2_28.2.8_табло"><h3>28.2.8. Табло</h3></a>

<p class="Regularbeforepicture"><span class="Bold">Табло</span> – специальное окно, в котором отображаются результаты
вычисления переменных и введенных в него формул в процессе выполнения программы
в процессе отладки. Вызов табло на экран выполняется выбором пункта меню <span class="Interface">Отладка – Табло</span>,
доступным при отладке.</p>

<p class="Picture"><IMG src="_img/img00578.gif?_=1496848987" WIDTH="504" ALT HEIGHT="225"></p>

<p class="MsoCaption">Рис.
570.
Табло</p>

<p class="MsoNormalCxSpFirst">Табло
представляет собой четырехстраничную форму. Каждая ее страница содержит
табличное поле для ввода переменных и формул, результаты вычисления которых необходимо
контролировать. Формулы могут включать арифметические выражения, выражения с использованием
функций встроенного языка системы «1С:Предприятие», а также функции модуля управляемого
приложения и общих модулей.</p>

<p class="MsoNormalCxSpMiddle">Каждая
формула вводится в первую колонку табличного поля и должна находиться на отдельной
строке. Результат вычисления формулы выдается в колонке <span class="Interface">Значение</span>. В колонке
<span class="Interface">Тип</span> выводится тип выражения. Если формула введена неправильно,
то вместо результата появится фраза: <span class="Interface">Обнаружены
синтаксические ошибки!</span></p>

<p class="MsoNormalCxSpMiddle">Управление
табло и результатами вычислений осуществляется с помощью команд контекстного
меню.</p>

<p class="MsoNormalCxSpMiddle">Результат
расчета может быть скопирован в буфер обмена выбором пункта <span class="Interface">Копировать результат</span>
контекстного меню второй колонки.</p>

<p class="MsoNormalCxSpMiddle">Для
некоторых типов данных (см. предыдущий раздел) возможен просмотр значений
в отдельном окне.</p>

<p class="MsoNormalCxSpMiddle">Табло
также можно вывести в табличный или текстовый документ.</p>

<p class="MsoNormalCxSpMiddle">Если
в процессе работы исходные данные, используемые в формулах, изменились, то для
получения актуальных результатов расчетов необходимо выполнить обновление. Для
этого в контекстном меню табло нужно выбрать пункт <span class="Interface">Пересчитать</span> или
<span class="Interface">Пересчитать все</span>.</p>

<p class="MsoNormalCxSpMiddle">С
точки зрения выбора страниц табло работает в двух режимах: в первом страницы
выбираются с помощью закладок, располагающихся внизу, во втором – с
помощью контекстного меню. Выбор режима производится установкой или снятием
флажка в пункте <span class="Interface">Закладки</span> контекстного меню.</p>

<p class="MsoNormalCxSpMiddle">Для
очистки содержимого строки табло необходимо выбрать строку и нажать клавишу <span class="Interface">Del</span>.</p>

<p class="MsoNormalCxSpLast">Окно
табло может размещаться на экране в различных режимах. После завершения отладки
окно автоматически закрывается.</p>

<a name="_ref270676170"></a><a name="_ref422138651"></a><a name="_ref422153546"></a><a name="_ref422153545"></a><a id="TI000001614" class="bookmark" name="issogl2_28.2.9_окно_локальные_переменные"><h3>28.2.9. Окно «Локальные переменные»</h3></a>

<p class="Regularbeforepicture">Во
время отладки имеется возможность открыть специальное окно, которое содержит
список локальных переменных текущего метода (метод, в котором находится текущая
строка исполнения встроенного языка). Вызов окна на экран выполняется выбором
пункта меню <span class="Interface">Отладка –
Локальные переменные</span>, доступным при отладке.</p>

<p class="Picture"><IMG src="_img/img00579.gif?_=1496848987" WIDTH="530" ALT HEIGHT="511"></p>

<p class="MsoCaption">Рис.
571. Окно локальных переменных</p>

<p class="MsoNormalCxSpFirst">Окно
локальных переменных содержит в себе параметры отлаживаемого метода и все
локальные переменные, которые используются в методе на текущем уровне стека
вызовов (по умолчанию – на вершине стека вызовов). В самом начале
переменные находятся в неинициализированном состоянии. По мере присвоения им
каких-либо значений – эти значения появляются в окне локальных переменных.
Порядок следования переменных в данном окне неопределен. Редактировать колонку <span class="Interface">Переменная</span> в данном
окне невозможно. Состав строк в данном окне недоступен для изменения
пользователем.</p>

<p class="MsoNormalCxSpMiddle">После
каждого действия, выполняемого в процессе отладки, переключения по стеку
вызовов, смены предмета отладки, обновление содержимого окна произойдет
автоматически.</p>

<p class="MsoNormalCxSpMiddle">Результат
расчета может быть скопирован в буфер обмена выбором пункта <span class="Interface">Копировать результат</span>
контекстного меню второй колонки.</p>

<p class="MsoNormalCxSpMiddle">Для
некоторых типов данных (см. предыдущий раздел) возможен просмотр значений
в отдельном окне.</p>

<p class="MsoNormalCxSpMiddle">Табло
также можно вывести в табличный или текстовый документ.</p>

<p class="MsoNormalCxSpLast">Окно
локальных переменных может размещаться на экране в различных режимах. После
завершения отладки окно автоматически закрывается.</p>

<a name="_ref422322500"></a><a name="_ref422153548"></a><a name="_ref422153547"></a><a id="TI000001615" class="bookmark" name="issogl2_28.2.10_изменение_значения_переменной"><h3>28.2.10. Изменение значения переменной</h3></a>

<p class="Regularbeforepicture">Когда
отладчик остановился на точке останова, имеется возможность изменять значения переменных
и свойств объектов, доступных для записи. Доступ к функции изменения возможен
из окна выражений (см. <a href="#_ref414272567">здесь</a>), табло (см. <a href="#_ref422138645">здесь</a>) и окна локальных переменных (см. <a href="#_ref422138651">здесь</a>). В окне выражений для изменения значения переменной
необходимо встать на эту переменную и нажать кнопку <span class="Interface">f(x)</span>, в табло
или окне локальных переменных необходимо выбрать пункт <span class="Interface">Установить новое
значение в виде выражения</span> в контекстном меню конкретной переменной. Под «переменной»
понимается не только значение обычной переменной, но и свойство коллекции
(произвольной вложенности).</p>

<p class="Picture"><IMG src="_img/img00580.gif?_=1496848987" WIDTH="689" ALT HEIGHT="644"></p>

<p class="MsoCaption"><a name="_ref422139212">Рис. </a>572. Изменение
значения переменной</p>

<p class="MsoNormalCxSpFirst">После
вызова функции изменения значения, на экране открывается специальное окно для
ввода выражения. В верхней части окна следует ввести то выражение, значение
которого будет установлено в переменную, имя которой представлено в качестве
заголовка поля ввода выражения. В примере на <a href="#_ref422139212">рис.572</a> предлагается изменить значение переменной <span class="Term">Курс</span>.</p>

<p class="MsoNormalCxSpMiddle">В
окне ввода выражения можно вводить константные значения различных типов, а
также любые выражения, корректные с точки зрения встроенного языка. В окне
ввода выражения действует контекстная подсказка, отображающая контекст того
метода, в котором сейчас находится отладчик.</p>

<p class="MsoNormalCxSpMiddle">После
нажатия кнопки <span class="Interface">Установить</span>, в
нижней части окна ввода выражения будет отображен результат установки. Это может
быть фраза <span class="Interface">Изменение значения
выполнено успешно</span> или сообщение об ошибке при наличии таковой.</p>

<p class="MsoNormalCxSpMiddle">Значение
переменной можно изменить непосредственно в том окне, где наблюдается значение
переменной. Для этого необходимо дважды щелкнуть левой клавишей мыши по тексту
в колонке <span class="Interface">Значение</span>.
Следует помнить, что таким образом можно установить только значение примитивных
типов.</p>

<p class="MsoNormalCxSpLast">Необходимо
четко понимать, возможность изменения значений переменных во время отладки
может приводить к различным, непрогнозируемым, последствиям в работе
информационной системы. Так, если в процессе отладки, для записываемого в базу
данных объекта (например, в обработчике <span class="Term">ПередЗаписью()</span>), можно установить такие
значения свойств, которые там не могут оказаться при реальной работе системы.
Однако именно эти, некорректные значения, и будут записаны в базу данных. При
этом другие алгоритмы системы могут начать работать некорректно. В связи с этим
следует очень аккуратно использовать возможность изменения значений переменных
и свойств объектов во время отладки.</p>

<a name="_ref421700646"></a><a id="TI000001048" class="bookmark" name="issogl2_28.2.11_стек_вызовов"><h3>28.2.11. Стек вызовов</h3></a>

<p class="Regularbeforepicture">Стек
вызовов показывает последовательность вызовов процедур и функций, приведшую к
строке модуля, которая отлаживается в данный момент.</p>

<p class="Picture"><IMG src="_img/img00581.gif?_=1496848987" WIDTH="630" ALT HEIGHT="507"></p>

<p class="MsoCaption"><a name="_ref270691584">Рис. </a>573. Стек вызовов</p>

<p class="MsoNormal">Окно
отображает:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
исполняемый метод – колонка <span class="Interface">Название</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
номер строки модуля – колонка <span class="Interface">Строка</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
предмет отладки, в котором расположен модуль, –
колонка <span class="Interface">Предмет</span>.</p>

<p class="MsoNormal">В
первой колонке окна могут быть две пиктограммы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Желтая стрелка означает вершину стека вызовов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Зеленая стрелка (расположенная слева от строки <span class="Interface">ОбщаяФорма.СтекВызовов.Форма.СерверныйМетод()</span>)
указывает метод, в контексте которого будет работать вычисление переменных в
окне <span class="Interface">Выражение</span> и в окне <span class="Interface">Табло</span>. Если
вершина стека вызовов совпадает с текущим контекстом, то зеленая стрелка не
отображается на экране. Для смены контекста (а также установки курсора на
строку, указанную в колонке <span class="Interface">Строка</span>) необходимо дважды щелкнуть
левой кнопкой мыши по нужной строке окна <span class="Interface">Стек вызовов</span>.</p>

<p class="IndentlistCxSpFirst">В
примере, показанном на <a href="#_ref270691584">рис.573</a>, переменная <span class="Term">ПеременнаяНаСервере</span> имеет значение <span class="Interface">НаСервере</span>, т. к.
отладчик переключен в контекст метода <span class="Term">СерверныйМетод()</span> (об этом свидетельствует
зеленая стрелочка напротив строки <span class="Interface">ОбщаяФорма.СтекВызовов.Форма.СерверныйМетод()</span>).</p>

<p class="IndentlistCxSpLast">Если
переключить контекст на вершину стека (двойной щелчок по строке с желтой
стрелкой), то значение переменной <span class="Term">ПеременнаяНаСервере</span>
станет равно значению <span class="Interface">Повторно</span>, т. к. произойдет переключение
контекста.</p>

<p class="MsoNormal">Некоторые
строки в окне <span class="Interface">Стек вызовов</span> отображаются серым цветом (последние две
строки на <a href="#_ref270691584">рис.573</a>). Это означает, что имеется возможность переключиться
на строку модуля, но нельзя вычислять выражения в контексте того метода, куда
произошел переход. Таким образом, выделяются те элементы стека, которые «расположены»
на клиенте, в то время как вершина стека «расположена» на сервере.</p>

<a id="TI000001049" class="bookmark" name="issogl2_28.2.12_особенности_отладки_защищенных_модулей"><h3>28.2.12. Особенности отладки защищенных модулей</h3></a>

<p class="MsoNormalCxSpFirst">Если
при выполнении команды <span class="Interface">Шагнуть в</span> строка модуля содержит вызов процедуры или
функции, расположенной в защищенном модуле (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref216238506">здесь</a>), то при первой попытке перехода к выбранной
процедуре или функции защищенного модуля отладчик запрашивает пароль доступа.</p>

<p class="MsoNormalCxSpMiddle">Если
пароль введен правильно, то отладчик открывает защищенный модуль и управление
переходит на первую строку вызываемой процедуры или функции. При последующих переходах
в защищенный модуль в данном сеансе работы пароль не запрашивается.</p>

<p class="MsoNormalCxSpMiddle">Если
отказаться от ввода пароля, то отладчик пропускает защищенный код программы
(выполняя его) и переходит на первую строку кода после защищенного модуля. Аналогично
выполняется команда <span class="Interface">Шагнуть из</span>.</p>

<p class="MsoNormalCxSpLast">В
стеке вызовов всегда указываются наименования процедур и функций. Если
защищенный модуль еще не открывался, то при первой попытке перехода к выбранной
процедуре защищенного модуля отладчик запрашивает пароль доступа. При последующих
переходах в защищенный модуль из стека вызовов пароль запрашиваться не будет (в
текущем сеансе работы).</p>

<a name="_ref235868961"></a><a id="TI000001053" class="bookmark" name="issogl1_28.3_замер_производительности"><h2>28.3. Замер производительности</h2></a>

<p class="MsoNormalCxSpFirst">Замер
производительности позволяет оценить скорость работы всей конфигурации или ее
части, работающей в рамках любого типа предмета отладки. Измеряется частота
использования конкретных участков кода и скорость их выполнения; указывается,
какой код исполнялся на сервере, а какой – на клиенте; указываются строки
кода, приведшие к вызову сервера. Если имеется несколько способов решения
какой-либо задачи, можно реализовать их все, после чего выбрать самый быстрый.</p>

<p class="MsoNormalCxSpMiddle">При
этом необходимо иметь в виду, что сравнение нужно производить в одинаковых
условиях. Например, если во время выполнения задачи одним из сравниваемых способов
процессор компьютера был загружен еще какой-либо задачей, это может повлиять на
достоверность сравнения. Возможны и другие, менее очевидные причины, по которым
условия измерения окажутся различными. Поэтому при сравнении двух способов
выполнения задачи, имеющих близкую производительность, желательно делать с
каждым из них несколько замеров – для оценки и усреднения случайного разброса.</p>

<p class="MsoNormalCxSpLast">Для
замера производительности нужно выбрать команду <span class="Interface">Отладка – Замер
производительности</span>. При повторном выборе команды замер прекратится и
откроется окно с его результатами. Включение и выключение замера производительности
действуют на все предметы отладки, которые в настоящий момент подключены к
отладчику.</p>

<a id="TI000001054" class="bookmark" name="issogl2_28.3.1_варианты_порядка_действий"><h3>28.3.1. Варианты порядка действий</h3></a>

<p class="MsoNormalCxSpFirst">Если
нужно измерить производительность конфигурации, включая участок, выполняемый
при старте системы, необходимо сначала выбрать команду <span class="Interface">Отладка – Замер
производительности</span>, а затем запустить систему «1С:Предприятие». Время,
прошедшее между стартом замера и началом работы системы, не будет учитываться в
результатах замера.</p>

<p class="MsoNormalCxSpMiddle">Если
участок, выполняемый при старте системы, включать в замер не требуется,
необходимо сначала запустить систему «1С:Предприятие», подготовить ее к выполнению
требуемого участка, затем перейти в конфигуратор и включить замер.</p>

<p class="MsoNormalCxSpMiddle">Если
в замер нужно включить участок, выполняемый при окончании работы системы «1С:Предприятие»,
то, независимо от того, использовался ли вариант 1 или 2 для начала замера,
нужно завершить работу программы, после чего перейти в режим Конфигуратор. В
этом случае прекращать замер вручную не нужно. Как только будут подведены итоги
замера, его результаты появятся на экране.</p>

<p class="MsoNormalCxSpLast">Если
участок, выполняемый при окончании работы системы «1С:Предприятия», включать в
замер не требуется, то для появления результатов замера его нужно закончить.
Например, для анализа процедуры проведения какого-либо документа нужно запустить
программу, открыть документ, заполнить его, перейти в режим Конфигуратор, включить
замер, перейти в режим 1С:Предприятие, провести документ, перейти в режим
Конфигуратор и закончить замер.</p>

<a id="TI000001055" class="bookmark" name="issogl2_28.3.2_результаты_замера"><h3>28.3.2. Результаты замера</h3></a>

<p class="MsoNormal">Результаты
замера – ссылки на конкретные строки модуля с указанием частоты их
выполнения и длительности – представляются в виде табличного поля, имеющего
следующие колонки:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Модуль</span> – содержит
название модуля.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Номер строки</span> –
номер строки модуля.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Строка</span> – текст
данной строки модуля.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Кол</span>. – количество
вызовов данной строки за время замера.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Врем.</span> – суммарное
время (сек.) выполнения данной строки за время замера.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
%(Врем.) – процент
суммарного времени выполнения данной строки к общему времени замера (общее
время замера равно сумме всех промежутков времени, в которые выполнялся код
конфигурации). При этом за 100 % принимается время выполнения кода на
клиенте.</p>

<p class="Picture"><IMG src="_img/img00582.gif?_=1496848987" WIDTH="551" ALT HEIGHT="287"></p>

<p class="MsoCaption"><a name="_ref234319300">Рис. </a>574. Пиктограммы
замера производительности</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Клиент</span> – пиктограммой
(см. <a href="#_ref234319300">рис.574</a>) отмечаются строки кода, выполняющиеся на клиенте;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Сервер</span> – пиктограммой
(см. <a href="#_ref234319300">рис.
574</a>) отмечаются строки кода, выполняющиеся на сервере;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Обр. сервер</span> –
пиктограммами отмечаются строки кода, приводящие к вызову сервера:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
вызов сервера происходил на уровне платформы,
или непосредственно вызывались процедуры или функции, исполняемые на сервере (<span class="Interface">Непосредственный вызов
сервера</span> на <a href="#_ref234319300">рис.
574</a>);</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
локальный вызов процедуры или функции, исполняемой
на клиенте, внутри которой вызов сервера происходил на уровне платформы, или
непосредственно вызывались процедуры или функции, исполняемые на сервере (<span class="Interface">Вложенный вызов
сервера</span> на <a href="#_ref234319300">рис.
574</a>).</p>

<p class="Regularbeforepicture">В
результатах замера производительности время выполнения каждой строки
складывается из времени выполнения собственно операторов строки («чистое
время») и времени вызова процедуры (функции), если такие в строке есть. С помощью
флажка <span class="Interface">Для вызовов процедур и функций включать время выполнения</span>
можно выбирать, какое время требуется показывать: полное время (как сумму
времени вызова и «чистого времени») или «чистое время» выполнения.</p>

<p class="Picture"><IMG src="_img/img00583.gif?_=1496848987" WIDTH="695" ALT HEIGHT="355"></p>

<p class="MsoCaption">Рис.
575.
Результат замера</p>

<p class="MsoNormalCxSpFirst">Если
в строке есть хотя бы один вызов процедуры (функции), то время выполнения
включает время выполнения собственно операторов строки и время вызова процедуры
(функции).</p>

<p class="MsoNormalCxSpMiddle">Если
флажок установлен, то время вызова процедуры (функции) учитывается в общем
времени выполнения.</p>

<p class="MsoNormalCxSpMiddle">Если
флажок снят, в результат замера будет включено только время выполнения строк
кода, но не время работы процедуры (функции), которая вызывается в данной
строке. В этом случае суммарное время выполнения данной строки (в колонке <span class="Interface">Врем.</span>) не будет
отражать реального времени, потраченного системой на отработку данной строки.
Необходимо иметь в виду, что выполнение вызванной процедуры (функции) может
занимать значительное время, которое в данном случае не будет включено в результат
(«чистое время»).</p>

<p class="MsoNormalCxSpMiddle">По
умолчанию флажок установлен, а его состояние запоминается между сеансами. При
смене состояния изменяются наименования колонок времени.</p>

<p class="MsoNormalCxSpMiddle">Если
флажок <span class="Interface">Клиент</span> установлен, то будут показаны результаты замера
выполнения кода на клиенте.</p>

<p class="MsoNormalCxSpMiddle">Если
флажок <span class="Interface">Сервер</span> установлен, то будут показаны результаты замера
выполнения кода на сервере.</p>

<p class="MsoNormalCxSpMiddle">Если
флажок <span class="Interface">Клиент</span> и флажок <span class="Interface">Сервер</span>
установлены, то будут показаны результаты замера выполнения кода на клиенте и
сервере.</p>

<p class="MsoNormalCxSpMiddle">Флажки
показываются, если выполняется отладка серверной информационной базы. Флажки
доступны, если выполняется отладка серверного предмета отладки.</p>

<p class="MsoNormalCxSpMiddle">Если
открыто несколько окон с результатами замера производительности, то при
подведении указателя мыши к колонке результатов замера показывается подсказка,
содержащая URL файла, данные которого в этой колонке отображаются.</p>

<p class="MsoNormalCxSpLast">По
двойному щелчку мыши в колонке с результатами замера производительности в
редакторе модуля осуществляется переход к соответствующей строке файла с результатами
замера производительности.</p>

<p class="Regularbeforepicture">Кроме
специального окна результаты замера можно видеть непосредственно в окне с
исходным кодом модуля. Если в отладчике открыто окно с замером, в окнах модулей
появляется колонка, показывающая количество вызовов данной строки и процент времени
ее работы от общего времени.</p>

<p class="Picture"><IMG src="_img/img00584.gif?_=1496848987" WIDTH="792" ALT HEIGHT="260"></p>

<p class="MsoCaption">Рис.
576.
Результаты замера в тексте модуля</p>

<p class="MsoNormalCxSpFirst">Пиктограммами
показывается выполнение кода на клиенте или сервере, а также вызовы сервера
(аналогично окну с результатами замера, описание пиктограмм (см. <a href="#_ref234319300">рис.
574</a>).</p>

<p class="MsoNormalCxSpMiddle">Двойным
щелчком мыши по строке окна результатов замера можно переключиться на
соответствующую строку в окне модуля.</p>

<p class="MsoNormalCxSpMiddle">Если
открыто несколько замеров одновременно, то в окнах с текстами модулей появится
соответствующее количество колонок.</p>

<p class="MsoNormalCxSpLast">Закрытие
окна результатов замера убирает из модулей колонки с количеством вызовов и
процентом времени работы.</p>

<a id="TI000001056" class="bookmark" name="issogl2_28.3.3_сортировка_результатов_замера"><h3>28.3.3. Сортировка результатов замера</h3></a>

<p class="MsoNormalCxSpFirst">Результаты
замера могут быть отсортированы по любой колонке отчета.</p>

<p class="MsoNormalCxSpLast">Сортировка
осуществляется щелчком мышью на заголовке одной из колонок. Щелчок на
заголовках <span class="Interface">Модуль</span> или <span class="Interface">Строка</span> обеспечивает сортировку по
номерам строк, <span class="Interface">Кол.</span> – по количеству вызовов строки, <span class="Interface">Врем.</span> Или <span class="Interface">%(Врем.)</span> –
по времени работы. Если выполнялся замер производительности выполнения кода на
клиенте и на сервере, то сортировка допускается также и по этим колонкам.</p>

<a id="TI000001057" class="bookmark" name="issogl2_28.3.4_выборочное_суммирование_результатов_замера"><h3>28.3.4. Выборочное суммирование результатов замера</h3></a>

<p class="MsoNormalCxSpFirst">Для
анализа результатов замера могут оказаться полезными суммарные характеристики.
Если в окне результатов отметить несколько строк, их суммарные характеристики –
суммы количества вызовов, времени работы в секундах и процентах – отображаются
в нижней части окна.</p>

<p class="MsoNormalCxSpLast">Флажок
<span class="Interface">Для вызовов процедур и функций включать время выполнения</span>
служит для выбора одного из двух методов приблизительного отслеживания уровней
вложенности при суммировании. Если в данном модуле имеется и строка, вызывающая
некоторую процедуру, и строки текста самой процедуры, то, конечно, не следует
помечать и то, и другое: это приведет к повторному учету в сумме одного и того
же времени выполнения. Если все же приходится пометить их (например, слишком
много усилий пришлось бы потратить на отслеживание), то можно снять флажок, и
повторного учета не будет. С другой стороны, если все вызываемые процедуры –
внешние по отношению к модулю, флажок лучше установить. Тогда в общее время
выполнения будет включено время отработки этих процедур, что лучше отражает реальное
время работы.</p>

<a id="TI000001058" class="bookmark" name="issogl2_28.3.5_особенности_замера_производительности_при_работе_клиент-серверной_базы"><h3>28.3.5. Особенности замера производительности при работе клиент-серверной базы</h3></a>

<p class="MsoNormalCxSpFirst">При
замере производительности результаты замера для кода встроенного языка,
выполняемого для одного и того же номера соединения на клиенте и на сервере,
будут объединяться в один общий замер производительности. При этом указывается,
какие строки кода выполнялись на клиенте, а какие – на сервере, из каких
строк кода осуществлялся вызов процедуры или функции, исполняемых на сервере, а
также системные вызовы (самой платформы, например, оператор <span class="Interface">Выполнить</span> для
запроса, оператор записи объекта базы данных) на сервере.</p>

<p class="MsoNormalCxSpMiddle">При
просмотре результатов можно указать, что показывать в замере: замер для
клиента, замер для сервера, замер для клиента и сервера вместе. Выбор режима устраивается
с помощью флажков в правом нижнем углу окна с результатами замера производительности.</p>

<p class="MsoNormalCxSpLast">Для
серверных вызовов учитывается время выполнения серверного вызова на самом
сервере. Можно рассматривать происходящее по аналогии со временем исполнения
вложенных вызовов процедур и функций для клиентского приложения.</p>

<a id="TI000001059" class="bookmark" name="issogl2_28.3.6_сохранение_результатов"><h3>28.3.6. Сохранение результатов</h3></a>

<p class="MsoNormalCxSpFirst">Результат
замера можно сохранить в файл с помощью команд <span class="Interface">Файл – Сохранить</span>
и <span class="Interface">Файл – Сохранить как</span>. В стандартном диалоге
сохранения нужно выбрать каталог и указать имя файла. Файл результатов имеет
расширение <span class="Interface">*.pff</span>.</p>

<p class="MsoNormalCxSpLast">Открыть
файл с замером можно командой <span class="Interface">Файл – Открыть файл</span>. Для
отбора файлов с замерами следует использовать фильтр <span class="Interface">Замер
производительности (*.pff)</span>.</p>

<a name="_ref227477332"></a><a name="_ref235869044"></a><a id="TI000001060" class="bookmark" name="issogl1_28.4_механизм_имитации_задержек_при_вызове_сервера"><h2>28.4. Механизм имитации задержек при вызове сервера</h2></a>

<p class="MsoNormal">Цель механизма – имитация работы прикладного
решения в условиях существенных временных задержек, возникающих при взаимодействии
с сервером.</p>

<p class="Note"><span class="Note">Примечание.</span> Включить механизм
можно только в тонком клиенте и в режиме управляемого приложения толстого
клиента.</p>

<p class="MsoNormal">Механизм обеспечивает имитацию временных
задержек, возникающих в следующих случаях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
задержка при вызове сервера: указывается в
секундах на каждый вызов сервера;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
задержка при отправке данных на сервер:
указывается в секундах в расчете на каждые 1 кбайт (1024 байта) данных, отправляемых
на сервер.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
задержка при получении данных с сервера:
указывается в секундах в расчете на каждые 1 кбайт (1024 байта), принимаемых с
сервера.</p>

<p class="MsoNormal">Включение механизма можно обеспечить с
помощью соответствующей настройки параметров конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref222301891">здесь</a>), а также с помощью ключа командной строки <span class="Interface">/SimulateServerCallDelay [-CallXXXX] [-SendYYYY] [-ReceiveZZZZ]</span>,
где:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Call</span> – параметр, указывающий
величину задержки при вызове сервера в секундах, если не указан, то 1 секунда.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Send</span> – параметр, указывающий
величину задержки в секундах в расчете на каждые 1 кбайт данных, отправляемых
на сервер. Если не указан, то 1 секунда.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Receive</span> – параметр,
указывающий величину задержки в секундах в расчете на каждые 1 кбайт данных,
принятых с сервера. Если не указан, то 1 секунда.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">/SimulateServerCallDelay -Call2.1 -Send1.3 -Receive1.2</pre>

<p class="Note"><span class="Note">Примечание.</span> Максимальное значение
устанавливаемой задержки равно 9,99 секунды. Значение, равное 0, означает, что
данная задержка не применяется.</p>

<p class="MsoNormal">Механизм имитации задержек при вызове
сервера также может быть включен в режиме 1С:Предприятие. Это можно сделать с
помощью диалога <span class="Interface">Сервис – Параметры</span>.
Настройка механизма имитации задержек при вызове сервера, сделанная в режиме «1С:Предприятие»,
действует только на протяжении текущего сеанса и не сохраняется.</p>

<a name="_ref224451837"></a><a id="TI000001061" class="bookmark" name="issogl1_28.5_отображение_вызовов_сервера"><h2>28.5. Отображение вызовов сервера</h2></a>

<p class="MsoNormalCxSpFirst">Данный механизм предназначен для отладки
клиент-серверной системы и оценки объема данных, передаваемых между клиентом и
сервером.</p>

<p class="MsoNormalCxSpLast">Режим можно включить с помощью
соответствующей настройки параметров конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref222296706">здесь</a>) или ключа командной строки <span class="Interface">/DisplayPerformance</span>. Отображение показателей
производительности также можно включить и в режиме 1С:Предприятие с помощью
флажка <span class="Interface">Отображать показатели
производительности</span> диалога <span class="Interface">Сервис – Параметры</span>. По умолчанию механизм выключен.</p>

<p class="Regularbeforepicture">Если режим включен, то «1С:Предприятие»
будет отображать показатели производительности в панели показателей производительности
в нижней части основного окна приложения.</p>

<p class="Picture"><IMG src="_img/img00585.gif?_=1496848987" WIDTH="800" ALT HEIGHT="210"></p>

<p class="MsoCaption">Рис. 577. Панель показателей
производительности</p>

<p class="Regularbeforepicture">Если включен режим имитации задержек при
вызове сервера, то картинка в окне, показывающем вызовы сервера, будет иметь
другой вид:</p>

<p class="Picture"><IMG src="_img/img00586.gif?_=1496848987" WIDTH="530" ALT HEIGHT="153"></p>

<p class="MsoCaption">Рис. 578. Вызовы сервера в
режиме имитации задержек при вызове сервера</p>

<p class="Regularbeforepicture">Если прикладное решение находится в
состоянии, когда основное окно приложения еще не открыто или уже закрыто, но прикладной
код работает, то окно показателей производительности имеет вид:</p>

<p class="Picture"><IMG src="_img/img00587.gif?_=1496848987" WIDTH="197" ALT HEIGHT="37"></p>

<p class="MsoCaption">Рис. 579. Вызовы сервера</p>

<p class="Regularbeforepicture">Если при этом включен режим имитации
задержек сервера, то окно показателей производительности будет иметь такой вид:</p>

<p class="Picture"><IMG src="_img/img00588.gif?_=1496848987" WIDTH="465" ALT HEIGHT="37"></p>

<p class="MsoCaption">Рис. 580. Имитация задержек при
вызове сервера</p>

<p class="MsoNormalCxSpFirst">При изменении данных, отображаемых в окне вызовов
сервера, они выводятся красным цветом.</p>

<p class="MsoNormalCxSpLast">По умолчанию окно состоит из двух счетчиков:
<span class="Interface">Текущие вызовы</span>
и <span class="Interface">Накопленные вызовы</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Текущие вызовы</span> –
показывает состояние вызовов сервера с некоторого момента времени: с начала
работы механизма или с последнего пользовательского действия, после которого 0,2
сек. Не было других пользовательских действий.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Накопленные вызовы</span> –
показывает состояние вызовов сервера с начала работы механизма или с последнего
его принудительного сброса через команду контекстного меню.</p>

<p class="Regularbeforepicture">Настройка показателей производительности
выполняется с помощью диалога <span class="Interface">Настройка показателей производительности</span>. Доступ к этому
диалогу можно получить, нажав кнопку в панели показателей производительности и
выбрав в меню команду <span class="Interface">Настройка</span>.</p>

<p class="Picture"><IMG src="_img/img00589.gif?_=1496848987" WIDTH="328" ALT HEIGHT="213"></p>

<p class="MsoCaption">Рис. 581. Меню настройки</p>

<p class="MsoNormal">В диалоге настройки можно указать следующие
параметры:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
группа <span class="Interface">Периодичность</span> – указывает, за какой период
требуется отображать значения счетчиков;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
группа <span class="Interface">Показатели</span> – указывает, какие показатели в счетчиках
нужно отображать.</p>

<p class="Picture"><IMG src="_img/img00590.gif?_=1496848987" WIDTH="490" ALT HEIGHT="308"></p>

<p class="MsoCaption">Рис. 582. Настройка показателей
производительности</p>

<p class="MsoNormal">Также контекстное меню окна содержит
следующие команды:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Очистить накопленные</span> –
очищает счетчик накопленных вызовов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">История текущих… – </span>открывает
окно с историей счетчика текущих вызовов;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">История накопленных…</span> –
открывает окно с историей счетчика накопленных вызовов.</p>

<p class="MsoNormalCxSpFirst">Настройки являются общими для всех
пользователей и всех информационных баз на данном компьютере. Настройка отображения
окна вызовов сервера, сделанная в режиме 1С:Предприятие, действует только на
протяжении текущего сеанса и не сохраняется.</p>

<p class="MsoNormalCxSpLast">Необходимо учитывать следующие особенности
механизма:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
при работе в файловом варианте (при прямом
соединении с информационной базой) объем данных отображается без сжатия, так
как сжатие в этом случае не производится;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
при работе в клиент-серверном варианте или в
файловом варианте с подключением через веб-сервер, при использовании режима сжатия
трафика <span class="Interface">SDC</span>, значения
показателей могут зависеть от последовательности действий, так как сжатие выполняется
с использованием предыдущих передаваемых данных.</p>

<p class="MsoNormal">В веб-клиенте данный механизм имеет ряд
особенностей:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Учитываются только синхронные запросы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Объем передаваемых данных отображается в
символах, а не байтах. Результаты замеров можно использовать для оценочного
сравнения различных вариантов вызова в веб-клиенте и не рекомендуется
использовать для сравнения объема передаваемых данных между различными видами
клиентов.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Показатели производительности не отображаются до
момента отображения основного окна приложения, при этом значения показателей
накапливаются. В результате, после отображения основного окна приложения, можно
увидеть интересующие результаты запуска веб-клиента.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Окно с показателями имеет больший размер, чем на
других клиентах, и не отображается поверх других окон.</p>

<a name="_ref230079993"></a><a name="_ref230079952"></a><a name="_ref230079716"></a><a name="_ref335650539"></a><a id="TI000001062" class="bookmark" name="issogl1_28.6_автоматизированное_тестирование_прикладных_решений"><h2>28.6. Автоматизированное тестирование прикладных решений</h2></a>

<a name="_ref348613618"></a><a name="_ref348613617"></a><a name="_ref397345704"></a><a name="_ref397345703"></a><a id="TI000001063" class="bookmark" name="issogl2_28.6.1_общая_информация"><h3>28.6.1. Общая информация</h3></a>

<p class="MsoNormal">Автоматизированное
тестирование представляет собой имитацию интерактивных действий пользователя и
проверку результатов этих действий.</p>

<p class="Note"><span class="Note">Внимание!</span> Автоматизированное тестирование
поддерживается только для управляемого приложения.</p>

<p class="MsoNormalCxSpFirst">Сценарий
автоматизированного тестирования представляет собой программу на встроенном
языке системы «1С:Предприятие». В сценарии описывается последовательность
выполняемых действий и проверка результата их (действий) выполнения. Для этого
во встроенном языке существуют специальные объекты, позволяющие
имитировать интерактивные действия в тестируемом приложении и предоставляющие
доступ к логической модели интерфейса клиентского приложения и элементов
управляемой формы.</p>

<p class="MsoNormalCxSpLast">В
процессе тестирования участвуют две системы: <span class="Bold">менеджер
тестирования</span> и <span class="Bold">клиент тестирования</span>. Менеджер
тестирования обеспечивает:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Установку соединения с клиентом тестирования для
выполнения сценария тестирования (тестового соединения);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Выполнение собственно сценария тестирования;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Оценку результатов тестирования (при
необходимости).</p>

<p class="MsoNormal">Клиент
тестирования обеспечивает:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Выполнение команд сценария тестирования,
передаваемых с менеджера тестирования;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Передачу менеджеру тестирования данных,
требуемых для оценки результата тестирования.</p>

<p class="MsoNormalCxSpFirst">Менеджером
тестирования может выступать толстый или тонкий клиент, клиентом тестирования
может быть толстый клиент, тонкий клиент или веб-клиент. Один менеджер
тестирования может быть одновременно подключен к нескольким клиентам тестирования,
в тоже время один клиент тестирования может быть подключен только к одному
менеджеру тестирования. Для взаимодействия менеджера тестирования и клиента
тестирования используется прямое TCP/IP соединение через определенный порт
(который должен быть «открыт»). Для взаимодействия менеджера тестирования и
клиента тестирования, который является веб-клиентом, используется сервер
«1С:Предприятия» (для клиент-серверного варианта работы тестируемого
приложения) или веб-сервер (для файлового варианта). Для проведения
тестирования не требуется вносить какие-либо изменения в тестируемое приложение.</p>

<p class="MsoNormalCxSpMiddle">Механизм
автоматизированного тестирования не позволяет получать информацию о структуре
оконных объектов для системных окон веб-браузера и управлять ими. Поэтому необходимо
избегать в веб-клиенте действий, которые могли бы спровоцировать появление
таких окон, так как это приведёт к невозможности автоматического продолжения
теста. В качестве примера такого действия можно привести попытку ввода текста в
поле ввода с автоматическим заполнением: в тонком клиенте в этом случае будет
отображен встроенный диалог, а в веб-клиенте – системный. Поэтому при
планировании теста необходимо учитывать эту особенность и соответственно
создавать тест.</p>

<p class="MsoNormalCxSpMiddle">Сценарий
тестирования может располагаться как в тестируемом прикладном решении, так и в
отдельном прикладном решении. При этом схема взаимодействия менеджера
тестирования и клиента тестирования не изменяется.</p>

<p class="MsoNormalCxSpMiddle">Следует
понимать, что менеджер тестирования (и исполняющийся сценарий тестирования) не
обладает непосредственным доступом к тестируемому приложению. Т.е. сценарию
тестирования доступны все возможности приложения, где исполняется сам сценарий (менеджер
тестирования) и доступ к логической модели интерфейса и форм тестируемого приложения.</p>

<p class="MsoNormalCxSpMiddle">Запуск
клиентского приложения в режиме клиента тестирования не влияет на
быстродействие и другие параметры клиентского приложения, однако позволяет
любому менеджеру тестирования подключиться к нему, зная имя (или IP-адрес)
компьютера и порт, с помощью которого происходит взаимодействие.</p>

<p class="MsoNormalCxSpLast">Также
система предоставляет возможность записать интерактивные действия пользователя
в файл формата <span class="Interface">.xml</span>. В
дальнейшем этот файл можно использовать для проведения автоматизированного
тестирования. Для выполнения такой записи предназначен особый режим запуска
тестируемого приложения. Управление записью интерактивных действий также
доступно из встроенного языка.</p>

<a id="TI000001064" class="bookmark" name="issogl2_28.6.2_запуск_системы_тестирования"><h3>28.6.2. Запуск системы тестирования</h3></a>

<a id="TI000001815" class="bookmark" name="issogl3_28.6.2.1_общая_информация"><h4>28.6.2.1. Общая информация</h4></a>

<p class="MsoNormalCxSpFirst">Для
выполнения сценария тестирования должны быть запущены и менеджер, и клиент
тестирования. Порядок запуска произволен. Важно, чтобы к моменту начала
исполнения сценария тестирования клиент тестирования был запущен и доступен по
адресу, используемому для подключения менеджера тестирования.</p>

<p class="MsoNormalCxSpLast">Запуск
возможен как из командной строки (этот способ будет рассмотрен ниже) и так и с
помощью конфигуратора. Приложение, запускаемое из конфигуратора, может
выполнять одну из ролей (менеджер или клиент тестирования) в зависимости от
настроек, указанных в диалоге настроек конфигуратора, подробное описание
которых см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref335673789">здесь</a>.</p>

<a name="_ref440372943"></a><a id="TI000001065" class="bookmark" name="issogl3_28.6.2.2_запуск_клиента_тестирования"><h4>28.6.2.2. Запуск клиента тестирования</h4></a>

<p class="MsoNormalCxSpFirst">Для
запуска клиента тестирования предназначен ключ командной строки запуска
клиентского приложения <span class="Term">TestClient</span>. Также
можно указать номер TCP порта, с помощью которого будут взаимодействовать
менеджер и клиент тестирования. Для этого служит параметр <span class="Term">TPort</span>
ключа <span class="Term">TestCleint</span>.
Если значение для этого параметра не указано, используется значение <span class="Interface">1538</span>. Указывать этот параметр нужно в том случае, если
на одном компьютере выполняется несколько клиентов тестирования.</p>

<p class="MsoNormalCxSpLast">Таким образом, строка запуска клиентского приложения,
которое должно выступать в качестве клиента тестирования, выглядит следующим
образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">1cv8c ENTERPRISE /IBName &quot;Test Application&quot; /TestClient -Tport 1843</pre>

<p class="MsoNormalCxSpFirst">В
данном примере тонкий клиент (<span class="Interface">1Cv8c</span>) будет
выступать клиентом тестирования для информационной базы <span class="Interface">Test Application</span>
и будет использовать TCP-порт <span class="Interface">1843</span> для
взаимодействия с менеджером тестирования.</p>

<p class="MsoNormalCxSpMiddle">Если
клиентское приложение запущено в качестве клиента тестирования, то в заголовке
основного окна приложения будет отображаться текст –<span class="Interface"> Клиент тестирования</span>.
Аналогичный текст будет также отображаться в окне <span class="Interface">О программе</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
подключения к клиенту тестирования, являющемуся тонким или толстым клиентом,
необходимо знать два параметра: IP-адрес (или имя компьютера) на котором
запущен клиент тестирования, и номер TCP-порта, с помощью которого будет выполняться
взаимодействие.</p>

<p class="MsoNormalCxSpLast">В
случае запуска веб-клиента ситуация немного сложнее. Кроме указания параметра <span class="Term">TestClient</span>, необходимо указать еще один
параметр командной строки запуска: <span class="Term">TestClientID&lt;Идентификатор&gt;</span>, который
содержит уникальный идентификатор тестируемого клиентского приложения. При этом
для однозначного указания клиента тестирования, в случае веб-клиента, необходимо
три параметра:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Адрес веб-сервера, на котором развернуто
тестируемое приложение. Адрес информационной базы знать не обязательно!</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Номер TCP-порта, через который веб-сервер будет
передавать данные между менеджером и клиентом тестирования.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Идентификатор конкретного экземпляра
тестируемого приложения, исполняющегося в веб-клиенте.</p>

<p class="MsoNormal">Т.к.
один веб-сервер может обслуживать несколько информационных баз и несколько
соединений с одной информационной базой (в том числе и с целью выполнения
тестирования), необходимо указать веб-серверу, какие TCP-порты использовать для
взаимодействия с менеджером тестирования. Это делается с помощью файла <span class="Interface">testcfg.xml</span>,
расположенного в каталоге настроек системы «1С:Предприятие», которое
обслуживает опубликованный (на веб-сервере) клиент тестирования. Подробнее о
данном файле можно прочитать <a href="/db/v8310doc/bookmark/adm/TI000000419" target="_top">в книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<a name="_ref440372955"></a><a id="TI000001066" class="bookmark" name="issogl3_28.6.2.3_запуск_менеджера_тестирования"><h4>28.6.2.3. Запуск менеджера тестирования</h4></a>

<p class="MsoNormalCxSpFirst">Для
того чтобы можно было запустить сценарий тестирования, следует запустить
клиентское приложение в режиме менеджера тестирования. Для этого необходимо
использовать ключ командной строки запуска клиентского приложения <span class="Term">TestManager</span>. Веб-клиент не может выступать в
качестве менеджера тестирования.</p>

<p class="MsoNormalCxSpLast">Таким образом, строка запуска клиентского приложения,
которое должно выступать в качестве клиента тестирования, выглядит следующим
образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">1cv8c ENTERPRISE /IBName &quot;Test Manager&quot; /TestManager</pre>

<p class="MsoNormal">Если клиентское приложение запущено в
качестве менеджера тестирования, то в заголовке основного окна приложения будет
отображаться текст –<span class="Interface"> Менеджер тестирования</span>. Аналогичный текст будет также
отображаться в окне <span class="Interface">О программе</span>.</p>

<a name="_ref338762253"></a><a id="TI000001067" class="bookmark" name="issogl3_28.6.2.4_запуск_в_режиме_записи_журнала_интерактивных_действий"><h4>28.6.2.4. Запуск в режиме записи журнала интерактивных действий</h4></a>

<p class="MsoNormalCxSpFirst">Запуск клиентского приложения в режиме, позволяющем
выполнять запись интерактивных действий, осуществляется либо с помощью ключа
командной строки <span class="Term">UILogRecorder</span>
либо с помощью специальной команды меню конфигуратора <span class="Interface">Сервис – Запустить для записи журнала действий
пользователя</span>.</p>

<p class="MsoNormalCxSpMiddle">Также
можно указать номер IP-порта, с помощью которого менеджер тестирования сможет
управлять записью журнала интерактивных действий. Для этого служит параметр <span class="Term">TPort</span> ключа UILogRecorder. Если значение для этого параметра не
указано, используется значение <span class="Interface">1538</span>. Также
можно указать системе, куда записывать файл журнала. Для этого служит параметр <span class="Term">File</span> ключа <span class="Term">UILogRecorder</span>. Если этот параметр не указан,
то после окончания записи клиентское приложение откроет окно текстового
документа, в котором будет содержаться записанный журнал.</p>

<p class="MsoNormalCxSpLast">Таким
образом, строка запуска клиентского приложения, которое должно позволять
формировать журнал интерактивных действий, выглядит следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">1cv8c ENTERPRISE /IBName &quot;Test Manager&quot; /UILogRecorder</pre>

<p class="Regularbeforepicture">При
таком запуске в правом верхнем углу основного окна клиентского приложения
добавляется специальная командная панель, управляющая записью журнала.</p>

<p class="Picture"><IMG src="_img/img00591.gif?_=1496848987" WIDTH="284" ALT HEIGHT="155"></p>

<p class="MsoCaption">Рис.
583. Командная панель тестирования</p>

<p class="Regularbeforepicture">Если
нажать на единственную доступную кнопку на этой панели, то начнется запись
выполняемых действий пользователя. При этом панель сменит свой вид (станут
доступны все кнопки).</p>

<p class="Picture"><IMG src="_img/img00592.gif?_=1496848987" WIDTH="347" ALT HEIGHT="218"></p>

<p class="MsoCaption">Рис.
584. Командная панель тестирования во время записи</p>

<p class="MsoNormal">С
помощью командной панели можно завершить запись интерактивных действий, при
этом будет выполнена запись списка действий в файл (если указан параметр <span class="Term">File</span>) или открыто окно текстового документа со
списком действий. Также имеется возможность прервать запись журнала и
приостановить и продолжить запись журнала.</p>

<a name="_ref337563753"></a><a name="_ref337563752"></a><a name="_ref337563444"></a><a name="_ref337563443"></a><a name="_ref397345720"></a><a name="_ref397345719"></a><a id="TI000001068" class="bookmark" name="issogl2_28.6.3_описание_возможностей"><h3>28.6.3. Описание возможностей</h3></a>

<p class="Regularbeforepicture">С
точки зрения сценария тестирования, тестируемое приложение представляет собой
набор объектов, позволяющий имитировать интерактивные действия в тестируемом
приложении и предоставляющий доступ к логической модели интерфейса клиентского
приложения и элементов управляемой формы:</p>

<p class="Picture"><IMG src="_img/img00593.gif?_=1496848987" WIDTH="800" ALT HEIGHT="461"></p>

<p class="MsoCaption">Рис.
585. Схема тестируемого приложения</p>

<p class="MsoNormal">Далее
будут более подробно рассмотрены представленные объекты.</p>

<p class="Lang-parameter">ТестируемоеПриложение</p>

<p class="MsoNormal">Предоставляет следующие возможности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Установить соединение с тестируемым приложением;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Разорвать установленное соединение с тестируемым
приложением;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получить активное окно;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получить список окон тестируемого приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получить текущую информацию об ошибке;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получить начальную страницу тестируемого
приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Найти объект с указанными параметрами в иерархии
подчинённых объектов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Ожидать отображения объекта с заданными
параметрами на экране;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получать и очищать накопленные показатели
производительности тестируемого приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получать командный интерфейс тестируемого
приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Имитировать работу с диалогом выбора файлов;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Управлять ведением журнала интерактивных
действий пользователя в тестируемом приложении.</p>

<p class="Lang-parameter">ТестируемоеОкноКлиентскогоПриложения</p>

<p class="MsoNormal">Описывает
окно клиентского приложения и предоставляет методы для управления окном:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Получение коллекции подчиненных объектов окна;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Поиск объекта с указанными параметрами в
иерархии подчинённых объектов окна клиентского приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Определить, что данное тестируемое окно
описывает начальную страницу (рабочий стол);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получить командный интерфейс тестируемого клиентского
приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Работать с сообщениями пользователю;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Закрыть тестируемую форму;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Выполнение команды по навигационной ссылке.</p>

<p class="Lang-parameter">ТестируемыйКомандныйИнтерфейсОкна</p>

<p class="MsoNormal">Описывает командный интерфейс
тестируемой формы прикладного решения. Этому объекту подчинены несколько объектов
<span class="Term">ТестируемаяГруппаКомандногоИнтерфейса</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Панель разделов (в том случае, если она содержит
разделы);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель навигации (кроме интерфейса <span class="Interface">Такси</span>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель действий (кроме интерфейса <span class="Interface">Такси</span>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель функций текущего раздела;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель открытых;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель инструментов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель избранного;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Панель истории;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Меню функций (кроме интерфейса <span class="Interface">Формы в отдельных окнах</span>).</p>

<p class="MsoNormalCxSpFirst">Для
вспомогательных окон в командном интерфейсе формы присутствует только панель
навигации формы. При открытии форм в закладках, объект <span class="Term">ТестируемыйКомандныйИнтерфейсОкна</span>,
относящийся к главному окну приложения, не дает возможности получить информацию
о подчинённых группах и элементах командного интерфейса.</p>

<p class="MsoNormalCxSpLast">При
работе с коллекцией объектов, которые получаются с помощью метода <span class="Term">ПолучитьПодчиненныеОбъекты()</span>, рекомендуется
использовать методы <span class="Term">НайтиОбъект()</span> или <span class="Term">НайтиОбъекты()</span> вместо обращения к элементу
коллекции по индексу.</p>

<p class="Lang-parameter">ТестируемаяГруппаКомандногоИнтерфейса</p>

<p class="MsoNormalCxSpFirst">Данный
объект описывает группу командного интерфейса и позволяет получать коллекцию
подчиненных объектов группы и выполнять поиск объекта с указанными параметрами
в иерархии подчиненных элементов.</p>

<p class="MsoNormalCxSpLast">ТестируемаяГруппаКомандногоИнтерфейса
может состоять из элементов двух типов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ТестируемаяГруппаКомандногоИнтерфейса</span>,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ТестируемаяКнопкаКомандногоИнтерфейса</span>.</p>

<p class="Lang-parameter">ТестируемаяКнопкаКомандногоИнтерфейса</p>

<p class="MsoNormal">Описывает
команду командного интерфейса и предоставляет возможность имитировать ее
нажатие.</p>

<p class="Lang-parameter">ТестируемаяФорма</p>

<p class="MsoNormal">Описывает
форму тестируемого приложения и предоставляет методы для управления формой:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Получение коллекции подчиненных объектов формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Поиск объекта с указанными параметрами в
иерархии подчинённых объектов формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение текущего активного элемента формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение кнопки по умолчанию;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение признака модифицированности;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение командной панели формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Осуществлять выбор из списка или из меню;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Изменить текущий элемент формы на
следующий/предыдущий в соответствии с порядком обхода элементов формы (список
элементов в редакторе управляемой формы).</p>

<p class="Lang-parameter">ТестируемоеПолеФормы</p>

<p class="MsoNormal">Описывает
поле ввода формы и предоставляет методы для управления этим элементом формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Получение коллекции подчиненных объектов поля
формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Поиск объекта с указанными параметрами в
иерархии подчинённых объектов поля формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Определение вида элемента формы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Позволяет имитировать интерактивные действия для
следующих видов поля управляемой формы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Поле ввода;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле надписи;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле картинки;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле переключателя;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле флажка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле индикатора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле полосы регулирования;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле календаря;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле текстового документа;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле форматированного документа;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Поле табличного документа.</p>

<p class="MsoListBullet">&#9679; 
Не позволяет имитировать интерактивные действия
для следующих видов поля управляемой формы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Поле HTML-документа;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле географической схемы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поля диаграммы (любой);</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Поля графической схемы.</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем ввода, то
предоставляются следующие возможности:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Получить текст, редактируемый в поле ввода;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать нажатие кнопки <span class="Interface">Очистить</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать нажатие кнопки <span class="Interface">Выбрать</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать нажатие кнопки <span class="Interface">Открыть</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать открытие списка выбора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать выбор строки из списка выбора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать создание нового элемента из списка
выбора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Отменять редактирование строки в поле ввода;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать нажатие кнопок регулирования;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для выпадающего списка:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Открывать список;</p>

<p class="MsoListBullet3CxSpMiddle">&#9679; 
Ожидать завершение формирования списка;</p>

<p class="MsoListBullet3CxSpMiddle">&#9679; 
Закрывать список;</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Выполнять выбор из выпадающего списка.</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем вида флажок, то
предоставляются следующие возможности:</p>

<p class="MsoListBullet2">&#9679; 
Имитировать изменение состояния флажка.</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем вида переключатель,
то предоставляются следующие возможности:</p>

<p class="MsoListBullet2">&#9679; 
Имитировать выбор значения переключателя.</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем вида календарь, то
предоставляются следующие возможности:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Имитировать установку выбранной даты;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитировать выбор даты;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Имитировать операции перехода вперед или назад
(на месяц и год).</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем вида табличный
документ, то предоставляются следующие возможности:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Получение адреса текущей области;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Получение текста текущей области;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитация начала редактирования текущей области;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Имитация окончания редактирования текущей
области;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Получение текущего режима редактирования
табличного документа.</p>

<p class="MsoListBullet">&#9679; 
Если объект связан с полем ввода вида табличный
документ, текстовый документ или форматированный документ, то предоставляется
возможность выполнять запись документа в файл.</p>

<p class="Lang-parameter">ТестируемаяТаблицаФормы</p>

<p class="MsoNormal">Описывает
таблицу формы и предоставляет методы для управления этим элементом формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Получение активного элемента таблицы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение текста ячейки таблицы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Выполнять перемещение по таблице как по строкам,
так и по колонкам;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Выбрать строку;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Добавить или удалить строку;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Получение текущего режима редактирования
таблицы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Изменять пометку удаления у строки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Выделять и получать выделенные строки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Изменять порядок сортировки таблицы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Выполнять переход по уровням иерархических
списков;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Свернуть или развернуть узел для иерархических
списков;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Проверить состояние узла иерархического списка
(свернут или развернут) и возможность развертывания текущей строки
иерархического списка.</p>

<p class="Lang-parameter">ТестируемаяКнопкаФормы</p>

<p class="MsoNormal">Описывает кнопку формы и предоставляет возможность
имитировать ее нажатие.</p>

<p class="Lang-parameter">ТестируемаяГруппаФормы</p>

<p class="MsoNormal">Описывает
группу элементов формы и предоставляет методы для управления ей:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Развернуть группу;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Свернуть группу;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Получить текущую страницу группы.</p>

<p class="Lang-parameter">ТестируемаяДекорацияФормы</p>

<p class="MsoNormal">Описывает
декорацию формы и предоставляет возможность имитации нажатия гиперссылки или
картинки.</p>

<a id="TI000001069" class="bookmark" name="issogl2_28.6.4_пример_сценария_тестирования"><h3>28.6.4. Пример сценария тестирования</h3></a>

<p class="MsoNormal">Ниже
приведен простой пример, который создает новый элемент справочника <span class="Term">Товары</span> в некоторой конфигурации. Для основной
формы элемента важно наличие поля с заголовком <span class="Interface">Наименование</span> и
кнопки с заголовком <span class="Interface">Записать и закрыть</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Подключимся к тестируемому приложению</span>
ТестируемоеПриложение <span class="operator">=</span> <span class="keyword">Новый</span> ТестируемоеПриложение<span class="operator">(</span><span class="string">&quot;localhost&quot;</span><span class="operator">)</span><span class="operator">;</span>
ТестируемоеПриложение<span class="operator">.</span>УстановитьСоединение<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Найдем главное окно</span>
ГлавноеОкноТестируемого <span class="operator">=</span> ТестируемоеПриложение<span class="operator">.</span>НайтиОбъект<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ТестируемоеОкноКлиентскогоПриложения&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ГлавноеОкноТестируемого<span class="operator">.</span>Активизировать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Выполним команду создания элемента справочника товаров</span>
ГлавноеОкноТестируемого<span class="operator">.</span>ВыполнитьКоманду<span class="operator">(</span><span class="string">&quot;e1cib/command/Справочник.Товары.Создать&quot;</span><span class="operator">)</span><span class="operator">;</span>
ТестируемоеПриложение<span class="operator">.</span>ОжидатьОтображениеОбъекта<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ТестируемаяФорма&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;Товар*&quot;</span><span class="operator">)</span><span class="operator">;</span>
ТестируемаяФорма <span class="operator">=</span> ТестируемоеПриложение<span class="operator">.</span>НайтиОбъект<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ТестируемаяФорма&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;Товар*&quot;</span><span class="operator">)</span><span class="operator">;</span>
ТестируемаяФорма<span class="operator">.</span>Активизировать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Зададим наименование для нового товара</span>
ЭлементФормы <span class="operator">=</span> ТестируемаяФорма<span class="operator">.</span>НайтиОбъект<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ТестируемоеПолеФормы&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;Наименование&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементФормы<span class="operator">.</span>Активизировать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ЭлементФормы<span class="operator">.</span>ВвестиТекст<span class="operator">(</span><span class="string">&quot;Новый товар&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Запишем элемент</span>
ЭлементФормы <span class="operator">=</span> ТестируемаяФорма<span class="operator">.</span>НайтиОбъект<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ТестируемаяКнопкаФормы&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;Записать и закрыть&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементФормы<span class="operator">.</span>Нажать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></pre>

<a name="_ref338762161"></a><a id="TI000001070" class="bookmark" name="issogl2_28.6.5_сервисные_возможности"><h3>28.6.5. Сервисные возможности</h3></a>

<a id="TI000001071" class="bookmark" name="issogl3_28.6.5.1_запись_журнала_действий_пользователя"><h4>28.6.5.1. Запись журнала действий пользователя</h4></a>

<p class="MsoNormal">Клиентское
приложение можно запустить в режиме, позволяющем выполнять запись интерактивных
действий. В дальнейшем этот журнал можно записать в файл. Подробное описание
данного режима см. <a href="#_ref338762253">здесь</a>.</p>

<a id="TI000001072" class="bookmark" name="issogl3_28.6.5.2_преобразование_журнала_действий_пользователя_в_сценарий_автоматизированного_тестирования"><h4>28.6.5.2. Преобразование журнала действий пользователя в сценарий автоматизированного тестирования</h4></a>

<p class="MsoNormalCxSpFirst">Записанный
журнал действий пользователя можно преобразовать в текст на встроенном языке
для последующего использования. Для выполнения такого преобразования можно
использовать специальный инструмент, расположенный на диске ИТС: <span class="Interface">Технологическая
поддержка – 1С:Предприятие 8 – Универсальные отчеты и обработки –
Преобразование журнала действий пользователя</span> (<a href="/db/metod81/content/5014/hdoc" target="_top">http://its.1c.ru/db/metod81#content:5014:1</a>).</p>

<p class="MsoNormalCxSpLast">С
помощью этого инструмента можно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Выполнять преобразование как файла с журналом
(например, ранее записанным), так и текста, который можно ввести вручную (в
формате журнала).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Указывать вариант встроенного языка для
получившегося текста на встроенном языке.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Добавлять программный код, реализующий
подключение к клиенту тестирования.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Указывать необходимость разбиения длинных
последовательностей действий на процедуры, каждая из которых работает с одним
тестируемым окном прикладного решения.</p>

<p class="MsoNormalCxSpFirst">Получившийся
в результате преобразования текст можно использовать, например, для
многократного автоматического исполнения преобразованного набора действий.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>