<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 35. &#1054;&#1089;&#1086;&#1073;&#1077;&#1085;&#1085;&#1086;&#1089;&#1090;&#1080; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1082;&#1088;&#1086;&#1089;&#1089;&#1087;&#1083;&#1072;&#1090;&#1092;&#1086;&#1088;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093; &#1087;&#1088;&#1080;&#1082;&#1083;&#1072;&#1076;&#1085;&#1099;&#1093; &#1088;&#1077;&#1096;&#1077;&#1085;&#1080;&#1081;</title>
		<LINK REL="stylesheet" href="/db/content/v8310doc/src/руководство разработчика/style.css?_=1496848987">
		<script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/script.js?_=1496848987" TYPE="text/javascript"></script>
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 35. особенности разработки кроссплатформенных прикладных решений.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script charset="windows-1251" type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script charset="windows-1251" type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref215989038"></a><a name="_ref347233230"></a><a id="TI000001208" class="bookmark"><h1>Глава 35.  Особенности разработки кроссплатформенных прикладных решений</h1></a>

<a id="TI000001745" class="bookmark" name="issogl1_35.1_общая_информация"><h2>35.1. Общая информация</h2></a>

<p class="MsoNormal">Данная глава содержит рекомендации по
разработке прикладных решений, работающих под управлением и ОС Windows и ОС
Linux.</p>

<a id="TI000001209" class="bookmark" name="issogl1_35.2_особенности_файловой_системы"><h2>35.2. Особенности файловой системы</h2></a>

<p class="MsoNormalCxSpFirst">В ОС Linux при работе с файлами следует
учитывать, что имена файлов и каталогов являются регистрочувствительными. Например,
файлы с именами <span class="Interface">file.txt</span> и <span class="Interface">File.txt</span> являются разными файлами и могут располагаться
в одном каталоге.</p>

<p class="MsoNormalCxSpMiddle">В ОС Linux отсутствует понятие дисков,
которое активно используется в ОС Windows. В ОС Linux существует корневая
файловая система (&quot;<span class="Interface">/</span>&quot;)
в любое место которой (в общем случае) монтируются другие файловые системы,
расположенные на других носителях (диски и разделы, флэш-накопители, ISO-файлы
и т. д.). Наиболее распространенными (но не обязательными!) местами
монтирования внешних носителей являются точки монтирования (каталоги) <span class="Interface">/mnt</span> или <span class="Interface">/media</span>. При монтировании внешних носителей, они могут
монтироваться как <span class="Interface">/media/&lt;Метка раздела&gt;</span>
или как <span class="Interface">/media/&lt;Идентификатор устройства&gt;</span>.
При этом автоматическое монтирование внешнего носителя не гарантировано.</p>

<p class="MsoNormalCxSpLast">Отсутствие буквенных обозначений дисков в ОС
Linux может привести к следующим проблемам:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В прикладном решении используются явно заданные
пути, которые ориентированы только на использование ОС Windows;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
В прикладном решении используются механизмы
проверки введенных путей, где проверяется, в том числе, и указание буквы диска;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При указании пути, который начинается с
корневого каталога, следует помнить, что для ОС Linux такой путь однозначно
определяет положение каталога или файла, а для ОС Windows – нет. Например,
путь <span class="Interface">\temp\file.txt</span>
(или его linux-аналог <span class="Interface">/temp/file.txt</span>)
в ОС Linux точно укажет расположение и имя файла: это файл <span class="Interface">file.txt</span>, расположенный в каталоге <span class="Interface">temp</span> корневой файловой системы. Для ОС Windows все не
так однозначно. Такой путь означает, что файл <span class="Interface">file.txt</span> расположен в каталоге <span class="Interface">temp</span>, который расположен в корневом каталоге текущего
диска. При этом текущий диск может быть разным при двух последующих запусках
одного и того же клиентского приложения с одной и той-же информационной базой.</p>

<p class="MsoNormalCxSpFirst">При разработке прикладных решений следует
обратить внимание на следующий момент: в ОС Windows и ОС Linux используются
разные разделители пути. В ОС Windows используется &quot;<span class="Interface">\</span>&quot; («обратный слэш»), а в ОС Linux – &quot;<span class="Interface">/</span>&quot; («прямой слэш»). При работе с методами
встроенного языка такую разницу учитывать нет необходимости, т. к.
они корректно работают с любым разделителем. Но если требуется передавать путь
во внешнее приложение, следует указывать те разделители пути, которые
используются в той ОС, под управлением которой работает «1С:Предприятие». Для
получения информации о разделителях пути предназначены функции <span class="Term">ПолучитьРазделительПути()</span>,
<span class="Term">ПолучитьРазделительПутиКлиента()</span>, <span class="Term">ПолучитьРазделительПутиСервера()</span>.</p>

<p class="MsoNormalCxSpMiddle">Наряду с различными разделителями пути, ОС
Windows и ОС Linux по разному обрабатывают файловые маски. Например, маска <span class="Interface">*.*</span> означает указание всех файлов в ОС Windows и
указание всех файлов, содержащих в имени &quot;<span class="Interface">.</span>&quot; – в ОС Linux. Такое различие может
приводить к неожиданному поведению методов встроенного языка НайтиФайлы(), <span class="Term">УдалитьФайлы()</span> и
объекта ДиалогВыбораФайла.
Особенности указания файловых масок в различных операционных системах отражены
в синтакс-помощнике для функций <span class="Term">НайтиФайлы()</span>,
<span class="Term">УдалитьФайлы()</span>. Для получения файловой маски,
описывающей все файлы, предназначены функции <span class="Term">ПолучитьМаскуВсеФайлы()</span>,
<span class="Term">ПолучитьМаскуВсеФайлыКлиента()</span>, <span class="Term">ПолучитьМаскуВсеФайлыСервера()</span>.</p>

<p class="MsoNormalCxSpMiddle">Еще одной особенностью ОС Linux является то,
что в ней нет возможности обращаться к сетевым ресурсам, используя UNC-нотацию
(в этом случае адрес имеет следующий вид: \\server\folder\folder\file.ext).
Поэтому, при необходимости использовать какой-либо внешний сетевой ресурс, его необходимо
предварительно смонтировать на корневую файловую систему. При этом следует
помнить, что каждое монтирование может выполняться в разную точку монтирования
(разный каталог). Также можно использовать доступ к внешним сетевым ресурсам с
помощью специальных приложений (например, <span class="Interface">smbclient</span>), однако следует учитывать, что такие
приложения не обязательно будут установлены в используемой копии ОС Linux.</p>

<p class="MsoNormalCxSpLast">Более подробную информацию об устройстве
файловой системы ОС Linux и принципах работы с ней можно получить в документации
к операционной системе или в сети Интернет.</p>

<a id="TI000001210" class="bookmark" name="issogl1_35.3_работа_с_внешними_устройствами"><h2>35.3. Работа с внешними устройствами</h2></a>

<p class="MsoNormal">Имена внешних устройств (и доступ к ним)
по-разному выполняется в различных операционных системах. Например, последовательные
порты в ОС Windows будут называть <span class="Term">COM1</span>,
<span class="Term">COM2</span> и т. д. В ОС Linux (в зависимости
от дистрибутива и устройства) порты могут именоваться так: <span class="Term">/dev/ttyS0</span>,
<span class="Term">/dev/ttyS1</span> и т. д. или так: <span class="Term">/dev/ttyUSB0</span>,
<span class="Term">/dev/ttyUSB1</span> и т. д. Эту особенность
следует учитывать как при разработке внешних компонент, работающих с
оборудованием, так и при разработке диалогов настройки внешних компонент.
Например, перечень портов, которые можно указать в обработке, следует получать
непосредственно из настраиваемой внешней компоненты с помощью специального
метода.</p>

<a id="TI000001211" class="bookmark" name="issogl1_35.4_ограниченность_в_правах"><h2>35.4. Ограниченность в правах</h2></a>

<p class="MsoNormal">В ОС Linux не принято работать от имени
учетной записи супер-пользователя (<span class="Interface">root</span>). Для обычного пользователя для записи всегда
доступен только домашний каталог и, как правило, каталог временных файлов.
Остальная часть файловой системы может быть доступна или только на чтение или
быть недоступной совсем (вся или некоторые каталоги). В связи с этим, при
разработке следует учитывать, какой доступ будет иметь пользовать, от лица
которого выполняется «1С:Предприятие», в каталоги, которые возвращают методы
глобального контекста:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">КаталогДокументов()</span> – доступ на чтение и
запись;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">КаталогПрограммы()</span> – доступ на чтение;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">КаталогВременныхФайлов()</span> – доступ на
чтение и запись;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">РабочийКаталогДанныхПользователя()</span> – доступ
на чтение и запись.</p>

<p class="MsoNormal">Для доступа к внешним устройствам может
потребоваться, чтобы пользователь входил в какую-либо специализированную группу
(или группы). Подробнее об этом следует смотреть в документации к используемой
операционной системе.</p>

<a id="TI000001212" class="bookmark" name="issogl1_35.5_шрифты"><h2>35.5. Шрифты</h2></a>

<p class="MsoNormal">При разработке прикладных решений рекомендуется
всегда использовать стилевые шрифты, без явного указания гарнитуры шрифта. При
необходимости можно использовать шрифты, входящие в состав Microsoft Core Fonts
(<a href="http://sourceforge.net/projects/corefonts/" target="_blank">http://sourceforge.net/projects/corefonts/</a>).
Не рекомендуется использовать в прикладных решениях другие шрифты, т. к.
они могут отсутствовать той или иной используемой операционной системой, при
этом внешний вид прикладного решения будет искажен.</p>

<a id="TI000001213" class="bookmark" name="issogl1_35.6_полеhtmlдокумента"><h2>35.6. ПолеHTMLДокумента</h2></a>

<p class="MsoNormal">В «1С:Предприятии», работающем под
управлением ОС Linux, для работы с HTML используется WebKit. «1С:Предприятие»,
работающее под управлением ОС Windows, для работы с HTML используется текущая
версия Internet Explorer. В связи с этим, при работе с HTML следует учитывать
следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Отображение HTML-документа в различных
операционных системах может различаться.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При доступе к DOM-модели HTML-документа с
помощью свойства <span class="Term">ПолеHTMLДокумента.Документ</span> следует использовать
только те свойства и методы, которые доступы во всех веб-браузерах,
поддерживаемых системой «1С:Предприятие». Это обусловлено как использованием
разных средств для отображения HTML-документа в клиентском приложении, так и
тот факт, что для работы с прикладным решением может использовать веб-доступ,
где увеличивается количество используемых веб-браузеров и их версий.</p>

<a id="TI000001214" class="bookmark" name="issogl1_35.7_механизмы_com_ole_activedocument"><h2>35.7. Механизмы COM, OLE, ActiveDocument</h2></a>

<p class="MsoNormalCxSpFirst">Данные механизмы недоступны в ОС Linux. Для
интеграции необходимо использовать другие средства, например файловый обмен в формате
XML или web-сервисы.</p>

<p class="MsoNormalCxSpMiddle">Для внешних компонент, реализованных по
COM-технологии, рекомендуется переработать их с использованием технологии
NativeAPI.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>
	</body>
</html>