<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 6. &#1050;&#1086;&#1084;&#1072;&#1085;&#1076;&#1085;&#1099;&#1081; &#1080;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089;</title>
		<LINK REL="stylesheet" href="style.css?_=1496848987">
		<SCRIPT src="script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 6. командный интерфейс.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref441854339"></a><a name="_ref441854321"></a><a name="_ref441853424"></a><a name="_ref237783388"></a><a id="TI000000365" class="bookmark"><h1>Глава 6.  Командный интерфейс</h1></a>

<p class="MsoNormalCxSpFirst"><span class="Bold">Командный интерфейс</span> – это основное средство доступа
пользователя к функциональности приложения, средство, которое позволяет
перемещаться между формами и выполнять те или иные действия. Разработчик
конфигурации не прописывает детально команды глобального интерфейса и командных
панелей форм для каждой реализуемой в приложении роли пользователя (или
комбинации таких ролей), а описывает те правила, по которым командный интерфейс
будет автоматически формироваться для пользователя.</p>

<p class="MsoNormalCxSpMiddle">Формирование
командного интерфейса выполняется в зависимости от прав пользователя (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref72302185">здесь</a>), функциональных опций приложения (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref213664543">здесь</a>) и, наконец, настроек самого пользователя.</p>

<p class="MsoNormalCxSpLast">Такое
декларативное описание командного интерфейса помогает решить задачу
согласования предоставленных пользователю команд и прав пользователя на
выполнение тех или иных действий, а также задачу модификации командного
интерфейса приложения при неполном внедрении возможностей приложения.</p>

<a id="TI000000366" class="bookmark" name="issogl1_6.1_общее_устройство_командного_интерфейса"><h2>6.1. Общее устройство командного интерфейса</h2></a>

<a id="TI000000367" class="bookmark" name="issogl2_6.1.1_разделы_и_подразделы_основного_окна_приложения"><h3>6.1.1. Разделы и подразделы основного окна приложения</h3></a>

<p class="MsoNormalCxSpFirst">Все
глобальные команды основного окна приложения объединяются в разделы. Переход
между ними осуществляется при помощи панели разделов. Состав этих разделов
однозначно определяется составом подсистем верхнего уровня, для которых установлен
признак <span class="Interface">Включать в командный интерфейс</span>.</p>

<p class="MsoNormalCxSpMiddle">Команды
текущего раздела отображаются в панели навигации и панели действий основного
окна.</p>

<p class="MsoNormalCxSpLast">При
отображении команд того или иного раздела в панели навигации возможно появление
одного или нескольких «подразделов», каждый из которых – это совокупность
команд, соответствующих подчиненной подсистеме (также с признаком <span class="Interface">Включать в командный интерфейс</span>).
Например, в разделе <span class="Interface">Торговый учет</span> возможно
появление подразделов <span class="Interface">Розничная торговля</span> и <span class="Interface">Оптовая торговля</span> за счет
существования соответствующих подчиненных подсистем.</p>

<a name="_ref215986277"></a><a id="TI000000368" class="bookmark" name="issogl2_6.1.2_виды_команд"><h3>6.1.2. Виды команд</h3></a>

<p class="MsoNormal">Командный
интерфейс пользователя можно разделить:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
на независимые глобальные команды,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
параметризуемые глобальные команды,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
локальные команды формы.</p>

<p class="MsoNormal">В
рамках данного раздела мы будем рассматривать только глобальные команды (описание
локальных команд формы см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 7. формы.htm?_=1496848987#_ref217219499">здесь</a>). С другой стороны, команды делятся:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
на стандартные команды (автоматически добавляемые
системой в командный интерфейс);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
навигационные команды;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды действия;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
команды, созданные в конфигурации.</p>

<a id="TI000000369" class="bookmark" name="issogl3_6.1.2.1_стандартные_команды"><h4>6.1.2.1. Стандартные команды</h4></a>

<p class="MsoNormal">Для
большинства объектов конфигурации система предоставляет стандартные команды,
которые автоматически помещаются в командный интерфейс. Ниже приведен список
таких объектов и стандартные команды, которые для них предоставляет система:</p>

<p class="MsoListBullet">&#9679; 
Общая форма:</p>

<p class="MsoListBullet2">&#9679; 
Открыть общую форму;</p>

<p class="MsoListBullet">&#9679; 
Константы:</p>

<p class="MsoListBullet2">&#9679; 
Открыть форму редактирования константы;</p>

<p class="MsoListBullet">&#9679; 
Справочники:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму новой группы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку с отбором по владельцу;</p>

<p class="MsoListBullet">&#9679; 
Документы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet">&#9679; 
Журналы документов:</p>

<p class="MsoListBullet2">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet">&#9679; 
Отчеты:</p>

<p class="MsoListBullet2">&#9679; 
Открыть основную форму;</p>

<p class="MsoListBullet">&#9679; 
Обработки:</p>

<p class="MsoListBullet2">&#9679; 
Открыть основную форму;</p>

<p class="MsoListBullet">&#9679; 
План видов характеристик:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму новой группы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet">&#9679; 
Планы счетов:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть
форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть
форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод
на основании;</p>

<p class="MsoListBullet">&#9679; 
Планы видов расчета:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet">&#9679; 
Перечисления:</p>

<p class="MsoListBullet2">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet">&#9679; 
Регистры сведений:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку с отбором по регистратору;</p>

<p class="MsoListBullet">&#9679; 
Регистры накопления:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку с отбором по регистратору;</p>

<p class="MsoListBullet">&#9679; 
Регистры бухгалтерии:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку с отбором по регистратору;</p>

<p class="MsoListBullet">&#9679; 
Регистры расчета:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку с отбором по регистратору;</p>

<p class="MsoListBullet">&#9679; 
Бизнес-процессы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Перейти к списку задач с отбором по
бизнес-процессу;</p>

<p class="MsoListBullet">&#9679; 
Задачи:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet">&#9679; 
Планы обмена:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открыть форму списка;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Открыть форму нового;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Ввод на основании;</p>

<p class="MsoListBullet">&#9679; 
Критерии отбора:</p>

<p class="MsoListBullet2">&#9679; 
Открыть форму списка.</p>

<a id="TI000000370" class="bookmark" name="issogl4_6.1.2.1.1_формирование_и_размещение_стандартных_команд"><h5>6.1.2.1.1. Формирование и размещение стандартных команд</h5></a>

<p class="MsoNormalCxSpFirst">Стандартные
команды открытия формы списка и создания нового элемента формируются всегда,
если не выключено свойство <span class="Interface">Использовать стандартные команды</span>.</p>

<p class="MsoNormalCxSpMiddle">Стандартная
команда отчета формируется, если у отчета задана основная схема компоновки
данных или задана основная или дополнительная форма.</p>

<p class="MsoNormalCxSpMiddle">Стандартная
команда обработки формируется, если у обработки задана основная или
дополнительная форма.</p>

<p class="MsoNormalCxSpMiddle">Стандартные
команды для ввода на основании создаются системой в том случае, если соответствующим
образом задано свойство <span class="Interface">Ввод на основании</span>.
Например, если для справочника <span class="Interface">Товары</span> и для справочника <span class="Interface">Партии товаров</span> сказано,
что на их основании возможен ввод документов <span class="Interface">Приходная накладная</span> и <span class="Interface">Расходная накладная</span>, то у
справочников появится стандартная команда ввода на основании.</p>

<p class="MsoNormalCxSpMiddle">Стандартные
команды для открытия формы списка с отбором по владельцу формируются в том
случае, если соответствующим образом задано свойство справочника <span class="Term">Владельцы</span>, а для регистра сведений есть одно
или несколько измерений с признаком <span class="Term">Ведущее</span>.</p>

<p class="MsoNormalCxSpLast">Стандартная
команда формы списка с отбором по регистратору формируется для регистров,
подчиненных регистратору.</p>

<p class="Regularbeforetable">Стандартные
команды размещаются следующим образом:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Панель</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Размещаемые
  команды</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель навигации</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Команды открытия списков</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpLast">Панель действий</p>
  </td>
  
  <td valign="top">
  <p class="MsoListBulletCxSpFirst">&#9679; 
  Команда открытия формы редактирования констант.</p>
  <p class="MsoListBulletCxSpMiddle">&#9679; 
  Команды открытия форм новых объектов.</p>
  <p class="MsoListBulletCxSpLast">&#9679; 
  Команды открытия форм отчетов и обработок</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель навигации формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Команды открытия формы списка с отборами</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Командная панель формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Команды ввода на основании</p>
  </td>
  
 </tr>
</table>

<a id="TI000000371" class="bookmark" name="issogl4_6.1.2.1.2_параметризуемые_стандартные_команды"><h5>6.1.2.1.2. Параметризуемые стандартные команды</h5></a>

<p class="Regularbeforetable">Некоторые
стандартные команды являются параметризуемыми, т. е. могут быть
выполнены в контексте той или иной формы, получив в качестве параметра
некоторое значение.</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Команда</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Тип параметра</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ввод
  на основании</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ссылка
  на объект-основание</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Открытие
  списка с отбором по владельцу</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ссылка
  на объект-владелец</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Открытие
  списка с отбором по регистратору</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ссылка
  на документ-регистратор</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Открытие
  списка критерия отбора</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ссылка
  на значение критерия отбора</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">О
порядке формирования типа параметра стандартных параметризуемых команд см. <a href="#_ref215571257">здесь</a>.</p>

<p class="MsoNormalCxSpLast">Так,
если для справочника <span class="Interface">Товары</span> и для справочника <span class="Interface">Партии товаров</span> сказано,
что на их основании возможен ввод документа <span class="Interface">Приходная накладная</span>, то
тип параметра команды ввода на основании будет составным: <span class="Term">СправочникСсылка.Товары</span> и <span class="Term">СправочникСсылка.ПартииТоваров</span>. Поэтому
стандартная команда <span class="Interface">Ввод приходной накладной на основании</span>
будет автоматически размещена в формах элементов справочников товаров и партий товаров.</p>

<a id="TI000000372" class="bookmark" name="issogl3_6.1.2.2_независимые_и_параметризуемые_глобальные_команды"><h4>6.1.2.2. Независимые и параметризуемые глобальные команды</h4></a>

<p class="MsoNormal"><span class="Bold">Независимые глобальные команды</span> предназначены для выбора
пользователем той или иной функциональности в рамках приложения в целом.
Выполнение такой команды не требует дополнительной информации (параметров).
Это, например, такие команды, как:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
открытие списка справочника,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
открытие журнала документов,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
открытие формы того или иного отчета,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
открытие формы нового элемента справочника и т. д.</p>

<p class="MsoNormal"><span class="Bold">Параметризуемые глобальные команды</span> зависят от контекста
выполнения и не могут быть выполнены без получения дополнительной информации
(параметра выполнения команды). Это, например, такие команды, как:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
открытие списка подчиненного справочника
(параметр – ссылка на элемент справочника-владельца);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
открытие списка записей регистра, подчиненного
регистратору (параметр – ссылка на документ-регистратор);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
ввод одного объекта на основании другого
(параметр – объект, служащий «основанием»).</p>

<p class="MsoNormalCxSpFirst">Параметризуемые
команды могут отображаться в панели навигации вспомогательного окна и
непосредственно в командной панели формы.</p>

<p class="MsoNormalCxSpMiddle">Глобальные
команды отображаются в командной панели формы перед командой <span class="Interface">Открыть справку</span>.
При этом команды группы <span class="Interface">Важное</span>
размещаются непосредственно в командной панели, а остальные группы команд
(стандартная группа <span class="Interface">Создать на основании</span>
и другие группы категории <span class="Interface">Командная панель формы</span>)
размещаются в виде подменю. Выполнение глобальных команд, размещенных в
командной панели формы, приводит к открытию нового вспомогательного окна
приложения.</p>

<p class="MsoNormalCxSpLast">Следует
помнить, что глобальные команды не отрабатывают свойство <span class="Term">Пометка</span>. Данное свойство предназначено для
использования только командами формы (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 7. формы.htm?_=1496848987#_ref391303984">здесь</a>).</p>

<a id="TI000000373" class="bookmark" name="issogl3_6.1.2.3_навигационные_команды_и_команды_действия"><h4>6.1.2.3. Навигационные команды и команды действия</h4></a>

<p class="MsoNormalCxSpFirst"><span class="Bold">Навигационными</span> будем называть те команды, которые
предназначены для перехода пользователя к очередной форме приложения, не
покидая текущее (основное или вспомогательное) окно приложения. Навигационная
команда открывает очередную форму в том же окне приложения, в котором команда
была вызвана пользователем.</p>

<p class="MsoNormalCxSpMiddle">Навигационными
могут быть как независимые команды глобального командного интерфейса, так и
параметризуемые глобальные команды. Навигационные команды размещаются в панели
навигации основного или вспомогательного окна приложения.</p>

<p class="MsoNormalCxSpMiddle">Примерами
навигационных команд основного окна приложения могут служить команды перехода к
списку справочника или журналу документов. Например, команда <span class="Interface">Валюты</span> откроет в том же
окне форму списка валют, а команда <span class="Interface">Финансовые документы</span>
откроет в том же окне форму списка документов.</p>

<p class="MsoNormalCxSpLast">Примерами
навигационных команд вспомогательного окна приложения могут служить команды
перехода к спискам, логически подчиненным тому объекту, который редактируется в
данном окне. Например, в форме редактирования элемента справочника валют может
быть команда перехода к регистру сведений с историей изменения курса валюты; в
форме документа может быть команда перехода к его движениям по тому или иному
регистру и т. д.</p>

<p class="Note"><span class="Note">Примечание.</span>
Отказ от открытия формы не прерывает выполнение навигационной команды.
Использование отказа от открытия формы в навигационных командах приведет к
открытию пустой формы.</p>

<p class="MsoNormalCxSpFirst">Командами
<span class="Bold">действия</span> будем называть те команды, выполнение которых,
как правило, приводит к открытию нового вспомогательного окна приложения. Такие
команды на некоторое время переключают пользователя на выполнение другой
задачи, т. е. существенно изменяют контекст его деятельности.
Например, команда создания нового документа переводит пользователя от задачи
навигации по приложению, выполняемой в основном окне приложения, к задаче ввода
нового документа.</p>

<p class="MsoNormalCxSpLast">Такие
команды размещаются в панели действий основного окна приложения или в командной
панели формы, отображаемой во вспомогательном окне приложения.</p>

<a id="TI000000374" class="bookmark" name="issogl3_6.1.2.4_команды_созданные_в_конфигурации"><h4>6.1.2.4. Команды, созданные в конфигурации</h4></a>

<p class="MsoNormalCxSpFirst">Кроме
стандартных команд разработчик конфигурации может создать свои собственные
команды, установить для них место размещения (группу команд), описать на
встроенном языке действие, выполняемое при выполнении команд, и т. д.</p>

<p class="MsoNormalCxSpLast">Более
подробно о свойствах объекта <span class="Term">Команда</span> см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215489378">здесь</a> и см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref277067399">здесь</a>.</p>

<a id="TI000000375" class="bookmark" name="issogl2_6.1.3_группы_команд"><h3>6.1.3. Группы команд</h3></a>

<p class="Regularbeforetable">Все
глобальные команды по месту своего размещения и по своему характеру делятся на
четыре категории.</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Категория</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Описание</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель
  навигации</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Для
  размещения независимых навигационных команд</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель
  навигации формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Для
  размещения параметризуемых навигационных команд, вызываемых из формы</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель
  действий</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Для
  размещения команд, приводящих к появлению нового вспомогательного окна
  приложения</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Командная
  панель формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Для
  размещения в форме параметризуемых команд, приводящих к появлению нового вспомогательного
  окна приложения</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast">Приведенные
здесь категории представляют собой перечень тех мест интерфейса приложения, в
которых могут отображаться глобальные команды.</p>

<p class="Regularbeforetable">Для
группировки глобальных команд система реализует стандартные группы команд. </p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Место размещения</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Стандартные группы команд</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpLast">Панель
  навигации</p>
  </td>
  
  <td valign="top">
  <p class="MsoListBulletCxSpFirst">&#9679; 
  Важное,</p>
  <p class="MsoListBulletCxSpMiddle">&#9679; 
  Обычное,</p>
  <p class="MsoListBulletCxSpLast">&#9679; 
  См. также</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpLast">Панель
  действий</p>
  </td>
  
  <td valign="top">
  <p class="MsoListBulletCxSpFirst">&#9679; 
  Создать,</p>
  <p class="MsoListBulletCxSpMiddle">&#9679; 
  Отчеты,</p>
  <p class="MsoListBulletCxSpLast">&#9679; 
  Сервис</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpLast">Панель
  навигации формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoListBulletCxSpFirst">&#9679; 
  Важное,</p>
  <p class="MsoListBulletCxSpMiddle">&#9679; 
  Перейти,</p>
  <p class="MsoListBulletCxSpLast">&#9679; 
  См. также</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpLast">Командная
  панель формы</p>
  </td>
  
  <td valign="top">
  <p class="MsoListBulletCxSpFirst">&#9679; 
  Важное,</p>
  <p class="MsoListBulletCxSpLast">&#9679; 
  Создать на основании</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast">Кроме
того, при разработке конфигурации разработчик может создать собственные группы
команд (объект конфигурации <span class="Interface">Общие – Группы команд</span>,
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215489735">здесь</a>), которые можно отнести к одной из перечисленных выше
категорий (свойство <span class="Interface">Категория</span>
группы команд). Эти группы могут наряду с предопределенными группами
использоваться для размещения в них разрабатываемых команд.</p>

<a id="TI000000376" class="bookmark" name="issogl1_6.2_построение_глобального_командного_интерфейса"><h2>6.2. Построение глобального командного интерфейса</h2></a>

<p class="MsoNormal">В
данном разделе рассмотрены объекты и свойства объектов конфигурации, влияющие
на построение глобального командного интерфейса конфигурации.</p>

<a name="_ref215494086"></a><a name="_ref391310993"></a><a name="_ref391310992"></a><a id="TI000000377" class="bookmark" name="issogl2_6.2.1_подсистемы"><h3>6.2.1. Подсистемы</h3></a>

<p class="Regularbeforepicture">Основа
формирования глобального командного интерфейса основного окна приложения –
структура подсистем конфигурации. Именно подсистемы формируют представление
пользователя о функциональности приложения в целом. Структура подсистем
описывает для пользователя общую функциональность системы. Таким образом,
построение глобального командного интерфейса основного окна приложения «от
структуры подсистем» налагает на разработчика определенную ответственность при
разработке подсистем конфигурации. Фактически структура подсистем – это
первое, что увидит пользователь при ознакомлении с приложением.</p>

<p class="Picture"><IMG src="_img/img00197.gif?_=1496848987" WIDTH="764" ALT HEIGHT="252"></p>

<p class="MsoCaption">Рис.
198. Отображение подсистем в разделы</p>

<p class="MsoNormal">На
структуру командного интерфейса влияют подсистемы, которым установлено свойство
<span class="Interface">Включать в командный
интерфейс</span>. Но данное свойство устанавливается подсистемам по умолчанию,
и, таким образом, предполагается, что подсистемы создаются в первую очередь
именно для описания глобального командного интерфейса.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если в конфигурации нет ни одной подсистемы с установленным свойством <span class="Interface">Включать в командный
интерфейс</span>, то панель разделов не отображается в основном окне приложения.</p>

<p class="MsoNormalCxSpFirst">Подсистемы
первого уровня приводят к появлению в приложении <span class="Bold">разделов</span> –
совокупности глобальных команд определенной предметной направленности. Разделы
отображаются в панели разделов основного окна приложения. Выбор того или иного
раздела изменяет состав команд панели навигации и панели действий.</p>

<p class="MsoNormalCxSpMiddle">Подсистемы
более низкого уровня приводят к появлению в панели навигации <span class="Bold">подразделов</span>,
в которые собираются команды соответствующей подсистемы.</p>

<p class="MsoNormalCxSpMiddle">Принадлежность
объекта к тому или иному набору подсистем определяет появление команд объекта в
соответствующих фрагментах командного интерфейса конфигурации. Однако новые
объекты по умолчанию не принадлежат ни одной подсистеме. Это означает, что
команды объекта отсутствуют в командном интерфейсе. Поэтому для помещения
стандартных и созданных разработчиком команд объекта в соответствующие
фрагменты командного интерфейса необходимо указать, каким подсистемам принадлежит
этот объект.</p>

<p class="MsoNormalCxSpLast">Принадлежность
объекта к разным подсистемам является независимой, т. е. объект можно
отнести одновременно как к «родительской» и «подчиненной» подсистемам, так и
только к «подчиненной», если это целесообразно из соображений формирования
командного интерфейса.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если в конфигурации нет ни одной подсистемы с установленным свойством <span class="Interface">Включать в командный
интерфейс</span>, то на рабочий стол попадают все команды, которые на нем можно
было разместить вручную. В этой ситуации меняется внешний вид редактора
командного интерфейса рабочего стола: в нем исчезает дерево команд и пропадает
возможность удалить команду с рабочего стола.</p>

<p class="MsoNormal">Как только появляется первая подсистема, включенная
в командный
интерфейс, автоматическое добавление команд на начальную страницу
перестает действовать и команды нужно размещать явно.</p>

<p class="Note"><span class="Note">Примечание.</span>
Режим автоматического размещения на начальной странице всех команд не
действует, если у конфигурации установлен режим запуска <span class="Interface">Обычное приложение</span>.</p>

<p class="MsoNormal">При
формировании панели разделов используются все подсистемы первого уровня,
которые соответствуют всем нижеперечисленным условиям:</p>

<p class="MsoListNumberCxSpFirst">1.  Свойство
<span class="Interface">Включать в командный
интерфейс</span> установлено в значение <span class="Term">Истина</span>;</p>

<p class="MsoListNumberCxSpMiddle">2.  Права
доступа (см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 6. описание прав доступа.htm?_=1496848987#_ref391310701">здесь</a>) обеспечивают доступность подсистемы для текущего
пользователя;</p>

<p class="MsoListNumberCxSpMiddle">3.  Подсистема
не отключена функциональными опциями;</p>

<p class="MsoListNumberCxSpLast">4.  Подсистема
не отключена пользователем с помощью диалога настройки панели разделов.</p>

<p class="MsoNormal">В
том случае, если в разделе все команды недоступны текущему пользователю (в силу
отсутствия прав доступа или команды отключены функциональными опциями или
пользовательскими настройками), такой раздел все равно будет отображаться в панели
разделов.</p>

<a id="TI000000378" class="bookmark" name="issogl2_6.2.2_команды"><h3>6.2.2. Команды</h3></a>

<p class="MsoNormalCxSpFirst">Как
говорилось выше, существуют стандартные команды, предоставляемые системой
автоматически, и команды, создаваемые разработчиком в конфигурации.</p>

<p class="MsoNormalCxSpLast">Объект
конфигурации <span class="Term">Команда</span> может быть создан как подчиненный
объект для следующих объектов конфигурации:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Справочники,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Документы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Журнал документов,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Отчеты,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Обработки,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы видов характеристик,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Перечисления,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы счетов,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы видов расчета,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры сведений,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры накопления,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры бухгалтерии,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры расчета,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Бизнес-процессы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Задачи,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы обмена,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Критерии отбора.</p>

<p class="MsoNormal">Кроме
того, возможно создание общих команд (ветка дерева конфигурации <span class="Interface">Общие – Общие команды</span>,
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215489378">здесь</a>).</p>

<a name="_ref215571257"></a><a name="_ref400384389"></a><a name="_ref400384388"></a><a id="TI000000379" class="bookmark" name="issogl2_6.2.3_параметризация_команды"><h3>6.2.3. Параметризация команды</h3></a>

<p class="MsoNormal">Если
команда является параметризуемой, то ее выполнение предполагает получение
некоторого значения в качестве параметра. Источником такого значения могут
служить только данные формы.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Задавать тип значения параметра команды имеет смысл только для тех команд,
которые размещаются в формах (относятся к группам категорий <span class="Interface">Командная панель формы</span>
или <span class="Interface">Панель навигации формы</span>).</p>

<p class="MsoNormal">Свойство
<span class="Interface">Тип параметра команды</span>
фактически задает состав форм, в контексте которых возможно выполнение данной
команды. Например, если команда имеет тип параметра <span class="Term">СправочникСсылка.Товары</span>, то она может быть
выполнена:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
в форме элемента справочника <span class="Interface">Товары</span>, где
параметром послужит ссылка на редактируемый в форме объект;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
в форме списка справочника <span class="Interface">Товары</span>, где
параметром послужит ссылка из текущей строки списка;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
в форме приходной накладной, где параметром
послужит ссылка на товар из текущей строки табличной части документа и т. д.</p>

<p class="MsoNormalCxSpFirst">Количество
значений выбранного типа, которые будут переданы команде в качестве значений
параметра, определяет свойство <span class="Interface">Режим использования параметра</span>.
Если это свойство установлено в значение <span class="Interface">Одиночный</span>, то в команду
передается одно значение указанного типа.</p>

<p class="MsoNormalCxSpLast">Если
свойство установлено в значение <span class="Interface">Множественный</span>, то в
качестве параметра всегда передается массив значений (даже если выбрано одно
значение). Этот режим имеет смысл выбирать тогда, когда источником данных для
команды может являться таблица в режиме множественного выделения. В этом случае
первым элементом массива будет выступать текущая строка (вне зависимости от
последовательности выделения строк табличного поля). Так, если мы имеем список
товаров, состоящий из элементов <span class="Interface">Миксер</span>, <span class="Interface">Пылесос</span>, <span class="Interface">Холодильник</span>, <span class="Interface">Чайник</span>, в котором
выделены элементы <span class="Interface">Миксер</span>, <span class="Interface">Холодильник</span> и <span class="Interface">Чайник</span>, а текущей строкой
является <span class="Interface">Холодильник</span>, то команда
получит массив следующего содержания (по порядку элементов): <span class="Interface">Холодильник</span>, <span class="Interface">Миксер</span>, <span class="Interface">Чайник</span>. Порядок элементов
после первого не определен, несмотря на некоторый порядок, приведенный в
примере.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если текущая строка не входит в выделение, то первый элемент в массиве
невозможно идентифицировать однозначно.</p>

<p class="MsoNormalCxSpFirst">При
размещении на форме нескольких таблиц управляемой формы, связанных с одним
реквизитом формы типа <span class="Term">ДинамическийСписок</span>, неопределено, данные какой
из этих таблиц будут использоваться для параметризации команды.</p>

<p class="MsoNormalCxSpMiddle">Формирование
фрагментов командного интерфейса форм выполняется автоматически на основании
типа основного реквизита. При редактировании формы возможно дополнение
фрагмента командного интерфейса разработчиком формы. Например, если форма
предназначена для редактирования товара, то в нее автоматически попадут все
команды, тип параметра которых – <span class="Term">СправочникСсылка.Товары</span> (например, <span class="Interface">Печать карточки товара</span>, <span class="Interface">Переход к списку цен товара</span>
и т. д.). Если товар имеет реквизит <span class="Term">Производитель</span>, то при разработке формы в нее
также можно будет включить и команды с типом параметра <span class="Term">СправочникСсылка.Контрагент</span> (например, <span class="Interface">Карточка контрагента</span>, <span class="Interface">Договора контрагента</span> и т. д.),
так как в форме можно получить значение для параметра таких команд. Но такие
команды (которые не относятся к основному реквизиту) автоматически не
включаются в командный интерфейс, но разработчик может включить их с помощью
редактора формы.</p>

<p class="MsoNormalCxSpLast">Для
группы справочника (вид иерархии <span class="Interface">Иерархия групп и
элементов</span>) и иерархического плана видов характеристик не происходит
автоматического включения в командный интерфейс формы группы параметризуемых
глобальных команд, однако разработчик может включить такие команды в командный
интерфейс с помощью редактора формы.</p>

<a id="TI000000380" class="bookmark" name="issogl2_6.2.4_формирование_командного_интерфейса_по_умолчанию"><h3>6.2.4. Формирование командного интерфейса по умолчанию</h3></a>

<p class="MsoNormalCxSpFirst">На
место размещения команд влияют свойства <span class="Interface">Тип параметра команды</span>, <span class="Interface">Группа</span>
и принадлежность команды (или родительского объекта) к той или иной подсистеме.</p>

<p class="MsoNormalCxSpMiddle">Независимые
(т. е. непараметризуемые) команды относятся к фрагментам глобального
командного интерфейса, соответствующим подсистемам, в которые включен
объект-владелец или сама команда (для общих команд).</p>

<p class="MsoNormalCxSpMiddle">Параметризуемые
команды относятся к фрагментам глобального командного интерфейса,
соответствующим тем объектам, типы которых заданы в свойстве <span class="Term">Тип</span>
параметра команды.</p>

<p class="MsoNormalCxSpLast">Группа
команд и в первом, и во втором случае – это своеобразное уточнение размещения
команды в пределах одного фрагмента. Так, например, группы команд задают, в
какой панели (навигации или действий) будут размещены независимые команды того
или иного раздела. А для параметризуемых команд группа команд определяет, будет
ли команда размещена в панели навигации формы или в командной панели формы.</p>

<p class="Regularbeforetable">Таким
образом, для независимых команд (команд, не требующих параметра, таких как
открытие списка или открытие формы нового объекта) возможность размещения по
умолчанию в категории иной, чем панель навигации или панель действий, востребована
крайне редко. В свою очередь, размещение параметризуемых команд в панели
навигации или панели действия не имеет смысла, так как в контексте основного
окна приложения такие команды не могут получить параметры, необходимые для их исполнения.
Приведем таблицу расположения команд.</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"> </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Независимые<br>
  команды</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Параметризуемые<br>
  команды</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Навигационные
  команды</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель<br>
  навигации</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель<br>
  навигации формы</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Команды<br>
  действия</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Панель<br>
  действий</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Командная<br>
  панель формы</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Следует
помнить, что по умолчанию глобальные команды не попадают в командный интерфейс
форм групп иерархических справочников и планов видов характеристик. Для того
чтобы глобальная команда была доступна в командном интерфейсе такой формы, ее
необходимо разместить там вручную, с помощью редактора формы.</p>

<p class="MsoNormalCxSpLast">При
формировании командного интерфейса используются текстовые представления
объектов конфигурации и различных команд. По умолчанию система формирует
представления исходя из свойств <span class="Term">Синоним</span> и <span class="Term">Имя</span>. Однако есть возможность влиять на это
представление. Для этого используются представления объекта и списка. Подробнее
об этом см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215490491">здесь</a>.</p>

<a id="TI000000381" class="bookmark" name="issogl2_6.2.5_свойство_командный_интерфейс"><h3>6.2.5. Свойство «Командный интерфейс»</h3></a>

<p class="MsoNormalCxSpFirst">Свойства
<span class="Interface">Командный интерфейс</span> (для подсистем),
<span class="Interface">Командный интерфейс</span>
(для конфигурации) и <span class="Interface">Командный интерфейс основного
раздела</span> (для конфигурации) предназначены для редактирования состава
глобальных команд соответствующего раздела или состава команд основного раздела.
Редактирование этих свойств выполняется в том случае, если не устраивает
автоматически сформированный порядок команд, группы, к которым отнесены команды
в контексте данного раздела, и установленная автоматически видимость по
умолчанию.</p>

<p class="MsoNormalCxSpMiddle">В
разных разделах одна и та же команда может отображаться в разных местах панели
навигации или панели действия и может иметь разную видимость по умолчанию.
Например, команда открытия списка справочника <span class="Interface">Товары</span> с точки зрения
раздела <span class="Interface">Торговля</span> является важной
и часто используемой, и разработчик может поместить ее в группу <span class="Interface">Важное</span>. А с точки зрения
раздела <span class="Interface">Бухгалтерский учет</span> не так
важна, и разработчик может поместить ее в группу <span class="Interface">См. также</span>.</p>

<p class="MsoNormalCxSpLast">Подробнее
о редакторе фрагмента командного интерфейса см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref217103609">здесь</a> и см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref217280689">здесь</a>.</p>

<a id="TI000000382" class="bookmark" name="issogl2_6.2.6_редактирование_состава_команд"><h3>6.2.6. Редактирование состава команд</h3></a>

<p class="MsoNormalCxSpFirst">Кроме
возможности редактирования свойства подсистемы <span class="Interface">Командный интерфейс</span>
при помощи редактора этого свойства существует возможность редактирования
состава команд сразу всех разделов в редакторе <span class="Interface">Все подсистемы</span> (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref217219607">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Редактирование
состава глобальных команд, отображаемых в форме, выполняется в редакторе формы,
на закладке <span class="Interface">Командный интерфейс</span>
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref214865442">здесь</a>).</p>

<a id="TI000000383" class="bookmark" name="issogl2_6.2.7_ролевая_настройка_видимости_команд_по_умолчанию"><h3>6.2.7. Ролевая настройка видимости команд по умолчанию</h3></a>

<p class="MsoNormalCxSpFirst">При
автоматическом формировании команд разделов и команд форм устанавливается
следующая видимость по умолчанию.</p>

<p class="MsoNormalCxSpLast">По
умолчанию <span class="Bold">видимы</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
команды открытия списков справочников,
документов, журналов документов, планов видов характеристик, планов видов
расчета, планов счетов, независимых регистров сведений, бизнес-процессов, задач
и планов обмена;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды открытия форм отчетов и обработок;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команда открытия формы редактирования констант;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды перехода к списку подчиненного справочника;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды перехода к списку логически подчиненного
регистра сведений (т. е. регистра с «ведущими» измерениями);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды ввода на основании;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
произвольные команды, созданные разработчиком
при конфигурировании.</p>

<p class="MsoNormal">По
умолчанию <span class="Bold">невидимы</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
команды открытия списков перечислений, регистров
сведений, подчиненных регистратору, регистров накоплений, регистров
бухгалтерии, регистров расчета;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды открытия форм нового объекта и новой
группы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды перехода к спискам подчиненных
регистров;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
команды перехода к спискам критериев отбора.</p>

<p class="MsoNormalCxSpFirst">Эти
значения видимости, формируемые системой автоматически, могут быть изменены как
для параметризуемых, так и для независимых команд. Причем значение видимости по
умолчанию может быть задано в разрезе ролей, применяемых в конфигурации. При
отображении команд в режиме 1С:Предприятие команда будет видна по умолчанию,
если хотя бы для одной из ролей пользователя задана видимость для данной
команды.</p>

<p class="MsoNormalCxSpMiddle">При
редактировании ролевой видимости следует исходить из того, что видимость
команды для той или иной роли вступает в силу только тогда, когда команда
доступна для этой роли. Таким образом, при настройке видимости для роли, сильно
ограниченной в правах, почти никогда нет необходимости дополнительно скрывать
команды, снимая им видимость по умолчанию (общее число доступных команд в том
или ином разделе и так невелико).</p>

<p class="MsoNormalCxSpLast">Ролевое
редактирование видимости по умолчанию – это средство, позволяющее
настроить начальную «насыщенность» глобального командного интерфейса в первую
очередь для пользователей с широкими правами доступа.</p>

<a name="_ref215988031"></a><a id="TI000000384" class="bookmark" name="issogl1_6.3_сервисные_возможности_навигации"><h2>6.3. Сервисные возможности навигации</h2></a>

<a id="TI000000385" class="bookmark" name="issogl2_6.3.1_ссылки"><h3>6.3.1. Ссылки</h3></a>

<p class="Regularbeforepicture">В «1С:Предприятии»
имеется возможность получить текстовую ссылку на любой раздел командного
интерфейса, отчет, обработку и на объекты информационной базы (документы,
элементы справочников и т. д.).</p>

<p class="Picture"><IMG src="_img/img00198.gif?_=1496848987" WIDTH="456" ALT HEIGHT="168"></p>

<p class="MsoCaption">Рис.
199. Команды получения и перехода по ссылке</p>

<p class="MsoNormal">Полученную
ссылку можно сохранить и использовать в дальнейшем для перехода по ней. Так как
ссылки являются текстовыми, то их можно отправлять другим пользователям,
например, по электронной почте. Описание форматов ссылок см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 2. форматы навигационных ссылок.htm?_=1496848987#_ref273959400">здесь</a>. Нельзя получить ссылку на инструменты, входящие в
состав стандартных функций.</p>

<p class="Regularbeforepicture">Существует
возможность запускать веб-клиент с одновременным переходом по ссылке. Для этого
необходимо получить внешнюю ссылку из веб-клиента или тонкого клиента,
подключенного к информационной базе через веб-сервер.</p>

<p class="Picture"><IMG src="_img/img00199.gif?_=1496848987" WIDTH="615" ALT HEIGHT="132"></p>

<p class="MsoCaption"><a name="_ref229206305">Рис. </a>200. Получение
внешней ссылки</p>

<p class="MsoNormal">Для
получения внешней ссылки следует воспользоваться обычной командой получения
ссылки, убедившись, что в окне получения ссылки нажата кнопка <span class="Interface">Внешняя</span> (см. <a href="#_ref229206305">рис.
200</a>). Полученную ссылку можно ввести в адресной строке
браузера, при этом будет загружено приложение и выполнен переход по ссылке (в
примере на <a href="#_ref229206305">рис.
200</a> произойдет открытие формы отчета <span class="Interface">Остатки товаров</span>).</p>

<p class="Note"><span class="Note">Примечание.</span>
В Microsoft Internet Explorer не происходит загрузка
приложения с переходом по ссылке, если ссылка относится к приложению,
загруженному в текущем окне веб-браузера. Рекомендуется вводить ссылку в
адресную строку нового пустого окна веб-браузера.</p>

<a name="_ref215989795"></a><a name="_ref440538091"></a><a id="TI000000386" class="bookmark" name="issogl2_6.3.2_оповещения_пользователя"><h3>6.3.2. Оповещения пользователя</h3></a>

<p class="MsoNormal">Механизм
оповещений предназначен для информирования пользователей о том, что система
выполнила то или иное действие. Оповещения могут создаваться системой или
разработчиком прикладного решения. Система создает оповещения при интерактивной
записи/изменении объекта, а разработчик – вызовом метода <span class="Term">ПоказатьОповещениеПользователя()</span>. Оповещения
отображаются даже в том случае, если основное окно приложения свернуто. Для
работы с оповещениями предназначен центр сообщений.</p>

<p class="Regularbeforepicture">Оповещение отображается в окне, расположение которого
зависит от используемого клиентского приложения и настроек операционной
системы. Если при формировании оповещения была реализована возможность
выполнить какое-либо действие, то оповещение будет одновременно являться
гиперссылкой, а нажатие левой кнопки мыши на оповещении приведет к выполнению
действия, указанного при создании оповещения. Если оповещение сформировано
системой при интерактивной записи/изменения объекта, то нажатие левой нокпи
мыши по такому оповещению будет приводить к открытию объекта.</p>

<p class="Picture"><IMG src="_img/img00200.gif?_=1496848987" WIDTH="360" ALT HEIGHT="80"></p>

<p class="MsoCaption">Рис.
201. Оповещение пользователя</p>

<p class="MsoNormal">Чтобы
нажатие левой кнопки мыши на оповещении приводило к выполнению какого-либо
действия, необходимо указать параметр <span class="Term">ДействиеПриНажатии</span> при вызове метода <span class="Term">ПоказатьОповещениеПользователя()</span>. Этот
параметр может принимать значения двух разных типов. В зависимости от типа
значения будет различаться поведение системы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
тип <span class="Term">Строка</span> – в этом случае ожидается, что
параметр содержит навигационную ссылку на объект информационной базы. Нажатие
левой кнопкой мыши по оповещению в этом случае будет аналогично переходу по
навигационной ссылке, указанной при создании оповещения.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
объект <span class="Term">ОписаниеОповещения</span> – в этом случае при
нажатии левой кнопки мыши на оповещении будет вызван обработчик, ссылка на
который указана при создании объекта <span class="Term">ОписаниеОповещения</span>. Разработчик может сам
реализовать требуемую реакцию на действие с оповещением.</p>

<p class="MsoNormal">Окно
оповещения автоматически исчезает с экрана по истечении небольшого времени (в
зависимости от используемого клиентского приложения и операционной системы). Если
вызвать метод отображения оповещения несколько раз подряд, то пользователь увидит
несколько оповещений. Количество сообщений зависит от используемой операционной
системы и клиентского приложения (включая различные версии веб-браузеров):</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
тонкий, толстый клиент и веб-браузер Microsoft
Internet Explorer – до 3-х оповещений;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
веб-браузер Google Chrome – до 3-х
оповещений;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
веб-браузер Mozilla Firefox – неограниченное
количество оповещений;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
веб-браузер Microsoft Edge – последнее
оповещение;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
веб-браузер Safari – последнее оповещение,
если в настрйоках оповещений установлен тип <span class="Interface">Баннер</span> или
неограниченное количество оповещений, если в настройках оповещений установлен
тип <span class="Interface">Предупреждение</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
если пользователь запретил оповещения в
веб-браузере для сайта с придложением, то оповещения отображаются внутри
основного окна приложения. В этом случае одновременно отображается не более 3-х
оповещений.</p>

<p class="MsoNormalCxSpFirst">Параметр
<span class="Term">СтатусОповещенияПользователя</span> определяет, какой
статус будет у оповещения. Если указан вариант статуса <span class="Term">Информация</span>, то такое оповещение будет
отображено на экране и после истечения времени отображения (4 секунды в
веб-браузере Microsoft Edge и 10 секунд в остальных веб-браузерах и клиентских
приложениях), оповещение будет скрыто с экрана пользователя без следов. Однако
ряд оповещений необходимо увидеть пользователю даже в том случае, если
пользователя в момент отображения оповещения, не было около компьютера. Для
этого необходимо указать вариант статуса <span class="Term">Важное</span>. В таком случае оповещение будет
запомнено в центре оповещений системы «1С:Предприятие». После активизации
системы пользователь сможет ознакомиться с пропущенными важными оповещениями с
помощью этого центра.</p>

<p class="MsoNormalCxSpMiddle">Также
предоставляется возможность обновлять ранее отображенные оповещения. Например,
в оповещении выводится количество задач, которые пользователю необходимо
согласовать. В этом случае логично, чтобы появление каждой новой задачи не приводило
к появлению нового оповещения, а обновляло информацию существующего оповещения.
Для реализации такого поведения предназначен параметр <span class="Term">КлючУникальности</span>. Если на момент вызова метода
<span class="Term">ПоказатьОповещениеПользователя()</span> уже
существует оповещение с заданным ключем уникальности, который указщан в
качестве параметра метода, то в существующем оповещении будет обновлена вся
информация. Если оповещения с таким ключем уникальности нет – будет
создано и отображено новое оповещение. Системные оповещения имеют статус <span class="Term">Информация</span>, а в качестве значения ключа
уникальности содержат навигационную ссылку объекта, редактируемого формой.
Параметр <span class="Term">КлючУникальности</span> используется только при работе
в интерфейсе <span class="Interface">Такси</span>.</p>

<p class="MsoNormalCxSpMiddle">Размер
и расположение окон оповещений не может быть изменено или настроено. Также
недоступно какое-либо оформление текста, который выводится в оповещениях.</p>

<p class="MsoNormalCxSpLast">Смотри
также:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Навигационные ссылки (см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 2. форматы навигационных ссылок.htm?_=1496848987#_ref469654672">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Синхронные и асинхронные методы работы
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 4. встроенный язык.htm?_=1496848987#_ref405477267">здесь</a>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Центр оповещений (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 3. интерфейс приложения.htm?_=1496848987#_ref469672902">здесь</a>).</p>

<a name="_ref352164755"></a><a name="_ref352164754"></a><a name="_ref336275826"></a><a name="_ref336275825"></a><a name="_ref242599704"></a><a id="TI000000387" class="bookmark" name="issogl2_6.3.3_отображение_состояния_длительных_процессов"><h3>6.3.3. Отображение состояния длительных процессов</h3></a>

<p class="MsoNormal">В
процессе разработки конфигурации возникают ситуации, когда необходимо
информировать пользователя системы о состоянии выполнения длительных процессов
(например, расчет зарплаты по подразделению). Для этого предназначена панель
состояния.</p>

<p class="Regularbeforepicture">Панель
состояния отображается вызовом метода <span class="Term">Состояние()</span> и недоступна для вызова на стороне
сервера. В том случае, если необходимо отобразить на клиенте состояние
длительного процесса, протекающего на сервере, нужно реализовать этот процесс
таким образом, чтобы он мог выполняться на сервере «порциями», которые будут
инициироваться со стороны клиента. Тогда одновременно со стартом очередной
«порции» на сервере можно будет отображать изменение состояния выполнения
процесса. Панель состояния отображается в окне, которое по умолчанию расположено
в правом нижнем углу рабочей области экрана.</p>

<p class="Picture"><IMG src="_img/img00201.gif?_=1496848987" WIDTH="473" ALT HEIGHT="233"></p>

<p class="MsoCaption">Рис.
202. Окно отображения состояния</p>

<p class="MsoNormal">Если
требуется отображать ход выполнения процесса с помощью индикатора (например, мы
знаем общее количество рассчитываемых сотрудников и хотим показать, сколько
сотрудников уже рассчитано), то при вызове метода <span class="Term">Состояние()</span> необходимо указывать второй
параметр метода, который определяет абсолютное значение индикатора прогресса.
Минимальное значение индикатора прогресса всегда равно 0, а максимальное
значение – 100.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Состояние<span class="operator">(</span><span class="string">&quot;Выполняется проведение документов (&quot;</span> <span class="operator">+</span> ПредставлениеПериода<span class="operator">(</span>ДатаНачала<span class="operator">,</span> ДатаОкончания<span class="operator">)</span> <span class="operator">+</span> <span class="string">&quot;)&quot;</span><span class="operator">,</span> ДляПрогресса<span class="operator">,</span> <span class="string">&quot;Проводятся документы за &quot;</span> <span class="operator">+</span> ДатаОбработки <span class="operator">+</span> <span class="string">&quot;. Всего: &quot;</span><span class="operator">+</span> Счетчик<span class="operator">,</span> БиблиотекаКартинок<span class="operator">.</span>Провести<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Если
при вызове метода второй параметр не указан, то индикатор прогресса также не
будет отображаться на панели состояния. При этом текст пояснения будет
располагаться непосредственно под текстом основного описания:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Состояние<span class="operator">(</span><span class="string">&quot;Проведение выполнено, , &quot;</span>Всего обработано документов: <span class="string">&quot; + КоличествоОбработанных + Символы.ПС + &quot;</span>Проведено документов: <span class="string">&quot; + КоличествоПроведенных, БиблиотекаКартинок.Провести); </span></pre>

<p class="Picture"><IMG src="_img/img00202.gif?_=1496848987" WIDTH="473" ALT HEIGHT="118"></p>

<p class="MsoCaption">Рис.
203. Состояние без прогресса</p>

<p class="MsoNormal">Панель
состояния автоматически исчезает с экрана по истечении небольшого времени после
окончания работы фрагмента программы, вызвавшего появление панели состояния.
Однако если навести на это окно курсор мыши, то окно будет существовать до тех
пор, пока его принудительно не закроют или не уберут курсор мыши с площади
панели состояния.</p>

<p class="Note"><span class="Note">Примечание.</span>
Панель состояния располагается поверх всех окон текущего приложения, кроме
модальных окон. Модальное окно выводится поверх панели состояния.</p>

<p class="MsoNormal">В
веб-клиенте панель состояния реализована в виде отдельного окна веб-браузера.
Обновление этого окна имеет особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Microsoft </span><span class="Interface">Internet </span><span class="Interface">Explorer</span>. Состояние обновляется после
каждого вызова метода <span class="Term">Состояние()</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Mozilla </span><span class="Interface">Firefox</span>. Состояние обновляется
при каждом серверном вызове и после окончании выполнения программного кода на встроенном
языке. Таким образом, если при выполнении программного кода на встроенном языке
не было вызовов серверных методов, то панель состояния изменяться не будет.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Google </span><span class="Interface">Chrome</span> и <span class="Interface">Safari</span>. Состояние обновляется только
после окончания выполнения программного кода на встроенном языке.</p>

<a name="_ref220330559"></a><a name="_ref414544333"></a><a name="_ref414544332"></a><a id="TI000000388" class="bookmark" name="issogl2_6.3.4_сообщения"><h3>6.3.4. Сообщения</h3></a>

<p class="MsoNormalCxSpFirst">В
прикладном решении большинство сообщений логически связано с данными. Например,
если при проведении документа на складе не хватает некоторого количества
определенной номенклатуры, программист должен уведомить об этом пользователя.</p>

<p class="MsoNormalCxSpMiddle">Механизм
сообщений позволяет разработчику сформировать сообщение, в котором можно
указать, какой из реквизитов объекта стал причиной ошибки. При отображении в
клиентском приложении сообщение может быть автоматически привязано к элементу
формы, который редактирует этот реквизит, и рядом с ним будет выведено заданное
сообщение.</p>

<p class="MsoNormalCxSpLast">Сообщения
выводятся в панель сообщений, которая располагается в нижней части рабочей
области. Высота панели сообщений не превышает 5 строк. Если в панели
размещается большее количество сообщений – появляется полоса прокрутки, но
панель по высоте не увеличивается. Вручную также невозможно изменить высоту
панели сообщений.</p>

<p class="Regularbeforepicture">Для
функционирования этого механизма в платформе существует объект <span class="Term">СообщениеПользователю</span>.</p>

<p class="Picture"><IMG src="_img/img00203.gif?_=1496848987" WIDTH="769" ALT HEIGHT="592"></p>

<p class="MsoCaption">Рис.
204. Сообщения</p>

<p class="MsoNormal">Механизм
сообщений ориентирован на то, чтобы сообщить пользователю, что запрошенное им
действие выполнить не удалось. Например, проведение документа невозможно из-за
отсутствия остатков товара на складе.</p>

<p class="Regularbeforepicture">Если
сообщение привязано к полю табличной части, то изменение порядка строк
табличной части не оказывает влияния на корректность отображения сообщения.</p>

<p class="Picture"><IMG src="_img/img00204.gif?_=1496848987" WIDTH="769" ALT HEIGHT="698"></p>

<p class="MsoCaption">Рис.
205. Сообщения в табличной части</p>

<p class="MsoNormalCxSpFirst">Если
строка, к которой было привязано сообщение, удалена, то сообщение будет
привязано к элементу формы (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 7. формы.htm?_=1496848987#_ref273971653">здесь</a>), который отображает табличную часть.</p>

<p class="MsoNormalCxSpMiddle">В
том случае, если сообщение привязано к строке таблицы, связанной с реквизитом
формы типа <span class="Term">ДанныеФормыКоллекция</span>, <span class="Term">ДанныеФормыДерево</span> или <span class="Term">ДанныеФормыСтруктураИКоллекция</span>, в этой таблице
пользователем интерактивно выполнен поиск (с помощью соответствующей
стандартной команды), в результате поиска строка, для которой создано
сообщение, оказалась скрытой, то поиск будет автоматически отменен и сообщение
будет показано в нужном месте. Если в таблице установлен программный отбор
(свойство <span class="Term">ОтборСтрок</span>), то такой отбор не отменяется при
отображении сообщения и выполняется позиционирование сообщения на таблицу в
целом.</p>

<p class="MsoNormalCxSpMiddle">Сообщения,
формируемые методом глобального контекста <span class="Term">Сообщить()</span> или при помощи объекта <span class="Term">СообщениеПользователю</span>, рекомендуется использовать
только для информирования об ошибочных действиях. Также рекомендуется
сопровождать вывод таких сообщений отказом от закрытия формы, в которой
формируются сообщения, если сообщения формируются во время выполнения действия,
подразумевающего закрытие формы. Если не блокировать закрытие формы, то
возможны ситуации, когда сообщения будут выведены в панель сообщений
закрываемой формы и эта панель будет закрыта одновременно со «своей» формой. В
этом случае пользователь не увидит выведенные сообщения. Если требуется
проинформировать пользователя о каком-либо событии, то рекомендуется
использовать для этого метод <span class="Term">ПоказатьОповещениеПользователя()</span>
(см. <a href="#_ref440538091">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Чтобы
сообщение об ошибке оказалось привязанным к нужному элементу формы, системе
нужно знать следующую информацию: какой реквизит, какого объекта информационной
базы, каким элементом формы отображается. Заполнение вышеописанных свойств
позволяет ответить на все вопросы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Задавая значение свойства <span class="Term">ПутьКДанным</span>, мы указываем, какой реквизит
формы хранит данные нашего объекта информационной базы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Задавая свойство <span class="Term">Поле</span>, мы указываем реквизит объекта, для
которого будет отображаться сообщение. Можно сказать, что в сообщении пойдет
речь о данных <span class="Term">ПутьКДанным.Поле</span>, которые в базе данных идентифицируются
значением <span class="Term">КлючКДанным</span>. Дальше система автоматически (на
основании знаний о структуре формы) определит элемент формы, в котором
отображается необходимая информация. Затем в привязке к этому элементу формы
будет отображено сообщение.</p>

<p class="Indentlist">Свойство
<span class="Term">Поле</span> может содержать описание данных в
следующем формате:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Для реквизитов – строка вида <span class="Term">ИмяРеквизита</span>, например, <span class="Term">Поставщик</span>, <span class="Term">Поставщик.Родитель</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для реквизитов табличных частей – строка
вида <span class="Term">ИмяТабличнойЧасти[ИндексСтроки].ИмяРекизита</span>,
например, <span class="Term">Номенклатура[10].Количество</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для строк наборов записей – строка вида <span class="Term">[ИндексСтроки].ИмяРеквизита</span>, например, <span class="Term">[10].Валюта</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Следует помнить, что если поле, к которому
привязано сообщение, будет перенесено пользователем из таблицы на форму (для
табличных частей и наборов записей), то сообщение перестанет привязываться к
этому полю.</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Term">ИдентификаторНазначения</span> описывает, к какой
форме должно быть привязано сообщение. Например, если сообщение формируется из
формы, отображаемой на начальной странице, указание свойства <span class="Term">ИдентификаторНазначения</span> позволит отобразить
сообщение, привязанное к той форме, из которой выполнялось формирование
сообщения.</p>

<p class="MsoNormal">Если
в сообщении свойство <span class="Term">КлючДанных</span> заполнено и не совпадает с ключевым
значением основного реквизита текущей формы (ссылкой объекта или ключом записи
регистра сведений), то открывается новая форма объекта, соответствующая значению
свойства <span class="Term">КлючДанных</span>.</p>

<p class="MsoListBullet">&#9679; 
Если у сообщения свойство <span class="Term">ПутьКДанным</span> не заполнено, то в него
проставляется имя основного реквизита открытой формы объекта, вызывается показ
сообщения во вновь открытой форме.</p>

<p class="MsoNormalCxSpFirst">Кроме
того, выполняется перенос всех сообщений со свойством <span class="Term">КлючДанных</span>, равным значению этого свойства
текущего сообщения, из окна текущей формы в открытую форму. При этом
перенесенным сообщениям аналогичным образом проставляется свойство <span class="Term">ПутьКДанным</span>, если оно не установлено.</p>

<p class="MsoNormalCxSpMiddle">Для
заполнения пути к данным используется специальный механизм системы, который
сохраняет информацию о соответствии элементов формы и объектов, а потом
использует ее при вызове метода <span class="Term">УстановитьДанные()</span>. Таким образом, до
выполнения процедур модуля объекта, в которых формируются сообщения, должно
быть установлено соответствие между реквизитами формы и объектами, а в самом
модуле разработчику нужно вызывать метод <span class="Term">УстановитьДанные()</span>.</p>

<p class="MsoNormalCxSpLast">При
выполнении стандартных действий с объектом в форме, например, при проведении
документа, расширение формы само создает объект и само устанавливает
соответствие. Поэтому в этих случаях разработчику не нужно предпринимать
никаких действий.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если при записи нового объекта (плана обмена, справочника, документа, элемента
плана счетов, элемента плана видов характеристик, элемента плана видов расчета,
бизнес-процесса, задачи) в транзакции формировались сообщения пользователю, то
при отмене транзакции в сообщениях очищаются ссылки на данный объект (свойство <span class="Term">КлючДанных</span>).</p>

<p class="MsoNormalCxSpFirst">Ниже
описывается, как установить соответствие, если объект создается из данных формы
программно.</p>

<p class="MsoNormalCxSpLast">Связь
между объектом и формой может быть задана явно, путем вызова метода, или
неявно. Для явной установки соответствия используется метод <span class="Term">УстановитьСоответствиеОбъектаИФормы()</span>. В
качестве второго параметра в метод передается информация о том, в какой форме
отображается объект (свойство <span class="Term">ИдентификаторФормы</span>) и в каком реквизите
указанной формы хранится объект данных (свойство <span class="Term">Реквизит</span>) для последующей установки
правильного соответствия сообщений и элементов управления формы:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Параметры <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
Параметры<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ИдентификаторФормы&quot;</span><span class="operator">,</span> УникальныйИдентификатор<span class="operator">)</span><span class="operator">;</span>
Параметры<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Реквизит&quot;</span><span class="operator">,</span> <span class="string">&quot;Объект&quot;</span><span class="operator">)</span><span class="operator">;</span>
УстановитьСоответствиеОбъектаИФормы<span class="operator">(</span>Объект<span class="operator">,</span> Параметры<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Установленное
соответствие будет существовать до тех пор, пока существует объект, для
которого установлено соответствие.</p>

<p class="MsoNormalCxSpLast">Для
того чтобы сообщение использовало данные соответствия объекта и имени реквизита,
необходимо связать сообщение с данными через метод <span class="Term">УстановитьДанные()</span> объекта <span class="Term">СообщениеПользователю</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ОбъектСправочник <span class="operator">=</span> СсылкаСправочник<span class="operator">.</span>ПолучитьОбъект<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Параметры <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
Параметры<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ИдентификаторФормы&quot;</span><span class="operator">,</span> ИдентификаторФормы<span class="operator">)</span><span class="operator">;</span>
Параметры<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Реквизит&quot;</span><span class="operator">,</span> <span class="string">&quot;Объект&quot;</span><span class="operator">)</span><span class="operator">;</span>
УстановитьСоответствиеОбъектаИФормы<span class="operator">(</span>ОбъектСправочник<span class="operator">,</span> Параметры<span class="operator">)</span><span class="operator">;</span>
ОбъектСправочник<span class="operator">.</span>ПроверитьЗаполнение<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Нужно
понимать, что в методе <span class="Term">УстановитьСоответствиеОбъектаИФормы()</span>
указывается имя реквизита для той формы, которая будет открыта по умолчанию для
отображения элемента используемого справочника (в примере <span class="Term">ОбъектСправочник</span>). Тогда сообщения, которые
создаются в обработчике проверки заполнения (<span class="Term">ОбъектСправочник.ПроверитьЗаполнение()</span>), будут
корректно привязаны к реквизитам новой формы. Если свойство <span class="Term">ИндентификаторФормы</span> структуры <span class="Term">Параметры</span> (в примере выше) содержит уникальный
идентификатор, который не соответствует ни одному экземпляру формы, то для
отображения сообщения будет создана и открыта новая форма.</p>

<p class="MsoNormalCxSpLast">Получить
соответствие можно методом <span class="Term">ПолучитьСоответствиеОбъектаИФормы()</span>. Получить
соответствие можно до тех пор, пока существует объект, для которого оно
установлено.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ОписаниеСоответствия <span class="operator">=</span> ПолучитьСоответствиеОбъектаИФормы<span class="operator">(</span>Объект<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Если
для переданного объекта существует соответствие с реквизитом, имя реквизита
будет возвращено как результат работы функции. Кроме того, соответствие может
быть установлено формой при использовании метода <span class="Term">РеквизитФормыВЗначение()</span>. В большинстве
случаев рекомендуется использовать именно этот способ.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Код в модуле документа.</span>
<span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ОбработкаПроведения<span class="operator">(</span><span class="operator">)</span>
    ...
    Сообщение <span class="operator">=</span> <span class="keyword">Новый</span> СообщениеПользователю<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    Сообщение<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;В строке 10 табличной части &quot;</span> <span class="operator">+</span> <span class="string">&quot;Номенклатура не хватает &quot;</span> <span class="operator">+</span> НедостающееКоличество <span class="operator">+</span> <span class="string">&quot; &quot;</span> <span class="operator">+</span> ЕдиницаИзмеренияНоменклатуры<span class="operator">;</span>
    Сообщение<span class="operator">.</span>Поле <span class="operator">=</span> <span class="string">&quot;Номенклатура[9].Количество&quot;</span><span class="operator">;</span>
    Сообщение<span class="operator">.</span>УстановитьДанные<span class="operator">(</span>ЭтотОбъект<span class="operator">)</span><span class="operator">;</span>
    Сообщение<span class="operator">.</span>Сообщить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// Сообщение будет показано в форме и привязано к</span>
    <span class="comment">// элементу управления, связанному с полем</span>
    <span class="comment">// Количество в 10-й строке табличной части</span>
    <span class="comment">// Номенклатура.</span>
    ...
<span class="keyword">КонецПроцедуры</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">В
случае если создание сообщений пользователю (с помощью объекта <span class="Term">СообщениеПользователю</span>) выполняется во время контекстного
или неконтекстного серверного вызова из формы, вызова из общего модуля или из модуля
общей команды, вывод сообщений блокируется. Созданные сообщения будут показаны
пользователю после возврата управления на клиентскую сторону. Для получения
списка непоказанных сообщений используется метод <span class="Term">ПолучитьСообщенияПользователю()</span>.</p>

<p class="MsoNormalCxSpLast">Если в поле ввода, с которым связано сообщение, находится
некорректное значение, то в веб-клиенте можно перейти в окно сообщений. В
других клиентских приложениях такой переход выполнить невозможно.</p>

<a id="TI000000389" class="bookmark" name="issogl2_6.3.5_работа_сочетаний_клавиш"><h3>6.3.5. Работа сочетаний клавиш</h3></a>

<p class="MsoNormal">В
независимом вспомогательном окне срабатывают сочетания клавиш:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
команд панели навигации главного окна;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команд панели действий главного окна;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
команд самого вспомогательного окна (как команд
формы, так и команд панели навигации).</p>

<p class="MsoNormalCxSpFirst">При
этом сочетания клавиш команд основного окна срабатывают, даже если команда, вызываемая
тем или иным сочетанием клавиш, невидима, например, была скрыта пользователем.
Во вспомогательных окнах не срабатывают сочетания клавиш скрытых команд панели
навигации формы и скрытых элементов формы.</p>

<p class="MsoNormalCxSpLast">В
блокирующих окнах работают только сочетания клавиш самих окон, а сочетания
клавиш команд главного окна не поддерживаются.</p>

<a name="_ref373168200"></a><a id="TI000001318" class="bookmark" name="issogl2_6.3.6_работа_со_списком_форм"><h3>6.3.6. Работа со списком форм</h3></a>

<p class="MsoNormal">Система
позволяет получить список форм, которые в данный момент отображаются в системе,
включая формы, расположенные на начальной странице (рабочем столе). Этот список
можно получить с помощью функции глобального контекста <span class="Term">ПолучитьОкна()</span>. Затем следует проанализировать
содержимое полученной коллекции <span class="Term">ОкнаКлиентскогоПриложения</span> (состоит из объектов
типа <span class="Term">ОкноКлиентскогоПриложения</span>):</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Окно с установленным свойством <span class="Term">Основное</span> описывает основное окно приложения.
Свойство <span class="Term">Содержимое</span> для такого окна всегда содержит
пустой массив.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Окно с установленным свойством <span class="Term">НачальнаяСтраница</span> описывает начальную страницу
(рабочий стол). При этом свойство <span class="Term">Содержимое</span> содержит список форм, которые в
данный момент размещены на начальной странице (рабочем столе). Более подробное
описание программного управления составом форм начальной страницы (рабочего
стола) см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref370382070">здесь</a>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Остальные окна описывают вспомогательные окна
клиентского приложения. При этом свойство <span class="Term">Содержимое</span> для такого окна содержит список
форм, открытых в этом окне. Основная форма такого окна будет располагаться в
первом элементе массива.</p>

<p class="MsoNormalCxSpFirst">Следует
помнить, что порядок элементов в коллекции <span class="Term">ОкнаКлиентскогоПриложения</span> не определен. Не
рекомендуется использовать в прикладных решениях какие-либо предположения о
порядке следования элементов в этой коллекции.</p>

<p class="MsoNormalCxSpLast">Следующий
пример отобразит все окна клиентского приложения, выведет их свойства и список
форм, находящихся в том или ином окне клиентского приложения (при наличии
таковых).</p>

<p class="Lang-subheader">Пример
отображения списка окон:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Окна <span class="operator">=</span> ПолучитьОкна<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">Для</span> <span class="keyword">Каждого</span> Окно <span class="keyword">Из</span> Окна <span class="keyword">Цикл</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;Заголовок: &quot;</span> <span class="operator">+</span> Окно<span class="operator">.</span>Заголовок<span class="operator">)</span><span class="operator">;</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;Основное окно приложения: &quot;</span> <span class="operator">+</span> Окно<span class="operator">.</span>Основное<span class="operator">)</span><span class="operator">;</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;Начальная страница: &quot;</span> <span class="operator">+</span> Окно<span class="operator">.</span>НачальнаяСтраница<span class="operator">)</span><span class="operator">;</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;Форм в окне: &quot;</span> <span class="operator">+</span> Окно<span class="operator">.</span>Содержимое<span class="operator">.</span>Количество<span class="operator">(</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Если</span> Окно<span class="operator">.</span>Содержимое<span class="operator">.</span>Количество<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Тогда</span>
        <span class="keyword">Для</span> <span class="keyword">каждого</span> Форма <span class="keyword">Из</span> Окно<span class="operator">.</span>Содержимое <span class="keyword">Цикл</span>
            Сообщить<span class="operator">(</span><span class="string">&quot;    Форма : &quot;</span> <span class="operator">+</span> Форма<span class="operator">.</span>ИмяФормы<span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;-----&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span></pre>

<a name="_ref436738974"></a><a id="TI000001760" class="bookmark" name="issogl2_6.3.7_использование_списка_переходов"><h3>6.3.7. Использование списка переходов</h3></a>

<p class="RegularbeforepictureCxSpFirst">Операционная
система Microsoft Windows 7 и старше (версия ОС 6.1 и старше), а также
операционная система Linux с оболочкой рабочего стола Unity, предоставляют
пользователю возможность использовать так называемые <span class="Bold">списки
переходов</span> (jump list). Данная возможность предоставляет возможность
пользователю быстрого перехода к объектам используемой программы (файлы, папки
и т. д.) путем нажатия правой кнопки мыши на кнопке командной панели,
связанной с данным приложением. Некоторые</p>

<p class="RegularbeforepictureCxSpLast">объекты
(по выбору пользователя) можно закрепить в данном меню с помощью специальной
кнопки. На <a href="#_ref436739857">рис.206</a> приведен пример списка переходов для <span class="Interface">Проводника</span> в ОС
Windows 7.</p>

<p class="Picture"><IMG src="_img/img00205.gif?_=1496848987" WIDTH="287" ALT HEIGHT="299"></p>

<p class="MsoCaption"><a name="_ref436739857">Рис. </a>206. Список
переходов в панели задач</p>

<p class="MsoNormal">Подробное
описание списка переходов можно получить в описании соответствующей
операционной системы.</p>

<p class="Regularbeforepicture">Система
«1С:Предприятие» также предоставляет список переходов. В качестве объекта в
данном списке выступает информационная база. Список переходов синхронизирован
со списком последних выбранных информационных баз окна программы запуска, даже
в том случае, если отображение этого списка в окне программы запуска отключено
(подробнее о настройке окна запуска см. <a href="/db/v8310doc/bookmark/adm/TI000000119" target="_top">здесь</a>).</p>

<p class="Picture"><IMG src="_img/img00206.gif?_=1496848987" WIDTH="575" ALT HEIGHT="430"></p>

<p class="MsoCaption">Рис.
207. Список переходов «1С:Предприятия»</p>

<p class="MsoNormal">При
использовании списков переходов следует помнить следующие особенности поведения
системы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Запуск информационной базы из списка переходов
всегда происходит в режиме 1С:Предприятия.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для отображения списка переходов, закрепление
следует выполнять с помощью команды <span class="Interface">Закрепить на панели
задач</span> у ярлыка <span class="Interface">1C Предприятие</span>,
созданного программой установки системы «1С:Предприятие» на рабочем столе.</p>

<a name="_ref436738990"></a><a id="TI000001761" class="bookmark" name="issogl2_6.3.8_установка_кнопок_окна_предпросмотра_панели_задач"><h3>6.3.8. Установка кнопок окна предпросмотра панели задач</h3></a>

<p class="Regularbeforepicture">В
операционной системе Microsoft Windows 7 и старше, пользователю доступа функция
Aero Peak. Эта функция предоставляет возможность увидеть эскизы всех окон,
связанных с выбранной программой, наведя курсор мыши на соответствующую кнопку
панели задач. Некоторые программы размещают в этих эскизах специальные кнопки,
облегчающие управление программой. Например, программа <span class="Interface">Проигрыватель Windows
Media</span> размещает в окне эскиза кнопки перехода по трекам и
остановки/запуска воспроизведения.</p>

<p class="Picture"><IMG src="_img/img00207.gif?_=1496848987" WIDTH="216" ALT HEIGHT="198"></p>

<p class="MsoCaption">Рис.
208. Эскиз Проигрывателя Windows Media</p>

<p class="MsoNormalCxSpFirst">Система
«1С:Предприятие» предоставляет возможность размещать аналогичные кнопки в
эскизах, связанных с запущенными информационными базами. Для этого следует
использовать специальное свойство глобального контекста <span class="Term">ПанельЗадачОС</span>. Рассмотрим пример использования
данного свойства.</p>

<p class="MsoNormalCxSpLast">В
качестве примера добавим в окно эскиза две кнопки:</p>

<p class="MsoListNumberCxSpFirst">1.  Оформить
заказ клиента;</p>

<p class="MsoListNumberCxSpLast">2.  Оформить
продажу.</p>

<p class="MsoNormal">Будем
создавать кнопки при начале работы системы:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ПередНачаломРаботыСистемы<span class="operator">(</span>Отказ<span class="operator">)</span>
    Кнопки <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    Кнопка1 <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    Кнопка1<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Картинка&quot;</span><span class="operator">,</span> БиблиотекаКартинок<span class="operator">.</span>ЗаказКлиента<span class="operator">)</span><span class="operator">;</span>
    Кнопка1<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Заголовок&quot;</span><span class="operator">,</span> <span class="string">&quot;Оформить новый заказ клиента&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Оповещение <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеОповещения<span class="operator">(</span><span class="string">&quot;ДействияКнопок&quot;</span><span class="operator">,</span> ОповещенияКнопок<span class="operator">,</span> <span class="string">&quot;ОформитьЗаказ&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Кнопка1<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Действие&quot;</span><span class="operator">,</span> Оповещение<span class="operator">)</span><span class="operator">;</span>
    Кнопка2 <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    Кнопка2<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Картинка&quot;</span><span class="operator">,</span> БиблиотекаКартинок<span class="operator">.</span>НоваяПродажа<span class="operator">)</span><span class="operator">;</span>
    Кнопка2<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Заголовок&quot;</span><span class="operator">,</span> <span class="string">&quot;Оформить новую продажу&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Оповещение <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеОповещения<span class="operator">(</span><span class="string">&quot;ДействияКнопок&quot;</span><span class="operator">,</span> ОповещенияКнопок<span class="operator">,</span> <span class="string">&quot;ОформитьПродажу&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Кнопка2<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Действие&quot;</span><span class="operator">,</span> Оповещение<span class="operator">)</span><span class="operator">;</span>
    Кнопки<span class="operator">.</span>Добавить<span class="operator">(</span>Кнопка1<span class="operator">)</span><span class="operator">;</span>
    Кнопки<span class="operator">.</span>Добавить<span class="operator">(</span>Кнопка2<span class="operator">)</span><span class="operator">;</span>
    ПанельЗадачОС<span class="operator">.</span>УстановитьКнопки<span class="operator">(</span>Кнопки<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">При
нажатии на какую-либо из созданных кнопок будет срабатывать обработчик, в
котором и будет выполняться нужное действие. Однако модуль управляемого
приложения не может содержать обработчиков оповещения, поэтому следует создать
(или использовать) клиентский общий модуль, в котором будет размещен
обработчик. В примере используется общий модуль <span class="Term">ОповещенияКнопок</span> и обработчик <span class="Term">ДействияКнопок()</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ДействияКнопок<span class="operator">(</span>ДополнительныеПараметры<span class="operator">)</span> <span class="keyword">Экспорт</span>
    <span class="keyword">Если</span> ДополнительныеПараметры <span class="operator">=</span> <span class="string">&quot;ОформитьЗаказ&quot;</span> <span class="keyword">Тогда</span>
        <span class="comment">// здесь будет создаваться документ заказа</span>
    <span class="keyword">ИначеЕсли</span> ДополнительныеПараметры <span class="operator">=</span> <span class="string">&quot;ОформитьПродажу&quot;</span> <span class="keyword">Тогда</span>
        <span class="comment">// здесь будет создаваться документ продажи</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="Regularbeforepicture">В
результате окно эскиза для запущенной информационной базы с указанными выше изменениями
будет иметь следующий вид:</p>

<p class="Picture"><IMG src="_img/img00208.gif?_=1496848987" WIDTH="216" ALT HEIGHT="214"></p>

<p class="MsoCaption">Рис.
209. Кнопки в окне эскиза на панели задач</p>

<p class="MsoNormalCxSpFirst">Теперь
для создания заказа и продажи нет необходимости разворачивать основное окно
приложения и искать в командном интерфейсе нужные команды.</p>

<p class="MsoNormalCxSpLast">При
использовании данного механизма следует помнить о следующих особенностях и
ограничениях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
максимальное количество кнопок в окне эскиза –
7 штук.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
после первого создания нельзя увеличить
количество кнопок в окне эскиза. Допускается изменение и скрытие ранее созданных
кнопок.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
картинка кнопки может быть любой, но
рекомендуется использовать формат <span class="Interface">.ico</span>, в котором
присутствуют картинки размером 16x16, 20x20 и 24x24 (для 96, 120 и 144 DPI
соответственно).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
в структуре, описывающей каждую кнопку,
обязательными являются все три свойства. Опускать свойства нельзя.</p>

<p class="MsoNormal">При
работе под управлением ОС Linux, а также на ОС Windows XP, создание кнопок в
окне эскиза не ведет к каким-либо внешним проявлениям.</p>

<a name="_ref436739000"></a><a id="TI000001762" class="bookmark" name="issogl2_6.3.9_управление_значком_панели_задач"><h3>6.3.9. Управление значком панели задач</h3></a>

<p class="MsoNormalCxSpFirst">При
работе «1С:Предприятия» возникают ситуации, когда «внутри» системы что-то
происходит и требуется привлечь внимание пользователя. Например, встроенная
почтовая система получила очередную порцию электронной корреспонденции, и
увеличился счетчик непрочитанных писем или закончилось какое-то длительное
действие и требуется привлечь внимание пользователя.</p>

<p class="MsoNormalCxSpLast">В
том случае, если система работает под управлением ОС Windows 7 (и старше),
прикладной разработчик может реализовать следующие возможности:</p>

<p class="MsoListNumberCxSpFirst">1.  установить
значок на пиктограмму информационной базы, отображаемой на командной панели. В
качестве значка выступает или картинка или число.</p>

<p class="MsoListNumberCxSpLast">2.  инициировать
мигание кнопки на командной панели, связанной с информационной базой.</p>

<p class="MsoNormal">Рассмотрим
примеры более подробно.</p>

<p class="Lang-parameter">Установка
значка кнопки панели задач</p>

<p class="MsoNormal">Допустим,
что в рамках информационной системы работает специальный механизм обмена
заданиями и требуется отображать пользователю, сколько заданий для него есть в
системе на данный момент. Для этого используем обработчик ожидания, который
каждые 60 секунд (например) будет проверять, сколько заданий установлено
пользователю и выводить это число в кнопку, соответствующую информационной базе
на командной панели.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ПередНачаломРаботыСистемы<span class="operator">(</span>Отказ<span class="operator">)</span>
    ПодключитьОбработчикОжидания<span class="operator">(</span><span class="string">&quot;ПроцедураОжидания&quot;</span><span class="operator">,</span> <span class="number">60</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="keyword">Процедура</span> ПроцедураОжидания<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Экспорт</span>
    Счетчик <span class="operator">=</span> Сообщения<span class="operator">.</span>ПолучитьКоличествоЗаданий<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Если</span> Счетчик <span class="operator">=</span> <span class="number">0</span> <span class="keyword">Тогда</span>
        ПанельЗадачОС<span class="operator">.</span>УдалитьНаклейку<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Иначе</span>
        ПанельЗадачОС<span class="operator">.</span>УстановитьНаклейку<span class="operator">(</span>Счетчик<span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Если
для пользователя нет заданий – ранее установленное число будет удаляться
со значка. Если второй параметр метода <span class="Term">УстановитьНаклейку()</span> установлен в значение <span class="Term">Истина</span>, то значок будет удален системой при
выборе соответствующего приложения.</p>

<p class="Lang-parameter">Мигание
кнопкой панели задач</p>

<p class="MsoNormalCxSpFirst">Отображение
значка на кнопки панели задач хорошо использовать, когда в приложении есть
некоторая перечислимая информация. В этом случае отображение «количества» может
оказаться достаточно. В тех ситуациях, когда в системе заканчивается выполнение
какого-либо длительного процесса, эту ситуацию нельзя выразить установкой
какого-то значка на кнопке панели задач. Однако имеется возможность
сигнализировать об этом (окончании процесса) миганием кнопки панели задач.</p>

<p class="MsoNormalCxSpMiddle">Для
управления такой сигнализацией служит метод <span class="Term">ПанельЗадачОС.Сигнализировать()</span>. Поведение
системы при вызове этого метода зависит от используемой ОС.</p>

<p class="MsoNormalCxSpLast">Рассмотрим
пример, в котором будет установлена обработка ожидания на интервал 120 секунд,
который (интервал) будет имитировать длительный процесс. По окончании интервала
будет выполняться 5 миганий кнопкой панели задач.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ПередНачаломРаботыСистемы<span class="operator">(</span>Отказ<span class="operator">)</span>
    ПодключитьОбработчикОжидания<span class="operator">(</span><span class="string">&quot;ПроцедураОжидания&quot;</span><span class="operator">,</span> <span class="number">120</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="keyword">Процедура</span> ПроцедураОжидания<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Экспорт</span>
    ПанельЗадачОС<span class="operator">.</span>Сигнализировать<span class="operator">(</span><span class="number">5</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormalCxSpFirst">Через
120 секунд после запуска клиентского приложения, кнопка панели задач, связанная
с приложением, выполнит 5 морганий подряд.</p>

<p class="MsoNormalCxSpLast">Иконки на значке приложения в панели задач ОС
Windows
отображаются только при выключенном флажке <span class="Interface">Использовать маленькие значки</span> в настройках
панели задач. При работе под
управлением Ubunty Unity, может
не происходить никаких визуальных эффектов, если система «1С:Предприятие»
запущена под правами суперпользователя (<span class="Interface">root</span>).</p>

<a id="TI000000390" class="bookmark" name="issogl1_6.4_порядок_разработки_командного_интерфейса"><h2>6.4. Порядок разработки командного интерфейса</h2></a>

<p class="MsoNormal">При
разработке командного интерфейса обычно выполняется следующая
последовательность действий:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
в начале разработки конфигурации определяется ее
структура с точки зрения предметной области, т. е. создается дерево
подсистем конфигурации;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
создается состав ролей, т. е.
определяется, для кого предназначена данная конфигурация;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
при создании новых объектов конфигурации
(справочников, документов и т. д.), как правило, они сразу относятся
к тем или иным подсистемам, для объектов назначаются права доступа по ролям;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
если не устраивает стандартное расположение
команд и их видимость по умолчанию, то выполняется редактирование свойства <span class="Interface">Командный интерфейс</span>
необходимых подсистем и редактирование состава команд тех форм, в которых
автоматически размещены параметризованные команды необходимых объектов
(перехода к подчиненному списку и ввода на основании).</p>

<p class="MsoNormalCxSpFirst">Уже
эти минимальные действия приведут к тому, что в соответствующих разделах командного
интерфейса появятся команды открытия форм списков объектов, команды ввода новых
объектов (если включена их видимость в редакторе фрагмента командного
интерфейса). Кроме того, если это определено в свойствах объекта, в формах
других объектов конфигурации появятся команды ввода на основании, перехода к
списку по регистратору, перехода к списку по владельцу и т. д.</p>

<p class="MsoNormalCxSpLast">Рассмотрим
пример создания документа <span class="Interface">Расход товара</span>. При его
создании мы сделаем следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
укажем, что документ будет относиться к подсистемам
<span class="Interface">Торговый учет</span> и
<span class="Interface">Бухгалтерия</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
установим ролям <span class="Interface">Менеджер по продажам</span>
и <span class="Interface">Администратор</span>
права на работу с этим документом;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
укажем, что документ вводится на основании
документов <span class="Interface">Счет</span> и <span class="Interface">Заказ покупателя</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
укажем, что он является регистратором для
регистра <span class="Interface">Остатки товаров на
складах</span>.</p>

<p class="MsoNormalCxSpFirst">Эти
действия приведут к появлению команды <span class="Interface">Расход товара</span> в
панели навигации раздела <span class="Interface">Торговый учет</span> в
том случае, если пользователь обладает ролью <span class="Interface">Менеджер по продажам</span>
или административными правами.</p>

<p class="MsoNormalCxSpMiddle">Кроме
того, в формах документов <span class="Interface">Счет</span> и <span class="Interface">Заказ покупателя</span>
появится команда подменю <span class="Interface">Создать на основании</span>,
предназначенная для ввода расходной накладной. Нам не понадобилось
редактировать интерфейсы для пользователей с такими ролями и формы документов <span class="Interface">Счет</span> и <span class="Interface">Заказ покупателя</span>.</p>

<p class="MsoNormalCxSpMiddle">Стандартное
представление команды перехода к списку накладных (<span class="Interface">Расход товара</span>)
может выглядеть неточным. Для его переопределения заполним свойство <span class="Interface">Представление списка</span>
документа <span class="Term">РасходТовара</span> и укажем там <span class="Interface">Продажи</span>.</p>

<p class="MsoNormalCxSpMiddle">Допустим,
что нас не устраивает представление объекта по умолчанию (которое участвует в
представлении команд) и мы хотим изменить его так, чтобы представление команды
ввода на основании читалось следующим образом: <span class="Interface">Продажа: создать на
основании</span>. Для этого необходимо заполнить свойство <span class="Interface">Представление</span>
объекта документа <span class="Interface">Расход товара</span>
текстом <span class="Interface">Продажа</span>.</p>

<p class="MsoNormalCxSpMiddle">Теперь
обратим внимание на то, что при стандартном размещении команды она находится в
середине списка команд раздела <span class="Interface">Торговый учет</span>.
Предположим, что команда достаточно важна для этого раздела. Мы переходим к
редактору <span class="Interface">Все подсистемы</span>
(или к редактору командного интерфейса подсистемы <span class="Interface">Торговый учет</span>)
и переносим команду в группу <span class="Interface">Важное</span>. Раздел <span class="Interface">Бухгалтерия</span> при
этом не трогаем, оставляя там размещение команды по умолчанию.</p>

<p class="MsoNormalCxSpMiddle">Наконец,
обратим внимание на видимость команд по умолчанию. В форме документа <span class="Interface">Расход товара</span>
появилась команда перехода к списку записей регистра <span class="Interface">Остатки товаров на
складах</span>, но она по умолчанию невидима. Предположим, что эта команда важна
для администратора системы и действительно по умолчанию не нужна менеджеру. Для
того чтобы это отразить, создадим форму документа <span class="Interface">Расход товара</span>,
перейдем к редактированию командного интерфейса и для команды перехода к списку
регистра установим видимость для роли <span class="Interface">Администратор</span>,
а видимость для менеджера менять не будем.</p>

<p class="MsoNormalCxSpMiddle">Для
администратора системы с его широкими правами доступа число команд оказалось
слишком большим. Предположим далее, что командой перехода к списку расходных
накладных он будет пользоваться крайне редко. Для того чтобы облегчить его командный
интерфейс, опять перейдем к редактированию команд в редакторе <span class="Interface">Все подсистемы</span>
и для нашей команды снимем видимость для роли <span class="Interface">Администратор</span>.</p>

<p class="MsoNormalCxSpMiddle">Также
можно для менеджера по продажам установить видимость по умолчанию для команды
добавления документа <span class="Interface">Расход товара</span> в
панели действий, чтобы он смог вызывать ввод этого документа без обращения к
списку документов.</p>

<p class="MsoNormalCxSpMiddle">В
процессе работы с конфигурацией пользователь может настраивать видимость команд
по своему усмотрению.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>