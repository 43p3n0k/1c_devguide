<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 29. &#1052;&#1077;&#1093;&#1072;&#1085;&#1080;&#1079;&#1084; &#1089;&#1088;&#1072;&#1074;&#1085;&#1077;&#1085;&#1080;&#1103; &#1080; &#1086;&#1073;&#1098;&#1077;&#1076;&#1080;&#1085;&#1077;&#1085;&#1080;&#1103; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1081;</title>
		<LINK REL="stylesheet" href="/db/content/v8310doc/src/руководство разработчика/style.css?_=1496848987">
		<script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 29. механизм сравнения и объединения конфигураций.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script charset="windows-1251" type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script charset="windows-1251" type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref471827362"></a><a name="_ref463619619"></a><a name="_ref425412237"></a><a name="_ref425411614"></a><a name="_ref391648544"></a><a name="_ref342998053"></a><a name="_ref342998051"></a><a name="_ref237783575"></a><a id="TI000001073" class="bookmark"><h1>Глава 29.  Механизм сравнения и объединения конфигураций</h1></a>

<a id="TI000001537" class="bookmark" name="issogl1_29.1_общая_информация"><h2>29.1. Общая информация</h2></a>

<p class="MsoNormalCxSpFirst">Режим
сравнения и объединения конфигураций позволяет детально сравнить две
конфигурации или расширения конфигурации и объединить их. Возможно выборочное
объединение по результатам сравнения. Сравнение и объединение основной конфигурации
и расширения конфигурации не поддерживается.</p>

<p class="MsoNormalCxSpMiddle">Режимом
объединения можно воспользоваться, например, когда одну конфигурацию параллельно
разрабатывают несколько человек. Время от времени им необходимо объединять
результаты работы (или хотя бы один раз объединить все результаты в конце
разработки).</p>

<p class="MsoNormalCxSpMiddle">Режим
сравнения и объединения конфигураций можно также использовать для сравнения
двух конфигураций без объединения.</p>

<p class="MsoNormalCxSpMiddle">Наконец,
в ситуации, когда в исходную конфигурацию нужно загрузить сделанные изменения,
также полезно предварительно просмотреть и оценить их, воспользовавшись режимом
сравнения и объединения конфигураций.</p>

<p class="MsoNormalCxSpLast">Сравнению
в этом режиме подвергаются как общие свойства объектов конфигураций, таких как
справочники, документы, журналы, так и их отдельные реквизиты и реквизиты табличных
частей. Отдельно сравниваются формы объектов: модули, тексты описаний и макеты.
При этом результаты сравнения можно просмотреть детально.</p>

<a id="TI000001074" class="bookmark" name="issogl1_29.2_условия_сравнения_конфигураций"><h2>29.2. Условия сравнения конфигураций</h2></a>

<p class="MsoNormalCxSpFirst">При
запуске режима сравнения программа производит анализ конфигураций и
устанавливает взаимное соответствие объектов.</p>

<p class="MsoNormalCxSpMiddle">Объекты,
которым «не досталось пары», могут быть либо новыми, либо удаленными, либо это
объекты, относящиеся к одной категории, но называемые в разных конфигурациях
по-разному. Для этих объектов соответствие можно установить интерактивно (см. <a href="#_ref217357451">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">При
автоматической установке соответствия программа анализирует объекты
конфигураций, имеющие одинаковые имена. Например, <span class="Term">Справочник.Товары</span> в одной конфигурации и <span class="Term">Справочник.Товары</span> в другой считаются одним
справочником; им устанавливается соответствие, и они будут сравниваться.</p>

<p class="MsoNormalCxSpMiddle">Среди
объектов, имеющих разные имена, отдельно проводится сравнение внутренних
идентификаторов, которые конфигуратор присваивает автоматически при их
создании. Присвоение внутренних идентификаторов необходимо для того, чтобы
упростить установку соответствия объектов конфигураций и производить ее автоматически.
Эта ситуация возникает, например, в том случае, когда в процессе развития конфигурации
было изменено имя объекта. Если имена различны, а внутренние идентификаторы
совпадают, то для таких объектов автоматически устанавливается соответствие.</p>

<p class="MsoNormalCxSpMiddle">Особым
образом устанавливается соответствие форм. Форма может состоять из нескольких
страниц. Сначала производится анализ по именам; затем для страниц, имеющих
разные имена, производят анализ по заголовкам страниц (непустым); затем для
страниц, имеющих разные заголовки, производят анализ по картинкам. Если
установлено соответствие страниц, то будут сравниваться и объединяться
расположенные в них элементы управления. Если соответствие страниц не установлено,
то считается, что это разные страницы, и в результирующей форме (после
объединения) будут присутствовать все такие страницы отдельно.</p>

<p class="MsoNormalCxSpLast">Для
страниц, у которых все три свойства (<span class="Interface">Внутренний
идентификатор</span>, <span class="Interface">Заголовок</span> и <span class="Interface">Картинка</span>) пустые, будет производиться
попарное объединение в соответствии с выбранным порядком следования.</p>

<a id="TI000001075" class="bookmark" name="issogl1_29.3_запуск_режима_сравнения_и_объединения_конфигураций"><h2>29.3. Запуск режима сравнения и объединения конфигураций</h2></a>

<p class="MsoNormalCxSpFirst">Как
будет видно ниже, хотя сравниваемые конфигурации можно считать в основном
равноправными (приоритет при объединении можно отдать любой из них), в определенном
аспекте именно текущая конфигурация считается основной, в нее вносятся не
повреждающие ее изменения из загружаемой конфигурации. Исходя из этих соображений,
рекомендуется выбрать, какую из двух конфигураций сделать основной. Выбранная
конфигурация становится основной, когда с ней запускается система «1С:Предприятие»
в режиме Конфигуратор.</p>

<p class="MsoNormalCxSpMiddle">Загружаемую
конфигурацию, которую можно будет сравнить и объединить с основной, необходимо
предварительно сохранить в файл (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 2. работа с конфигурацией.htm?_=1496848987#_ref217357493">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Для
загрузки второй конфигурации нужно выбрать пункт <span class="Interface">Конфигурация – Сравнить,
объединить с конфигурацией из файла…</span>. Появится стандартный диалог <span class="Interface">Открыть файл
конфигурации</span>, в котором нужно найти и открыть файл с расширением <span class="Interface">*.cf</span> загружаемой
конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Если
основная конфигурация пустая (разработка прикладного решения еще не начиналась),
то конфигуратор предложит выполнить полную загрузку конфигурации. При положительном
ответе производится полная загрузка указанной конфигурации и открывается окно <span class="Interface">Конфигурация</span>.
При отказе от полной загрузки производится сравнение конфигураций.</p>

<p class="MsoNormalCxSpMiddle">Процесс
загрузки и сравнения загружаемой конфигурации с основной сопровождается
сообщениями в панели состояния конфигуратора. В этих сообщениях указываются объекты
конфигураций, сравниваемые в настоящий момент. Также в панели состояния
показывается индикатор процесса сравнения.</p>

<p class="MsoNormalCxSpLast">Процесс
загрузки и сравнения может занимать продолжительное время. Это зависит от
размера сравниваемых конфигураций.</p>

<a name="_ref217357834"></a><a name="_ref405474631"></a><a name="_ref405474630"></a><a id="TI000001076" class="bookmark" name="issogl1_29.4_сравнение_конфигураций"><h2>29.4. Сравнение конфигураций</h2></a>

<p class="MsoNormalCxSpFirst">В
дополнение к основному режиму сравнения и объединения конфигураций, описанному
в предыдущем разделе, при котором одна из сравниваемых конфигураций всегда
выбирается основной, конфигуратор предоставляет возможность сравнить две произвольные
конфигурации, например, расположенные в файлах, или конфигурацию хранилища (с выбором
любой версии) и поставки и т. д.</p>

<p class="MsoNormalCxSpLast">Выбрать
сравниваемые конфигурации можно с помощью меню <span class="Interface">Конфигурация – Сравнить
конфигурации</span>.</p>

<p class="Regularbeforepicture">На
экран выводится диалог:</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00594.gif?_=1496848987" WIDTH="368" ALT HEIGHT="232"></p>

<p class="MsoCaption">Рис.
586.
Сравнение конфигураций</p>

<p class="MsoNormalCxSpFirst">Диалог
содержит два раздела выбора сравниваемых конфигураций. Приемы работы в разделах
одинаковые.</p>

<p class="MsoNormalCxSpMiddle">Выбор
сравниваемых конфигураций может производиться из основной конфигурации,
конфигурации базы данных, конфигурации, хранящейся в файле, версии конфигурации
хранилища, конфигурации поставщика (если текущая конфигурация находится на
поддержке), расширением конфигурации расширением конфигурации, сохраненным в
базе данных.</p>

<p class="MsoNormalCxSpMiddle">Если
выбран файл или хранилище, то в соответствующий раздел диалога добавляется поле
для выбора файла или версии хранилища. В случае выбора файла, можно выбирать
файлы как собственно конфигураций (файлы <span class="Interface">*.cf</span>), так и
расширений конфигурации (файлы <span class="Interface">*.cfe</span>).</p>

<p class="MsoNormalCxSpMiddle">Если
в базе данных сохранено более одного расширения, то в соответствующий раздел
диалога добавляется поле выбора необходимого расширения.</p>

<p class="MsoNormalCxSpLast">Если
сравниваемые конфигурации не являются потомками друг друга и поэтому для них не
может быть произведена установка соответствия по внутренним идентификаторам, нужно
установить флажок <span class="Interface">Установить соответствие по именам объектов</span>. Для начала
сравнения нажать кнопку <span class="Interface">ОК</span>. Конфигуратор произведет сравнение указанных
конфигураций и выведет результат сравнения в окно <span class="Interface">Сравнение конфигураций</span>.
Приемы работы в окне аналогичны приемам работы, описанным в разделе «Сравнение
и объединение конфигураций», с тем лишь отличием, что в режиме сравнения можно
только просмотреть выбранные объекты и получить отчет о различиях.</p>

<a name="_ref227477350"></a><a name="_ref227477308"></a><a name="_ref216240748"></a><a id="TI000001711" class="bookmark" name="issogl1_29.5_особенности_сравнения_и_объединения"><h2>29.5. Особенности сравнения и объединения</h2></a>

<a name="_ref449016175"></a><a name="_ref449016174"></a><a id="TI000001077" class="bookmark" name="issogl2_29.5.1_предопределенных_данных"><h3>29.5.1. Предопределенных данных</h3></a>

<p class="MsoNormalCxSpFirst">При сравнении предопределенных данных
сопоставление элементов производится только по внутреннему идентификатору.</p>

<p class="MsoNormalCxSpMiddle">Уникальный (в пределах объекта метаданных)
внутренний идентификатор присваивается предопределенному элементу при создании.
Он сохраняется при любых перемещениях предопределенных данных между конфигурациями
при объединении или копировании. В этом поведение идентификатора отличается от
поведения соответствующего идентификатора объекта метаданных. Поэтому если в
двух конфигурациях создать элементы предопределенных данных с одинаковым
именем, при сравнении они будут считаться разными элементами. Единственный
способ получить одинаковые предопределенные данные в двух конфигурациях – воспользоваться
объединением или копированием. В том случае, если объединение должно привести к
образованию в результирующей конфигурации нескольких предопределенных элементов
с одинаковыми именами, элементу из неприоритетной конфигурации будет добавлен
числовой суффикс (будет изменено имя предпопределенного элемента). При этом в
окно сообщений будет выдано диагностическое сообщение.</p>

<p class="MsoNormalCxSpMiddle">При обновлении конфигурации базы данных
производится сопоставление предопределенных элементов с существующими объектами
базы данных. Неизменность внутреннего идентификатора обеспечивает корректную
связь между элементом преопределенных данных и соответствующим ему объектом
базы данных при перемещениях между конфигурациями. Для сопоставленных объектов
замещение будет производиться в соответствии с выбором приоритетной конфигурации.</p>

<p class="MsoNormalCxSpLast">В связи с тем, что установка соответствия
производится по внутренним идентификаторам, для иерархических структур предопределенные
данные могут объединяться, даже если они находятся на разных уровнях иерархии.
Результат объединения (уровень иерархии, в которой окажется объединяемый
элемент) зависит от приоритетности конфигураций.</p>

<a name="_ref405887633"></a><a id="TI000001538" class="bookmark" name="issogl2_29.5.2_расширений_конфигурации"><h3>29.5.2. Расширений конфигурации</h3></a>

<p class="MsoNormal">Операция сравнения и объединения расширения
поддерживается для:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Расширения конфигурации, сохраненного в файл (<span class="Interface">*.cfe</span>);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Расширения конфигурации, сохраненного в
информационной базе.</p>

<p class="MsoNormalCxSpFirst">Не поддерживается сравнение и объединение
между расширением конфигурации и основной конфигурацией в любых вариантах.</p>

<p class="MsoNormalCxSpMiddle">Существует возможность вручную устанавливаться
соответствие между объектами сравниваемых расширений.</p>

<p class="MsoNormalCxSpMiddle">При сравнении заимствованных объектов
учитываются как собственно значения объектов, так и признак контролируемости. В
отчет о сравнении попадают и различия в значениях объектов и различия в
признаках контролируемости. В тоже время, если сравнивается собственный и
заимствованный объект – то проверяется только значение объекта, без
признака контролируемости.</p>

<p class="MsoNormalCxSpLast">При объединении свойств объектов следует
учитывать следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Свойство <span class="Interface">Тип объекта</span> отображается, но недоступно для настройки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для объектов с установленным признаком
контролируемости, объединение выполняется следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Для пары «собственный – заимствованный»:
значения объединяются, признак контролируемости не используется.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для пары «заимствованный – собственный»:
значения объединяются, признак контролируемости не изменяется.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для пары «заимствованный – заимствованный»:
значения объединяются, признак контролируемости получается из конфигурации, с
которой выполняется объединение.</p>

<p class="MsoListBullet">&#9679; 
Сохраненная форма считается единым объектом, и действия
с ней зависят от режима объединения:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Объединение выполняется с приоритетом расширения
конфигурации – сохраненная форма не изменяется.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Объединение выполняется с приоритетом файла –
сохраненная форма получается из файла.</p>

<a name="_ref425504856"></a><a id="TI000001712" class="bookmark" name="issogl2_29.5.3_других_объектов"><h3>29.5.3. Других объектов</h3></a>

<p class="MsoNormal">При выполнении сравнения справочной
информации, сравнение выполняется не посимвольным сравнением двух HTML-текстов,
а без учета служебных тегов редактора HTML-документов.</p>

<a name="_ref383083487"></a><a name="_ref383083486"></a><a id="TI000001078" class="bookmark" name="issogl1_29.6_окно_сравнение_и_объединение_конфигураций"><h2>29.6. Окно «Сравнение и объединение конфигураций»</h2></a>

<p class="MsoNormal">После
окончания процедуры сравнения на экран выводится окно <span class="Interface">Объединение
конфигураций</span>. Оно позволяет:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
ознакомиться с тем, какие объекты в двух конфигурациях
отличаются;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
выбрать объекты, по которым необходимо детально
изучить различия;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
вызвать указанные объекты для просмотра и редактирования;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
задать, какие из объектов включить в
объединение;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
установить соответствия объектов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
установить режимы объединения конфигураций (для
всей конфигурации или по каждому объекту);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
установить порядок подчиненных объектов (для
всей конфигурации или по каждому объекту);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
сформировать отчет о различиях в конфигурациях;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
запустить процесс объединения конфигураций.</p>

<p class="Regularbeforepicture">Окно
(см. <a href="#_ref393467878">рис.587</a>) содержит табличное поле, которое состоит из трех
колонок, если конфигурации не связаны друг с другом (о связанных конфигурациях см. <a href="#_ref141003802">здесь</a>). Первая колонка содержит цветовую отметку о том, что
настройки объединения отличны от настроек по умолчанию. Зеленым цветом отмечены
объекты, у которых настройки объединения отличаются от настроек по умолчанию, а
светло-зеленый цвет отмечает объект, у подчиненных объектов которого имеются
настройки объединения, отличные от настроек по умолчанию. Во второй колонке
приводятся данные основной конфигурации (той информационной базы, которая
открыта конфигуратором), в третьей колонке – данные загружаемой конфигурации,
а последняя колонка предназначена для установки режима объединения и порядка подчиненных
объектов.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00595.gif?_=1496848987" WIDTH="761" ALT HEIGHT="539"></p>

<p class="MsoCaption"><a name="_ref393467878">Рис. </a>587. Сравнение и
объединение конфигурации</p>

<p class="MsoNormalCxSpFirst">Признаком
отличия (статус соответствия) объектов является цвет фона строк. Под табличным
полем приведены возможные статусы.</p>

<p class="MsoNormalCxSpMiddle">Ниже
расшифровок статусов расположено поле выбора <span class="Interface">Фильтр</span>, с
помощью которого устанавливается режим просмотра изменений. При открытии окна <span class="Interface">Объединение
конфигураций</span> установлен фильтр <span class="Interface">Показывать отличия в
конфигурациях</span>. Выбор других режимов позволяет изучить отличия в
конфигурациях или совпадения.</p>

<p class="MsoNormalCxSpLast">Все
операции, которые доступны в данном окне, кроме собственно операции объединения
(кнопка <span class="Interface">Выполнить</span>), размещаются в командной панели формы.
Доступны следующие команды:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Поиск неразрешимых ссылок
на удаляемые объекты</span> – выполняется поиск неразрешимых ссылок на
удаляемые объекты. Найденные результаты выводятся в окно сообщений (с
возможностью позиционирования на свойство, содержащее ссылку).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Загрузить настройки…</span> –
настройки окна сбрасываются к настройкам по умолчанию, а затем выполняется загрузка
настроек объединения из файла. Загруженный файл становится текущим для
выполнения команды сохранения и автоматического сохранения настроек.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Добавить настройки…</span> –
настройки из файла дополняют текущие настройки объединения, установленные в
окне. При этом файл, из которого добавляются настройки, не будет использоваться
для сохранения (в том числе автоматического) настроек.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Сохранить настройки</span> –
позволяет сохранить в файл выбранные объекты и свойства для объединения, режимы
объединения, настройки объединения модулей, форм и табличных документов. Сохраняются
только те настройки объединения, которые отличаются от настроек по умолчанию. Сохранение
доступно в том случае, если в текущих настройках объединения имеются настройки,
отличные от настроек по умолчанию. Формат файла, в который выполняется
сохранение настроек, см. <a href="/db/v8310doc/bookmark/adm/TI000000713" target="_top">здесь</a>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Сохранить настройки как…</span> –
аналогична команде <span class="Interface">Сохранить настройки</span>, но предлагает изменить файл, в
который будет выполняться сохранение настроек.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Установить настройки по
умолчанию</span> – сбрасываются текущие настройки окна и для окна
сравнения/объединения устанавливаются настройки по умолчанию. Именно эти
настройки применяются при открытии диалога.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Объединить модули</span> –
выполняет объединение отмеченных необъединенных модулей, у которых установлен
один из режимов <span class="Interface">Объединить с приоритетом …</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Обновить</span> – обновить
дерево сравнения после изменения объектов конфигурации.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Установить режим для всех</span>
открывает диалог установки режима объединения (см. <a href="#_ref217357626">здесь</a>) и установку порядка (см. <a href="#_ref217357632">здесь</a>) всех объектов.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00596.gif?_=1496848987" WIDTH="374" ALT HEIGHT="204"></p>

<p class="MsoCaption">Рис.
588.
Установка режимов для всех объектов</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Отметить по подсистемам…</span>
позволяет установить отбор по подсистемам основной конфигурации или
конфигурации файла.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Отчет о сравнении</span>
позволяет получить отчет о сравнении двух конфигураций с нужной степенью
подробности.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Параметры</span> открывает
форму для настройки параметров сравнения/объединения (см. <a href="#_ref434320475">здесь</a>).</p>

<p class="MsoNormalCxSpFirst">Флажок
<span class="Interface">Сохранять настройки автоматически</span> управляет
автоматическим сохранением настроек окна сравнения/объединения перед
выполнением собственно объединения (нажатие кнопки <span class="Interface">Выполнить</span>).</p>

<p class="MsoNormalCxSpLast">Перед
закрытием окна сравнения/объединения будет задан вопрос о необходимости
сохранения настроек в файл, если в закрываемом окне существуют настройки,
отличные от настроек по умолчанию и они не сохранены в файл.</p>

<p class="Note">Примечание. При открытом окне сравнения и объединения
конфигураций не рекомендуется выполнять длительные операции по работе с
конфигурацией, например, операции с хранилищем, снятие с поддержки конфигурации
поставщика и т. д.</p>

<a name="_ref141003802"></a><a name="_ref434320475"></a><a id="TI000001079" class="bookmark" name="issogl1_29.7_настройка_сравнения_конфигураций"><h2>29.7. Настройка сравнения конфигураций</h2></a>

<a id="TI000001816" class="bookmark" name="issogl2_29.7.1_общая_информация"><h3>29.7.1. Общая информация</h3></a>

<p class="Regularbeforepicture">Нажатие
кнопки <span class="Interface">Настройка</span> открывает диалог <span class="Interface">Настройка сравнения
конфигураций</span>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00597.gif?_=1496848987" WIDTH="374" ALT HEIGHT="384"></p>

<p class="MsoCaption">Рис.
589.
Настройка сравнения конфигураций</p>

<p class="MsoNormalCxSpFirst">В
диалоге производится выбор режима сравнения конфигураций. По умолчанию
установлен режим сравнения различных конфигураций (не связанных друг с другом).</p>

<p class="MsoNormalCxSpMiddle">Если
конфигурации связаны, нужно выбрать характер связи. При закрытии диалога
настройки (нажата кнопка <span class="Interface">ОК</span>) в окно <span class="Interface">Объединение конфигурации</span>
добавляется специальная графа, в которой специальными пиктограммами показывается
история изменений объектов.</p>

<p class="MsoNormalCxSpMiddle">Специальная
графа добавляется для колонки <span class="Interface">Загружаемая конфигурация</span>, если
загружаемая конфигурация является потомком основной конфигурации; для колонки <span class="Interface">Основная конфигурация</span>,
если основная конфигурация является потомком загружаемой конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Также
в окно добавляется справочная информация для расшифровок статусов, объединенных
в группу <span class="Interface">Статусы</span> по истории объектов.</p>

<p class="MsoNormalCxSpLast">Если
в конфигурации используется несколько языков, то можно произвести выборочное
сравнение по языкам. Для этого нужно установить флажок <span class="Interface">Использовать
выборочное сравнение по языкам</span> и указать язык или языки, для которых необходимо
произвести сравнение.</p>

<a id="TI000001080" class="bookmark" name="issogl2_29.7.2_группа_объекты_основной_конфигурации"><h3>29.7.2. Группа «Объекты основной конфигурации»</h3></a>

<p class="MsoNormalCxSpFirst">При
выполнении любого объединения конфигураций существует возможность удаления
объектов основной конфигурации. По умолчанию эта возможность включена только в
режиме обновления конфигурации поставщика. Для включения ее в других режимах
следует установить флажок <span class="Interface">Разрешить удаление объектов основной конфигурации</span>.</p>

<p class="MsoNormalCxSpLast">Расстановка
пометок удаления объектов поставщика по умолчанию производится по следующим
правилам. Если пользователь изменял объект поставщика по сравнению с предыдущей
версией конфигурации поставщика, то объект по умолчанию не помечается на
удаление; если объект идентичен объекту поставщика предыдущей версии, то он на
удаление помечается. Если объект был помечен на удаление (автоматически или
вручную), то при нажатии кнопки <span class="Interface">Выполнить</span> происходит контроль ссылочной
целостности. При обнаружении неразрешимых ссылок на удаляемый объект будет
выдано окно показа таких ссылок, но, в отличие от неразрешимых ссылок,
образующихся в результате отказа от копирования какого-либо объекта
конфигурации поставщика (или любой другой конфигурации, участвующей в объединении),
возможности продолжить объединение (и удаление объекта) в этом случае нет.</p>

<a id="TI000001081" class="bookmark" name="issogl2_29.7.3_группа_объекты_загружаемой_конфигурации"><h3>29.7.3. Группа «Объекты загружаемой конфигурации»</h3></a>

<p class="MsoNormalCxSpFirst">По
умолчанию при объединении конфигурации объекты, отсутствующие в основной
конфигурации, добавляются в нее с теми идентификаторами, которые существуют у
них в загружаемой конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Установка
флажка <span class="Interface">Режим копирования объектов...</span> позволяет выполнять
добавление новых объектов по правилам, существовавшим в предыдущих версиях платформы:
при добавлении объектов, отсутствующих в основной конфигурации, для них всегда
генерируются новые идентификаторы.</p>

<p class="MsoNormalCxSpLast">При
нажатии кнопки <span class="Interface">ОК</span> производится повторное сравнение с учетом выбранной
настройки.</p>

<a id="TI000001082" class="bookmark" name="issogl1_29.8_редактирование_объектов"><h2>29.8. Редактирование объектов</h2></a>

<p class="MsoNormalCxSpFirst">В
обычном режиме (не используется хранилище и отсутствует поддержка) при открытом
окне <span class="Interface">Объединение конфигураций</span> допускается производить
просмотр и редактирование объектов основной конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Для
редактирования свойств объекта следует указать нужный объект в колонке основной
конфигурации и в палитре свойств исправить значение. Если редактируемый объект
представляет собой форму, макет, интерфейс или другой «сложный» объект, его
можно открыть для редактирования с помощью выбора пункта <span class="Interface">Открыть форму</span> (<span class="Interface">макет/интерфейс</span>)
из контекстного меню. Объекты основной конфигурации также можно выбрать для
редактирования в окне <span class="Interface">Конфигурация</span>.</p>

<p class="MsoNormalCxSpMiddle">Объекты
загружаемой конфигурации доступны только для просмотра. Процедура доступа к
объекту загружаемой конфигурации осуществляется аналогично процедуре доступа к
объектам основной конфигурации.</p>

<p class="MsoNormalCxSpLast">Если
было произведено любое изменение, кнопка <span class="Interface">Выполнить</span> становится
недоступной и всем объектам устанавливается статус <span class="Interface">Неопределенный</span>
(показывается серым фоном). Чтобы продолжить работу в окне <span class="Interface">Объединение
конфигураций</span>, следует нажать кнопку <span class="Interface">Обновить</span>.
Конфигуратор производит повторное сравнение конфигураций (с учетом произведенных
изменений) и устанавливает соответствие объектов.</p>

<a id="TI000001083" class="bookmark" name="issogl1_29.9_особенности_редактирования_при_групповой_разработке_и_поддержке"><h2>29.9. Особенности редактирования при групповой разработке и поддержке</h2></a>

<p class="MsoNormalCxSpFirst">При
использовании режима групповой разработки в окне <span class="Interface">Объединение
конфигурации</span> допускается редактирование только захваченных в хранилище
объектов основной конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Объекты,
запрещенные для редактирования, можно только просмотреть. Эти объекты нельзя
указать для объединения (отсутствует флажок выбора).</p>

<p class="MsoNormalCxSpMiddle">Признаком
запрета редактирования является наличие пиктограммы в виде замкнутого замка
слева от пиктограммы объекта. Кроме того, под табличным полем выводится статус
объекта, в который выводится текстовое сообщение о запрете редактирования.</p>

<p class="MsoNormalCxSpLast">Аналогичное
поведение окна <span class="Interface">Объединение конфигурации</span> наблюдается в случае нахождения
конфигурации на поддержке. Если для какого-либо объекта установлено правило
поставщика, запрещающее изменение, то данный объект можно только просмотреть.
Данные объекты можно только сравнить, но объединение таких объектов не
допускается.</p>

<a name="_ref217357451"></a><a id="TI000001084" class="bookmark" name="issogl1_29.10.установка_соответствия_объектов"><h2>29.10.Установка соответствия объектов</h2></a>

<p class="MsoNormal">При
сравнении конфигураций программа производит автоматическую установку
соответствия объектов двух конфигураций друг другу. Так как соответствие производится
по именам объектов, то в сравниваемых конфигурациях имена объектов могут совпадать.
Однако суть объектов может быть разная. С другой стороны, имена могут быть
различны, но суть объектов одна. В таких случаях для этих объектов нужно
провести ручную установку соответствия объектов.</p>

<p class="Regularbeforepicture">Для
отмены установленного соответствия следует выбрать объект и в контекстном меню выбрать
пункт <span class="Interface">Отменить соответствие объектов</span>. При этом объектам
устанавливается статус <span class="Interface">Неопределенный</span>. После завершения отмены соответствия для
всех таких объектов следует нажать кнопку <span class="Interface">Обновить</span>. Конфигуратор
произведет повторное сравнение конфигураций.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00595.gif?_=1496848987" WIDTH="761" ALT HEIGHT="539"></p>

<p class="MsoCaption"><a name="_ref212460731">Рис. </a>590. Основное окно
сравнения/объединения конфигураций</p>

<p class="MsoNormalCxSpFirst">Для
основной конфигурации объекты будут показаны бежевым фоном (присутствуют только
в основной конфигурации), для загружаемой – зеленым (присутствуют только в
загружаемой конфигурации).</p>

<p class="MsoNormalCxSpLast">Для
установки соответствия нужно выбрать объект и в контекстном меню выбрать пункт <span class="Interface">Установить
соответствие объектов</span>. На экран выводится список объектов, с которыми
допускается устанавливать соответствие. В список включаются объекты, совпадающие
по виду, и для которых соответствие еще не установлено. Нужно выбрать объект и нажать
кнопку <span class="Interface">ОК</span>.</p>

<a name="_ref217357626"></a><a name="_ref393707972"></a><a name="_ref393707971"></a><a id="TI000001085" class="bookmark" name="issogl1_29.11.режим_объединения"><h2>29.11.Режим объединения</h2></a>

<p class="MsoNormal">Режим
объединения можно установить для каждого объединяемого объекта. Существует два
вида режима:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Взять из загружаемой
конфигурации</span> (в зависимости от загружаемой конфигурации наименование режима
объединения может отличаться);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Объединить</span> – в
этом случае обычно указывается приоритет конфигураций при объединении.</p>

<p class="MsoNormalCxSpFirst">Выбор
режима <span class="Interface">Взять из загружаемой конфигурации</span> означает, что объект
конфигурации будет добавлен, если он новый, или замещен, если он измененный.
Причем переносится вся структура объекта, модули, описания, формы. При этом
приоритет однозначно отдается загружаемой конфигурации.</p>

<p class="MsoNormalCxSpMiddle">При
выборе метода <span class="Interface">Объединить</span> происходящее при объединении конфигураций
зависит от установленного приоритета.</p>

<p class="MsoNormalCxSpLast">Если
из загружаемой конфигурации необходимо взять только новое и максимально
сохранить старое, нужно выбрать <span class="Interface">Объединить с приоритетом основной
конфигурации</span>. В этом режиме добавляются только новые объекты.</p>

<p class="Regularbeforetable">Тексты
объединяются следующим образом: </p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Текст</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Приоритет
  </b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Результат</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Удаленное (имеется в основной конфигурации,
  отсутствует в загружаемой)</p>
  </td>
  
  <td rowspan="3" valign="top">
  <p class="MsoNormalCxSpMiddle">С приоритетом<br>
  основной </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Остается в тексте </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Новое (имеется в загружаемой конфигурации
  и отсутствует в основной)</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Добавляется</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Измененное </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Добавляется в виде комментариев из загружаемой
  конфигурации, а то, что было в основной, остается неизменным</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Удаленное </p>
  </td>
  
  <td rowspan="3" valign="top">
  <p class="MsoNormalCxSpMiddle">С приоритетом<br>
  загружаемой</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Превращается в комментарии</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Новое</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Добавляется</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Измененное</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Измененное в основной конфигурации превращается
  в комментарии, а из загружаемой конфигурации – добавляется</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Для
модуля формы выбор приоритета можно проиллюстрировать следующим примером.</p>

<p class="MsoNormalCxSpLast">Текст
модуля основной конфигурации:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> УточнитьСтатус<span class="operator">(</span>Элемент<span class="operator">)</span>
        <span class="comment">// Вставить содержимое обработчика</span>
        Сообщить<span class="operator">(</span><span class="string">&quot;Сообщение из основной конфигурации&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Текст
модуля загружаемой конфигурации:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> УточнитьСтатус<span class="operator">(</span>Элемент<span class="operator">)</span>
        <span class="comment">// Вставить содержимое обработчика</span>
        Сообщить<span class="operator">(</span><span class="string">&quot;Сообщение из загружаемой конфигурации&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Результат
при объединении с приоритетом основной конфигурации:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> УточнитьСтатус<span class="operator">(</span>Элемент<span class="operator">)</span>
        <span class="comment">// Вставить содержимое обработчика</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
        Сообщить<span class="operator">(</span><span class="string">&quot;Сообщение из основной конфигурации&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="comment">//    Сообщить(&quot;Сообщение из загружаемой конфигурации&quot;);</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Результат
при объединении с приоритетом загружаемой конфигурации:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> УточнитьСтатус<span class="operator">(</span>Элемент<span class="operator">)</span>
        <span class="comment">// Вставить содержимое обработчика</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
        Сообщить<span class="operator">(</span><span class="string">&quot;Сообщение из загружаемой конфигурации&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="comment">//    Сообщить(&quot;Сообщение из основной конфигурации&quot;);</span>
<span class="comment">//{{MRG[ &lt;-&gt; ]</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Если
объединение модулей выполняется с помощью внешней программы (описание настроек
использования внешней программы см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref391647782">здесь</a>), то результат объединения зависит от используемой
внешней программы.</p>

<p class="Regularbeforetable">Для
объектов, значения свойств которых определяются простым указанием в палитре
свойств (например, <span class="Term">Синоним</span>,
<span class="Term">Комментарий</span>),
зависимость результата объединения от приоритета и наличия значений
представлена в таблице:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"><b>Значение
  в основной</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Значение
  в<br>
  загружаемой</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Приоритет
  конфигурации</b></p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle"><b>Результат
  (значение выбирается из…)</b></p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td rowspan="3" valign="top">
  <p class="MsoNormalCxSpMiddle">Приоритет<br>
  основной</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Основной </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Основной </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Загружаемой </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td rowspan="3" valign="top">
  <p class="MsoNormalCxSpMiddle">Приоритет<br>
  загружаемой </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Загружаемой </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Основной </p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Не задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Задано</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Загружаемой </p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Если
свойство какого-либо объекта может представлять результат составного значения
объектов двух конфигураций (например, свойство <span class="Interface">Вводится на основании</span>),
то результат определяется простым объединением или выбирается из загружаемой
конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Если
в конфигурации используется несколько языков и в настройке указан режим
выборочного сравнения по языкам, то для таких объектов производится сравнение и
объединение с учетом указанных в настройке языков.</p>

<p class="MsoNormalCxSpLast">Макеты
объединяются следующим образом: результирующий макет будет состоять из макета
основной и загружаемой конфигураций, разделенных строкой, имеющей желтый фон.
Сначала в итоговом макете следует макет приоритетной конфигурации, а затем –
другой макет через разделитель. Окончательное объединение следует провести вручную
после сравнения.</p>

<p class="Note"><span class="Note">Примечание.</span> В окне <span class="Interface">Объединение
конфигураций</span> свойство <span class="Interface">Тип макета</span> не показывается. При
объединении это свойство объединяется так же, как свойство <span class="Interface">Макет</span>.</p>

<p class="MsoNormal">При
объединении управляемых форм не поддерживается графическое отображение отличий
в окне <span class="Interface">Объединение конфигураций</span>, но возможно отображение
результатов сравнения форм в текстовом виде в отчете о сравнении объектов. При
сравнении форм выполняется сопоставление по следующим правилам:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
тексты модулей сравниваются по именам процедур;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
элементы формы сравниваются по типу элемента и
его имени;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
параметры формы сравниваются по имени;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
команды сравниваются по имени;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
реквизиты сравниваются по именам;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
для командного интерфейса сравнение выполняется
по виду команды (автоматическая или реализованная разработчиком) и имени
команды.</p>

<p class="MsoNormal">Совпадающие
элементы (по именам) в основной форме будут заменены (заменяются свойства, размеры
и расположение), если выбран приоритет загружаемой конфигурации, и оставлены
без изменения, если выбран приоритет основной формы. Некоторые свойства
элементов формы могут быть объединены (например, список выбора, заголовки на разных
языках и т. д.).</p>

<p class="Regularbeforepicture">Режим объединения формы можно задавать как в целом для
всей формы (сама форма и модуль формы) – для обычной и управляемой формы,
так и отдельно для формы и ее модуля – только для управляемой формы, как
показано на <a href="#_ref286844743">рис.591</a>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00598.gif?_=1496848987" WIDTH="761" ALT HEIGHT="539"></p>

<p class="MsoCaption"><a name="_ref286844738"></a><a name="_ref286844743">Рис. </a>591.
Настройка объединения формы</p>

<p class="MsoNormalCxSpFirst">Для
установки единого правила для управляемой формы и ее модуля необходимо
использовать контестное меню у той формы, для которой необходимо установить
правило. В открывшемся контекстном меню следует выбрать необходимый пункт из
подменю <span class="Interface">Режим объединения для подчиненных объектов</span>.</p>

<p class="MsoNormalCxSpMiddle">При
нажатии на картинку шестеренки, расположенной в специальной колонке, можно
открыть окно сравнения (или объединения) модулей (см. <a href="#_ref393707827">здесь</a>). В зависимости от настроек конфигуратора
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref391647782">здесь</a>), для этой операции будет использовано либо
инструмент, встроенный в конфигуратор, либо внешняя программа. Если в данной
колонке расположена картинка шестеренки с зеленой отметкой, то это означает,
что пользователь выполнял настройки объединения в данном модуле. При этом при
нажатии на такую картинку будет открыт редактор системы «1С:Предприятия» для
доработки результата объединения внешней программой (возможности редактора в
данном окне эквиваленты возможностям встроенного редактора при сравнении и
объединении модулей, подробнее см. <a href="#_ref393707827">здесь</a>). Если требуется повторно выполнить настройку
объединения во внешней программе, то для этого следует использовать команду
контекстного меню <span class="Interface">Показать различия в модулях</span>. Если в колонке отображается
картинка шестеренки с восклицательным знаком, это означает, что при выполнении
объединения с помощью внешней программы есть неразрешенные конфликты
объединения (только для обновления конфигурации, находящейся на поддержке).</p>

<p class="MsoNormalCxSpLast">Некоторые
действия, которые можно выполнить в окне сравнения и объединени конфигурации, зависят
от настроек конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref391647782">здесь</a>):</p>

<p class="MsoListBullet">&#9679; 
Команда контекстного меню <span class="Interface">Показать различия в
модулях</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Настройка конфигуратора: Настройка объединения двух конфигураций;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Настройка внешней программы: Объединение двух файлов;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Результаты работы: игнорируется.</p>

<p class="MsoListBullet">&#9679; 
Команда контекстного меню <span class="Interface">Показать различия в модулях без учета структуры</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Настройка конфигуратора: <span class="Interface">Показать различия без
учета структуры</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Настройка внешней программы: <span class="Interface">Сравнение двух файлов</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Результаты работы: игнорируется.</p>

<p class="MsoListBullet">&#9679; 
Команда контекстного меню <span class="Interface">Настройка объединения
модулей</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Настройка конфигуратора: <span class="Interface">Настройка объединения
двух конфигураций</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Настройка внешней программы: <span class="Interface">Объединение двух
файлов</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Результаты работы: используется в качестве
результата объединения.</p>

<p class="MsoNormalCxSpFirst">При вызове команды будет использоваться тот инструмент, который
указан в соответствующей настройке конфигуратора, а если в качестве инструмента
выбрана какая-либо внешняя программа – для выполнения действия будет
использоваться командная строка, заданная в соответствующей настройке внешней
программы. Если для выбранного действия используется встроенный инструмент конфигуратора, то при
выполнении операции сравнения будет недоступно редактирование результата
объединения.</p>

<p class="MsoNormalCxSpMiddle">Для
некоторых объектов (реквизитов объектов) выбор режима объединения может
отсутствовать. Так, например, для реквизита с примитивным типом (например <span class="Term">Число</span>) режим объединения устанавливается
только <span class="Interface">Взять из загружаемой конфигурации</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
некоторых объектов выбор приоритетности также может отсутствовать. Например,
для свойства <span class="Interface">Подсистемы</span> можно выбрать режимы объединения <span class="Interface">Взять из загружаемой
конфигурации</span> и <span class="Interface">Объединить</span>. Если выбран режим <span class="Interface">Объединить</span>, то
происходит простое объединение указанных подсистем двух конфигураций.</p>

<p class="MsoNormalCxSpLast">Правила
объединения предопределенных данных см. <a href="#_ref216240748">здесь</a>.</p>

<a name="_ref217357632"></a><a id="TI000001086" class="bookmark" name="issogl1_29.12.установка_порядка_подчиненных_объектов"><h2>29.12.Установка порядка подчиненных объектов</h2></a>

<p class="MsoNormalCxSpFirst">Для
видов объектов, которые могут иметь неограниченное число подчиненных объектов
(например, подчиненные объекты <span class="Interface">Реквизиты</span>, <span class="Interface">Формы</span>, <span class="Interface">Макеты</span>, <span class="Interface">Табличные части</span>
справочников и документов), в некоторых случаях важен порядок следования объектов
в каждой такой группе.</p>

<p class="MsoNormalCxSpMiddle">Если
в процессе сравнения конфигураций конфигуратор определил соответствие объектов,
входящих в группу, но их порядок в конфигурациях различен, то в колонке <span class="Interface">Режим объединения и
порядок подчиненных объектов</span> можно указать нужный порядок следования
объектов.</p>

<p class="MsoNormalCxSpMiddle">Для
указания порядка следует выбрать любой подчиненный объект и в третьей колонке выбрать
вариант установки порядка: <span class="Interface">Порядок из основной конфигурации</span> или <span class="Interface">Порядок из файла</span>.</p>

<p class="MsoNormalCxSpMiddle">Выбор
порядка действует на все подчиненные объекты данного вида.</p>

<p class="MsoNormalCxSpLast">Если
для выбранного объекта его подчиненные объекты изменены и расположены в другом
порядке, то в третьей колонке можно выбрать только порядок. Режим объединения указывается
в объекте верхнего уровня с помощью контекстного меню. Например, в обеих
конфигурациях для документа <span class="Term">Счет</span>
есть несколько подчиненных объектов типа <span class="Term">Формы</span>. Они изменены, и порядок их следования
также изменен. Для выбора режима объединения следует указать объект более
высокого уровня (<span class="Term">Формы</span>
или <span class="Term">Счет</span>)
и в контекстном меню выбрать нужный режим объединения.</p>

<a id="TI000001087" class="bookmark" name="issogl1_29.13.просмотр_различий"><h2>29.13.Просмотр различий</h2></a>

<p class="MsoNormalCxSpFirst">Перед
объединением конфигураций полезно просмотреть конкретные различия их объектов.</p>

<p class="MsoNormalCxSpMiddle">Это
можно сделать с помощью палитры свойств. Нужно открыть палитру свойств и выбрать
нужный объект основной или загружаемой конфигурации. Для просмотра форм или макетов
их можно открыть. При этом если производится сравнение с обычным файлом
конфигурации, не являющимся поставкой (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 31. поставка и поддержка конфигурации.htm?_=1496848987#_ref217357733">здесь</a>), можно не просто просмотреть данные загружаемой
конфигурации, но и внести в них необходимые исправления. Если исправления
сделаны, то после окончания объединения конфигуратор предложит сохранить
сделанные в загружаемой конфигурации изменения.</p>

<p class="MsoNormalCxSpMiddle">Для
просмотра различий в модулях в контекстном меню объекта нужно выбрать пункт <span class="Interface">Показать различия в
модулях без учета структуры</span>.</p>

<p class="MsoNormalCxSpMiddle">При
выборе этого пункта открывается окно <span class="Interface">Различие между</span>.
Если сравниваемые тексты большие, перед открытием окна может пройти несколько
секунд. Подробнее о просмотре различий см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref434245258">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle">Для
выборочного сравнения модулей предназначен режим <span class="Interface">Объединение модулей</span>
(см. ниже).</p>

<p class="MsoNormalCxSpLast">Для
просмотра различий в макетах нужно выбрать в контекстном меню макета пункт <span class="Interface">Показать различия в
макетах</span>.</p>

<p class="Regularbeforepicture">На
экран выводится окно сравнения.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00599.gif?_=1496848987" WIDTH="684" ALT HEIGHT="239"></p>

<p class="MsoCaption">Рис.
592.
Объединение макетов</p>

<p class="MsoNormal">Сравнение
табличных документов производится по ячейкам. Если ячейки различны (любые
свойства, кроме свойства <span class="Interface">Параметр расшифровки</span>), то различие показывается цветом.
Пояснение цвета показывается внизу окна сравнения.</p>

<a name="_ref286844826"></a><a name="_ref393710367"></a><a name="_ref393710366"></a><a name="_ref393707827"></a><a id="TI000001088" class="bookmark" name="issogl1_29.14.сравнение_и_объединение_модулей"><h2>29.14.Сравнение и объединение модулей</h2></a>

<p class="MsoNormalCxSpFirst">При
объединении конфигураций можно настроить процесс объединения процедур и функций
любого модуля: модуля приложения, общих модулей, модулей объектов, модулей форм.</p>

<p class="MsoNormalCxSpLast">Для
этого в окне <span class="Interface">Объединение конфигурации</span> нужно выбрать строку,
соответствующую объединяемым модулям, и в специальной колонке щелкнуть мышью по
символу шестеренки. Если в настройках конфигуратора (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref391647782">здесь</a>) для выполнения операции сравнения модулей выбрана
внешняя программа, то она будет запущена при щелчке мышью по картинке
шестеренки. Правила работы в этой случае определяются этой внешней программой и
с ними следует знакомиться в документации к этой внешней программе.</p>

<p class="Regularbeforepicture">На
экран выводится окно <span class="Interface">Настройка объединения модулей</span>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00600.gif?_=1496848987" WIDTH="725" ALT HEIGHT="608"></p>

<p class="MsoCaption">Рис.
593. Настройка
объединения модулей</p>

<p class="MsoNormalCxSpFirst">Верхняя
часть окна содержит табличное поле, смысл которого соответствует табличному
полю окна <span class="Interface">Объединение конфигураций</span> с тем лишь отличием, что
содержимое колонок формируется из наименований частей модуля: раздел определения
переменных, раздел процедур и функций и раздел основной программы (далее
объекты). Любой из этих разделов может отсутствовать. В нижней части формы
отображается результат объединения по текущим правилам.</p>

<p class="MsoNormalCxSpMiddle">Состав
табличного поля соответствует установленному фильтру (реквизит <span class="Interface">Фильтр</span>).</p>

<p class="MsoNormalCxSpMiddle">В
первой колонке по различающимся объектам следует установить пометки для тех
объектов, по которым требуется произвести объединение. Для помеченных объектов
можно установить режим объединения.</p>

<p class="MsoNormalCxSpMiddle">Сравнение
производится по каждому разделу отдельно. Сравниваются только те объекты,
которым установлено соответствие. Первоначально производится автоматическая установка
соответствия по именам.</p>

<p class="MsoNormalCxSpMiddle">Любое
установленное соответствие процедур и функций можно отменить. Для этого нужно
выбрать в списке строку с объектом и в контекстном меню выбрать пункт <span class="Interface">Отменить соответствие
объектов</span>.</p>

<p class="MsoNormalCxSpLast">Если
в сравниваемых модулях имена объектов были изменены, но суть их осталась
прежней и требуется их сравнить, то следует произвести ручную установку соответствия
объектов. Для этого следует выбрать любой из объектов, для которого будет произведена
установка, и в контекстном меню выбрать пункт <span class="Interface">Установить
соответствие объектов</span>.</p>

<p class="Regularbeforepicture">На <a href="#_ref393709883">рис.594</a> видно, что метод <span class="Term">ДобавитьХарактеристику()</span> имеет разное
содержание в основной конфигурации и в конфигурации из файла. В нижней части
формы отображается результат объединения:</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00601.gif?_=1496848987" WIDTH="725" ALT HEIGHT="608"></p>

<p class="MsoCaption"><a name="_ref393709883">Рис. </a>594. Объединение
модулей</p>

<p class="MsoNormalCxSpFirst">В
нижней части окна показывается текст выбранного метода, который получится в
результате объединения. Допускается выполнять редактирование получившегося
текста непосредственно в процессе настройки объединения. В основную
конфигурацию будет загружен текст метода с учетом изменений, внесенных в
процессе настройки.</p>

<p class="MsoNormalCxSpLast">При
работе с окном объединения модулей доступны некоторые вспомогательные
возможности, которые облегчают работу:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для каждого модуля (основная конфигурация,
конфигурация из файла и результат объединения) отображаются номера строк.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Нажатие левой кнопки мыши, в том случае, если
курсор указывает на колонку с номером строки, приводит к тому, что система
делает попытку отобразить указанную строку в каждом из трех модулей.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
В редакторе текста (с результатом объединения)
доступна контекстная подсказка во время редактирования. Контекст образуется
основной конфигурацией (до объединения) и текущий (объединенный) модуль.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В командной панели редактора текста с
результатом объединения доступны некоторые часто используемые команды, такие
как работа с блоками, изменение отступа, установка и снятие признака
комментария и т. д.</p>

<p class="MsoNormalCxSpFirst">Установка
порядка следования объектов модуля определяется в соответствии со значением
реквизита <span class="Interface">Порядок</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
просмотра результата сравнения модулей без учета структуры нужно щелкнуть пункт
<span class="Interface">Действия – Показать различия в модулях без учета структуры</span>.
На экран будет выведено окно <span class="Interface">Различия между</span>. Подробнее о
просмотре различий см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 33. сервисные возможности.htm?_=1496848987#_ref14677654">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle">Для
просмотра предварительного результата объединения модулей следует выбрать пункт
<span class="Interface">Действия – Показать результат объединения</span>.</p>

<p class="MsoNormalCxSpMiddle">После
установки соответствия, определения порядка и режима объединения для сохранения
настройки объединения модулей следует нажать кнопку <span class="Interface">ОК</span>. Для
отказа – кнопку <span class="Interface">Отмена</span>.</p>

<p class="MsoNormalCxSpMiddle">После
завершения процедуры объединения модулей в колонке <span class="Interface">Режим объединения</span>
и порядок подчиненных объектов окна <span class="Interface">Объединение
конфигураций</span> для модуля появится запись <span class="Interface">Индивидуальная
настройка</span>. Если в списке режимов объединения выбрать иной режим, то произведенная
настройка теряется.</p>

<p class="MsoNormalCxSpLast">Собственно
объединение модулей по выполненной настройке производится только для всей
конфигурации.</p>

<a id="TI000001089" class="bookmark" name="issogl1_29.15.отбор_объектов_и_запуск_процесса_объединения"><h2>29.15.Отбор объектов и запуск процесса объединения</h2></a>

<p class="MsoNormalCxSpFirst">Список
объединяемых объектов формируется путем установки пометки слева от пиктограммы
объекта основной конфигурации. Установка или снятие пометки для объекта
верхнего уровня производит установку или снятие пометки для всех подчиненных
объектов. Установленная пометка показывает, что данные объекты двух
конфигураций будут объединяться.</p>

<p class="MsoNormalCxSpMiddle">Пометка
объекта принимает состояние <span class="Interface">Неопределено</span>, если для части
подчиненных объектов пометка установлена, а для другой части снята.</p>

<p class="MsoNormalCxSpMiddle">При
открытии окна <span class="Interface">Объединение конфигурации</span> конфигуратор включает в список
объединяемых объектов все допустимые объекты.</p>

<p class="MsoNormalCxSpLast">При
нажатии кнопки <span class="Interface">Выполнить</span> конфигуратор производит анализ данных
конфигураций по установленным пометкам. Если не обнаруживается причин,
препятствующих объединению, производится объединение. Объединенная конфигурация
сохраняется автоматически.</p>

<p class="Regularbeforepicture">Если
производится выборочное объединение и выбраны такие объекты, которые ссылаются
на другие объекты, не включенные в список объединяемых, то конфигуратор выводит
список неразрешимых ссылок. Примером неразрешимой ссылки может служить выбор
объекта, реквизит которого представляет ссылку на другой объект загружаемой
конфигурации, не включенный в список объединяемых.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00602.gif?_=1496848987" WIDTH="586" ALT HEIGHT="458"></p>

<p class="MsoCaption">Рис.
595.
Неразрешимые ссылки</p>

<p class="MsoNormalCxSpFirst">Окно
содержит два табличных поля. Верхнее содержит иерархический список всех
найденных объектов, связанных с отмеченными объектами окна <span class="Interface">Объединение
конфигурации</span>. Нижнее – иерархический список объектов, использующих
объект, указанный в верхнем списке.</p>

<p class="MsoNormalCxSpMiddle">Данное
окно позволяет изучить связи выбранных объектов и принять решение о
необходимости включения этих объектов в список объединяемых.</p>

<p class="MsoNormalCxSpMiddle">По
кнопке <span class="Interface">Пометить все для объединения</span> происходит установка
пометок для всех объектов, необходимых для полноценного объединения. При нажатии
кнопки данное окно закрывается, а в окне <span class="Interface">Объединение
конфигурации</span> устанавливаются пометки для всех необходимых объектов.</p>

<p class="MsoNormalCxSpLast">По
кнопке <span class="Interface">Продолжить</span> происходит объединение только помеченных
объектов без учета наличия неразрешимых ссылок. В этом случае ответственность
за результат объединения возлагается на специалиста, выполняющего объединение.</p>

<a id="TI000001090" class="bookmark" name="issogl1_29.16.загрузка_конфигурации_из_файла"><h2>29.16.Загрузка конфигурации из файла</h2></a>

<p class="MsoNormalCxSpFirst">Если
в процессе эксплуатации системы «1С:Предприятие» требуется полностью заменить
конфигурацию, то для обновления нужно воспользоваться режимом загрузки конфигурации
из файла.</p>

<p class="MsoNormalCxSpMiddle">Для
загрузки изменений необходимо выбрать пункт <span class="Interface">Конфигурация – Загрузить
конфигурацию из файла</span> главного меню программы.</p>

<p class="MsoNormalCxSpMiddle">На
экран будет выдан стандартный диалог открытия файла, при помощи которого
следует найти и открыть новый файл конфигурации (по умолчанию <span class="Interface">1Cv8.cf</span>).</p>

<p class="MsoNormalCxSpMiddle">Если
текущая конфигурация не пустая, то на экран выводится вопрос: <span class="Interface">Конфигурация не
пустая. При загрузке измененной конфигурации она будет потеряна. Продолжить?</span>
Если нажать кнопку <span class="Interface">Да</span>, то начнется процесс анализа различий старой и новой
структур конфигурации и выполнение необходимых преобразований. На экран выдается
вопрос о необходимости проведения обновления конфигурации базы данных.</p>

<p class="MsoNormalCxSpMiddle">Режим загрузки конфигурации из файла также используется для
создания новой конфигурации, основу которой составляет загружаемая
конфигурация.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>