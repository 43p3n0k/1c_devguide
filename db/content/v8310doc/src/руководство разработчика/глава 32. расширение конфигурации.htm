<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 32. &#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1077; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1080;</title>
		<LINK REL="stylesheet" href="/db/content/v8310doc/src/руководство разработчика/style.css?_=1496848987">
		<script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><script charset="windows-1251" src="/db/content/v8310doc/src/руководство разработчика/zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 32. расширение конфигурации.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script charset="windows-1251" type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script charset="windows-1251" type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref405464478"></a><a id="TI000001513" class="bookmark"><h1>Глава 32.  Расширение конфигурации</h1></a>

<a name="_ref237783608"></a><a name="_ref401844175"></a><a name="_ref427770581"></a><a name="_ref427770580"></a><a id="TI000001516" class="bookmark" name="issogl1_32.1_общая_информация"><h2>32.1. Общая информация</h2></a>

<p class="MsoNormalCxSpFirst">Механизм
расширения конфигурации – это специальный механизм, предназначенный для
доработки расширяемой конфигурации без изменения этой конфигурации (в том числе
без снятия с поддержки).</p>

<p class="MsoNormalCxSpLast">При
рассмотрении механизма расширения конфигурации будут использоваться следующие
термины:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Расширяемая конфигурация</span> –
основная конфигурация информационной базы, для которой применяется расширение
или для которой расширение разрабатывается.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Расширение конфигурации</span> –
набор объектов конфигурации, подключаемых к расширяемой конфигурации и
содержащий набор объектов, добавляемых к расширяемой конфигурации. Расширение может
включать в себя как объекты расширяемой конфигурации, так и объекты, которые
отсутствуют в расширяемой конфигурации.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Собственный объект</span> –
самодостаточный объект конфигурации, который может находиться как в расширяемой
конфигурации, так и в расширении (отчет, обработка или подсистема).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Заимствованный объект</span> –
собственный объект, добавленный в расширение конфигурации.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Расширяемый объект</span> –
собственный объект, для которого в заимствованном объекте изменены какие-либо
параметры (свойства, формы и т. д.).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Расширяющий объект</span> –
это заимствованный объект, в который внесены изменения относительно
расширяемого объекта. Наличие в заимствованном объекте только контролируемых
свойств не делает заимствованный объект расширяющим.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Результирующий объект</span> –
это собственный объект плюс объединение всех расширяющих объектов (если
расширений несколько). Если для собственного объекта нет расширяющих объектов –
он становится результирующим «без изменений». Т.е. в конфигурации, с которой
работает пользователь – все объекты являются результирующими, вне
зависимости от наличия и количества установленных расширений.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Расширяющее свойство</span> –
свойство заимствованного объекта, которое изменяет одноименное свойство
расширяемого объекта.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Контролируемое свойство</span> –
свойство заимствованного объекта, значение которого проверяется при подключении
расширения к расширяемой конфигурации. Если при подключении расширения (в
режиме 1С:Предприятие) значение контролируемого свойства в расширении не
совпадет со значением этого же свойства в расширяемой конфигурации, расширение
не будет подключено.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Модифицируемое свойство</span> –
свойство заимствованного объекта, значение которого в результирующем объекте будет
получаться из расширения.</p>

<p class="MsoNormalCxSpFirst">Свойство
заимствованного объекта не может быть одновременно контролируемым и
модифицируемым.</p>

<p class="MsoNormalCxSpMiddle">Основное
назначение расширения конфигурации – это доработка прикладного решения при
внедрении (или в «облаке») под нужды клиента. При этом дорабатываемую
конфигурацию не надо снимать с поддержки. В результате сохраняется простота
обновления типового прикладного решения, стоящего на поддержке, с
необходимостью выполнять доработки. При разработке расширения следует понимать
некоторые особенности функционирования расширения конфигурации. Так,
расширяемая конфигурация в любой момент может быть изменена, например, в
результате обновления. При этом разработчик расширения не может никак повлиять
на возможность или невозможность обновления. Также следует учитывать тот факт,
что в системе могут функционировать более одного расширения и автор каждого
расширения (в общем случае) не знает, как функционирует другое расширение.</p>

<p class="MsoNormalCxSpLast">Каждое
расширение имеет свое назначение (свойство расширения <span class="Interface">Назначение расширения
конфигурации</span>). Назначение расширения конфигурации описывает, для какой
цели создается это расширение. Расширение может иметь одно из следующих назначений:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Исправление</span> – такое
расширение предназначено для исправления ошибок в прикладном решении. В таких
расширениях предполагается использование потенциально «опасных» возможностей
расширений, например, применение расширения метода с помощью аннотации <span class="Term">Вместо</span>. Исправления предназначено для
определенной версии прикладного решения. При выходе следующей версии этого
решения автор расширения должен проводить анализ применимости созданных
расширений в новой версии. Допускается наличие нескольких расширений с таким
назначением, но необходимо обеспечить отсутствие конфликтов между такими расширениями,
например, несколько таких расширений не должны расширять один и тот же метод с
разными целями. Такие расширения могут не учитывать наличия расширений другого
назначения.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Адаптация</span> – такое
расширение предназначено для адаптации прикладного решения под условия
конкретного клиента. В таких расширениях рекомендуется не использовать
потенциально «опасных» возможностей, т. е. тех возможностей, которые
могут привести к конфликту расширений при их совместной работе или которые
зависят от порядка подключения расширений. Тем не менее, допускается аккуратное
использование «опасных» возможностей, при условии, что автор расширения берет
на себя полную ответственность за обеспечение корректного функционирования
результирующей конфигурации в новых версиях прикладных решений и с учетом
расширений, имеющих назначение <span class="Interface">Исправление</span>. Предполагается, что в
каждый момент времени в информационной базе существует минимальное количество
таких расширений. Если в одно расширение невозможно включить весь набор
изменений, то рекомендуется расширения с назначением <span class="Interface">Адаптация</span>
разбивать по максимально крупным блокам расширяемого прикладного решения.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Дополнение</span> – такое
расширение предназначено для реализации новых возможностей прикладных решений,
которые минимально привязаны к конретной версии прикладного решения. Примером
такого расширения может служить создание нового набора отчетов, который
отсутствует в расширяемом прикладном решении. Предполагается, что такие
расширения должны корректно работать в случае обновления расширяемого
прикладного решения. При этом расширение с назначением <span class="Interface">Дополнение</span> не
должно учитывать в своей работе возможное наличие расширений с другим
назначением. Предполагается, что таких расширений может быть произвольное
количество.</p>

<p class="MsoNormal">Расширение
создается в конфигураторе, хранится в информационной базе и может быть сохранено
в файл. Для добавления (подключения) расширения, сохраненного в файл, в
прикладное решение конкретного клиента нет необходимости использовать конфигуратор.
Подключить расширение можно с помощью специальной стандартной функции (<span class="Interface">Все функции – Стандартные –
Управление расширениями конфигурации</span>). Подключить расширение также можно
с помощью инструментария прикладного решения, которое использует программный
интерфейс, предоставляемый платформой. Подключение расширения (интерактивно или
из встроенного языка) возможно в следующих случаях:</p>

<p class="MsoListNumberCxSpFirst">1.  в
небезопасном режиме (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref378761017">здесь</a>);</p>

<p class="MsoListNumberCxSpLast">2.  в
том случае, когда профиль безопасности (подробнее см. <a href="/db/v8310doc/bookmark/cs/TI000000053" target="_top">здесь</a>), под
управлением которого работает сеанс, разрешает доступ к подключаемому
расширению.</p>

<p class="MsoNormal">В
качестве расширяемых объектов могут выступать:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Управляемые формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Роли;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Подсистемы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Настройки начальной страницы (рабочего стола)
прикладного решения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Табличные документы (кроме сводных таблиц);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Общие модули;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Модули объектов для всех типов объектов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Модули менеджеров для всех типов объектов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Модуль сеанса;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Модуль управляемого приложения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Модуль внешнего соединения;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Модули команд.</p>

<p class="MsoNormal">В
качестве собственных объектов расширения могут выступать:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Подсистемы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Обработки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Отчеты;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Реквизиты, табличные части и реквизиты табличных
частей в заимствованных обработках и отчетах;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Роли;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
XDTO-пакеты;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Web-сервисы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
HTTP-сервисы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
WS-ссылки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Общие макеты;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Общие команды;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Общие модули (кроме глобальных серверных и привилегированных
общих модулей);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Группы команд;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Общие картинки;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Формы, макеты и команды заимствованных объектов:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Планов обмена;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Критерев отбора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Хранилищ настроек;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Справочников;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Документов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Журналов документов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Перечислений;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Отчетов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Обработок;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Регистров сведений;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Регистров накопления;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Регистров бухгалтерии;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Регистров расчета;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Планов видов характеристик;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Планов счетов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Планов видов расчета;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Бизнес-процессов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Задач;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Таблиц внешних источников данных;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Кубов внешних источников данных;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Таблиц измерений внешних источников данных.</p>

<p class="MsoNormal">Среди
контролируемых свойств следует особо выделить:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Состав плана обмена;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Предопределенные элементы для справочников,
планов видов характеристик, планов счетов и планов видов расчетов.</p>

<p class="MsoNormal">В
базовых версиях прикладных решений работа с расширениями не поддерживается.</p>

<a name="_ref405816735"></a><a name="_ref405466651"></a><a name="_ref405466314"></a><a id="TI000001517" class="bookmark" name="issogl1_32.2_управление_расширениями_в_режиме_конфигуратора"><h2>32.2. Управление расширениями в режиме Конфигуратора</h2></a>

<a id="TI000001518" class="bookmark" name="issogl2_32.2.1.1_общая_информация"><h3>32.2.1.1. Общая информация</h3></a>

<p class="Regularbeforepicture">Для
управления расширениями в конфигураторе предназначен диалог <span class="Interface">Расширения
конфигурации</span>. Доступ к этому диалогу осуществляется через меню <span class="Interface">Конфигурация – Расширения
конфигурации</span>. С помощью данного диалога можно создать новое расширение,
удалить существующее, открыть конфигурацию расширения, сохранить расширение в
файл, а также выполнять другие операции.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00667.gif?_=1496848987" WIDTH="541" ALT HEIGHT="138"></p>

<p class="MsoCaption">Рис.
661.
Управление расширениями в конфигураторе</p>

<p class="MsoNormal">В
общем случае получить доступ к командам работы с расширением конфигурации можно
следующими способами:</p>

<p class="MsoListNumberCxSpFirst">1.  С
помощью команд командная панель панели окна <span class="Interface">Расширения
конфигурации</span>.</p>

<p class="MsoListNumberCxSpMiddle">2.  С
помощью контекстного меню выбранного расширения в окне <span class="Interface">Расширения
конфигурации</span>.</p>

<p class="MsoListNumberCxSpLast">3.  С
помощью меню <span class="Interface">Действия – Конфигурация</span> окна с расширением
конфигурации.</p>

<p class="MsoNormal">Команды,
представленные в этих меню, по смыслу совпадают с командами, применяемыми для
основной конфигурации. Подробное описание этих команд см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 2. работа с конфигурацией.htm?_=1496848987#_ref405474136">здесь</a>.</p>

<a id="TI000001519" class="bookmark" name="issogl2_32.2.1.2_создание_расширения"><h3>32.2.1.2. Создание расширения</h3></a>

<p class="Regularbeforepicture">При
создании расширения необходимо указать имя расширения, его синоним и префикс
имен методов и объектов, создаваемых в расширении. Этот префикс будет
автоматически добавляться к новым отчетам, обработкам и подсистемам, которые
созданы в расширении, а также к обработчикам событий, которые создаются в
расширяющих формах. В дальнейшем этот префикс можно посмотреть в свойстве
расширения конфигурации <span class="Interface">Префикс имен</span>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00668.gif?_=1496848987" WIDTH="342" ALT HEIGHT="138"></p>

<p class="MsoCaption">Рис.
662.
Новое расширение</p>

<p class="MsoNormal">При
создании нового расширения из расширяемой конфигурации автоматически копируются
следующие свойства: <span class="Interface">Основной режим запуска</span>, <span class="Interface">Назначение
использования</span>, <span class="Interface">Основной язык</span>, <span class="Interface">Режим совместимости
интерфейса</span> и <span class="Interface">Режим совместимости</span>. Эти же свойства помечаются как
контролируемые.</p>

<a id="TI000001520" class="bookmark" name="issogl2_32.2.1.3_сохранение_расширения_в_файл"><h3>32.2.1.3. Сохранение расширения в файл</h3></a>

<p class="MsoNormalCxSpFirst">Для
установки расширения в какое-либо прикладное решение, необходим файл с
расширением конфигурации. Для выполнения этого действия следует выбрать в
списке расширений конфигуратора нужное расширение и использовать команду <span class="Interface">Конфигурация – Сохранить
конфигурацию в файл</span> командной панели диалога <span class="Interface">Расширения
конфигурации</span> или контекстного меню этого окна.</p>

<p class="MsoNormalCxSpLast">В
результате выполнения этого действия будет сформирован файл с расширением <span class="Interface">.cfe</span>. Этот файл
будет необходимо подключить к прикладному решению. Подробности работы со
стандартной функцией управления расширениями можно получить <a href="/db/v8310doc/bookmark/adm/TI000000537" target="_top">в
книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<a name="_ref436927039"></a><a id="TI000001521" class="bookmark" name="issogl1_32.3_управление_расширениями_в_режиме_1с_предприятие"><h2>32.3. Управление расширениями в режиме 1С:Предприятие</h2></a>

<p class="MsoNormal">Для
управления расширениями в режиме 1С:Предприятия предназначена стандартная
функция <span class="Interface">Управление расширениями конфигурации</span>. Подробности работы
с этой стандартной функцией <a href="/db/v8310doc/bookmark/adm/TI000000537" target="_top">можно получить в книге 1С:Предприятие 8.3. &quot;Руководство администратора&quot;</a>.</p>

<a id="TI000001522" class="bookmark" name="issogl1_32.4_работа_с_расширением"><h2>32.4. Работа с расширением</h2></a>

<a name="_ref405215848"></a><a name="_ref435545708"></a><a name="_ref435545707"></a><a id="TI000001523" class="bookmark" name="issogl2_32.4.1.1_создание_заимствованного_объекта"><h3>32.4.1.1. Создание заимствованного объекта</h3></a>

<p class="MsoNormal">Для
того, чтобы выполнить заимствование объекта, необходимо воспользоваться командой
<span class="Interface">Добавить в расширение</span> контекстного меню объекта
конфигурации. После выполнения данной команды в расширении создается
заимствованный объект. При создании заимствованного объекта заимствуются также
все родительские объекты, если они еще не заимствованы в данном расширении.
Подчиненные объекты не заимствуются. Поясним поведение на примерах.</p>

<p class="Regularbeforepicture">Предположим,
что в расширяемой конфигурации существует справочник <span class="Term">Товары</span>, который представлен некоторой
структурой, которая представлена на <a href="#_ref401676317">рис.
663</a>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00669.gif?_=1496848987" WIDTH="332" ALT HEIGHT="399"></p>

<p class="MsoCaption"><a name="_ref401676317">Рис. </a>663. Структура
справочника Товары</p>

<p class="Regularbeforepicture">Если
добавить в расширение непосредственно сам справочник, то никакие подчиненные
объекты добавлены не будут, что видно на <a href="#_ref401676742">рис.
664</a>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00670.gif?_=1496848987" WIDTH="495" ALT HEIGHT="462"></p>

<p class="MsoCaption"><a name="_ref401676742">Рис. </a>664. После
добавления объекта</p>

<p class="Regularbeforepicture">Если
теперь добавить форму справочника <span class="Term">Товары</span>,
например форму элемента, то сам справочник уже заимствован и будет заимствована
форма и все объекты конфигурации, которые образуют данные, отображаемые на
форме. Заимствование выполняется в объеме, достаточном для функционирования
редактора формы.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00671.gif?_=1496848987" WIDTH="800" ALT HEIGHT="496"></p>

<p class="MsoCaption"><a name="_ref401833653">Рис. </a>665. После
добавления объекта с родителями</p>

<p class="MsoNormal">На <a href="#_ref401833653">рис.
665</a> видно, что кроме добавляемой формы <span class="Term">ФормаЭлемента</span> были добавлены также:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Все реквизиты, которые присутствуют на форме;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Все объекты, которые образуют типы реквизитов,
присутствующих на форме.</p>

<p class="MsoNormal">При
заимствовании составного типа поведение зависит от характеристик такого типа:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если в составной тип может входить тип <span class="Term">Произвольный</span>, то любой составной тип для
такого реквизита будет заимствован как составной тип, состоящий из
единственного типа <span class="Term">Произвольный</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если в составной тип не может входить тип <span class="Term">Произвольный</span>, то такой составной тип будет
заимствован по следующим правилам:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если составной тип включает в свой состав только
примитивные типы, то будут заимствованы все типы, образующие составной тип.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если в составной тип входит хотя бы один
ссылочный тип (<span class="Term">СправочникСсылка</span>,
<span class="Term">ДокументСсылка</span>
и т. д.), то такой тип будет заимствован как простой тип <span class="Term">ЛюбаяСсылка</span>.</p>

<p class="MsoNormal">При
заимствовании параметрической команды не происходит заимствование параметра
команды и, как следствие, объекта конфигурации, определяющий тип параметра. В
случае необходимости следует самостоятельно выполнить заимствование объекта (или
объектов, если тип составной) конфигурации, определяющего тип параметра команды
и затем указать этот объект в качестве типа параметра заимствованной команды.</p>

<a name="_ref436910793"></a><a id="TI000001524" class="bookmark" name="issogl2_32.4.1.2_работа_с_заимствованным_объектом"><h3>32.4.1.2. Работа с заимствованным объектом</h3></a>

<p class="Regularbeforepicture">Работа
с заимствованным объектом имеет некоторые особенности.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00672.gif?_=1496848987" WIDTH="615" ALT HEIGHT="457"></p>

<p class="MsoCaption"><a name="_ref401843667">Рис. </a>666. Свойства
заимствованного объекта</p>

<p class="MsoNormalCxSpFirst">Во-первых,
у заимствованного объекта присутствуют только те свойства, которые могут быть
установлены контролируемыми или модифицируемыми. Эта возможность (установка
контролируемых или модифицируемых свойств, подробнее см. <a href="#_ref401844175">здесь</a>) является второй особенностью панели свойств
заимствованного объекта. Для указания контролируемого свойства, следует установить
флажок перед именем свойства. На <a href="#_ref401843667">рис.
666</a> видно, что для справочника <span class="Term">Товары</span> указаны следующие контролируемые
свойства: <span class="Interface">Иерархический</span>, <span class="Interface">Длина наименования</span>,
<span class="Interface">Тип кода</span> и <span class="Interface">Допустимая длина кода</span>. Модифицируемое
свойство отмечается флажком другого вида в панели свойств. На <a href="#_ref401843667">рис.
666</a> видно, что свойство <span class="Interface">Основная форма</span>
отмечено как модифицируемое.</p>

<p class="MsoNormalCxSpMiddle">Изменение
свойств заимствованного объекта следует делать осторожно. Если какое-либо
свойство указано в качестве контролируемого, то расширение не будет подключено
в том случае, если значение этого свойства в расширяемой конфигурации отличается.
Также следует помнить, что <span class="Interface">Имя</span> объекта метаданных всегда является контролируемым
реквизитом. Если в расширяемой конфигурации, на момент создания расширения,
справочник имел имя <span class="Term">Товары</span>,
а потом был переименован в <span class="Term">Номенклатура</span>,
то расширение перестанет работать до тех пор, пока для заимствованного справочника
в расширении также не будет установлено имя <span class="Term">Номенклатура</span>. То же самое верно для значений
других контролируемых свойств.</p>

<p class="MsoNormalCxSpMiddle">Если
свойство является модифицируемым, то соответствующее свойство в результирующем
объекте будет получено из расширения. Если в информационной базе (или области
данных) подключено несколько расширений – модифицируемое свойство получит
значение из расширения, указанного последним в списке расширений
(см. <a href="#_ref436927039">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Если
свойство отмечено как модифицируемое, но значение свойства не указано, то
поведение системы аналогично поведению системы с неуказанным значением свойства
в обычной конфигурации (без расширений). Так, например, если в качестве модифицируемого
указано свойство конфигурации <span class="Interface">Основная форма отчета</span>, а собственно
форма не указана, то в качестве основной формы отчета будет выступать форма,
автоматически сгенерированная системой.</p>

<a id="TI000001525" class="bookmark" name="issogl2_32.4.1.3_создание_собственного_объекта"><h3>32.4.1.3. Создание собственного объекта</h3></a>

<p class="MsoNormal">В
расширении можно не только создавать заимствованные объекты, но и собственные.
Собственными могут быть следующие объекты:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
отчет,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
обработка,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
подсистема,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
общий макет,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
общая команда,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
группа команд,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
общая картинка,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
общий модуль.</p>

<p class="MsoNormal">Также
имеется возможность создания собственных форм, макетов и команд в следующих
заимствованных объектах конфигурации:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Планы обмена;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Критерии отбора;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Хранилища настроек;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Справочники;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Документы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Журналы документов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Перечисления;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Отчеты;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Обработки;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры бухгалтерии;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры накопления;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры расчета;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Регистры сведений;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы видов характеристик;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы счетов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Планы видов расчетов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Бизнес-процессы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Задачи;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Внешние источники данных:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Таблицы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Кубы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Таблицы измерений.</p>

<p class="MsoNormal">Создание
и редактирование этих объектов ничем не отличается от аналогичных действий в
расширяемой конфигурации. Контроль уникальности имен собственных объектов выполняется:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При подключении расширения – среди имен
расширяемой конфигурации и всех расширений;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При разработке расширения – среди имен
расширяемой конфигурации и того расширения, в котором создается собственный
объект.</p>

<p class="MsoNormalCxSpFirst">Если
в расширяемой конфигурации, например, существует обработка <span class="Term">ПоискВДанных</span>, то ни в одном расширении не
может существовать одноименной обработки.</p>

<p class="MsoNormalCxSpLast">При
создании собственного объекта, этот объект получает префикс, который задается
при создании расширения.</p>

<a id="TI000001526" class="bookmark" name="issogl2_32.4.1.4_блокировка_расширений"><h3>32.4.1.4. Блокировка расширений</h3></a>

<p class="MsoNormal">В
связи с тем, что список расширений является единым и для доступа из
конфигуратора и для доступа из «1С:Предприятия», система не позволяет выполнять
взаимоисключающие действия. Другими словами, если в Конфигураторе открыто окно
с расширением, то его невозможно удалить из списка расширений в режиме
«1С:Предприятия». Расширение, во время записи в информационную базу в режиме
«1С:Предприятия», в конфигураторе является недоступным для любых операций с
ним.</p>

<a id="TI000001527" class="bookmark" name="issogl1_32.5_объекты_расширения"><h2>32.5. Объекты расширения</h2></a>

<a name="_ref440302405"></a><a name="_ref441226337"></a><a name="_ref441226336"></a><a id="TI000001781" class="bookmark" name="issogl2_32.5.1_свойства_расширения"><h3>32.5.1. Свойства расширения</h3></a>

<p class="MsoNormal">Свойство
<span class="Interface">Режим совместимости расширения конфигурации</span> по своему
назначению аналогично свойству <span class="Interface">Режим совместимости</span> расширяемой
конфигурации (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref370288523">здесь</a>). Данное свойство управляет возможностями, которые
предоставляет система в расширении конфигурации. Если при редактировании
расширения используется какая-либо возможность, которая несовместима с установленным
значением свойства <span class="Interface">Режим совместимости расширения конфигурации</span>, то
сохранение конфигурации информационной базы будет невозможно, а при попытке
выполнить эту операцию – будет выдано диагностическое сообщение с объяснением
причины невозможности выполнения операции. Особенности работы системы в режиме
совместимости с какой-либо версией см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 7. особенности поведения системы в различных режимах.htm?_=1496848987#_ref440302996">здесь</a>.</p>

<a name="_ref449093131"></a><a name="_ref451869334"></a><a name="_ref451869333"></a><a id="TI000001840" class="bookmark" name="issogl2_32.5.2_программные_модули"><h3>32.5.2. Программные модули</h3></a>

<a id="TI000001841" class="bookmark" name="issogl3_32.5.2.1_общая_информация"><h4>32.5.2.1. Общая информация</h4></a>

<p class="MsoNormalCxSpFirst">Система
позволяет расширить практически любой программный модуль, относящийся к
управляемому приложению. Невозможно расширять глобальные серверные модули. Также
следует помнить, что расширение привилегированного общего модуля будет
выполняться в непривилегированном режиме (если иное не разрешено профилем
безопасности). Кроме того, предоставляется возможность создавать собственные
общие модули, которые не могут быть привилегированными и глобальными серверными.
Работа с собственным общим модулем в расширении ничем не отличается от работы с
общим модулем обычной конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Работа
с расширенным программным модулем имеет существенные особенности, которые будут
рассмотрены в данном разделе.</p>

<p class="MsoNormalCxSpMiddle">При
разработке расширяющего модуля следует учитывать, что этот модуль будет
находиться в одном пространстве имен с расширяемым модулем. В связи с этим, из
расширяющего модуля имеется возможность использовать расширяемый контекст (переменные
и методы) напрямую. Также следует помнить, что созданные в расширении экспортные
методы и переменные автоматически попадают в публичный контекст расширяемого
модуля.</p>

<p class="MsoNormalCxSpLast">В
расширяющем модуле имеется возможность:</p>

<p class="MsoListNumberCxSpFirst">1.  Создавать
собственные методы и переменные (если это допускает расширяемый модуль).</p>

<p class="MsoListNumberCxSpMiddle">2.  Назначать
собственные обработчики на события, которые не обрабатываются в расширяемой
конфигурации.</p>

<p class="MsoListNumberCxSpLast">3.  Перехватывать
любой метод расширяемого модуля (в том числе и методы обработчиков событий), при
этом имеется возможность:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
полностью заменить оригинальный метод
собственным;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
создать методы, которые будут вызваны перед или
после расширяемого метода.</p>

<p class="MsoNormalCxSpFirst">Создание
собственного метода или переменной в расширяющем модуле ничем не отличается от
создания метода или переменной в расширяемой конфигурации, при работе без
расширений. Однако при создании собственных методов или переменных рекомендуется
предварять их имена префиксом, который позволит однозначно идентифицировать
принадлежность метода или переменной тому или иному расширению, а также
избежать конфликта имен с расширяемой конфигурацией.</p>

<p class="MsoNormalCxSpMiddle">Перехват
методов расширяемой конфигурации (включая назначение обработчиков) реализуется
с помощью специального механизма аннотаций (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 4. встроенный язык.htm?_=1496848987#_ref449105857">здесь</a>). Всего имеется три различных возможности перехвата
вызова метода, которые позволяет реализовать практически любую схему исполнения
расширяемого и расширяющего программного кода.</p>

<p class="MsoNormalCxSpLast">В
общем случае, аннотированный метод из программного модуля расширения выглядит
следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
&amp;Перед(&quot;ИмяМетода&quot;)
Процедура Префикс_Имя()
    // текст метода
КонецПроцедуры
</pre>

<p class="MsoNormalCxSpFirst">В
данном примере <span class="Term">Перед</span> –
одна из трех возможных аннотаций, <span class="Term">ИмяМетода</span> –
имя расширяемого метода, <span class="Term">Префикс_Имя</span> –
имя расширяющего метода. <span class="Term">Префикс_</span> –
это префикс расширения, который желательно указывать для всех методов
расширения. Расширяться может как процедура, так и функция. Имя
расширяющего метода должно подчиняться обычным правилам формирования имен
процедур и функций. В частности – оно должно быть уникально.</p>

<p class="MsoNormalCxSpLast">Если
расширяемый метод содержит какие-либо параметры, то:</p>

<p class="MsoListNumberCxSpFirst">1.  Все
расширяющие методы обязаны иметь в точности такое же описание, как и
расширяемый метод, с точностью до ключевых слов <span class="Term">Знач</span> в описаниях параметров методов.</p>

<p class="MsoListNumberCxSpMiddle">2.  Значения
параметров разделяются между всеми расширяющими методами из всех расширений и
собственно расширяемым методом. Это значит, что если какой-либо расширяющий
метод изменит значение параметра, все методы, которые получат управление <span class="Bold">после</span> этого метода, получат измененное значение этого параметра.</p>

<p class="MsoListNumberCxSpLast">3.  В
расширяющем методе не имеет смысла указывать значения по умолчанию для
параметров расширяемого метода. Значения по умолчанию будут определяться из
описания расширяемого метода.</p>

<p class="MsoNormal">Также
следует отметить, что если метод из расширения выполняет расширение какого-либо
обработчика события, то расширяющий метод выполнить до того, как сработают
подписки на события (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref450307494">здесь</a>).</p>

<a id="TI000001842" class="bookmark" name="issogl3_32.5.2.2_способы_расширения"><h4>32.5.2.2. Способы расширения</h4></a>

<p class="Lang-parameter">Исполнение
до расширяемого метода (аннотация Перед)</p>

<p class="Regularbeforepicture">Если
метод аннотирован таким образом, это означает, что вначале будет выполнен метод
расширения, а затем – расширяемый метод.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00673.gif?_=1496848987" WIDTH="605" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
667.
Схема исполнения «Перед»</p>

<p class="Lang-parameter">Исполнение
после расширяемого метода (аннотация После)</p>

<p class="Regularbeforepicture">Если
метод аннотирован таким образом, это означает, что вначале будет выполнен
расширяемый метод, а затем – метод расширения.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00674.gif?_=1496848987" WIDTH="605" ALT HEIGHT="165"></p>

<p class="MsoCaption">Рис.
668.
Схема исполнения «После»</p>

<p class="Lang-parameter">Обрамление
расширяемого метода (аннотации Перед и После)</p>

<p class="Regularbeforepicture">Если
в расширяющем модуле созданы расширяющие методы, которые отмечены аннотациями <span class="Term">Перед</span> и <span class="Term">После</span>, то это означает, что вначале будет
вызван метод, который отмечен аннотацией <span class="Term">Перед</span>, затем расширяемый метод и зачем метод
расширения, отмеченный аннотацией <span class="Term">После</span>.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00675.gif?_=1496848987" WIDTH="800" ALT HEIGHT="157"></p>

<p class="MsoCaption">Рис.
669.
Схема исполнения «Перед» и «После»</p>

<p class="Lang-parameter">Замена
метода (аннотация Вместо)</p>

<p class="MsoNormal">Под перехватом вызова метода понимается
ситуация, когда метод, созданный в расширении, полностью замещает собой расширяемый
метод. Другими словами, вызов метода расширяемой конфигурации приведет к
исполнению метода расширения. Имя замещаемого метода указывается в качестве
параметра аннотации. Рекомендуется использовать данный способ только в том случае,
когда нет возможности использовать другие способы расширения методов.</p>

<p class="Regularbeforepicture">Для
расширяемых функций возможно применение только этого способа расширения.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00676.gif?_=1496848987" WIDTH="443" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
670.
Схема исполнения «Вместо»</p>

<p class="Regularbeforepicture">Чтобы
иметь возможность модифицировать результат работы расширяемого метода,
предусмотрен метод глобального контекста <span class="Term">ПродолжитьВызов()</span>. В качестве параметров
метода должны быть указаны фактические параметры, которые переданы в расширяющий
метод.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00677.gif?_=1496848987" WIDTH="544" ALT HEIGHT="204"></p>

<p class="MsoCaption">Рис.
671.
Схема исполнения «Вместо» совместно с ПродолжитьВызов()</p>

<p class="MsoNormal">В исходном тексте пример будет выглядеть
следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;Вместо(&quot;Расширяемая&quot;)</span>
<span class="keyword">Процедура</span> Расш1_Расширяющая<span class="operator">(</span>Парам1<span class="operator">,</span> Парам2<span class="operator">)</span>
    <span class="comment">// текст метода</span>
    ПродолжитьВызов<span class="operator">(</span>Парам1<span class="operator">,</span> Парам2<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// текст метода</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="_ref470176527"></a><a id="TI000001890" class="bookmark" name="issogl3_32.5.2.3_редактирование_программного_модуля"><h4>32.5.2.3. Редактирование программного модуля</h4></a>

<p class="MsoNormalCxSpFirst">В
общем случае, редактирование программного модуля в расширении мало отличается
от редактирования модуля в расширяемой конфигурации или модуля в конфигурации,
где вообще нет расширений (подробнее о редактировании модулей
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref470015459">здесь</a>). В качестве основных отличий можно указать процесс
заимствования метода из какого-либо программного модуля расширяемой
конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Для
того чтобы добавить какой-либо метод в расширение, необходимо поместить курсор
в требуемый метод (включая строку с именем метода) и выбрать команду <span class="Interface">Добавить в расширение</span>.
Если при выполнении данной команды в конфигураторе открыто одно расширение, то
именно это расширение будет использовано. Во всех остальных случаях будет
предложен выбор из расширений, которые добавлены для данной информационной
базы.</p>

<p class="MsoNormalCxSpLast">При
выполнении команды <span class="Interface">Добавить в расширение</span> происходит следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если объект, из модуля которого добавляется
метод, отсутствует в выбранном расширении – этот объект автоматически добавляется
в расширение.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если расширяется метод из модуля, отличного от
модуля формы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Разработчику предлагается выбрать аннотацию для
метода (<span class="Term">Перед</span>,
<span class="Term">После</span>
или <span class="Term">Вместо</span>).
При этом полужирным шрифтом выделяются те расширения метода, которые уже
существуют в расширении.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Если выбран существующий метод в расширении, то
выполняется переход к этому методу. При этом возможна корректировка объявления
метода, если оно стало отличаться от расширяемого метода.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Если выбран несуществующий способ расширения, то
будет создан новый метод в расширении, который будет предваряться
соответствующей аннотацией.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для функций недоступны аннотации <span class="Term">Перед</span> и <span class="Term">После</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для процедуры недоступно:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Аннотация <span class="Term">Вместо</span>, если уже существуют методы с
аннотациями <span class="Term">Перед</span>
или <span class="Term">После</span>;</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Аннотация <span class="Term">Перед</span>/<span class="Term">После</span>, если уже существует метод с аннотацией <span class="Term">Вместо</span>.</p>

<p class="MsoListBullet">&#9679; 
Если расширяется метод из модуля формы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если расширяемый метод является обработчиком
одного события или одной команды, то предлагается выбрать, каким образом
выполнить расширение выбранного метода: как расширение для обработчика
события/команды или как расширение обычного метода.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Если расширяемый метод является обработчиком для
нескольких событий или команд, то будет сформировано предупреждение о том, что
данный метод не может быть расширен как обработчик события/команды, и он будет
расширен только как обычный метод. Затем будет предложено выбрать способ
расширения метода.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для обычного метода, не являющего обработчиком
какого-либо события, будет выполнено расширение метода с использованием
аннотаций.</p>

<p class="MsoNormalCxSpFirst">Следует
учитывать, что если расширяемый метод обрамлен инструкциями препроцессора, то
эти инструкции не будут перенесены в расширение.</p>

<p class="MsoNormalCxSpLast">При
проверке соответствия описания расширяемого метода и метода расширения
проверяются следующие характеристики методов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Количество параметров и признак передачи
параметров «по значению» (ключевое слово <span class="Term">Знач</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Метод является процедурой или функцией. Если определение
метода изменяется с процедуры на функцию, а до этого процедура была расширена с
применением аннотаций <span class="Term">Перед</span>/<span class="Term">После</span>, то аннотация будет заменена на
аннотацию <span class="Term">Вместо</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если в модуле расширения присутствуют несколько
методов с одинаковым именем, но которые обрамлены разными инструкциями
препроцессора, то в расширении будет обновляться всегда первый из перечня таких
методов.</p>

<p class="MsoNormal">Еще
одной особенностью редактирования программного модуля в расширении является то,
что имеется возможность перехода к расширяемому методу непосредственно из
расширения. Для этого следует поместить курсор на имя расширяемого метода в аннотации,
а затем воспользоваться стандартной командой редактора <span class="Interface">Перейти к определению</span>.</p>

<a id="TI000001843" class="bookmark" name="issogl3_32.5.2.4_взаимодействие_нескольких_расширений"><h4>32.5.2.4. Взаимодействие нескольких расширений</h4></a>

<p class="MsoNormal">При разработке расширений следует исходить
из следующих предположений:</p>

<p class="MsoListNumberCxSpFirst">1.  Расширение
должно разрабатываться как автономный продукт, не опирающийся на наличие или
отсутствие других расширений.</p>

<p class="MsoListNumberCxSpMiddle">2.  Одновременно
может быть подключено более одного расширения, которое расширяет один и тот же
объект расширяемой конфигурации.</p>

<p class="MsoListNumberCxSpMiddle">3.  Порядок
исполнения программных модулей в результирующей конфигурации определяется
порядком регистрации расширений в информационной базе расширяемой системы.
Первым используется расширение, которое зарегистрировано последним.</p>

<p class="MsoListNumberCxSpLast">4.  Необработанное
исключение, возникающее в любом из расширений (или расширяемой конфигурации) прерывает
исполнение всей цепочки методов расширений и распространяется в расширяемой
конфигурации.</p>

<p class="MsoNormalCxSpFirst">При
рассмотрении вопроса взаимодействия расширений и расширяемой конфигурации будет
использоваться пример из двух расширений (<span class="Term">Расширение1</span> и <span class="Term">Расширение2</span>), зарегистрированных в расширяемой
системе в указанном порядке. При этом чем раньше зарегистрировано расширение,
тем меньше расширений находится между этим расширением и расширяемой конфигурацией.
Так, <span class="Term">Расширение1</span>
будет расширять непосредственно расширяемую конфигурацию, а <span class="Term">Расширение2</span> будет расширять конфигурацию, которая
является объединением <span class="Term">Расширения1</span>
и оригинальной расширяемой конфигурации. Таким образом, в самом низу это
слоистой конструкции расположена расширяемая конфигурация, откуда всегда
начинается исполнение встроенного языка.</p>

<p class="MsoNormalCxSpLast">Далее
будут рассмотрены несколько примеров работы результирующей конфигурации при
различных способах расширения.</p>

<p class="Lang-parameter">Пример
1</p>

<p class="Regularbeforepicture">Если
оба расширения одинаково обрамляют (аннотации <span class="Term">Перед</span> и <span class="Term">После</span>) расширяемый метод, то исполнение схема
исполнения встроенного языка будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00678.gif?_=1496848987" WIDTH="704" ALT HEIGHT="264"></p>

<p class="MsoCaption">Рис.
672.
Схема взаимодействия. Пример 1</p>

<p class="MsoNormal">При попытке вызвать метод <span class="Term">Расширяемая()</span> (в
основной конфигурации), встроенный язык будет исполняться в следующем порядке:</p>

<p class="MsoListNumberCxSpFirst">1.  Будет
вызван метод, отмеченный аннотацией <span class="Term">Перед(&quot;Расширяемая&quot;)</span> из <span class="Term">Расширения2</span>.</p>

<p class="MsoListNumberCxSpMiddle">2.  Затем
будет вызван метод, отмеченный аннотацией <span class="Term">Перед(&quot;Расширяемая&quot;)</span> из <span class="Term">Расширения1</span>.</p>

<p class="MsoListNumberCxSpMiddle">3.  Затем
будет вызван метод <span class="Term">Расширяемая()</span>
из расширяемой конфигурации.</p>

<p class="MsoListNumberCxSpLast">4.  Затем,
в обратном порядке (относительно списка расширений, т. е. <span class="Term">Расширение1</span> и <span class="Term">Расширение2</span>), будут вызваны методы, отмеченные
аннотациями <span class="Term">После(&quot;Расширяемая&quot;)</span>.</p>

<p class="MsoNormal">Т.е.
вначале вызываются те методы расширений, которые разработчик отметил как
вызываемые <span class="Bold">до</span> исполнения расширяемого метода, затем
исполняется собственно расширяемый метод, а затем вызываются те методы, которые
разработчик отметил как вызываемые <span class="Bold">после</span> исполнения
расширяемого метода.</p>

<p class="Lang-parameter">Пример
2</p>

<p class="Regularbeforepicture">Если
в каждом расширении расширяемый метод перехватывается полностью, то схема
выполнения будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00679.gif?_=1496848987" WIDTH="422" ALT HEIGHT="243"></p>

<p class="MsoCaption">Рис.
673.
Схема взаимодействия. Пример 2</p>

<p class="MsoNormalCxSpFirst">Так
произошло потом, что метод, отмеченный аннотацией <span class="Term">Вместо</span>, полностью заменяет собой расширяемый метод.
Следует особо отметить, что если в этом примере поменять порядок регистрации
расширений (первым будет <span class="Term">Расширение2</span>,
а последним – <span class="Term">Расширение1</span>),
то единственным выполнившимся методом будет метод из <span class="Term">Расширения1</span>.</p>

<p class="MsoNormalCxSpLast">В
связи с таким поведением «замещающего» метода расширения, рекомендуется не
допускать ситуаций, когда какой-то метод расширяемой конфигурации расширяется с
замещением (аннотация <span class="Term">Вместо</span>)
более чем в одном одновременно работающим расширении. Другими словами, если в расширении,
в модуле документа <span class="Term">Документ1</span>
замещается обработчик события <span class="Term">ОбработкаПроведения</span>,
то рекомендуется не допускать ситуации, когда в информационной базе работает
еще хотя-бы одно расширение, которое каким-либо образом перехватывает
обработчик события <span class="Term">ОбработкаПроведения</span>
в документе <span class="Term">Документ1</span>.
Однако, если в «замещающем» методе расширения есть <span class="Bold">безусловный</span>
вызов метода <span class="Term">ПродолжитьВызов()</span>,
то одновременное существование нескольких расширений с таким способм расширения
вполне допустимо.</p>

<a id="TI000001844" class="bookmark" name="issogl3_32.5.2.5_профили_безопасности_и_расширение"><h4>32.5.2.5. Профили безопасности и расширение</h4></a>

<p class="MsoNormalCxSpFirst">Факт того, что расширение успешно подключено
к расширяемой конфигурации, не означает, что все расширяющие методы, которые находятся
в расширении, будут выполняться. Работоспособность методов расширения может
быть изменена настройками профиля безопасности (подробнее см. <a href="/db/v8310doc/bookmark/cs/TI000000053" target="_top">здесь</a>),
который использует информационная база.</p>

<p class="MsoNormalCxSpLast">Если прикладное решение работает в файловом
варианте или в клиент-серверном варианте без профилей безопасности, то при
подключении расширения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В обычном режиме исполнения встроенного языка –
допустимо расширять как клиентские, так и серверные методы. Без ограничения
места расположения методов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В безопасном режиме исполнения встроенного языка –
будут расширяться только клиентские методы и серверные обработчики форм,
которые установлены через панель свойств. К остальным серверным методам (аннотированные
серверные методы модулей формы и серверные общие модули) расширение применяться
не будет.</p>

<p class="MsoNormal">Возможность расширения серверных общих
модулей в клиент-серверном варианте регулируется профилем безопасности.
Подробное описание см. <a href="/db/v8310doc/bookmark/cs/TI000000216" target="_top">здесь</a>.</p>

<a name="_ref449525044"></a><a name="_ref449525043"></a><a id="TI000001528" class="bookmark" name="issogl2_32.5.3_управляемая_форма"><h3>32.5.3. Управляемая форма</h3></a>

<p class="Regularbeforepicture">После
того, как форма добавлена в расширение, визуально она выглядит точно так, как
эта же форма выглядит в расширяемой конфигурации в момент добавления ее в расширение.
При этом модуль расширяющей формы пустой. В момент добавления конфигуратор
«запоминает» добавляемую форму в расширении. В дальнейшем такая форма будет
называться <span class="Bold">сохраненной</span>. Расширяемая форма автоматически
не синхронизируется с расширением. Как следствие, изменение расширяемой формы
никак не отражается в расширяющей форме (в режиме Конфигуратора). В том случае,
если прикладному разработчику необходимо обновить форму в расширении, ему
следует использовать команду <span class="Interface">Расширения – Обновить расширение формы</span>
редактора формы. Обновление может потребоваться в том случае, если необходимо перенести
в расширения изменения и дополнения, которые выполнены в расширяемой
конфигурации после создания расширения формы.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00680.gif?_=1496848987" WIDTH="509" ALT HEIGHT="248"></p>

<p class="MsoCaption">Рис.
674.
Команды редактора формы</p>

<p class="MsoNormalCxSpFirst">Если
требуется посмотреть, как выглядит сохраненная форма – следует
использовать команду <span class="Interface">Расширения – Показать сохраненную форму</span> в редакторе
заимствованной управляемой формы.</p>

<p class="MsoNormalCxSpLast">В
режиме 1С:Предприятие происходит формирование результирующего объекта
объединением расширяемого и всех расширяющих объектов. Процесс объединения
работает следующим образом:</p>

<p class="MsoListNumberCxSpFirst">1.  Выполняется
объединение расширяемой конфигурации и первого (по порядку регистрации)
расширения.</p>

<p class="MsoListNumberCxSpLast">2. 
Объединение повторяется для каждого следующего
зарегистрированного расширения, при этом в качестве расширяемой конфигурации
выступает результат предыдущего объединения. С точки зрения каждого следующего
объединения, результат предыдущего объединения будет считаться расширяемым
объектом.</p>

<p class="MsoNormal">В
процессе объединения каждой компоненты (элемент, реквизит, параметр или
команда) управляемой формы анализируются изменения в расширяемой и расширяющей
формах относительно сохраненной. По результатам анализа принимается решение,
какая компонента будет отображаться в результирующей форме:</p>

<p class="MsoListNumberCxSpFirst">1.  Если
изменений нет – компонента берется из расширяемого объекта;</p>

<p class="MsoListNumberCxSpMiddle">2. 
Если изменение есть только в расширяемой
форме – компонента берется из расширяемой формы;</p>

<p class="MsoListNumberCxSpMiddle">3. 
Если изменение есть только в расширяющей
форме – компонента берется из расширяющей формы;</p>

<p class="MsoListNumberCxSpLast">4. 
Если изменение есть и в расширяемой форме и в
расширяющих формах – компонента берется из расширяющей формы.</p>

<p class="MsoNormalCxSpFirst">Сопоставление
компонентов управляемой формы выполняется по имени соответствующего элемента.</p>

<p class="MsoNormalCxSpLast">Вышеописанный
режим не действует:</p>

<p class="MsoListNumberCxSpFirst">1.  Для
условного оформления. В этом случае происходит объединение элементов условного
оформления из расширяемой формы и всех расширяющих форм аналогично тому, как
это происходит при объединении конфигураций.</p>

<p class="MsoListNumberCxSpLast">2. 
Командный интерфейс результирующий формы
формируется путем добавления элементов командного интерфейса из расширяющей
формы к командному интерфейсу расширяемой формы. При этом возможна ситуация,
когда на форме будут несколько команд с одинаковым представлением, т. к.
они образованы командами из разных расширений, но с одинаковым представлением.</p>

<p class="MsoNormal">При
определении порядка элементов результирующей управляемой формы вначале
определяется возможность расположить элементы без конфликтов размещения. Если
такая возможность есть, то порядок элементов результирующей формы определяется
следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Элементы формы, добавленные в начало списка (не
важно, в расширении или в расширяемой конфигурации), останутся в начале списка
независимо от изменения порядка остальных элементов. Сначала будут идти
элементы формы из расширений (в порядке следования), а потом из расширяемой
конфигурации.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Элементы формы, добавленные в конец списка (не
важно, в расширении или в расширяемой конфигурации), останутся в конце списка
независимо от изменения порядка остальных элементов. Сначала будут идти элементы
формы из расширяемой конфигурации, потом из расширений (в порядке следования).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Также существует возможность располагать рядом с
элементом расширяемой формы другие элементы формы. Для этого следует создать в
расширении группу, в которую поместить элемент расширяемой формы, и те
элементы, которые необходимо рядом. Тогда при смене местоположения
оригинального элемента в расширяемой форме, в результирующей форме на новом
месте окажется и вся группа, в которую был помещен этот элемент.</p>

<p class="MsoNormal">Если
без конфликтов порядок определить нельзя, используется следующий алгоритм:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Исходным выступает список элементов расширения в
порядке, который установлен в расширении.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для определения положения элемента, добавленного
в основной конфигурации, находится элемент, существующий в сохраненной
конфигурации и расположенный перед добавленным элементом (в порядке основной
конфигурации):</p>

<p class="MsoListBullet2">&#9679; 
В соответствии с порядком элементов в
расширении, определяется, какой элемент является следующим – существовавший
или добавленный в расширении:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Если существовавший, то элемент основной
конфигурации добавляется после найденного элемента.</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Если элемент или элементы, добавленные в
расширении, то элемент основной конфигурации добавляется после них.</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если в основной конфигурации было добавлено
несколько элементов, то последующие элементы добавляются после предшествующих
добавленных, даже если предшествующие уже были добавлены расширением.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если элемент, после которого элементы были
добавлены, не найден в расширении (например, удален), то ищется предыдущий
существующий в порядке основной конфигурации. Если при поиске достигнуто начало
списка элементов, то новый элемент (или группа новых элементов) добавляется в
начало результирующего списка, но после новых элементов расширения добавленных
в начало списка.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Новые элементы основной конфигурации,
добавленные в начало списка, добавляются сразу после новых элементов расширения,
добавленных в начало списка.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Новые элементы основной конфигурации,
добавленные в конец списка, добавляются перед новыми элементами расширения,
добавленными в конец списка.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если при добавлении оказывается, что элемент уже
был добавлен расширением, то такой элемент пропускается.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Удаляются элементы, которые были удалены в
основной конфигурации по сравнению с сохраненной версией.</p>

<p class="MsoNormal">Расширение
модуля формы несколько отличается от расширения любого другого модуля. Описание
расширения обычных модулей см. <a href="#_ref449093131">здесь</a>. Далее будут описаны особенности расширения модулей в
варианте модуля формы.</p>

<p class="Regularbeforepicture">Первой
особенностью является то, что создавать обработчики в расширяющей форме следует
с помощью панели свойств формы или элемента формы. При попытке создать
обработчик, конфигуратор уточнит, когда должен быть вызван создаваемый обработчик
и как он (обработчик) будет создаваться.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00681.gif?_=1496848987" WIDTH="368" ALT HEIGHT="229"></p>

<p class="MsoCaption">Рис.
675.
Расширение обработчика</p>

<p class="Regularbeforepicture">При
этом в палитре свойств, рядом с именем расширяющего обработчика, появятся
картинки, которая отображает тип расширения. Также в том случае, если выбран
тип расширения <span class="Term">Перед</span>
или <span class="Term">После</span> –
автоматически будет показано еще одно поле ввода для указания парного
расширяющего метода: если создан расширяющий метод с типом расширения <span class="Term">Перед</span>, то будет создано еще одно поле для
расширяющего метода с типом расширения <span class="Term">После</span> и наоборот. Для замещающего обработчика
(с типом расширения <span class="Term">Вместо</span>)
подобного поведения не будет.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00682.gif?_=1496848987" WIDTH="700" ALT HEIGHT="143"></p>

<p class="MsoCaption">Рис.
676.
Обозначения обработчиков</p>

<p class="MsoNormalCxSpFirst">В
том случае, если требуется изменить тип расширяющего обработчика – следует
удалить существующий обработчик и создать его заново.</p>

<p class="MsoNormalCxSpLast">Следующей
особенностью является то, что редактор управляемой формы создает расширяющие
обработчики без использования аннотаций.</p>

<a id="TI000001529" class="bookmark" name="issogl2_32.5.4_командный_интерфейс_формы"><h3>32.5.4. Командный интерфейс формы</h3></a>

<p class="MsoNormalCxSpFirst">Командный
интерфейс формы дополняется командными интерфейсами расширений. Команды,
добавляемые в командный интерфейс формы вручную, будут отображаться после
команд расширяемой конфигурации (в режиме «1С:Предприятие»). Следствием этого
является то, что в результирующей форме могут одновременно существовать
несколько команд с одинаковым представлением.</p>

<p class="MsoNormalCxSpMiddle">Удалить
команду расширяемой конфигурации невозможно.</p>

<p class="MsoNormalCxSpLast">Необходимо
учитывать, что в редакторе формы в конфигураторе, разработчик не будет видеть
фрагменты командного интерфейса, которые предоставляются расширяемой
конфигурацией.</p>

<a name="_ref436904625"></a><a id="TI000001763" class="bookmark" name="issogl2_32.5.5_формы_объектов"><h3>32.5.5. Формы объектов</h3></a>

<p class="MsoNormal">Для
объектов конфигурации имеется возможность изменять основные и вспомогательные
формы заимствованных объектов конфигурации. Для этого необходимо создать в
расширении форму, которой будет заменена существующая форма объекта конфигурации,
затем отметить свойство конфигурации, описывающее заменяемую форму, как
модифицируемый реквизит и указать новую форму в этом реквизите. Для того чтобы
изменять свойства конфигурации, связанные с формами (свойства <span class="Interface">Основная форма отчета</span>,
<span class="Interface">Основная форма поиска</span> и т. д.) нет
необходимости заимствовать корневой элемент дерева конфигурации, достаточно работать
со свойствами корневого элемента расширения.</p>

<a id="TI000001530" class="bookmark" name="issogl2_32.5.6_подсистемы"><h3>32.5.6. Подсистемы</h3></a>

<p class="MsoNormalCxSpFirst">Подсистема
может быть как заимствованным, так и собственным объектом расширения.</p>

<p class="MsoNormalCxSpMiddle">Из
состава заимствованной подсистемы нельзя удалить объекты конфигурации, которые
добавлены туда в расширяемой конфигурации. Но в состав заимствованной
подсистемы можно добавить другие объекты: как собственные, так и заимствованные
(относительно расширения).</p>

<p class="MsoNormalCxSpMiddle">Собственная
подсистема расширения может включать как собственные объекты расширения, так и
заимствованные объекты.</p>

<p class="MsoNormalCxSpLast">Для
заимствованных объектов имеется возможность изменить картинку подсистемы, с
помощью изменения модифицируемого реквизита <span class="Interface">Картинка</span>.</p>

<a id="TI000001531" class="bookmark" name="issogl2_32.5.7_права_доступа"><h3>32.5.7. Права доступа</h3></a>

<a id="TI000001845" class="bookmark" name="issogl3_32.5.7.1_общая_информация"><h4>32.5.7.1. Общая информация</h4></a>

<p class="MsoNormal">С помощью расширения конфигурации предоставляется
возможность расширить уже существующую роль, а также создать собственную роль в
расширении.</p>

<a id="TI000001846" class="bookmark" name="issogl3_32.5.7.2_заимствованные_роли"><h4>32.5.7.2. Заимствованные роли</h4></a>

<a id="TI000001847" class="bookmark" name="issogl4_32.5.7.2.1_общая_информация"><h5>32.5.7.2.1. Общая информация</h5></a>

<p class="MsoNormalCxSpFirst">В
заимствованной роли имеется возможность изменять права доступа, указанные для
объектов расширяемой конфигурации. Изменять можно не только сами права доступа,
но и ограничения доступа к данным. Также предоставляется возможность создавать
(и использовать) шаблоны ограничения доступа к данным в заимствованном объекте
роли. В заимствованной роли не предоставляет возможности изменять права
доступа, которые задаются для корневого объекта конфигурации (административные
права, возможность использования того или иного клиентского приложения и т. д.).</p>

<p class="MsoNormalCxSpMiddle">В
заимствованной роли все права, по умолчанию, соответствуют правам из
расширяемой конфигурации. В настройке прав доступа этому соответствует специальное
значение флажка. Однако имеется возможность установить или сбросить любое
право. Таким образом, с помощью заимствованной роли имеется возможность как
расширить права пользователя, так и сузить их.</p>

<p class="MsoNormalCxSpLast">Ограничения
доступа к данным, заданные в расширении, будут использоваться только в том
случае, если для права доступа явно указаны права в заимствованной роли. В этом
случае ограничения доступа к данным из расширения полностью заместят собой
ограничения доступа к данным из расширяемой конфигурации (для данного права и
данной роли). Если право доступа заимствуется из расширяемой конфигурации –
ограничения доступа к данным, заданные в расширении, не будут использоваться.</p>

<a id="TI000001848" class="bookmark" name="issogl4_32.5.7.2.2_редактирование"><h5>32.5.7.2.2. Редактирование</h5></a>

<p class="Regularbeforepicture">При
редактировании заимствованной роли, появляется возможность установить «третье
состояние» для права доступа: использовать значение из расширяемой роли.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00683.gif?_=1496848987" WIDTH="669" ALT HEIGHT="531"></p>

<p class="MsoCaption">Рис.
677.
Редактор заимствованной роли</p>

<p class="MsoNormal">Для
роли, расположенной в расширении, флажки <span class="Interface">Устанавливать права
для новых объектов</span> и <span class="Interface">Устанавливать права для реквизитов и
табличных частей по умолчанию</span> начинают действовать только для объектов
расширения. При этом флажки соответствующим образом переименовываются.</p>

<a id="TI000001849" class="bookmark" name="issogl3_32.5.7.3_собственные_роли"><h4>32.5.7.3. Собственные роли</h4></a>

<p class="MsoNormalCxSpFirst">Собственная
роль не предоставляет возможность устанавливать права доступа, которые
привязаны к корневому элементу конфигурации (использование клиентских
приложений, использование монопольного режима и т. д.). Собственные
роли расширений могут быть добавлены пользователям информационной базы только с
помощью встроенного языка. После удаления расширения все собственные роли этого
расширения удаляются из списков ролей пользователей.</p>

<p class="MsoNormalCxSpMiddle">Собственная
роль расширения не предоставляет возможности редактирования прав доступа,
которые задаются для корневого объекта конфигурации (административные права,
возможность использования того или иного клиентского приложения и т. д.).</p>

<p class="MsoNormalCxSpMiddle">Пользователь,
роли которого, дополнены расширением, отображается в конфигураторе со
специальным значком. Подробнее про отображение собственных ролей расширений в
списке пользователей см. <a href="/db/v8310doc/bookmark/adm/TI000000724" target="_top">здесь</a>.</p>

<p class="MsoNormalCxSpLast">В
том случае, когда расширение становится неактивным (в результате обнаружения
проблем применимости), собственная роль расширения продолжает быть доступной в
коллекции <span class="Term">ПользовательИнформационнойБазы.Роли</span>
как обычный объект конфигурации. Такая роль может быть добавлена или удалена из
списка ролей любого пользователя информационной базы. Однако, функция <span class="Term">ПравоДоступа()</span> для такой роли всегда будет
возвращать значение <span class="Term">Ложь</span>.
Если выполняется получение ролей для пользователя из другой области данных
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 24. механизм разделения данных.htm?_=1496848987#_ref449622688">здесь</a>), то все роли, добавленные расширениями, становятся
невидимыми (их нельзя получить, но при сохранении пользователя они не удаляются).</p>

<a id="TI000001850" class="bookmark" name="issogl3_32.5.7.4_расширение_прав_пользователей_и_профили_безопасности"><h4>32.5.7.4. Расширение прав пользователей и профили безопасности</h4></a>

<p class="MsoNormal">Изменение прав доступа для объектов расширяемой
конфигурации зависит от варианта работы (подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 1. концепция системы.htm?_=1496848987#_ref449626462">здесь</a>) информационной базы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В файловом варианте поддерживаются любые
возможности изменения прав доступа: как ограничение прав, так и их расширение.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В клиент-серверном варианте изменение прав
доступа регулируется наличием профиля безопасности и его настройками:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если прикладное решение работает без
использования профиля безопасности, то допускается любое изменение прав
доступа.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если прикладное решение работает с использованием
профиля безопасности, то ограничивать права доступа можно в любом случае, а
расширять права доступа можно только при соответствующей настройке профиля
безопасности.</p>

<p class="Indentlist2CxSpFirst">Если
в свойствах профиля безопасности установлен флажок <span class="Interface">к расширению прав доступа</span>
(в группе <span class="Interface">Разрешен полный доступ</span>), то расширять права доступа
можно для любого объекта расширяемой конфигурации.</p>

<p class="Indentlist2CxSpLast">В
том случае, если этот флажок сброшен, то расширять права доступа невозможно.
Если при этом заполнено свойство профиля безопасности <span class="Interface">Роли, ограничивающие
расширение прав доступа</span> (роли разделяются символом «<span class="Interface">;</span>»), то система
работает следующим образом: роль из расширения конфигурации может расширить
право доступа только в том случае, если хотя-бы в одной из ролей, перечисленных
в свойстве профиля безопасности <span class="Interface">Роли, ограничивающие расширение прав
доступа</span>, установлено расширяемое право доступа. При этом необязательно,
чтобы роли, перечисленные в свойстве профиля безопасности, использовались для
пользователей информационной базы прикладного решения. Пример такого поведения
будет рассмотрен ниже.</p>

<p class="MsoListBullet">&#9679; 
Для собственных объектов расширения права
доступа предоставляются в соответствии с настройками ролей расширения
(собственными или заимствованными), без взаимодействия с профилем безопасности.
Это поведение не зависит от настроек профиля безопасности.</p>

<p class="MsoNormal">Рассмотрим расширение права доступа на
примере. Допустим, в конфигурации имеется документ <span class="Term">РасходнаяНакладная</span>. В
расширении необходимо расширить право доступа <span class="Term">Запись</span>.
Для этого используется роль расширения <span class="Term">ПродавецРасширение</span>.
Также в расширяемой конфигурации присутствуют роли <span class="Term">ПродавецШаблон1</span> и <span class="Term">ПродавецШаблон2</span>. В
свойстве профиля безопасности <span class="Interface">Роли, ограничивающие
расширение прав доступа</span> указаны обе роли: <span class="Term">ПродавецШаблон1</span> и <span class="Term">ПродавецШаблон2</span>.</p>

<p class="Lang-parameter">Пример
1</p>

<p class="MsoNormal">В расширяемой конфигурации для документа <span class="Term">РасходнаяНакладная</span>
право <span class="Term">Запись</span>
указано следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ПродавецШаблон1</span> – право <span class="Term">Запись</span> разрешено;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ПродавецШаблон2</span> – право <span class="Term">Запись</span> запрещено.</p>

<p class="MsoNormal">В
этом случае работа происходит следующим образом: хотя-бы одна из ролей,
указанных в свойстве <span class="Interface">Роли, ограничивающие расширение прав доступа</span> право <span class="Term">Запись</span> разрешено (это роль <span class="Term">ПродавецШаблон1</span>). Это означает, что роль из
расширения <span class="Term">ПродавецРасширение</span>
<span class="Bold">может</span> предоставить право <span class="Term">Запись</span> для документа <span class="Term">РасходнаяНакладная</span>.</p>

<p class="Lang-parameter">Пример
2</p>

<p class="MsoNormal">В расширяемой конфигурации для документа <span class="Term">РасходнаяНакладная</span>
право <span class="Term">Запись</span>
указано следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ПродавецШаблон1</span> – право <span class="Term">Запись</span> запрещено;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ПродавецШаблон2</span> – право <span class="Term">Запись</span> запрещено.</p>

<p class="MsoNormalCxSpFirst">В
этом случае работа происходит следующим образом: никакая роль из списка ролей,
указанных в свойстве <span class="Interface">Роли, ограничивающие расширение прав доступа</span>, не
предоставляет право <span class="Term">Запись</span>.
Это означает, что роль из расширения <span class="Term">ПродавецРасширение</span> <span class="Bold">не может</span>
предоставить право <span class="Term">Запись</span>
для документа <span class="Term">РасходнаяНакладная</span>.</p>

<p class="MsoNormalCxSpLast">Другими
словами, алгоритм определения возможности расширить права доступа из
расширения, можно описать так: состояние требуемого права из всех ролей,
перечисленных в свойстве <span class="Interface">Роли, ограничивающие расширение прав доступа</span>,
объединяется «по ИЛИ». С результатом сложения «по И» объединяется право из роли
расширения.</p>

<a id="TI000001532" class="bookmark" name="issogl2_32.5.8_отчеты_и_обработки"><h3>32.5.8. Отчеты и обработки</h3></a>

<p class="MsoNormalCxSpFirst">Создание
нового отчета или обработки не отличается от таковой в конфигурации, не
содержащей расширения (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref405465398">здесь</a></span></span></span>).
В тоже время, имеется возможность расширить существующие формы отчетов или
обработок расширяемой конфигурации, выполнив заимствование необходимого объекта
(см. <a href="#_ref405215848">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Для
заимствованного объекта имеется возможность создавать реквизиты объектов,
табличные части и реквизиты табличных частей. Работа с этими объектами не
отличается от таковой в конфигурации, не содержащей расширений.</p>

<p class="MsoNormalCxSpLast">Для
заимствованного объекта <span class="Interface">Отчет</span> можно переопределить основную схему компоновки
данных. Для этого необходимо добавить отчет в расширение, затем отметить
свойство <span class="Interface">Основная схема компоновки данных</span> как изменяемое
(см. <a href="#_ref436910793">здесь</a>) и затем создать нужную схему компоновки данных для
отчета. В том случае, если требуется изменить (а не создать заново) схему компоновки
данных заимствованного отчета, то рекомендуется скопировать схему компоновки
данных из основной конфигурации в расширение, указать эту схему в качестве основной
в заимствованном отчете и затем модернизировать эту схему. Заимствование
объектов, входящих в схему компоновки данных, следует выполнять вручную.</p>

<a name="_ref422496956"></a><a name="_ref423706755"></a><a name="_ref423706754"></a><a id="TI000001631" class="bookmark" name="issogl2_32.5.9_xdto-пакет"><h3>32.5.9. XDTO-пакет</h3></a>

<p class="MsoNormalCxSpFirst">XDTO-пакет
может быть как заимствованным, так и собственным объектом расширения.</p>

<p class="MsoNormalCxSpMiddle">Заимствовать
можно не только целиком пакет, но и какую-то часть этого пакета, если для
нормального функционирования расширения не требуется весь XDTO-пакет. Если
заимствуемый элемент уже существует в расширении, пользователю задаётся запрос
на его обновление.</p>

<p class="MsoNormalCxSpLast">При
заимствовании переносится:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Все установленные свойства элемента, включая
списочные и агрегатные;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Все установленные свойства создающихся
родительских элементов, кроме списочных и агрегатных.</p>

<p class="MsoNormal">При
подключении расширения, для заимствованного XDTO-пакета выполняется контроль на
строгое подмножество, т. е. все заимствованные элементы пакета должны
входить в пакет из расширяемой конфигурации с точным совпадением количества и
значения свойств.</p>

<a name="_ref422497084"></a><a id="TI000001632" class="bookmark" name="issogl2_32.5.10_web-сервис"><h3>32.5.10. Web-сервис</h3></a>

<p class="MsoNormal">Публикация
собственного Web-сервиса расширения возможна двумя способами:</p>

<p class="MsoListNumberCxSpFirst">1.  Безусловным
разрешением использовать любой Web-сервис из любого подключенного расширения.
Для этого при публикации следует воспользоваться флажком диалога публикации <span class="Interface">Публиковать
Web-сервисы расширений по умолчанию</span> (подробнее см. <a href="/db/v8310doc/bookmark/adm/TI000000471" target="_top">здесь</a>) или
аналогичным по смыслу атрибутом <span class="Interface">publishExtensionsByDefault</span> элемента
<span class="Interface">ws</span> файла <span class="Interface">default.vrd</span> (подробнее
см. <a href="/db/v8310doc/bookmark/adm/TI000000381" target="_top">здесь</a>).</p>

<p class="MsoListNumberCxSpLast">2.  Вручную
указав Web-сервисы расширений, которые могут быть использованы, в файле <span class="Interface">default.vrd</span>, в
элементе <span class="Interface">point</span> (подробнее см. <a href="/db/v8310doc/bookmark/adm/TI000000382" target="_top">здесь</a>).</p>

<p class="MsoNormal">Использование
Web-сервисов из расширений доступно по значению свойства Web-сервиса <span class="Interface">Имя</span>, так и
значению свойства Web-сервиса <span class="Interface">Имя файла публикации</span>. Если в
расширениях существует несколько Web-сервисов с одинаковыми значениями свойства
<span class="Interface">Имя файла публикации</span>, то при обращении к Web-сервису с
использованием значения этого свойства, будет использоваться первый найденный
Web-сервис.</p>

<a name="_ref422497250"></a><a id="TI000001633" class="bookmark" name="issogl2_32.5.11_http-сервис"><h3>32.5.11. HTTP-сервис</h3></a>

<p class="MsoNormal">При
подключении расширения к информационной базе, выполняется контроль уникальности
значения свойства <span class="Interface">Корневой URL</span> собственных HTTP-сервисов расширения. Расширения,
в которых существуют HTTP-сервисы, у которых значение свойства <span class="Interface">Корневой URL</span>
нарушает уникальность, не подключаются.</p>

<a id="TI000001533" class="bookmark" name="issogl2_32.5.12_профили_безопасности"><h3>32.5.12. Профили безопасности</h3></a>

<p class="MsoNormal">При
подключении расширения к прикладному решению имеется возможность указать, будет
расширение выполняться в безопасном режиме или нет. Это можно сделать:</p>

<p class="MsoListNumberCxSpFirst">1.  Явным
указанием флажка <span class="Interface">Безопасный режим</span>. В этом случае расширение будет
выполняться в безопасном режиме (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref378761017">здесь</a>) или небезопасном режиме (в зависимости от состояния
флажка).</p>

<p class="MsoListNumberCxSpLast">2. 
Указанием имени профиля безопасности, в рамках
которого будет выполняться расширение. Данная возможность доступна только в том
случае, если прикладное решение используется в клиент-серверном варианте.
Подробнее о профилях безопасности см. <a href="/db/v8310doc/bookmark/cs/TI000000053" target="_top">здесь</a>.</p>

<p class="MsoNormalCxSpFirst">Указание
профиля безопасности при подключении расширения указывает, что режим работы
расширения определяется настройками указанного профиля безопасности. В профиле
безопасности доступ к расширению указывается в настройках элемента <span class="Interface">Внешние модули</span>.</p>

<p class="MsoNormalCxSpMiddle">Если
в профиле безопасности запрещено небезопасное использование внешних модулей, а
расширение требует такое использование, то его (расширение) можно внести в
список исключений. Чтобы получить значение контрольной суммы расширения для
добавления в список исключений, следует воспользоваться возможностями диалогов
работы с расширениями или программного интерфейса работы с расширениями. Полученное
значение контрольной суммы следует ввести в соответствующее поле в консоли
администрирования кластера.</p>

<p class="MsoNormalCxSpMiddle">При
подключении расширения проверяется возможность включения небезопасного режима
(если требуется) и если текущее расширение не соответствует требованиям
указанного профиля безопасности – подключение расширения не происходит и
выдается ошибка.</p>

<p class="MsoNormalCxSpLast">Для
изменения настроек безопасного режима при подключении расширения необходимо,
чтобы пользователь, выполняющий эти настройки, обладал правом <span class="Term">Администрирование</span> (в дополнение к праву <span class="Term">АдминистрированиеРасширенийКонфигурации</span>,
которое позволяет выполнять остальные действия с расширениями).</p>

<a name="_ref427770618"></a><a id="TI000001717" class="bookmark" name="issogl2_32.5.13_предопределенные_элементы_и_состав_плана_обмена"><h3>32.5.13. Предопределенные элементы и состав плана обмена</h3></a>

<p class="MsoNormalCxSpFirst">В
расширении имеется возможность управлять контролируемостью состава плана обмена
и предопределенных элементов. Для этого необходимо установить признак проверки
значения при подключении расширения у свойства <span class="Interface">Состав</span> (для
плана обмена) или <span class="Interface">Предопределенные</span>.</p>

<p class="MsoNormalCxSpLast">Также
имеется возможность заимствовать в расширение конкретный элемент состава плана
обмен или конкретный предопределенный элемент. При этом в расширение
переносятся:</p>

<p class="MsoListBullet">&#9679; 
Для элемента состава плана обмена:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Признак участия объекта конфигурации в плане
обмена;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Состояние авторегистрации изменений.</p>

<p class="MsoListBullet">&#9679; 
Для предопределенного элемента:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Имя, код и наименование предопределенного
элемента;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Иерархия подчинения в том случае, если
подчиненный элемент создан в иерархическом объекте (справочнике и т. д.);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Тип предопределенного элемента (для плана видов
характеристик). Типы, которые отсутствуют в типе плана видов характеристик
заимствованного объекта при переносе удаляются из типа элемента.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Вид и признак забалансовости (для плана счетов).</p>

<p class="MsoNormal">При
подключении расширения проверяется:</p>

<p class="MsoListBullet">&#9679; 
Для состава плана обмена:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Совпадение признака участия объекта конфигурации
в плане обмена;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Совпадение состояния авторегистрации изменений.</p>

<p class="MsoListBullet">&#9679; 
Для предопределенных элементов, заимствованных в
расширение:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Совпадение имени, кода и наименования элемента;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Совпадение родителя предопределенного элемента
(для иерархического объекта конфигурации);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Тип элемента (для плана видов характеристик);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Вид счета (для плана счетов);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Признак забалансовости счета (для плана счетов);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Состав признаков счета (для плана счетов);</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Точное совпадение состава настроек субконто
счета (для плана счетов).</p>

<a name="_ref470864994"></a><a id="TI000001894" class="bookmark" name="issogl2_32.5.14_табличный_документ"><h3>32.5.14. Табличный документ</h3></a>

<p class="MsoNormalCxSpFirst">При
редактировании заимствованного табличного документа предоставляется некоторые
возможности, облегчающие редактирование табличного документа. Данные
возможности собраны в меню <span class="Interface">Главное меню – Таблица – Расширение</span> (и
соответствующая кнопка командной панели редактирования табличного документа).</p>

<p class="MsoNormalCxSpLast">Команда
<span class="Interface">Способ расширения</span> позволяет указать, каким образом будет
расширяться табличный документ: объединением расширяемой таблицы и таблицы из
расширения (способ <span class="Interface">Объединять</span>) или таблица расширения будет целиком
замещать собой расширяемый табличный документ (способ <span class="Interface">Замещать</span>).</p>

<p class="Regularbeforepicture">Команда
<span class="Interface">Отображать изменения</span> позволяет цветом выделять области
табличного документа.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00684.gif?_=1496848987" WIDTH="563" ALT HEIGHT="247"></p>

<p class="MsoCaption"><a name="_ref470867656">Рис. </a>678. Отображение
изменений табличного документа</p>

<p class="MsoNormalCxSpFirst">В
приведенном на рисунке табличном документе серым цветом фона отображаются
ячейки расширяемого табличного документа, которые не были изменены в
расширении. Зеленым цветом фона отображаются ячейки, которые были добавлены в
расширении. А для ячеек табличного документа, свойства которых были изменены в
расширении – используется текущий цвет фона табличного документа.</p>

<p class="MsoNormalCxSpLast">Так,
в документе, приведенном на <a href="#_ref470867656">рис.678</a>, можно отметить следующие изменения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
в строках 11 и 12 добавлены ячейки в колонке 4
(отображение колонки <span class="Interface">Артикул</span> в табличной части документа <span class="Interface">Расход товара</span>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
в колонке 6 добавлены ячейки в строках 1-4 и
9-10. Это явилось следствием добавления колонки с артикулом.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
в ячейке, расположенной во 2 колонке 12 строки
изменено значение некоторых свойств ячейки, поэтому ячейка отображается с
цветом фона, отличным от серого цвета.</p>

<p class="Regularbeforepicture">Чтобы
увидеть различия в значениях свойств ячейки, предназначена специальная кнопка
командной панели палитры свойств ячейки.</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00685.gif?_=1496848987" WIDTH="554" ALT HEIGHT="249"></p>

<p class="MsoCaption"><a name="_ref470869318">Рис. </a>679. Изменения
свойств ячейки</p>

<p class="MsoNormal">Кнопка
<span class="Interface">Показывать только измененные</span> доступна только в тех
ячейках заимствованного табличного докмуента, в которых изменены свойства
ячеек. При нажатии на эту кнопку, палитра свойств начинает отображать только
измененные свойства. Так, в примере на <a href="#_ref470869318">рис.679</a>, видно, что в ячейке, которая находится на во 2
колонке 12 строки, изменено горизонтальное выравнивание. Остальные свойства этой
ячейки остались без изменений.</p>

<p class="Regularbeforepicture">С
помощью команды <span class="Interface">Показать сохраненную таблицу</span> можно увидеть расширяемый
табличный документ, в котором отмечены области, которые удалены в табличном
документе, который расположен в расширени. Такие области отмечены красным
цветом фона. Этот табличный документ отображается в режиме «только просмотр».</p>

<p class="Picture"><IMG src="/db/content/v8310doc/src/руководство разработчика/_img/img00686.gif?_=1496848987" WIDTH="506" ALT HEIGHT="263"></p>

<p class="MsoCaption">Рис.
680.
Удаленные ячейки</p>

<p class="MsoNormalCxSpFirst">Видно,
что в расширяемом табличном документе между областями <span class="Term">Шапка</span> и <span class="Term">ТоварыШапка</span> были две строки: 9 и 10. Однако, в
расширении одна строка (с номером 10) была удалена.</p>

<p class="MsoNormalCxSpMiddle">Команда
<span class="Interface">Показать результат</span> отображает таблицу (в режиме «только
просмотр»), которая представляет собой табличный документ, который получится в
результате применения расширения, в котором находится расширяемый табличный
документ.</p>

<p class="MsoNormalCxSpLast">Команда
<span class="Interface">Обновить расширение таблицы</span> позволяет обновить
расширяемый табличный документ в том случае, если он изменен в расширяемой
конфигурации.</p>

<a name="_ref450665728"></a><a name="_ref450665727"></a><a id="TI000001534" class="bookmark" name="issogl1_32.6_подключение_расширений_и_время_их_работы"><h2>32.6. Подключение расширений и время их работы</h2></a>

<p class="MsoNormalCxSpFirst">Подключение
расширения к сеансу пользователя выполняется перед вызовом обработчика события <span class="Term">УстановкаПараметровСеанса</span> и остается
подключенным до завершения сеанса. Обновление расширения (с помощью инструментов
администрирования) не приводит к обновлению расширения в существующих сеансах.
Существующие сеансы продолжат работу с той «версией» расширения, которое было
доступно в момент старта сеанса. Для того чтобы пользовательский сеанс начал
работать с новой «версией» расширения – необходимо выполнить перезапуск
сеанса.</p>

<p class="MsoNormalCxSpMiddle">Доступный
пользователю набор расширений зависит от набора используемых разделителей в
момент старта сеанса. При сохранении расширения в информационную базу, оно
будет записано со значениями разделителей, которые установлены в текущем
сеансе. В дальнейшем расширение используется только в тех сеансах, которые
имеют точно такой же набор разделителей. В связи с этим, к сеансу одного и тот
же пользователя, подключающегося к одной и той же разделенной информационной
базе с разным набором разделителей, может быть подключен разный набор расширений.
Для разделителя имеется возможность указать, будет разделитель участвовать в
разделении расширений или нет. В связи с этим следует понимать, что
вышеописанный механизм разделения расширений будет включать только те
разделители, для которых указана возможность разделения расширений.</p>

<p class="MsoNormalCxSpLast">Порядок
подключения расширений определяется назначением расширения. Расширения
подключаются в следующем порядке:</p>

<p class="MsoListNumberCxSpFirst">1.  <span class="Interface">Исправление</span>;</p>

<p class="MsoListNumberCxSpMiddle">2.  <span class="Interface">Адаптация</span>;</p>

<p class="MsoListNumberCxSpLast">3.  <span class="Interface">Дополнение</span>.</p>

<p class="MsoNormalCxSpFirst">Если
существует несколько расширений с одинаковым назначением – порядок
подключения расширений с одинаковым назначением в общем случае не определен.</p>

<p class="MsoNormalCxSpMiddle">При
попытке подключения расширений, каждое расширение последовательно проверяется
на соответствие контролируемых реквизитов между расширением и конфигурацией
информационной базы. Если хотя бы один контролируемый реквизит не проходит
проверку, пользователю выдается сообщение об ошибке и это расширение не
подключается. При проверке свойств с несколькими значениями (составной тип,
состав общего реквизита) значение из расширения контролируется на вхождение –
все значения, которые есть в расширении, должны быть в расширяемой конфигурации,
однако часть состава расширяемой конфигурации может не входить в контролируемое
свойство. Как следствие, все объекты расширения перестают участвовать в
формировании результирующей конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Если
при подключении расширений обнаружены проблемы, то пользователю выводится
диалог с информацией о том, с какими расширениями возникли проблемы, а детальный
список проблем доступен по нажатию на гиперссылку <span class="Interface">Информация для технической
поддержки</span>, доступная в этом диалоге.</p>

<p class="MsoNormalCxSpMiddle">Кроме
интерактивной проверки применимости, платформа «1С:Предприятие» предоставляет
возможность выполнять проверку применимости из кода на встроенном языке.
Имеется возможность выполнить проверку для конкретного расширения с помощью <span class="Term">метода ПроверитьВозможностьПрименения()</span>
объекта <span class="Term">РасширениеКонфигурации</span>.
Также имеется возможность выполнить проверку всех расширений, подключенных в
данный момент. Для этого следует использовать метод <span class="Term">ПроверитьВозможностьПримененияВсех()</span> менеджера
расширений конфигурации.</p>

<p class="MsoNormalCxSpLast">Смотри
также:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<a href="#_ref427770580">Общая
информация</a>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<A href="/db/content/v8310doc/src/руководство разработчика/глава 24. механизм разделения данных.htm?_=1496848987#_ref470180363">Разделение
расширений конфигурации</a>.</p>

<a name="_ref453933648"></a><a id="TI000001535" class="bookmark" name="issogl1_32.7_работа_с_расширениями_из_встроенного_языка"><h2>32.7. Работа с расширениями из встроенного языка</h2></a>

<p class="MsoNormalCxSpFirst">В
случае необходимости реализации собственных инструментов работы с расширениями
следует использовать специализированный программный интерфейс. Его методы
доступны в том случае, если текущий пользователь обладает правом <span class="Term">АдминистрированиеРасширенийКонфигурации</span>. Текущий
сеанс должен работать в небезопасном режим в том случае, если будет
использоваться метод <span class="Term">Записать()</span>
объекта <span class="Term">РасширениеКонфигурации</span>.</p>

<p class="MsoNormalCxSpMiddle">Программный
интерфейс предоставляется посредством специального менеджера расширений
конфигурации, который представлен свойством глобального контекста <span class="Term">РасширенияКонфигурации</span>. Подробное описание
методов приведено в синтакс-помощнике.</p>

<p class="MsoNormalCxSpLast">Из
встроенного языка имеется возможность выполнить проверку того, что объект
конфигурации расширен в данном сеансе работы. Для этого предназначен метод
объекта конфигурации <span class="Term">&lt;Объект
метаданных&gt;.ЕстьИзмененияРасширениямиКонфигурации()</span>. Данный
метод вернет значение <span class="Term">Истина</span>
в том случае, если в текущем сеансе выбранный объект конфигурации модифицирован
расширениями одним из следующих способов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
модифицировано свойство объекта конфигурации;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
добавлен новый дочерний объект объекта
конфигурации (форма, макет, команда и т. д.);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
модифицировано свойства одного из дочерних
объектов.</p>

<p class="MsoNormalCxSpFirst">С
помощью метода <span class="Term">&lt;Объект метаданных&gt;.РасширениеКонфигурации()</span>
имеется возможность определить, какому расширению конфигурации (или расширяемой
конфигурации) принадлежит объект конфигурации.</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>