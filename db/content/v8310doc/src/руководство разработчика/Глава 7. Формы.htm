<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Windows-1251">
		<title>&#1043;&#1083;&#1072;&#1074;&#1072; 7. &#1060;&#1086;&#1088;&#1084;&#1099;</title>
		<LINK REL="stylesheet" href="style.css?_=1496848987">
		<SCRIPT src="script.js?_=1496848987" TYPE="text/javascript"></script>		<!--[if !IE]>--><SCRIPT src="zeroclipboard.js?_=1496848987" TYPE="text/javascript"></script><!--<![endif]-->
	<meta name="robots" content="noarchive">
<meta name="googlebot" content="noarchive">
<link href="/db/content/v8310doc/src/руководство разработчика/глава 7. формы.htm" rel="canonical">
<link href="/static/its.content.css?_=1490872753" type="text/css" rel="stylesheet">
<script type="text/javascript" src="/static/its.content.js?_=1489758009"></script>
<!--[if lt IE 9]><script type="text/javascript" src="/static/html5shiv.js?_=1484636606"></script><![endif]-->

</head>
	<body class="v8310doc">
<a name="_ref216521373"></a><a name="_ref216266202"></a><a name="_ref391291748"></a><a name="_ref391291747"></a><a name="_ref237783401"></a><a id="TI000000391" class="bookmark"><h1>Глава 7.  Формы</h1></a>

<a name="_ref397508808"></a><a name="_ref397508807"></a><a id="TI000001468" class="bookmark" name="issogl1_7.1_общая_информация"><h2>7.1. Общая информация</h2></a>

<p class="MsoNormalCxSpFirst"><span class="Bold">Форма</span> – это объект, созданный для ввода и просмотра
какой-либо информации, а также для выполнения управления различными процессами.
С помощью форм программа запрашивает у пользователя ту информацию, которая
необходима ей для дальнейшей работы, либо выдает какую-либо информацию пользователю
для просмотра и редактирования.</p>

<p class="MsoNormalCxSpMiddle">Основное
назначение формы – предоставить пользователю удобное средство для ввода и
просмотра информации. Как и бумажный документ, форма позволяет быстро ввести
необходимую информацию и запомнить ее для последующей обработки, а при
необходимости вновь вернуться к ранее введенным данным для просмотра или
корректировки.</p>

<p class="MsoNormalCxSpMiddle">Отображаемая
часть формы (видимая пользователю) описывается как дерево, включающее <span class="Bold">элементы формы</span>. Элементы могут представлять собой поля ввода,
флажки, переключатели, кнопки и т. д. Кроме того, элемент может быть
группой, включающей другие элементы. Группа может представляться как панель с
рамкой, панель со страницами (закладками), собственно страница, командная
панель. Помимо этого элемент может представлять собой таблицу, которая тоже
включает элементы (колонки). Структура элементов описывает то, как будет
выглядеть форма. А вся функциональность формы описывается в виде
реквизитов и команд. <span class="Bold">Реквизиты</span> – это данные,
с которыми работает форма, а <span class="Bold">команды</span> – выполняемые
действия. Таким образом, разработчик в редакторе формы должен включить в форму
необходимые реквизиты и команды, создать отображающие их элементы формы и, если
необходимо, скомпоновать элементы в группы.</p>

<p class="MsoNormalCxSpMiddle">Система
может автоматически создавать форму прикладного объекта, но разработчик может
сам создать форму и определить состав ее реквизитов, команд и отображаемых
элементов. На основе этого логического описания система автоматически формирует
внешний вид формы для отображения пользователю. При этом системой учитываются
различные свойства отображаемых данных (например, тип), чтобы максимально
удобно для пользователя расположить элементы формы. Разработчик может влиять на
расположение элементов различными установками. Он может определять порядок
элементов, указывать желаемую ширину и высоту. Однако это является только
некоторой дополнительной информацией, помогающей системе отобразить форму.</p>

<p class="MsoNormalCxSpMiddle">В формах
разработчик может использовать не только команды самой формы, но и глобальные
команды, используемые в командном интерфейсе всей конфигурации. Кроме того,
реализована возможность создания параметризуемых команд, которые будут
открывать другие формы с учетом конкретных данных текущей формы. Например, это
может быть вызов отчета по остаткам на том складе, который выбран сейчас в
форме расходной накладной.</p>

<p class="MsoNormalCxSpMiddle">В формах существует
механизм привязки сообщений, выдаваемых пользователю, к данным формы. Это
позволяет системе визуально отмечать и активизировать элементы формы, при
заполнении которых пользователь допустил ошибку.</p>

<p class="MsoNormalCxSpMiddle">Также
форма автоматически учитывает ролевую доступность данных. Так, например, если
какой-либо реквизит отображаемого объекта недоступен для просмотра
определенному пользователю, то система автоматически удалит связанный с этим
реквизитом элемент формы и перестроит форму.</p>

<p class="MsoNormalCxSpLast">Форма
создается в редакторе формы, который доступен в режиме Конфигуратор (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref214865442">здесь</a>). В этом редакторе определяются:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Реквизиты формы</span> – предназначены
для хранения данных, с которыми работает форма (см. <a href="#_ref222923530">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Параметры формы</span> – предназначены
для организации связи между формами и управления функциональностью формы при ее
открытии (см. <a href="#_ref343775697">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Команды формы</span> – предназначены
для выполнения различных действий внутри формы (см. <a href="#_ref217219499">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Модуль формы</span> – содержит
программный код, связанный с функционированием формы (см. <a href="#_ref216510534">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Элементы формы</span> – предназначены
для отображения и редактирования реквизитов формы, а также для отображения и выполнения
команд (см. <a href="#_ref216268390">здесь</a>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Командный интерфейс</span> –
содержит команды, которые могут выполняться в форме и предоставлены глобальным
командным интерфейсом и командами формы (см. <a href="#_ref343775740">здесь</a>).</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Формы одновременно присутствуют и на стороне сервера, и на стороне клиента. Об
этом всегда следует помнить при разработке формы.</p>

<a name="_ref222923530"></a><a name="_ref389752945"></a><a name="_ref389752944"></a><a id="TI000000392" class="bookmark" name="issogl1_7.2_реквизиты_формы"><h2>7.2. Реквизиты формы</h2></a>

<a id="TI000001574" class="bookmark" name="issogl2_7.2.1_общая_информация"><h3>7.2.1. Общая информация</h3></a>

<p class="MsoNormal">Набор реквизитов
формы описывает состав данных, которые отображаются, редактируются и хранятся в
форме. При этом реквизиты формы сами по себе не обеспечивают возможности отображения
и редактирования данных. Для отображения и редактирования служат элементы
формы, связанные с реквизитами формы. Совокупность всех реквизитов формы будем
называть <span class="Bold">данными формы</span>.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Необходимо помнить, что все данные формы должны быть описаны в виде реквизитов.
Не допускается использование переменных модуля формы в качестве источников
данных для элементов формы.</p>

<p class="MsoNormalCxSpFirst">В процессе
разработки формы можно явно задать возможность просмотра и редактирования
конкретных реквизитов формы, в разрезе ролей, с помощью свойств <span class="Interface">Просмотр</span> и <span class="Interface">Редактирование</span>
(подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref200447246">здесь</a>). Кроме того, доступность того или иного реквизита в
самой форме можно настраивать с помощью функциональных опций (подробнее о
функциональных опциях см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref264542890">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Имеется
возможность назначить <span class="Interface">Основной реквизит</span> формы, т. е. реквизит,
который будет определять стандартную функциональность формы (расширение формы).</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Следует помнить, что основной реквизит у формы может быть только один.</p>

<p class="MsoNormal"><span class="Bold">Расширение
формы</span> – это дополнительные свойства, методы и параметры формы
объекта <span class="Term">УправляемаяФорма</span>,
характерные для типа основного реквизита формы.</p>

<a name="_ref227499547"></a><a name="_ref409104736"></a><a name="_ref409104735"></a><a id="TI000000393" class="bookmark" name="issogl2_7.2.2_типы_данных_формы"><h3>7.2.2. Типы данных формы</h3></a>

<p class="MsoNormal">Форма оперирует
ограниченным набором типов данных:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Типы, которые непосредственно используются в
форме, – это те типы, которые существуют на стороне тонкого клиента и веб-клиента
(например, <span class="Term">Число</span>, <span class="Term">СправочникСсылка.Товары</span>, <span class="Term">ГрафическаяСхема</span>, <span class="Term">ТабличныйДокумент</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Типы, которые будут преобразованы в специальные
типы данных, – типы данных формы. Такие типы отображаются в списке реквизитов
формы в круглых скобках, например <span class="Interface">(СправочникОбъект.Товары)</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Динамический список – специальный тип
данных, который позволяет организовать отображение на форме произвольной
информации из таблиц базы данных. Для этого необходимо указать отображаемую таблицу
или описать получаемую выборку на языке запросов. Механизм основан на системе
компоновки данных и предоставляет возможности для сортировки, отбора, поиска,
группировки и условного оформления получаемых данных.</p>

<p class="MsoNormalCxSpFirst">Некоторые
прикладные типы (такие как <span class="Term">СправочникОбъект</span>
и т. д.) не существуют на стороне тонкого клиента и веб-клиентов.
Поэтому для представления в форме таких прикладных типов в платформе введены
специальные типы данных, предназначенные для работы в формах. Эта особенность
обуславливает необходимость выполнять преобразование прикладных объектов в данные
формы (и обратно).</p>

<p class="MsoNormalCxSpLast">Используются
следующие типы данных:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ДанныеФормыСтруктура</span> – содержит набор
свойств произвольного типа. Свойствами могут быть другие структуры, коллекции
или структуры с коллекциями. Таким типом представляется, например, в форме <span class="Term">СправочникОбъект</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ДанныеФормыКоллекция</span> – это список типизированных
значений, похожий на массив. Доступ к элементу коллекции осуществляется по
индексу или по идентификатору. В коллекциях, полученных на основе наборов
записей регистров или табличных частей объектов, поле элемента коллекции <span class="Term">НомерСтроки</span> не соответствует реальному индексу
элемента коллекции. Доступ по идентификатору может отсутствовать в некоторых
случаях. Это обусловлено типом прикладного объекта, который представлен этой
коллекцией. Идентификатором может быть любое целое число. Таким типом
представляется, например, в форме табличная часть.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ДанныеФормыСтруктураСКоллекцией</span> – это
объект, который представлен в виде структуры и коллекции одновременно. С ним
можно обращаться как с любой из этих сущностей. Таким типом представляется,
например, в форме набор записей.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ДанныеФормыДерево</span> – объект предназначен
для хранения иерархических данных.</p>

<p class="NoteCxSpFirst"><span class="Note">Внимание!</span> Не рекомендуется использовать данные формы в
качестве параметров процедур и функций, выполняющих передачу управления с
клиента на сервер, а также в качестве возвращаемых значений функций, если при
этом управление передается на клиента.</p>

<p class="NoteCxSpLast"><span class="Note">Внимание!</span> При вызове серверных процедур и функций и
возврате управления на клиента выполняется передача только изменений в данных
формы. Если в качестве типа реквизита формы выбран тип <span class="Interface">Произвольный</span> и
в качестве значения реквизита выбрано мутабельное значение, то для того, чтобы данные
между клиентом и сервером (и обратно) передавались корректно, нужно после
изменения мутабельного значения снова его присвоить реквизиту формы.</p>

<p class="MsoNormalCxSpFirst">Прикладной
объект представлен либо одним, либо несколькими элементами данных формы. В
общем виде иерархия и состав данных формы зависят от сложности и взаимосвязи
прикладных объектов формы.</p>

<p class="MsoNormalCxSpLast">Например,
документ, содержащий табличную часть, будет представлен объектом типа <span class="Term">ДанныеФормыСтруктура</span> (собственно документ),
которому подчинен объект типа <span class="Term">ДанныеФормыКоллекция</span>
(табличная часть документа).</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Во время разработки конфигурации важно помнить, что прикладные объекты доступны
только на сервере, в то время как объектами данных форм можно пользоваться и на
сервере, и на клиенте.</p>

<p class="MsoNormal">При формировании
реквизитов формы необходимо учитывать ряд ограничений:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В данных формы могут храниться данные только тех
типов системы «1С:Предприятие», для которых указан возможность
XDTO-сериализации (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 4. встроенный язык.htm?_=1496848987#_ref417645360">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Запрещено присваивание реквизитам формы значений
типа <span class="Term">Массив</span> и <span class="Term">Соответствие</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для реквизитов произвольного типа объектов <span class="Term">ДанныеФормыСтруктура</span>, <span class="Term">ДанныеФормыЭлементКоллекции</span>, <span class="Term">ДанныеФормыЭлементДерева</span>, <span class="Term">ДанныеФормыСтруктураСКоллекцией</span> запрещается
присваивание значений типа <span class="Term">Массив</span>
и <span class="Term">Соответствие</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Не рекомендуется использовать значения типов <span class="Term">Массив</span> и <span class="Term">Соответствие</span>
в качестве элементов коллекций типа <span class="Term">Структура</span>
или <span class="Term">СписокЗначений</span>. В
вышеперечисленных случаях рекомендуется использовать фиксированные коллекции: <span class="Term">ФиксированныйМассив</span>, <span class="Term">ФиксированноеСоответствие</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Не рекомендуется использовать типы <span class="Term">Структура</span> и <span class="Term">СписокЗначений</span>
в данных реквизитов формы (т. е. в реквизитах реквизитов).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если реквизит формы имеет тип <span class="Term">Произвольный</span> или в качестве значения такого
реквизита выступает коллекция (массив, соответствие и т. д.), то не
следует устанавливать таким реквизитам (или свойствам коллекций) значения,
содержащие прикладные объекты:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Term">ДокументОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">СправочникОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">БизнесПроцессОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ЗадачаОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ПланВидовХарактеристикОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ПланВидовРасчетаОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ПланОбменаОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ПланСчетовОбъект</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">ВнешнийИсточникДанныхКубТаблицаИзмеренияОбъект</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Term">ВнешнийИсточникДанныхТаблицаОбъект</span>.</p>

<p class="MsoNormalCxSpFirst">Фактически
можно сказать, что данные формы – это унифицированное представление данных
различных прикладных объектов, с которыми форма работает единообразно, и которые
присутствуют и на сервере, и на клиенте. То есть форма содержит некоторую «проекцию»
данных прикладных объектов в виде своих собственных типов данных и выполняет
преобразование между ними при необходимости. Однако, если разработчик
конфигурации реализует свой алгоритм обработки данных, то преобразование данных
(из специализированных типов в прикладные и обратно) он должен выполнять
самостоятельно.</p>

<p class="MsoNormalCxSpLast">При
редактировании реквизитов формы имеется возможность влиять на передачу данных
между клиентом и сервером во время работы формы. Для этого служит колонка редактора
реквизитов <span class="Interface">Использовать всегда</span>. Действие этого свойства различается
для трех типов реквизитов:</p>

<p class="MsoListBullet">&#9679; 
Для реквизита, подчиненного динамическому списку
(колонке динамического списка):</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Свойство включено – реквизит всегда
считывается из базы данных и включается в данные формы.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство выключено – реквизит считывается
из базы данных и включается в данные формы только тогда, когда есть видимый в
данный момент элемент формы, связанный с реквизитом или его подчиненным
реквизитом.</p>

<p class="MsoListBullet">&#9679; 
Для реквизита, подчиненного коллекции движений:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Свойство включено – движения документа
считываются из базы данных и будут присутствовать в данных формы.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство выключено – движения документа не
будут считываться из базы данных и не попадут в данные формы (если нет элемента
формы, ссылающегося на движения документа).</p>

<p class="MsoListBullet">&#9679; 
Остальные реквизиты формы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Свойство включено – реквизит будет
присутствовать в данных формы вне зависимости от того, есть или нет хоть один
элемент формы, который связан с реквизитом или его подчиненным реквизитом.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство выключено – реквизит будет
присутствовать в данных формы только в том случае, если есть элемент формы,
связанный с реквизитом или его подчиненным реквизитом. В отличие от реквизитов
динамического списка, здесь не играет роли видимость элемента, связанного с
реквизитом.</p>

<p class="NoteCxSpFirst"><span class="Note">Примечание 1.</span> Следует помнить, что свойство, установленное
у родительского реквизита, действует на все подчиненные реквизиты. Например,
если свойство <span class="Interface">Использовать всегда</span> снято у табличной части документа,
то система считает, что это свойство снято и у всех подчиненных реквизитов
(несмотря на фактическое состояние свойства).</p>

<p class="NoteCxSpMiddle"><span class="Note">Примечание 2.</span> Для реквизитов формы, имеющих объектный
тип (<span class="Term">СправочникОбъект</span>, <span class="Term">ДокументОбъект</span> и т. д.), реквизиты <span class="Term">Ссылка</span>, <span class="Term">ПометкаУдаления</span>
и <span class="Term">ЭтоГруппа</span> всегда
присутствуют в данных формы (если соответствующий реквизит есть у объекта), вне
зависимости от состояния свойства <span class="Interface">Использовать всегда</span>.</p>

<p class="NoteCxSpLast"><span class="Note">Примечание 3.</span> Запрещено присваивание реквизитам данных
формы значений других объектов данных формы.</p>

<p class="MsoNormalCxSpFirst">Если в
редакторе реквизитов (колонка <span class="Interface">Тип</span>) описание типа отображается в круглых скобках,
например <span class="Interface">(СправочникОбъект.Товары)</span>,
то это означает, что прикладной тип будет преобразован к типам, образующим
данные формы.</p>

<p class="MsoNormalCxSpMiddle">Если в
данных формы оказывается недопустимый тип (например, как реквизит реквизита
формы), то в редакторе реквизитов формы, рядом с именем типа данного реквизита,
будет выводиться надпись <span class="Interface">(Недоступен в данных формы)</span>. В режиме 1С:Предприятие
поле формы, соответствующее данному реквизиту, не будет создано. Никаких ошибок
выводиться не будет. При копировании и редактировании объектов, содержащих
такие данные, следует самостоятельно реализовывать программный код,
обеспечивающий копирование и работу с такими реквизитами в форме.</p>

<p class="MsoNormalCxSpLast">Далее
рассмотрим некоторые особенности реквизитов форм разных типов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для реквизитов формы типа <span class="Term">ТаблицаЗначений</span> и <span class="Term">ДеревоЗначений</span> имеется возможность добавлять
колонки (команда <span class="Interface">Добавить колонку реквизита</span>). Это определяет структуру данных
создаваемой коллекции.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для реквизитов типа <span class="Term">ДанныеФормыКоллекция</span> (например, табличные
части объектов) и <span class="Term">ДанныеФормыСтруктураСКоллекцией</span>
(например, наборы записей регистров) имеется возможность задавать дополнительные
колонки реквизитов (команда <span class="Interface">Добавить колонку реквизита</span>), которые не имеют связи с
данными, хранящимися в информационной базе.</p>

<p class="Indentlist">Эти колонки будут
создаваться системой в момент создания данных формы. Обращение к таким
реквизитам доступно как на клиенте, так и на сервере.</p>

<p class="Lang-subheader">Пример
заполнения колонки реквизита, не связанной с данными:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриЧтенииНаСервере<span class="operator">(</span>ТекущийОбъект<span class="operator">)</span>
    <span class="keyword">Для</span> <span class="keyword">Каждого</span> Строка <span class="keyword">Из</span> Объект<span class="operator">.</span>Товары <span class="keyword">Цикл</span>
        <span class="comment">// ВидТовара – реквизит, не связанный с данными</span>
        Строка<span class="operator">.</span>ВидТовара <span class="operator">=</span> Строка<span class="operator">.</span>Товар<span class="operator">.</span>Вид<span class="operator">;</span>
    <span class="keyword">КонецЦикла</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для реквизита типа <span class="Term">СписокЗначений</span> имеется возможность установить
тип значения (свойство <span class="Interface">Тип значения</span>), которое будет хранить список. При этом
система будет автоматически ограничивать тип добавляемых данных при интерактивном
добавлении. Также при этом не запрещается программное добавление, но будет
выполняться попытка приведения значения добавляемого типа к ограничивающему
типу (или составному типу). Свойство <span class="Interface">Тип значения</span> также можно связать с элементом формы и
получить возможность интерактивно ограничивать типы данных, которые могут быть
добавлены в список значений.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для реквизита типа <span class="Term">ДинамическийСписок</span> имеется возможность задать
параметры списка: основную таблицу, настройки и т. д. Подробнее
см. <a href="#_ref221603703">здесь</a>.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Колонки реквизитов, не связанные с данными, не участвуют в преобразовании
значений между данными формы и объектами информационной базы и обратно.</p>

<p class="MsoNormalCxSpFirst">Описание свойств
<span class="Interface">Просмотр</span>
и <span class="Interface">Редактирование</span>
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref200447246">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle">Изменения
данных формы отображаются элементами формы после окончания выполнения
встроенного языка или после принудительного вызова метода <span class="Term">ОбновитьОтображениеДанных()</span>. Рассмотрим
пример.</p>

<p class="MsoNormalCxSpLast">Допустим, в
форме есть реквизит <span class="Term">Счетчик</span>
типа <span class="Term">Число</span>. Этот
реквизит отображается на форме полем типа <span class="Interface">Поле индикатора</span>. Пусть есть
некоторое действие, ход выполнения которого должен отображаться индикатором.
Действие вызывается нажатием кнопки на форме:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ОбработчикКомандыФормы<span class="operator">(</span><span class="operator">)</span>
    <span class="keyword">Для</span> Счетчик<span class="operator">=</span><span class="number">1</span> <span class="keyword">по</span> <span class="number">100</span> <span class="keyword">Цикл</span>
        ВыполнитьДействие<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormalCxSpFirst">Если
нажать кнопку, инициирующую эту команду, в режиме 1С:Предприятия, то индикатор
вначале будет в крайнем левом положении, а потом – сразу в крайнем правом
(считаем, что метод <span class="Term">ВыполнитьДействие()</span>
выполняется какое-то время, что должно позволить увидеть изменение индикатора).
То есть индикатор будет обновлен только после того, как закончится исполнение
обработчика команды.</p>

<p class="MsoNormalCxSpLast">Для того
чтобы индикатор отображал ход выполнения процесса, нужно код обработчика
заменить нижеследующим:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ОбработчикКомандыФормы<span class="operator">(</span><span class="operator">)</span>
    <span class="keyword">Для</span> Счетчик<span class="operator">=</span><span class="number">1</span> <span class="keyword">по</span> <span class="number">100</span> <span class="keyword">Цикл</span>
        ВыполнитьДействие<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
        ОбновитьОтображениеДанных<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">После такого
изменения индикатор начнет изменяться во время исполнения кода, расположенного
в обработчике команды.</p>

<p class="Note"><span class="Note">Примечание.</span>
В веб-клиенте вызов метода <span class="Term">ОбновитьОтображениеДанных()</span>
приведет к обновлению элементов формы только после окончания выполнения кода на
встроенном языке.</p>

<a name="_ref455675024"></a><a name="_ref455675023"></a><a id="TI000000394" class="bookmark" name="issogl2_7.2.3_преобразование_данных_прикладных_объектов_в_данные_формы_и_обратно"><h3>7.2.3. Преобразование данных прикладных объектов в данные формы и обратно</h3></a>

<p class="MsoNormal">Для конвертирования
прикладных объектов в данные формы и обратно существует набор глобальных
методов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ЗначениеВДанныеФормы()</span>,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ДанныеФормыВЗначение()</span>,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">КопироватьДанныеФормы()</span>.</p>

<p class="MsoNormalCxSpFirst">Методы,
работающие с прикладными объектами, доступны только в серверных процедурах.
Метод для копирования значений между данными формы доступен на сервере и на
клиенте, так как не требует прикладных объектов в качестве параметров.</p>

<p class="MsoNormalCxSpLast">Во время
конвертирования данных формы в прикладной объект нужно учитывать их
совместимость.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ЗначениеВДанныеФормы()</span> – преобразует
объект прикладного типа в данные формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ДанныеФормыВЗначение()</span> – преобразует данные
формы в объект прикладного типа.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">КопироватьДанныеФормы()</span> – производит
копирование данных формы, обладающих совместимой структурой. Возвращает значение
<span class="Term">Истина</span>, если копирование
произведено, или <span class="Term">Ложь</span>,
если структура объектов несовместима.</p>

<p class="MsoNormal">При преобразовании
данных формы в прикладные объекты и обратно используется кеширование объектов,
но при этом выполняется проверка актуальности версии объекта в кеше.</p>

<p class="Note"><span class="Note">Примечание.</span>
При выполнении стандартных действий (открытие формы, выполнение стандартной
команды <span class="Term">Записать</span> и т. д.)
в форме с основным реквизитом преобразование выполняется автоматически.</p>

<p class="MsoNormal">Приведем пример,
как использовать преобразование данных в собственных алгоритмах.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    ОбъектТовар <span class="operator">=</span> Товары<span class="operator">.</span>НайтиПоНаименованию<span class="operator">(</span><span class="string">&quot;Кофейник&quot;</span><span class="operator">)</span><span class="operator">.</span>ПолучитьОбъект<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    ЗначениеВДанныеФормы<span class="operator">(</span>ОбъектТовар<span class="operator">,</span> Объект<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> Записать<span class="operator">(</span><span class="operator">)</span>
    ЗаписатьНаСервере<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ЗаписатьНаСервере<span class="operator">(</span><span class="operator">)</span>
    ОбъектТовар <span class="operator">=</span>     ДанныеФормыВЗначение<span class="operator">(</span>Объект<span class="operator">,</span> Тип<span class="operator">(</span><span class="string">&quot;СправочникОбъект.Товары&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    ОбъектТовар<span class="operator">.</span>Записать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Также у объекта <span class="Term">УправляемаяФорма</span> существуют методы, доступные
на сервере:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ЗначениеВРеквизитФормы()</span> – выполняет
преобразование объекта прикладного типа в заданный реквизит формы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">РеквизитФормыВЗначение()</span> – преобразует
реквизит данных формы в объект прикладного типа.</p>

<p class="MsoNormalCxSpFirst">Использование
данных методов обычно удобнее, так как они имеют, например, информацию о типе
реквизита формы. Кроме того, метод <span class="Term">РеквизитФормыВЗначение()</span>
выполняет установку соответствия данных формы и объекта, которая используется
при формировании сообщений (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 6. командный интерфейс.htm?_=1496848987#_ref220330559">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Также
следует помнить, что при преобразовании в данные формы (как с помощью метода <span class="Term">ЗначениеВДанныеФормы()</span>, так и с помощью метода
<span class="Term">ЗначениеВРеквизитФормы()</span>)
объектов типа <span class="Term">ТаблицаЗначений</span>
или <span class="Term">ДеревоЗначений</span>
нужно учитывать следующую особенность: в преобразуемом объекте должны
существовать все колонки, которые существуют в данных формы.</p>

<p class="NoteCxSpFirst"><span class="Note">ВНИМАНИЕ!</span> Колонки реквизитов, не связанные с данными
(см. <a href="#_ref227499547">здесь</a>), не участвуют в преобразовании значений между данными
формы и объектами информационной базы и обратно. Колонки, отсутствующие в
данных объекта, очищаются при преобразовании в данные формы.</p>

<p class="NoteCxSpLast">При переносе
объекта в данные формы платформой, или при вызове методов <span class="Term">ЗначениеВДанныеФормы()</span>, <span class="Term">ЗначениеВРеквизитФормы()</span>, переносятся только
данные объекта. Внутренние состояние объекта в данные формы не переносится.
Например, значение ссылки нового, которая установлена в объект методом <span class="Term">УстановитьСсылкуНового()</span>, будет утеряна в
процессе преобразования объекта в данные формы и обратно.</p>

<p class="MsoNormal">В качестве первого
параметра методов <span class="Term">РеквизитФормыВЗначение()</span>
и <span class="Term">ДанныеФормыВЗначение()</span>
могут выступать только реквизиты формы следующих типов: <span class="Term">ДанныеФормыСтруктура</span>, <span class="Term">ДанныеФормыКоллекция</span>, <span class="Term">ДанныеФормыСтруктураСКоллекцией</span>, <span class="Term">ДанныеФормыДерево</span>. Приведем пример
использования этих методов.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПересчитатьНаСервере<span class="operator">(</span><span class="operator">)</span>
    <span class="comment">// Преобразует реквизит Объект в прикладной объект.</span>
    Документ <span class="operator">=</span> РеквизитФормыВЗначение<span class="operator">(</span><span class="string">&quot;Объект&quot;</span><span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// Выполняет пересчет методом, определенным в модуле документа.</span>
    Документ<span class="operator">.</span>Пересчитать<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="comment">// Преобразует прикладной объект обратно в реквизит.</span>
    ЗначениеВРеквизитФормы<span class="operator">(</span>Документ<span class="operator">,</span> <span class="string">&quot;Объект&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="_ref221603703"></a><a id="TI000000396" class="bookmark" name="issogl2_7.2.4_свойства_реквизитов"><h3>7.2.4. Свойства реквизитов</h3></a>

<p class="MsoNormalCxSpFirst">Данный раздел содержит описание некоторых
свойств реквизитов формы.</p>

<p class="MsoNormalCxSpMiddle"><span class="Interface">Заголовок</span> –
текст, который используется в качестве заголовка элемента формы, связанного с
данным реквизитом, если не задано свойство элемента формы <span class="Interface">Заголовок</span>.</p>

<p class="MsoNormalCxSpMiddle"><span class="Interface">Основной реквизит</span> –
определяет, что данный реквизит формы является основным и определяет расширение
формы.</p>

<p class="MsoNormalCxSpLast"><span class="Interface">Сохраняемые данные</span> –
если для реквизита установлено это свойство, то интерактивное изменение такого
реквизита будет приводить:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
К попытке блокировки связанного реквизита формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Установке признака изменения у формы (флаг <span class="Term">Модифицированность</span>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если у реквизита установлено свойство <span class="Interface">Сохраняемые данные</span>
и форма находится в режиме <span class="Interface">Только просмотр</span>,
то все элементы формы, связанные с этим реквизитом, также будут находиться в
состоянии <span class="Interface">Только просмотр</span>.</p>

<p class="MsoNormal"><span class="Interface">Проверка заполнения</span> –
определяет необходимость проверки данного реквизита на заполнение (значение
свойства равно <span class="Interface">Выдавать ошибку</span>).
Проверка заполнения возможна только для реквизитов следующих типов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
примитивных типов данных (<span class="Term">Число</span>,
<span class="Term">Строка</span>, <span class="Term">Булево</span>,
<span class="Term">Дата</span>, любые типы ссылок, стандартный период),</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
список значений,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
дерево значений,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
таблица значений.</p>

<p class="Note"><span class="Note">Примечание.</span> Проверка заполнения
реквизитов выполняется аналогично функции <span class="Term">ЗначениеЗаполнено()</span>.
Проверка заполнения табличных частей подразумевает, что табличная часть считается
заполненной, когда в ней присутствует хотя бы одна строка.</p>

<a name="_ref343775697"></a><a name="_ref277428095"></a><a name="_ref271715774"></a><a name="_ref226351125"></a><a id="TI000001654" class="bookmark" name="issogl1_7.3_специальные_типы_реквизитов_формы"><h2>7.3. Специальные типы реквизитов формы</h2></a>

<a name="_ref326171514"></a><a name="_ref326171513"></a><span class="Hidden"></span><a name="_ref370224106"></a><a id="TI000000395" class="bookmark" name="issogl2_7.3.1_динамический_список"><h3>7.3.1. Динамический список</h3></a>

<a name="_ref473220820"></a><a id="TI000001333" class="bookmark" name="issogl3_7.3.1.1_общая_информация"><h4>7.3.1.1. Общая информация</h4></a>

<p class="MsoNormal">Динамический
список является специальным типом данных, который позволяет отображать на форме
произвольную информацию из таблиц базы данных. Для этого нужно указать таблицу,
данные из которой необходимо отобразить, или описать получаемую выборку на
языке запросов.</p>

<p class="Regularbeforepicture">Механизм
основан на системе компоновки данных (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 10. система компоновки данных.htm?_=1496848987#_ref166301231">здесь</a>) и предоставляет возможности для сортировки, отбора,
поиска, группировки и условного оформления получаемых данных. При этом
источником данных служит запрос, который либо формируется системой
автоматически (на основании указанных данных), либо пишется разработчиком
вручную.</p>

<p class="Picture"><IMG src="_img/img00209.gif?_=1496848987" WIDTH="800" ALT HEIGHT="475"></p>

<p class="MsoCaption"><a name="_ref221333402">Рис. </a>210. Варианты
создания динамического списка</p>

<p class="MsoNormal">При
создании реквизита формы типа <span class="Term">ДинамическийСписок</span> разработчик может выбрать
два способа формирования запроса к данным:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Заданием основной таблицы – в этом случае
достаточно просто указать таблицу (свойство <span class="Interface">Основная таблица</span>),
из которой необходимо получать данные, и система будет автоматически
формировать запрос к данным (см. правую часть на <a href="#_ref221333402">рис.210</a>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Ручным формированием запроса – для этого
нужно установить свойство <span class="Interface">Произвольный запрос</span>
(см. левую часть <a href="#_ref221333402">рис.210</a>). После этого будет доступно ручное формирование
запроса получения данных из информационной базы.</p>

<p class="MsoNormalCxSpFirst">С
помощью запроса можно выполнять выборку данных из нескольких таблиц, поэтому
можно указать основную таблицу. Это нужно для того, чтобы динамический список
мог определить, какие данные главные, а какие – второстепенные, и мог
правильно выбирать и отображать информацию, а также предоставлять стандартные
команды. Однако если в запросе невозможно определить основную таблицу, то ее
можно не указывать, но тогда динамический список не будет предоставлять
команды, связанные с основной таблицей. Кроме того, в этом случае (без указания
основной таблицы) будет существенно снижена эффективность получения данных
динамическим списком.</p>

<p class="MsoNormalCxSpMiddle">В
целях повышения производительности, рекомендуется все соединения, используемые
в произвольном запросе только для получения дополнительных данных, делать
необязательными с помощью расширения языка запросов системы компоновки данных
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 10. система компоновки данных.htm?_=1496848987#_ref428962417">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Для
динамического списка, являющегося основным реквизитом формы, имеется
возможность устанавливать значения отбора с помощью параметра формы <span class="Term">Отбор</span> (подробнее о параметрах формы
см. <a href="#_ref277428095">здесь</a>). Для этого необходимо, чтобы имя свойства структуры,
находящееся в параметре <span class="Term">Отбор</span>, совпало с именем поля отбора
динамического списка. В этом случае значение свойства структуры будет
установлено в качестве правого значения элемента отбора. Если в качестве
значения элемента параметра <span class="Term">Отбор</span> формы динамического списка передан
массив, фиксированный массив или список значений, то в отбор добавляется
условие с вариантом <span class="Interface">В Списке</span>, в
правое значение которого помещается список значений (в который преобразуются
массив и фиксированный массив).</p>

<p class="MsoNormalCxSpLast">В
качестве произвольного запроса в динамическом списке может выступать запрос, в
котором для формирования значения какого-либо поля используется параметр,
например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span>
    <span class="keyword">ВЫБОР</span>
        <span class="keyword">КОГДА</span> Доставка<span class="operator">.</span>Коэффициент <span class="operator">=</span> <span class="number">1</span>
            <span class="keyword">ТОГДА</span> &Представление
        <span class="keyword">ИНАЧЕ</span> Доставка<span class="operator">.</span> Коэффициент
    <span class="keyword">КОНЕЦ</span> <span class="keyword">КАК</span> Коэффициент
<span class="keyword">ИЗ</span>
    Документ<span class="operator">.</span>ДоставкаПродукции <span class="keyword">КАК</span> Доставка</pre>

<p class="MsoNormal">При
этом если тип значения параметра отличается от типа реквизита объекта (например,
<span class="Term">Реквизит1</span> имеет тип <span class="Term">Число</span>, а значение параметра – тип <span class="Term">Строка</span>), то для корректного отображения поля следует
выполнить явное приведение значения параметра к нужному типу:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span>
    <span class="keyword">ВЫБОР</span>
        <span class="keyword">КОГДА</span> Доставка<span class="operator">.</span>Коэффициент <span class="operator">=</span> <span class="number">1</span>
            <span class="keyword">ТОГДА</span> ВЫРАЗИТЬ<span class="operator">(</span>&Представление <span class="keyword">КАК</span> Строка<span class="operator">(</span><span class="number">100</span><span class="operator">)</span><span class="operator">)</span>
        <span class="keyword">ИНАЧЕ</span> Доставка<span class="operator">.</span> Коэффициент
    <span class="keyword">КОНЕЦ</span> <span class="keyword">КАК</span> Коэффициент
<span class="keyword">ИЗ</span>
    Документ<span class="operator">.</span>ДоставкаПродукции <span class="keyword">КАК</span> Доставка</pre>

<p class="MsoNormalCxSpFirst">Если
поле, по которому устанавливается отбор, отключено с помощью функциональных
опций, то отбор по такому полю не устанавливается, даже если значение отбора
передано в качестве параметров формы или связей параметров выбора.</p>

<p class="MsoNormalCxSpLast">С
помощью свойства <span class="Interface">Динамическое
считывание данных</span> динамическому списку указывается на необходимость
считывать данные небольшими порциями (подробнее про способы получения данных
динамическим списком и кешировании данных см. <a href="#_ref441142953">здесь</a>). Независимо от этого признака действуют следующие
условия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если установлен режим просмотра в виде
иерархического списка, будут считываться только данные текущей группы и данные
всех родительских элементов (без подчиненных элементов).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если установлен режим просмотра в виде дерева,
то будут считываться только данные открытых узлов дерева.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Не поддерживается единовременная загрузка данных
динамического списка в случае установленного иерархического просмотра (свойство
<span class="Interface">Отображение</span> установлено в значение <span class="Interface">Дерево</span>) и начальном отображении дерева, установленном в
значение <span class="Interface">Раскрывать все уровни</span>. Для получения данных будет выполнено
столько запросов к серверу, сколько узлов находится в отображаемом списке.</p>

<p class="MsoNormal">Свойство <span class="Interface">Получение представлений для невидимых полей</span> управляет
получением представлений для полей списка, которые не отображаются на форме или
связаны с фактически невидимыми элементами формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
свойство имеет значение <span class="Term">Истина</span> –
для тонкого и веб-клиента динамический список получает представления для всех полей
ссылочного типа, которые передаются на клиента.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
свойство имеет значение <span class="Term">Ложь</span> –
для тонкого и веб-клиента динамический список получает представления только для
тех полей ссылочного типа, которые отображаются фактически видимыми элементами
формы. Если при этом таблица управляемой формы находится в режиме выбора, то
представление для ключевых полей получается в любом случае.</p>

<p class="Note"><span class="Note">Совет!</span> Для динамического списка с
большим количеством ссылочных полей, не связанных с колонками таблицы или элементами
формы, но имеющих установленный флаг <span class="Interface">Использовать всегда</span>, установка значения свойства <span class="Interface">Получение представлений для невидимых полей</span> в значение <span class="Term">Ложь</span>
может привести к ускорению получению данных динамическим списком. Если, однако,
значения из таких полей каким-либо образом попадают в элементы формы или участвуют
в формировании текстовых строк – не следует устанавливать свойство <span class="Interface">Получение представлений для невидимых полей</span> в значение <span class="Term">Ложь</span>,
так как это приведет к дополнительным серверным вызовам для получения
представления.</p>

<p class="MsoNormal">В рамках одного получения данных, динамический
список повторно использует ранее созданные временные таблицы при соблюдении
следующих условий:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В пакетном запросе списка отсутствует запросы
после основного запроса пакета.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Состав временных таблиц и полей в них неизменен
с предыдущего выполнения пакетного запроса.</p>

<p class="MsoNormal">В своей работе динамический список использует
значения следующих свойств реквизитов объектов метаданных:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
формат,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
формат редактирования,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
подсказка,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
признак выделения отрицательных значений,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
маска,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
признак многострочного режима,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
признак расширенного редактирования,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
режим пароля.</p>

<p class="MsoNormal">При отображении и редактировании отбора и
параметров системы компоновки данных используется формат редактирования
соответствующего поля.</p>

<a name="_ref402959395"></a><a id="TI000001334" class="bookmark" name="issogl3_7.3.1.2_ограничения_и_особенности"><h4>7.3.1.2. Ограничения и особенности</h4></a>

<p class="MsoNormalCxSpFirst">При
установке отбора в динамическом списке следует помнить, что отбор не действует
на группы, если для динамического списка выбран режим отображения <span class="Interface">Иерархический список</span>
или <span class="Interface">Дерево</span>. Под «группами»
понимается элемент справочника или плана видов характеристик, у которого
свойство <span class="Term">ЭтоГруппа</span> установлено в значение <span class="Term">Истина</span>.</p>

<p class="MsoNormalCxSpMiddle">Отборы,
автоматически накладываемые динамическим списком на стандартные реквизиты <span class="Term">Владелец</span>, <span class="Term">Родитель</span>, <span class="Term">Дата</span>, <span class="Term">Период</span> и <span class="Term">ЭтоГруппа</span>, применяются стандартными средствами
системы компоновки данных. Отборы, автоматически накладываемые динамическим
списком на ключевые поля, могут применяться как стандартными средствами системы
компоновки данных так и путем непосредственного добавления в текст запроса
условия <span class="Term">В</span> на поля основной таблицы. В результате
применения отборов средствами компоновки, они могут примениться как во
вложенных запросах, так и в параметрах виртуальных таблиц.</p>

<p class="MsoNormalCxSpMiddle">При
разработке динамических списков рекомендуется проверить все динамические списки
с произвольными запросами. В процессе проверки следует убедиться, что если в
запросе списка присутствуют вложенные запросы или виртуальные таблицы, и в них
доступны для отбора поля с псевдонимами, совпадающими с псевдонимами
стандартных реквизитов <span class="Term">Владелец</span>, <span class="Term">Родитель</span>, <span class="Term">Дата</span>, <span class="Term">Период</span>, <span class="Term">ЭтоГруппа</span> или ключевых полей, то эти поля
действительно соответствуют стандартными реквизитам, с которыми у них совпадает
псевдоним. Если это не так – следует изменить запрос что бы они совпадали
или псевдоним отличался.</p>

<p class="MsoNormalCxSpLast">Если
выбрано ручное формирование запроса, то на запрос налагаются некоторые ограничения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Не поддерживается использование инструкции <span class="Term">ПЕРВЫЕ</span> в запросе динамического списка. При
необходимости использовать в динамическом списке выборку, ограниченную по
количеству записей, следует переработать запрос формирования динамического
списка таким образом, чтобы собственно содержательная часть запроса была
размещена в подзапросе и ограничить количество получаемых записей в этом
подзапросе. Вместо подзапроса также можно использовать временную таблицу.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Не поддерживается отбор, сортировка и
группировка:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
По реквизитам табличных частей.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поля представлений.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле <span class="Term">ВерсияДанных</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле <span class="Term">ИмяПредопределенныхДанных</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле <span class="Term">Вид</span> таблицы плана счетов.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле <span class="Term">ВидДвижения</span> таблицы регистра накопления.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле <span class="Term">ТипЗначения</span> таблицы плана видов характеристик.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле типа <span class="Term">Тип</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Поле типа <span class="Term">Строка</span> (неограниченной длины).</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Поле типа <span class="Term">ДвоичныеДанные</span>.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Не поддерживается сортировка и группировка по
полям <span class="Term">Субконто&lt;НомерСубконто&gt;</span> и <span class="Term">ВидСубконто&lt;НомерСубконто&gt;</span> таблицы <span class="Term">ДвиженияССубконто</span> регистра бухгалтерии.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Не поддерживается группировка по полям, которые
представляют собой выражения языка запросов, содержащие агрегатные функции.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При выбранной основной таблице, запрос
динамического списка имеет следующие ограничения:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Не поддерживаются объединения.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Не поддерживается использование секции <span class="Term">УПОРЯДОЧИТЬ ПО</span>. Следует использовать
запрос без основной таблицы или задавать необходимое упорядочивание через
настройки динамического списка.</p>

<p class="MsoListBullet">&#9679; 
Если динамический список отображается в виде
иерархического списка или дерева, то запись не будет отображена динамическим
списком, если не отображается хотя-бы один родитель этой записи. Другими
словами – для отображения элемента иерархического списка, динамический
список должен отобразить также всех родителей этого элемента до вершины списка.
При этом под вершиной списка подразумевается или собственно корневой элемент
иерархического объекта, отображаемого динамическим списком или элемент,
установленный в качестве свойства <span class="Term">РодительВерхнегоУровня</span> расширения таблицы
формы для динамического списка.</p>

<p class="MsoNormal">Не
поддерживается использование в качестве основной таблицы динамического списка
следующих таблиц:</p>

<p class="MsoListBullet">&#9679; 
Таблица, для которой отсутствует ключ, уникально
идентифицирующий каждую запись таблицы (ссылка для объектных таблиц и ключ
записи для таблиц регистров). Однако следующие таблицы могут быть установлены в
качестве основной таблицы динамического списка (несмотря на отсутствие ключа):</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
таблица <span class="Term">Субконто</span> регистра бухгалтерии;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
все виртуальные таблицы регистра бухгалтерии,
кроме таблицы <span class="Term">ДвиженияССубконто</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
таблицы значений констант (включая таблицу <span class="Term">Константы</span>);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
таблицы внешних источников данных без ключевых
полей;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
таблицы кубов внешних источников данных;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
таблицы регистра накопления:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
таблица оборотов;</p>

<p class="MsoListBullet3CxSpMiddle">&#9679; 
таблица остатков;</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
таблица оборотов и остатков.</p>

<p class="MsoListBullet2">&#9679; 
таблицы регистра расчета:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
таблица фактического периода действия;</p>

<p class="MsoListBullet3CxSpMiddle">&#9679; 
данных графика;</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
базовых данных.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Таблицы табличных частей объектов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Таблицы регистрации изменений (используемые в
механизмах обмена данными);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Таблицы последовательностей;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Таблицы перерасчетов (используемые в механизмах
периодических расчетов).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Таблицы, которая используется в запросе только
во внешнем соединении.</p>

<p class="MsoNormalCxSpFirst">Другими
словами, динамический список с указанной основной таблицей будет работать
корректно в том случае, если в результате выполнения запроса, указанного в
качестве источника данных, не увеличивается количество строк, получаемых из
основной таблицы (с учетом наложенного отбора). Если же в результате выполнения
запроса количество строк, получаемых запросом из основной таблицы,
увеличивается, это будет приводить к нарушению уникальности ключа записей таблицы,
отображаемой списком. В этом случае необходимо отключить использование основной
таблицы динамического списка.</p>

<p class="MsoNormalCxSpLast">При
работе динамического списка необходимо учитывать права доступа на реквизиты,
отображаемые списком:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
На сторону клиента не передаются данные колонок
динамического списка, которые помечены свойством <span class="Interface">Использовать всегда</span>,
но для которых у текущего пользователя отсутствует право <span class="Term">Просмотр</span>. Доступ к данным таких колонок (с
помощью свойства <span class="Term">ТекущиеДанные</span> и метода <span class="Term">ДанныеСтроки()</span>) на стороне клиента невозможен.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если у текущего пользователя отсутствует право <span class="Term">Просмотр</span> на ключевое поле динамического
списка, получение данных этим динамическим список приводит к ошибке нарушения
прав доступа.</p>

<p class="MsoNormalCxSpFirst">Для
динамического списка, который отображает список перечисления, отсутствует
возможность интерактивной настройки списка.</p>

<p class="MsoNormalCxSpMiddle">Состав колонок и настройки динамического списка связаны с
полями запроса по псевдонимам полей выборки. Если в запросе для поля выборки
псевдоним не задан явно и поле является системным, то в качестве псевдонима
используется имя поля для английского варианта встроенного языка. Указанная
связь означает, что при изменении (или явном указании псевдонима для поля, у
которого использовался автоматический псевдоним) псевдонима поля запроса,
формирующего данные динамического список, будут утеряны настройки реквизита
динамического списка, элементы формы «потеряют» отображаемые реквизиты,
настройки динамического списка станут неверными и т. д.</p>

<p class="MsoNormalCxSpLast">В
том случае, если источником данных динамического списка является таблица
(обычная или виртуальная), которая позволяет устанавливать отбор по периоду, то
в том случае, если пользователь устанавливает период отображения в таком
динамическом списке (команда <span class="Interface">Установить интервал
дат…</span>), заданные границы периода будут установлены в качестве значений
отбора или параметров виртуальной таблицы. Если средствами расширения языка
запросов для системы компоновки данных были явно указаны имена параметров
виртуальной таблицы – будут установлены параметры с заданными именами.
Таблицы, для которых возможно управлять периодом отображения или обработки
данных:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
таблицы регистров (основные или виртуальные),
для которых существует возможность отбора по периоду (для регистра расчета –
по периоду регистрации);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
основные таблицы документов, бизнес-процессов и
задач;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
основные таблицы журналов документов;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
основные таблицы последовательностей, таблицы
границ последовательностей.</p>

<p class="MsoNormalCxSpFirst">В
качестве параметра запроса динамического списка может выступать массив или
список значений. Однако если параметром является список значений, то в качестве
значения отбора будет использовано только первое значение списка. В случае если
динамический список использует запрос с параметрами, первоначальная установка
значений параметров должна выполняться в обработчике <span class="Term">ПриСозданииНаСервере</span>.</p>

<p class="MsoNormalCxSpLast">При
отображении данных динамического списка следует помнить о следующих
особенностях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
При программном изменении свойств динамического
списка не происходит автоматического повторного заполнения командных панелей,
связанных с этим динамическим списком.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если несколько полей сгруппированы в группу с
режимом группировки <span class="Interface">В ячейке</span> и в
сгруппированных полях есть поле, которое отображается флажком, то этот флажок
всегда будет отображаться первым в получившейся ячейке (левее текста).</p>

<p class="MsoNormalCxSpFirst">В
динамическом списке, при определении типа данных для полей, в состав выражений
которых входят параметры, поля или литералы, результирующий тип определяется по
типам полей и литералов. Если тип значения параметра не входит в результирующий
тип данных – его значение будет усечено.</p>

<p class="MsoNormalCxSpLast">Например,
в следующем примере поле будет иметь тип <span class="Term">Число</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБОР</span>
    <span class="keyword">КОГДА</span> <span class="keyword">ЛОЖЬ</span>
        <span class="keyword">ТОГДА</span> <span class="number">5</span>
    <span class="keyword">ИНАЧЕ</span>
<span class="preprocessor">        &amp;Параметр</span>
<span class="keyword">КОНЕЦ</span></pre>

<p class="MsoNormalCxSpFirst">Если
присвоить параметру <span class="Term">Параметр</span> значение другого типа, в динамический
список для этого поля будет получать значение <span class="Term">0</span> (значение по умолчанию для типа <span class="Term">Число</span>).</p>

<p class="MsoNormalCxSpLast">Если
в подобной ситуации требуется выбирать параметр другого типа –
рекомендуется использовать конструкцию языка запросов <span class="Term">ВЫРАЗИТЬ</span>. Например, если в приведенном выше
примере требуется передавать в параметр строку не длиннее 100 символов, то
следует заменить простое указание параметра, на выражение с явным приведением
типа:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБОР</span> 
    <span class="keyword">КОГДА</span> <span class="keyword">ЛОЖЬ</span>
        <span class="keyword">ТОГДА</span> <span class="number">5</span>
    <span class="keyword">ИНАЧЕ</span>
        ВЫРАЗИТЬ<span class="operator">(</span>&Параметр <span class="keyword">КАК</span> Строка<span class="operator">(</span><span class="number">100</span><span class="operator">)</span><span class="operator">)</span>
<span class="keyword">КОНЕЦ</span></pre>

<p class="MsoNormal">Если
в произвольном тексте запроса динамического списка в выражениях полей выборки
используются параметры – следует явно указать тип параметров при помощи
конструкции <span class="Term">ВЫРАЗИТЬ</span>. Например, вместо <span class="Term">&amp;Номенклатура КАК Номеклатура</span> использовать
<span class="Term">ВЫРАЗИТЬ(&amp;Номенклатура КАК Справочник.Номенклатура) КАК
Номенклатура</span>. В противном случае поиск через строку поиска может
работать некорректно или выдавать ошибки.</p>

<a name="_ref441142953"></a><a id="TI000001335" class="bookmark" name="issogl3_7.3.1.3_способы_получения_и_кеширования_данных_динамическим_списком"><h4>7.3.1.3. Способы получения и кеширования данных динамическим списком</h4></a>

<p class="MsoNormal">При
получении данных для отображения динамический список использует один из трех
способов:</p>

<p class="MsoListNumberCxSpFirst">1.  Считывание
из базы данных выполняется порциями с количеством элементов данных, несколько
превышающим количество строк, одновременно отображаемых списком (но не менее
20). Не выполняется кеширование данных на сервере.</p>

<p class="MsoListNumberCxSpLast">2. 
Считывание из базы данных выполняется страницами
по 1 000 элементов данных. Выполняется кеширование данных на сервере.
Иерархические данные кешируются: для каждого родителя кешируется не более 2
страниц элементов. На один динамический список кешируется не более 20 страниц
элементов. Кеширование будет включено динамическим списком для следующих
таблиц:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Критерий отбора;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Все таблицы регистра бухгалтерии, кроме основной
таблицы и таблицы <span class="Term">ДвиженияССубконто</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Все таблицы регистра накопления, кроме основной
таблицы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Все таблицы регистра сведений, кроме основной
таблицы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Все таблицы регистра расчета, кроме основной
таблицы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Виртуальная таблица <span class="Term">ЗадачиПоИсполнителю</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Таблицы внешних источников без ключей;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Кубы внешних источников.</p>

<p class="MsoListNumber">3. 
Считывание из базы данных выполняется страницами
по 1 000 элементов. Первая порция равна 1 странице. Каждая следующая
порция увеличивается на 1 страницу (при достижении конца предыдущей выборки).
Чем ближе передвигается «точка просмотра» к концу отображаемых данных, тем
большая выборка считывается из базы данных, в пределе становясь равной всем
отображаемым данным. Выполняется кеширование данных на сервере. Максимальное
количество записей в кеше и динамическом списке – 1 000 000.</p>

<p class="MsoNormal">В
зависимости от того, что выбрано основной таблицей динамического списка и какое
значение принимает свойство <span class="Interface">Динамическое
считывание</span>, используются те или иные способы считывания данных:</p>

<p class="MsoListBullet">&#9679; 
В качестве значения свойства <span class="Interface">Основная таблица</span>
указана одна из следующих таблиц: план обмена, справочник, список документов,
журнал документов, план видов характеристик, план счетов, план видов расчета,
бизнес-процесс, задача, таблица точек бизнес-процесса:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">Ссылка</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span>:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Установлено: используется способ 1 (описание
способов приведено выше).</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Сброшено: используется способ 2 (описание
способов приведено выше).</p>

<p class="MsoListBullet">&#9679; 
В качестве значения свойства <span class="Interface">Основная таблица</span>
указана одна из следующих таблиц: основная таблица регистра сведений, регистра
накопления, регистра бухгалтерии, регистра расчета, виртуальная таблица
регистра бухгалтерии <span class="Term">ДвиженияССубконто</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">КлючЗаписи</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span>:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Установлено: используется способ 1 (описание
способов приведено выше).</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Сброшено: используется способ 2 (описание
способов приведено выше).</p>

<p class="MsoListBullet">&#9679; 
В качестве свойства <span class="Interface">Основная таблица</span>
указана таблица критерия отбора или таблица задач по исполнителю (<span class="Term">ЗадачиПоИсполнителю</span>):</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">Ссылка</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span> не применимо.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Используется способ 2 (описание способов
приведено выше).</p>

<p class="MsoListBullet">&#9679; 
В качестве свойства <span class="Interface">Основная таблица</span>
указана виртуальная таблица регистра сведений <span class="Term">СрезПервых</span> или <span class="Term">СрезПоследних</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">КлючЗаписи</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span> не применимо.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Используется способ 2 (описание способов
приведено выше).</p>

<p class="MsoListBullet">&#9679; 
В качестве свойства <span class="Interface">Основная таблица</span>
указана одна из виртуальных таблицы регистров, кроме перечисленных выше:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">Число</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span> не применимо.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Используется способ 3 (описание способов
приведено выше).</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Interface">Основная таблица</span>
не указано, используется произвольный запрос:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Ключ, идентифицирующий строку таблицы: <span class="Term">Число</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Свойство <span class="Interface">Динамическое
считывание</span> не применимо.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Используется способ 3 (описание способов
приведено выше).</p>

<p class="MsoNormalCxSpFirst">Для
отображения данные передаются на клиента порциями, размер которых аналогичен
размеру порции в 1-м способе считывания данных (описан в начале данного
раздела).</p>

<p class="MsoNormalCxSpLast">При
создании формы, содержащей динамический список, первоначально на клиента
передается 45 элементов данных каждого видимого динамического списка (если в
списке более 45 элементов). Если динамический список отображает более 45 строк,
то при открытии формы будет выполнен дополнительный серверный вызов для
получения недостающих элементов данных.</p>

<a id="TI000001336" class="bookmark" name="issogl3_7.3.1.4_настройки_динамического_списка"><h4>7.3.1.4. Настройки динамического списка</h4></a>

<p class="Regularbeforepicture">Свойство
<span class="Interface">Настройка списка</span> –
нажатие на гиперссылку <span class="Interface">Открыть</span>
приводит к открытию формы настройки отображения динамического списка. Настройка
списка выполняется таким же образом, как и аналогичные операции в системе
компоновки данных.</p>

<p class="Picture"><IMG src="_img/img00210.gif?_=1496848987" WIDTH="760" ALT HEIGHT="461"></p>

<p class="MsoCaption">Рис.
211. Условное оформление динамического списка</p>

<p class="MsoNormal">Во
время настройки динамического списка в конфигурации разработчик прикладного
решения имеет возможность сделать следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
задать поля, по которым необходимо проводить
упорядочивание;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
описать отбор данных в списке;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
указать настройки условного оформления;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
задать поля, по которым необходимо группировать
данные.</p>

<p class="MsoNormal">Задавать
сортировку разработчику имеет смысл, если не устраивает устанавливаемая системой
сортировка по умолчанию.</p>

<p class="Note"><span class="Note">Совет.</span> Следует помнить о том, что неудачный выбор
полей сортировки (равно как отбора и группировки данных) негативно влияет на
эффективность динамической выборки.</p>

<p class="MsoNormal">С
точки зрения прикладного разработчика, настройки динамического списка состоят
из нескольких частей, которые связаны между собой. Основным свойством, через
которое можно управлять настройками динамического списка является <span class="Term">КомпоновщикНастроек</span>. Это объект содержит три
набора настроек, которые при работе системы определяют окончательные настройки,
применяемые к динамическому списку:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Настройки – настройки, созданные в режиме
Конфигуратора. Свойство динамического списка <span class="Term">Порядок</span>
предоставляет быстрый доступ к свойству <span class="Term">Настройки.Порядок</span>
компоновщика настроек динамического списка, таким образом, следующие
конструкции являются эквивалентными: <span class="Term">Список.Порядок</span>
и <span class="Term">Список.КомпоновщикНастроек.Настройки.Порядок</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ПользовательскиеНастройки</span> – это
настройки, которые изменяет пользователь в режиме «1С:Предприятие»;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ФиксированныеНастройки</span> – эти настройки
задаются из встроенного языка. Также в этой свойство попадают значения отбора,
которые передаются в форму с помощью ее параметров. Свойства динамического
списка <span class="Term">Отбор</span>, <span class="Term">Параметры</span>, <span class="Term">УсловноеОформление</span> предоставляют быстрый
доступ к фиксированным настройкам компоновщика настроек динамического списка.
Другими словами, данные обращения являются эквивалентными: Список.КомпоновщикНастроек.ФиксированныеНастройки<span class="Term">.Отбор</span> и <span class="Term">Список.Отбор</span>.</p>

<p class="MsoNormal">При
формировании окончательной настройки динамического списка, различные варианты
настроек комбинируются следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если какой-либо вид настроек целиком отмечен как
пользовательский, то в результирующие настройки попадают пользовательские
настройки (Список.КомпоновщикНастроек.ПользовательскиеНастройки). При этом если какие-либо элементы
настроек отмечены как недоступные, то эти настройки будет помещены в
результирующие настройки из свойства Список.КомпоновщикНастроек.
Настройки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если какой-либо вид настроек отмечен как
пользовательский не целиком, а поэлементно, то:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементы, отмеченные как пользовательские,
попадут в результирующие настройки из свойства <span class="Term">Список.КомпоновщикНастроек.ПользовательскиеНастройки</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Элементы, отмеченные как недоступные, попадут в
результирующие настройки из свойства <span class="Term">Список.КомпоновщикНастроек.Настройки</span>.</p>

<p class="MsoListBullet">&#9679; 
Фиксированные настройки (<span class="Term">Список.КомпоновщикНастроек.ФиксированныеНастройки</span>)
добавляются в результирующие настройки «как есть». При этом недопустима
ситуация, когда в фиксированных и пользовательских настройках есть одноименные
настройки, например отбор с одинаковым левым значением в условии.</p>

<p class="MsoNormal">Если в настройках динамического списка присутствуют настройки,
которые отключены с помощью функциональных опций, эти настройки будут удалены
из списка доступных настроек при получении данных динамического списка.</p>

<p class="Regularbeforepicture">Управление
тем, какие настройки будут доступны пользователю, а какие – нет,
выполняется в окне настройки динамического списка.</p>

<p class="Picture"><IMG src="_img/img00211.gif?_=1496848987" WIDTH="760" ALT HEIGHT="461"></p>

<p class="MsoCaption"><a name="_ref351131886">Рис. </a>212. Управление
включением в пользовательские настройки</p>

<p class="MsoNormalCxSpFirst">Флажок
в нижней части окна (см. <a href="#_ref351131886">рис. 212</a>) отвечает за размещение в настройках (обычных или
быстрых) всего вида настроек. Эта возможность доступна для отбора, порядка,
группировки и условного оформления. Если настройки указаны с режимом редактирования
<span class="Interface">Быстрый выбор</span>,
то в свойстве <span class="Interface">Группа
пользовательских настроек</span> таблицы формы, отображающей динамический
список, необходимо указать пустую группу формы, в которой будут располагаться
элементы, связанные с быстрыми пользовательскими настройками динамического
списка. Если группа не указана – быстрые пользовательские настройки не
будут отображены на форме. Также имеется возможность явно вызвать создание
пользовательских настроек с помощью встроенного языка с помощью метода СоздатьЭлементыФормыПользовательскихНастроек<span class="Term">()</span> расширения динамического списка.</p>

<p class="MsoNormalCxSpMiddle">Также
имеется возможность выбирать возможность размещения в пользовательских
настройках конкретных элементов настроек. Эта возможность доступна для
элементов отбора и условного оформления (см. <a href="#_ref351131886">рис. 212</a>).</p>

<p class="MsoNormalCxSpLast">Если
необходимо, чтобы при открытии динамического списка были загружены какие-либо
специальные настройки, то это можно сделать двумя способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
С помощью параметра формы динамического списка <span class="Term">ПользовательскиеНастройки</span>. Данные,
содержащиеся в этом параметре, будут помещены в пользовательские настройки
динамического списка.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
С помощью параметра формы динамического списка <span class="Term">КлючПользовательскихНастроек</span>. Если при
открытии формы указать этот параметр, то в динамический список, являющийся
основным реквизитом формы, будут загружены пользовательские настройки,
расположенные в хранилище настроек с указанным ключом.</p>

<a name="_ref328408060"></a><a name="_ref328408059"></a><span class="Hidden"></span><a name="_ref377645922"></a><a id="TI000001337" class="bookmark" name="issogl3_7.3.1.5_поиск_в_динамическом_списке"><h4>7.3.1.5. Поиск в динамическом списке</h4></a>

<p class="MsoNormalCxSpFirst">Динамический
список, расположенный на форме, предоставляет возможность выполнять
интерактивный поиск в отображаемых данных. Поиск может осуществляться с помощью
следующих инструментов: строки поиска, диалога поиска, поиска текущего
значения, с помощью истории поиска и установкой периода (для динамических
списков, отображающих документы). Результатом поиска выступает ограниченный
набор записей динамического списка (из доступных данному пользователю), которые
соответствуют критериям поиска.</p>

<p class="MsoNormalCxSpLast">Для
управления возможностями поиска в динамическом списке предназначены три
свойства таблицы управляемой формы, отображающей динамический список:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Положение строки поиска</span> –
определяет положение строки поиска. Может принимать
следующие значения: <span class="Interface">Авто</span>, <span class="Interface">Командная панель</span>, <span class="Interface">Нет</span>, <span class="Interface">Верх</span>, <span class="Interface">Низ</span>.</p>

<p class="Picture"><IMG src="_img/img00212.gif?_=1496848987" WIDTH="772" ALT HEIGHT="320"></p>

<p class="MsoCaption">Рис. 213. Строка поиска в
динамическом списке</p>

<p class="IndentlistCxSpFirst">Если значение этого свойства установлено в
значение <span class="Interface">Командная панель</span>, то в командной панели формы (если
динамический список является основным реквизитом формы) или в командной панели,
связанной с динамическим списком, будет отображаться строка поиска. Строка
поиска, размещенная в командной панели, всегда прижимается к правому краю командной
панели (вместе с кнопками, расположенными правее строки поиска).</p>

<p class="IndentlistCxSpMiddle">Если свойство установлено в значение <span class="Interface">Нет</span>, то строка поиска будет отсутствовать на форме, а
при начале набора поисковой строки будет открываться диалог.</p>

<p class="IndentlistCxSpMiddle">Если свойство установлено в значение <span class="Interface">Верх</span>, то строка поиска будет расположена между командной
панелью списка и таблицей, отображающей динамический список. Если свойство
установлено в значение <span class="Interface">Низ</span>, то строка поиска будет размещена сразу после
таблицы, отображающей динамический список.</p>

<p class="IndentlistCxSpLast">Если форма создана в «1С:Предприятии» версии
8.3.4 и младше – свойство установлено в значение <span class="Interface">Нет</span>. Если форма создана в «1С:Предприятии» версии 8.3.5
и старше – свойство установлено в значение <span class="Interface">Авто</span>. Реальное значение свойства в этом случае будет
определяться следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Версия 8.3.4</span> (и
ниже) – значение <span class="Interface">Нет</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Не использовать</span>
или старше значения <span class="Interface">Версия 8.3.4</span><span class="Interface"> –</span> значение <span class="Interface">Командная панель</span>.</p>

<p class="Indentlist">Переход к строке поиска осуществляется
следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Нажатием сочетания клавиш <span class="Interface">Ctrl+F</span>;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Мышью;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
При начале набора текста в динамическом списке
(с учетом значения свойства динамического списка <span class="Term">ПоискПриВводе</span>).</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Положение состояния
просмотра</span> – описывает, где будет отображаться состояние просмотра:
по каким полям выполнялся поиск и какие значения искались в каждом поле. Может
принимать следующие значения: <span class="Interface">Авто</span>, <span class="Interface">Нет</span>, <span class="Interface">Верх</span>, <span class="Interface">Низ</span>.</p>

<p class="Picture"><IMG src="_img/img00213.gif?_=1496848987" WIDTH="800" ALT HEIGHT="375"></p>

<p class="MsoCaption">Рис.
214. Состояние поиска в динамическом списке</p>

<p class="IndentlistCxSpFirst">Если свойство установлено в значение <span class="Interface">Нет</span>, то состояние просмотра будет
отсутствовать на форме. В результате определить, выполнен поиск или нет, можно
будет только по доступности кнопки <span class="Interface">Отменить поиск</span>.</p>

<p class="IndentlistCxSpMiddle">Если свойство установлено в значение <span class="Interface">Верх</span>, то состояние просмотра будет расположено между
командной панелью списка и таблицей, отображающей динамический список. Если
свойство установлено в значение <span class="Interface">Низ</span>, то состояние просмотра будет размещено сразу после
таблицы, отображающей динамический список.</p>

<p class="IndentlistCxSpLast">Если форма создана в
«1С:Предприятии» версии 8.3.4 и младше – свойство установлено в значение <span class="Interface">Нет</span>. Если форма
создана в «1С:Предприятии» версии 8.3.5 и старше – свойство установлено в
значение <span class="Interface">Авто</span>. Реальное
значение свойства в этом случае будет определяться следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Версия 8.3.4</span> (и
ниже) – значение <span class="Interface">Нет</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Не использовать</span>
или старше значения <span class="Interface">Версия 8.3.4</span><span class="Interface"> –</span> значение <span class="Interface">Верх</span>;</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Положение управления
поиском</span> – определяет, где будет отображаться кнопка управления
поиском. Кнопка открывает меню, которое содержит следующую информацию: команды <span class="Interface">Найти по текущему
значению</span>, <span class="Interface">Расширенный поиск</span>,
<span class="Interface">Отменить поиск</span>,
<span class="Interface">Установить период</span>
(для списков документов и журналов) и история поисковых запросов (последние 5
запросов). Свойство может принимать значения: <span class="Interface">Авто</span>, <span class="Interface">Нет</span>, <span class="Interface">Командная панель</span>.</p>

<p class="Picture"><IMG src="_img/img00214.gif?_=1496848987" WIDTH="761" ALT HEIGHT="326"></p>

<p class="MsoCaption">Рис.
215. Управление поиском в динамическом списке</p>

<p class="IndentlistCxSpFirst">Если
свойство установлено в значение <span class="Interface">Нет</span>, то кнопка
управления поиском будет отсутствовать на форме (но команды будут доступны с
помощью меню <span class="Interface">Еще</span>). Значение
свойства <span class="Interface">Командная панель</span>
размещает кнопку на командную панель, связанную с таблицей, отображающей динамической
список.</p>

<p class="IndentlistCxSpLast">Если
форма создана в «1С:Предприятии» версии 8.3.4 и младше – свойство
установлено в значение <span class="Interface">Нет</span>. Если форма
создана в «1С:Предприятии» версии 8.3.5 и старше – свойство установлено в
значение <span class="Interface">Авто</span>. Реальное
значение свойства в этом случае будет определяться следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Версия 8.3.4</span> (и
ниже) – значение <span class="Interface">Нет</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Если свойство <span class="Interface">Режим совместимости</span>
установлено в значение <span class="Interface">Не использовать</span>
или старше значения <span class="Interface">Версия 8.3.4</span> –
значение <span class="Interface">Командная панель</span>;</p>

<p class="MsoNormal">Если
на форме присутствуют несколько командных панелей, источником команд для
которых является одна таблица управляемой формы (отображающая данные
динамического списка), то строка поиска и кнопка управления поиском будет
располагаться только в одной командной панели:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Или в командной панели самого динамического
списка (если для нее включено автоматическое заполнение)</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Или в любой из оставшихся командных панелей.</p>

<p class="MsoNormal">Рассмотрим
особенности использования поиска в динамическом списке:</p>

<p class="MsoListBullet">&#9679; 
Для того чтобы поиском было удобно пользоваться
(в том числе и с точки зрения быстродействия) необходимо включить
полнотекстовый поиск для всех объектов конфигурации, которые могут
использоваться в качестве основной таблицы динамического списка. Также в
полнотекстовом поиске должны участвовать все реквизиты объектов конфигурации,
которые могут отображаться в динамическом списке и по которым может
потребоваться поиск.</p>

<p class="Indentlist">Если
объект исключен из полнотекстового поиска, то рассматриваемый механизм поиска
будет работать, но производительность такого поиска будет крайне низкой. Не
рекомендуется использовать поиск по объектам, которые не индексируются
полнотекстовым поиском.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В прикладном решении должно быть регламентное
задание, которое регулярно обновляет индекс полнотекстового поиска.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Поиск выполняется не по всем колонкам
динамического списка (и объекта конфигурации), а только по тем колонкам, которые
отображаются в таблице.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Поиск в динамическом списке по полям ссылочных
типов с произвольным представлением выполняется по полям, которые используются
для формирования представления (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref381267196">здесь</a>). Поля, входящие в представление, получаются с учетом
обработчика <span class="Term">ОбработкаПолученияПолейПредставления()</span>
соответствующего объекта.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для динамических списков с указанной основной
таблицей используется полнотекстовый поиск по основной таблице. К результатам
полнотекстового поиска будут добавлены все непроиндексированные ссылки из
основной таблицы. Результат полнотекстового поиска для основной таблицы используется
в качестве отбора по ключевым полям. Также выполняется полнотекстовый поиск по
полям, отображаемым в списке из других таблиц (если для поля и объекта
конфигурации используется полнотекстовый поиск). Без включенного
полнотекстового поиска данные могут быть найдены, но сам поиск будет
выполняться очень медленно.</p>

<p class="Indentlist">Если
при попытке выполнить полнотекстовый поиска произошла ошибка, поиск будет
выполняться без применения полнотекстового поиска. Например, такое может
произойти при поиске по одной букве и большому количеству строк в информационной
базе, начинающихся с этой буквы.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В том случае, если для поля основной таблицы
динамического списка используется отбор с видом сравнения <span class="Interface">Равно</span>, то при
выполнении полнотекстового поиска к поисковому запросу по этой таблице будет добавлено
значение отбора.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Строка поиска разбивается на слова. Это
разбиение выполняется по следующим правилам:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Строка разбивается, используя символы пробела и
табуляции в качестве разделителей.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Затем обрабатывается каждый получившийся
фрагмент:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Если фрагмент является представлением даты (с
временем или без него) с учетом текущих региональных установок сеанса, то словом
является этот фрагмент.</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Иначе фрагмент разбивается далее, используя в
качестве разделителей символы &quot;<span class="Interface">,.-/\</span>&quot;. В
этом случае в качестве слова принимается каждый получившийся фрагмент строки.</p>

<p class="MsoListBullet">&#9679; 
Для каждого слова формируется свой набор
условий, которые объединяются «по ИЛИ». Этот набор условий формируется в том
случае, если полнотекстовый поиск данного слова в таблице, из которой было
получено данное поле, вернул хотя бы один объект или полнотекстовый поиск не
использовался для этого поля. Условия формируются следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Для поля типа <span class="Term">Строка</span> условие имеет вид <span class="Term">ИмяПоля ПОДОБНО %Слово%</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для поля типа <span class="Term">Число</span> условие имеет вид <span class="Term">ИмяПоля=Значение</span>, где <span class="Term">Значение</span> – это слово, которое приведено к
типу <span class="Term">Число</span>. Если приведение выполнить
невозможно – поиск по полю выполняться не будет.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Слово ищется как подстрока в представлении по
умолчанию для типа <span class="Term">Булево</span>, определенное для текущего сеанса. Если
искомое слово обнаружено в представлении, то в дальнейшем выполняется поиск
значения, соответствующего представлению, в котором обнаружено слово. При этом
для поиска не используются представления, которые заданы с помощью свойства
элемента формы <span class="Term">Формат</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для поля типа <span class="Term">Дата</span> условие имеет вид <span class="Term">ИмяПоля&gt;= НачалоДня(Слово) И ИмяПоля&lt;=КонецДня(Слово)</span>.
Если <span class="Term">Слово</span> подобно дате, в которой год указан одной
или двумя цифрами, год будет приведен к текущему веку и уже это значение будет
подсталяться в поисковое условие.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Для ссылочных полей выполняется поиск по полям,
использующимся для формирования представления ссылки. В каждом из этих полей
поиск выполняется по правилам, описанным выше. Для поиска не используются поля,
используемые для формирования произвольного представления данных (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref381267196">здесь</a>).</p>

<p class="Indentlist">Набор
условий для каждого слова объединяются «по И».</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для значений с ведущими нулями, выполнять поиск
можно как по строке с ведущими нулями, так и по строке, указанной без ведущих
нулей.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если динамический список отображает список
документов или журнал документов, то заданный интервал просмотра списка также
отображается в области формы, отведенной для отображения состояния просмотра
для необходимого динамического списка.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Команда поиска по текущему значению не доступна
в том случае, если основной таблицей динамического списка является критерий
отбора.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Найденные фрагменты строк выделяются при
отображении в таблице.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Для одной колонки поддерживается поиск только по
одной поисковой строке. При добавлении нового поискового запроса для колонки,
по которой уже выполняется поиск, произойдет замена поискового выражения, а не
сложение двух поисковых запросов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если на форме отсутствует дополнение элемента
формы вида <span class="Interface">Отображение строки поиска</span>, связанное с таблицей
(свойство <span class="Interface">Источник</span> дополнения элемента формы), отображающей
динамический список, то нажатие сочетания клавиш <span class="Interface">Ctrl+F</span> приводит к открытию диалога поиска.</p>

<p class="Picture"><IMG src="_img/img00215.gif?_=1496848987" WIDTH="641" ALT HEIGHT="273"></p>

<p class="MsoCaption">Рис.
216. Диалог поиска</p>

<p class="Indentlist">Если
на форме присутствует дополнение элемента формы вида <span class="Interface">Отображение строки
поиска</span>, связанное с таблицей (свойство <span class="Interface">Источник</span> дополнения
элемента формы), отображающей динамический список, то для открытия диалога
поиска следует использовать команду <span class="Interface">Расширенный поиск</span>.</p>

<p class="MsoListBullet">&#9679; 
При использовании диалога поиска нужно помнить о
следующих особенностях:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Открытие диалога поиска по сочетанию клавиш
приводит к тому, что значение текущей ячейки оказывается в строке <span class="Interface">Что искать</span>, а
значение переключателя <span class="Interface">Как искать</span>
устанавливается в значение <span class="Interface">По точному совпадению</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Открытие диалог поиска путем непосредственного
начала набора поисковой строки в динамическом списке приводит к тому, что
значение переключателя <span class="Interface">Как искать</span>
устанавливается в значение <span class="Interface">По части строки</span>,
а набираемый текст попадает в поле <span class="Interface">Что искать</span>.</p>

<span class="Hidden"></span><a name="_ref393106717"></a><a id="TI000001476" class="bookmark" name="issogl3_7.3.1.6_получение_данных_отображаемых_динамическим_списком"><h4>7.3.1.6. Получение данных, отображаемых динамическим списком</h4></a>

<p class="MsoNormalCxSpFirst">При
использовании динамических списков может потребоваться выполнить различные
действия с данными, которые в данный момент отображаются динамическим списком,
с учетом наложенных отборов и примененного поиска. К таким действиям относятся:
обработка отображаемой информации, например, перепроведение выделенных
документов или установка какого-либо реквизита у выделенных объектов,
формирование списка доступных объектов (с оформлением и т. д.),
например, для печати или сохранения в табличный документ.</p>

<p class="MsoNormalCxSpLast">Для
получения данных, которые отображаются динамическим списком, следует
использовать методы <span class="Term">ПолучитьИсполняемуюСхемуКомпоновкиДанных()</span> и <span class="Term">ПолучитьИсполняемыеНастройкиКомпоновкиДанных()</span>.</p>

<p class="Lang-subheader">Пример
получения данных:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Схема <span class="operator">=</span> Элементы<span class="operator">.</span>Список<span class="operator">.</span>ПолучитьИсполняемуюСхемуКомпоновкиДанных<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Настройки <span class="operator">=</span> Элементы<span class="operator">.</span>Список<span class="operator">.</span>ПолучитьИсполняемыеНастройкиКомпоновкиДанных<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
КомпоновщикМакета <span class="operator">=</span> <span class="keyword">Новый</span> КомпоновщикМакетаКомпоновкиДанных<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
МакетКомпоновки <span class="operator">=</span> КомпоновщикМакета<span class="operator">.</span><span class="keyword">Выполнить</span><span class="operator">(</span>Схема<span class="operator">,</span> Настройки<span class="operator">)</span><span class="operator">;</span>
ПроцессорКомпоновки <span class="operator">=</span> <span class="keyword">Новый</span> ПроцессорКомпоновкиДанных<span class="operator">;</span>
ПроцессорКомпоновки<span class="operator">.</span>Инициализировать<span class="operator">(</span>МакетКомпоновки<span class="operator">)</span><span class="operator">;</span>
ПроцессорВывода <span class="operator">=</span> <span class="keyword">Новый</span> ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент<span class="operator">;</span>
<span class="keyword">Возврат</span> ПроцессорВывода<span class="operator">.</span>Вывести<span class="operator">(</span>ПроцессорКомпоновки<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Получение
данных в коллекцию значений (таблица или список значений) выполняется
аналогично (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 10. система компоновки данных.htm?_=1496848987#_ref393119245">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Получение
данных динамического списка указанным образом имеет ряд особенностей, которые
нужно учитывать при разработке прикладных решений:</p>

<p class="MsoListBullet">&#9679; 
Не поддерживается следующее оформление таблицы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Чередование цветов строк;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Картинка шапки;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Картинка подвала;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Цвет фона подвала;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Цвет текста подвала;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Шрифт подвала;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Горизонтальное положение в подвале;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Режим пароля.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Не поддерживается условное оформление, указанное
для управляемой формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Данные, полученные в результате выполнения
методов <span class="Term">ПолучитьИсполняемуюСхемуКомпоновкиДанных()</span> и <span class="Term">ПолучитьИсполняемыеНастройкиКомпоновкиДанных()</span>,
не будет содержать изменений, которые могут быть внесены с помощью обработчика
события <span class="Term">ПриПолученииДанныхНаСервере</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
При упорядочивании иерархической таблицы по
возрастанию, по полю типа <span class="Term">Ссылка</span>, записи, содержащие пустую ссылку
всегда размещаются первыми.</p>

<a name="_ref468785725"></a><a name="_ref469672940"></a><a id="TI000001887" class="bookmark" name="issogl3_7.3.1.7_дополнительная_обработка_данных_получаемых_динамическим_списком"><h4>7.3.1.7. Дополнительная обработка данных, получаемых динамическим списком</h4></a>

<p class="MsoNormalCxSpFirst">Требования
к динамическим спискам могут включать отображение вспомогательной информации,
которую затруднительно, неэффективно или невозможно получить в рамках запроса
динамического списка. В этом случае можно воспользоваться обработчиком <span class="Term">ПриПолученииДанныхНаСервере</span> таблицы
управляемой формы, отображающей данные динамического списка. Это внеконтекстный
обработчик формы, который позволяет выполнить дополнительную обработку данных,
которые получает динамический список для отображения.</p>

<p class="MsoNormalCxSpMiddle">Данное
событие вызывается после получения данных динамическим списком. Событие
вызывается в том случае, если динамическим списком получена хотя-бы одна
строка.</p>

<p class="MsoNormalCxSpMiddle">Настройки
динамического списка (отбор (в том числе поиск), сортировка, группировка,
условное оформление и т. д.) будут применяться к фактическим данным,
которые получены запросом динамического списка, до их обработки в рамках
обработчика события <span class="Term">ПриПолученииДанныхНаСервере</span>.</p>

<p class="MsoNormalCxSpLast">Обработчик
<span class="Term">ПриПолученииДанныхНаСервере</span> получает три
параметра:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ИмяЭлемента</span> – содержит имя таблицы, для
которой выполняется данный обработчик.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">Настройки</span> – содержит копию полных
настроек динамического списка. Особое внимание следует уделить свойству <span class="Term">ДополнительныеСвойства</span> для этого параметра. С помощью
этого свойства предоставляется возможность передавать необходимые данные из
формы во внеконтекстный обработчик.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">Строки</span> – параметр содержит коллекцию
строк, которые будет отображать динамический список. В коллекции содержатся
собственно данные и оформления этих данных, но не содержит строк группировок.</p>

<p class="Regularbeforepicture">В
качестве примера будет рассмотрен список товаров, куда выводится цена товара
для категории цен, указанной в реквизите формы.</p>

<p class="Picture"><IMG src="_img/img00216.gif?_=1496848987" WIDTH="800" ALT HEIGHT="367"></p>

<p class="MsoCaption">Рис.
217. Цена по категории</p>

<p class="MsoNormal">Динамический
список расположен в реквизите <span class="Term">Список</span>, отображается таблицей <span class="Term">Список</span> (элемент формы). Вид цены настраивается
с помощью реквизита <span class="Term">ВидЦен</span> типа <span class="Term">СправочникСсылка.ВидыЦен</span>.</p>

<p class="Note"><span class="Note">Примечание.</span> Примеры, приведенные ниже, не являются
законченным. Они предназначены для демонстрации различных механизмов работы с
динамическим списком.</p>

<p class="MsoNormal">Собственно
запрос динамического списка очень простой:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span>
    СправочникТовары<span class="operator">.</span>Ссылка<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>ПометкаУдаления<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Родитель<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>ЭтоГруппа<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Код<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Наименование<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Артикул<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Поставщик<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Вид<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Описание<span class="operator">,</span>
    СправочникТовары<span class="operator">.</span>Предопределенный<span class="operator">,</span>
    ВЫРАЗИТЬ <span class="operator">(</span><span class="keyword">NULL</span> <span class="keyword">КАК</span> Число<span class="operator">(</span><span class="number">10</span><span class="operator">,</span> <span class="number">2</span><span class="operator">)</span><span class="operator">)</span> <span class="keyword">КАК</span> Цена
<span class="keyword">ИЗ</span>
    Справочник<span class="operator">.</span>Товары <span class="keyword">КАК</span> СправочникТовары</pre>

<p class="MsoNormal">Этот
запрос отображает сам справочник товаров и «готовит место» для размещения цены
товаров (колонка <span class="Term">Цена</span>). Остальные действия выполняются в
обработчике события <span class="Term">ПриПолученииДанныхНаСервере</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервереБезКонтекста</span>
<span class="keyword">Процедура</span> СписокПриПолученииДанныхНаСервере<span class="operator">(</span>ИмяЭлемента<span class="operator">,</span> Настройки<span class="operator">,</span> Строки<span class="operator">)</span>
    <span class="keyword">Если</span> Настройки<span class="operator">.</span>ДополнительныеСвойства<span class="operator">.</span>Свойство<span class="operator">(</span><span class="string">&quot;ВидЦен&quot;</span><span class="operator">)</span> <span class="keyword">Тогда</span>
        ВидЦен <span class="operator">=</span> Настройки<span class="operator">.</span>ДополнительныеСвойства<span class="operator">.</span>ВидЦен<span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">Если</span> <span class="keyword">НЕ</span> ЗначениеЗаполнено<span class="operator">(</span>ВидЦен<span class="operator">)</span> <span class="keyword">Тогда</span>
        <span class="keyword">Возврат</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    Запрос <span class="operator">=</span> <span class="keyword">Новый</span> Запрос<span class="operator">;</span>
    Запрос<span class="operator">.</span>Текст <span class="operator">=</span>
        <span class="string">&quot;ВЫБРАТЬ</span>
<span class="string">        |    Цены.Товар,</span>
<span class="string">        |    Цены.Цена</span>
<span class="string">        |ИЗ</span>
<span class="string">        |    РегистрСведений.ЦеныТоваров.СрезПоследних(</span>
<span class="string">Товар В (&amp;Товары) И ВидЦен = &amp;ВидЦен) КАК Цены&quot;</span><span class="operator">;</span>
    Запрос<span class="operator">.</span>УстановитьПараметр<span class="operator">(</span><span class="string">&quot;Товары&quot;</span><span class="operator">,</span> Строки<span class="operator">.</span>ПолучитьКлючи<span class="operator">(</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    Запрос<span class="operator">.</span>УстановитьПараметр<span class="operator">(</span><span class="string">&quot;ВидЦен&quot;</span><span class="operator">,</span> ВидЦен<span class="operator">)</span><span class="operator">;</span>
    Выборка <span class="operator">=</span> Запрос<span class="operator">.</span><span class="keyword">Выполнить</span><span class="operator">(</span><span class="operator">)</span><span class="operator">.</span><span class="keyword">Выбрать</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Пока</span> Выборка<span class="operator">.</span>Следующий<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Цикл</span>
        СтрокаСписка <span class="operator">=</span> Строки<span class="operator">[</span>Выборка<span class="operator">.</span>Товар<span class="operator">]</span><span class="operator">;</span>
        СтрокаСписка<span class="operator">.</span>Данные<span class="operator">[</span><span class="string">&quot;Цена&quot;</span><span class="operator">]</span> <span class="operator">=</span> Выборка<span class="operator">.</span>Цена<span class="operator">;</span>
        СтрокаСписка<span class="operator">.</span>Оформление<span class="operator">[</span><span class="string">&quot;Цена&quot;</span><span class="operator">]</span><span class="operator">.</span>УстановитьЗначениеПараметра<span class="operator">(</span>Формат<span class="string">&quot;, &quot;</span>ЧЦ<span class="operator">=</span><span class="number">10</span><span class="operator">;</span> ЧДЦ<span class="operator">=</span><span class="number">2</span><span class="operator">;</span> ЧН<span class="operator">=</span><span class="operator">-</span><span class="string">&quot;);</span>
<span class="string">    КонецЦикла;</span>
<span class="string">КонецПроцедуры</span></pre>

<p class="MsoNormal">При
рассмотрении текста обработчика следует обратить внимание на следующие моменты:</p>

<p class="MsoListNumber">1.  В
силу того, что рассматриваемый обработчик является внеконтекстным, получение
категории цен выполняется особым образом: с помощью дополнительных свойств
объекта <span class="Term">Настройки</span>, передаваемого параметром
обработчика. Следствием этого является тот факт, что при изменении значения
элемента формы, отображающего реквизит <span class="Term">ВидЦен</span>, нобходимо установить новое значение
реквизита в настройки динамического списка, а затем обновить список:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Список<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>Настройки<span class="operator">.</span>ДополнительныеСвойства<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ВидЦен&quot;</span><span class="operator">,</span> ВидЦен<span class="operator">)</span><span class="operator">;</span>
Элементы<span class="operator">.</span>Список<span class="operator">.</span>Обновить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoListNumberCxSpFirst">2.  Способ
получения значений ключей для всех записей, которые будут отображаться
динамическим списком. Для этого используется специальный метод <span class="Term">ПолучитьКлючи()</span>.</p>

<p class="MsoListNumberCxSpMiddle">3.  Данные,
расположенные в <span class="Term">Строки.Данные</span>, представляют из себя в точности
тот набор данных, который будет передан клиентскому приложению для отображения
таблицей управляемой формы, которая связана с динамическим списком. Эта
передача будет выполнена после завершения обработчика.</p>

<p class="MsoListNumberCxSpLast">4.  Работа
с оформлением ячеек динамического списка (<span class="Term">Строки.Оформление</span>) не отличается от работы с
оформлением ячеек системы компоновки данных.</p>

<p class="MsoNormalCxSpFirst">Если
в обработчике события <span class="Term">ПриПолученииДанныхНаСервере</span> изменяются данные
строк, то рекомендуется исключать поля, в которых изменяются данные, из списков
полей, используемых для группировки, упорядочивания и отбора. Если этого не сделать,
группировка, упорядочивание и отбор (включая все виды поиска) будет работать
неожиданно для пользователя. Причиной такого поведение является то, что все
указанные операции выполняются по тем данным, которые непосредственно вернет
запрос формирования динамического списка. Результат работы обработчика <span class="Term">ПриПолученииДанныхНаСервере</span> не используется
для этих операций. Для установки ограничения на использование поля в той или
иной операции предназначены методы динамического списка <span class="Term">УстановитьОграниченияИспользованияВГруппировке()</span>,
<span class="Term">УстановитьОграниченияИспользованияВПорядке()</span> и
<span class="Term">УстановитьОграниченияИспользованияВОтборе()</span>. Методы
<span class="Term">ПолучитьОграниченияИспользования…()</span> (для
реквизита типа <span class="Term">ДинамическийСписок</span>) возвращают текущий список
полей, недоступных для выполнения той или иной операции, при условии, что
список ограничений задан методами <span class="Term">УстановитьОграниченияИспользования…()</span>.</p>

<p class="MsoNormalCxSpLast">Данные,
передаваемые в обработчик события <span class="Term">ПриПолученииДанныхНаСервере</span>, уже обработаны
условным оформлением динамического списка. При этом для вычисления условий,
очевидно, были использованы данные, полученные в качестве результата выполнения
запроса. Если требуется изменять оформление данных динамическлого списка в
зависимости от результата работы обработчика <span class="Term">ПриПолученииДанныхНаСервере</span>, то следует менять
оформление непосредственно в самом обработчике.</p>

<a name="_ref414546361"></a><a id="TI000000398" class="bookmark" name="issogl2_7.3.2_форматированный_документ"><h3>7.3.2. Форматированный документ</h3></a>

<p class="MsoNormalCxSpFirst">В
процессе разработки прикладных решений возникает необходимость предоставить
пользователю возможность выполнять редактирование текстов с оформлением
(далее форматированный документ). В качестве примера такой необходимости
можно привести написание писем электронной почты, различных служебных записок
или сопроводительных документов.</p>

<p class="MsoNormalCxSpMiddle">Для
работы с форматированным документом предназначен объект <span class="Term">ФорматированныйДокумент</span>, с помощью которого
можно выполнять программную обработку документа, и поле вида <span class="Interface">Поле форматированного
документа</span>, который предназначен для интерактивного изменения
форматированного документа.</p>

<p class="MsoNormalCxSpMiddle">В
информационной базе форматированный документ рекомендуется хранить в реквизите
типа <span class="Term">ХранилищеЗначения</span>, в который помещается объект
типа <span class="Term">ФорматированныйДокумент</span>.</p>

<p class="MsoNormalCxSpLast">Для
того чтобы предоставить пользователю возможность интерактивного изменения
документа, следует выполнить следующие шаги:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Создать реквизит формы типа <span class="Term">ФорматированныйДокумент</span> и установить для
него свойство <span class="Interface">Сохраняемые данные</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Создать элемент формы типа <span class="Interface">Поле ввода</span> вида <span class="Interface">Поле форматированного
документа</span> и связать его с ранее созданным реквизитом.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
При чтении данных формы (обработчик <span class="Term">ПриЧтенииНаСервере()</span>) загрузить в реквизит
формы документ (метод <span class="Term">УстановитьHTML()</span>), который необходимо
редактировать, предварительно получив его из информационной базы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Перед записью данных формы (обработчик <span class="Term">ПередЗаписьюНаСервере()</span>) получить результат
(метод <span class="Term">ПолучитьHTML()</span>) редактирования документа и
поместить его в реквизит, сохраняемый в информационной базе.</p>

<p class="MsoNormal">В
процессе работы с документом можно использовать <span class="Bold">закладки</span>.
Закладка описывает положение некоторого символа в документе. При определении положения
нужно учитывать следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
содержимое документа считается одной
последовательностью символов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
перенос строки считается одним символом;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
картинка считается одним символом.</p>

<p class="MsoNormalCxSpFirst">Если
положение символа, с которым связана закладка, изменится, то закладка будет
отслеживать положение связанного символа. Если удаляется символ, с которым
связана закладка, то закладка пытается привязаться к следующему символу, а если
этого символа нет – закладка будет указывать на конец документа. Если
заменить целиком весь форматированный документ, то все закладки в этом
документе станут невалидными.</p>

<p class="MsoNormalCxSpMiddle">С
помощью закладок можно получать и устанавливать выделение или <span class="Bold">позицию</span>
курсора в редакторе, добавлять и удалять элементы текста в документе
(собственно текст, картинка, перевод строки).</p>

<p class="MsoNormalCxSpMiddle">Если
при получении выделения позиция начала и позиция окончания совпадают, это
значит, что выделение отсутствует и получено положение курсора. Так же и при
установке выделения: если начальная и конечная позиция выделения совпадают,
происходит изменение позиции курсора, без выделения. При программном изменении
текста собственно отображение выделения в поле форматированного документа не
изменится. Если перед изменением текста выполнялось получение границ выделения,
то после изменения текста, закладки могут изменить свою позицию, сохранив при
этом свое положение. Другими словами, если вставка происходила внутрь
выделения, то позиция закладки, описывающей окончание выделения, увеличится на
размер вставленного текста и т. д.</p>

<p class="MsoNormalCxSpLast">Приведем
пример получения и установки выделения в редакторе форматированного документа.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Содержимое – реквизит формы типа ФорматированныйДокумент</span>
 <span class="comment">// Редактор – элемент формы типа Поле форматированного документа</span>
 <span class="comment">// Начало – реквизит формы типа Число. Указывает позицию начала выделения.</span>
 <span class="comment">// Окончание – реквизит формы типа Число. Указывает позицию окончания выделения.</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПолучитьВыделение<span class="operator">(</span><span class="operator">)</span>
     ПозицияНачала <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
     ПозицияОкончания <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
     Элементы<span class="operator">.</span>Редактор<span class="operator">.</span>ПолучитьГраницыВыделения<span class="operator">(</span>ПозицияНачала<span class="operator">,</span>ПозицияОкончания<span class="operator">)</span><span class="operator">;</span>
     Начало <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьПозициюПоЗакладке<span class="operator">(</span>ПозицияНачала<span class="operator">)</span><span class="operator">;</span>
     Окончание <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьПозициюПоЗакладке<span class="operator">(</span>ПозицияОкончания<span class="operator">)</span><span class="operator">;</span>
 <span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
 <span class="keyword">Процедура</span> УстановитьВыделение<span class="operator">(</span><span class="operator">)</span>
     ПозицияНачала <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span>Начало<span class="operator">)</span><span class="operator">;</span>
     ПозицияОкончания <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span>Окончание<span class="operator">)</span><span class="operator">;</span>
     Элементы<span class="operator">.</span>Редактор<span class="operator">.</span>УстановитьГраницыВыделения<span class="operator">(</span>ПозицияНачала<span class="operator">,</span>ПозицияОкончания<span class="operator">)</span><span class="operator">;</span>
 <span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">При
выполнении операций удаления закладка, описывающая начало удаляемого фрагмента,
может оказаться некорректной. Если при этом необходимо сохранить позицию начала
удаляемого фрагмента, то следует воспользоваться позицией начала фрагмента.
Так, пример замены выделенного текста другим текстом будет выглядеть следующим
образом.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ВставитьСтрокуВТекущуюПозицию<span class="operator">(</span>Редактор<span class="operator">,</span> Содержимое<span class="operator">,</span> Строка<span class="operator">)</span>
    <span class="keyword">Перем</span> Начало<span class="operator">,</span> <span class="keyword">Конец</span><span class="operator">;</span>
    Редактор<span class="operator">.</span>ПолучитьГраницыВыделения<span class="operator">(</span>Начало<span class="operator">,</span> <span class="keyword">Конец</span><span class="operator">)</span><span class="operator">;</span>
    Позиция <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьПозициюПоЗакладке<span class="operator">(</span>Начало<span class="operator">)</span><span class="operator">;</span>
    Содержимое<span class="operator">.</span>Удалить<span class="operator">(</span>Начало<span class="operator">,</span> <span class="keyword">Конец</span><span class="operator">)</span><span class="operator">;</span>
    Начало <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span>Позиция<span class="operator">)</span><span class="operator">;</span>
    Содержимое<span class="operator">.</span>Вставить<span class="operator">(</span>Начало<span class="operator">,</span> Строка<span class="operator">)</span><span class="operator">;</span>
    Закладка <span class="operator">=</span> Содержимое<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span>Позиция <span class="operator">+</span> СтрДлина<span class="operator">(</span>Строка<span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    Редактор<span class="operator">.</span>УстановитьГраницыВыделения<span class="operator">(</span>Закладка<span class="operator">,</span> Закладка<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormalCxSpFirst">Если
в форматированном документе присутствуют гиперссылки и форматированный документ
отображается в режиме <span class="Interface">Только просмотр</span>,
то гиперссылки доступны для перехода. Переход выполняется в новом окне
веб-браузера.</p>

<p class="MsoNormalCxSpMiddle">Также
имеется возможность программного доступа к тексту форматированного документа.
Сам текст состоит из объектов типа <span class="Term">ПараграфФорматированногоДокумента</span>, который
доступен через свойство <span class="Term">Элементы</span> объекта <span class="Term">ФорматированныйДокумент</span>. При этом каждый
параграф состоит из объектов типа <span class="Term">ТекстФорматированногоДокумента</span>, <span class="Term">ПереводСтрокиФорматированногоДокумента</span> и <span class="Term">КартинкаФорматированногоДокумента</span> (элементы форматированного
документа). Доступ к этой коллекции обеспечивается через свойство <span class="Term">Элементы</span> объекта <span class="Term">ПараграфФорматированногоДокумента</span>. Границей
элемента не обязательно является граница слова.</p>

<p class="MsoNormalCxSpLast">Например,
следующий пример показывает перебор всех параграфов форматированного документа,
содержащих текст, и отдельную обработку каждого параграфа.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Для</span> <span class="keyword">каждого</span> Параграф <span class="keyword">Из</span> Документ<span class="operator">.</span>Элементы <span class="keyword">Цикл</span>
    <span class="keyword">Если</span> Параграф<span class="operator">.</span>ТипПараграфа <span class="operator">=</span> ТипПараграфа<span class="operator">.</span>Обычный <span class="keyword">Тогда</span>
        ОбработатьОбычныйПараграф<span class="operator">(</span>Параграф<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">ИначеЕсли</span> Параграф<span class="operator">.</span>ТипПараграфа <span class="operator">=</span> ТипПараграфа<span class="operator">.</span>МаркированныйСписок <span class="keyword">Тогда</span>
   ОбработатьСписок<span class="operator">(</span>Параграф<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">ИначеЕсли</span> Параграф<span class="operator">.</span>ТипПараграфа <span class="operator">=</span> ТипПараграфа<span class="operator">.</span>НумерованныйСписок <span class="keyword">Тогда</span>
        ОбработатьСписок<span class="operator">(</span>Параграф<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Иначе</span>
        <span class="keyword">Продолжить</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span></pre>

<p class="MsoNormal">Обработка
элементов форматированного документа, входящего в состав параграфа, может
оказаться полезной в том случае, если нужно, например, убрать все оформление в
виде курсива или полужирного шрифта.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Полужирный <span class="operator">=</span> <span class="keyword">Новый</span> Шрифт<span class="operator">(</span><span class="operator">,</span> <span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
Курсив <span class="operator">=</span> <span class="keyword">Новый</span> Шрифт<span class="operator">(</span><span class="operator">,</span> <span class="operator">,</span> <span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
Обычный <span class="operator">=</span> <span class="keyword">Новый</span> Шрифт<span class="operator">;</span>
<span class="keyword">Для</span> <span class="keyword">каждого</span> Элемент <span class="keyword">Из</span> Параграф<span class="operator">.</span>Элементы <span class="keyword">Цикл</span>
    <span class="keyword">Если</span> ТипЗнч<span class="operator">(</span>Элемент<span class="operator">)</span> <span class="operator">=</span> Тип<span class="operator">(</span><span class="string">&quot;ПереводСтрокиФорматированногоДокумента&quot;</span><span class="operator">)</span> <span class="keyword">Тогда</span>
        <span class="keyword">Продолжить</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">Если</span> Элемент<span class="operator">.</span>Шрифт <span class="operator">=</span> Полужирный <span class="keyword">ИЛИ</span> Элемент<span class="operator">.</span>Шрифт <span class="operator">=</span> Курсив <span class="keyword">Тогда</span>
            Элемент<span class="operator">.</span>Шрифт <span class="operator">=</span> Обычный<span class="operator">;</span>
        <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span></pre>

<p class="MsoNormal">При
программной работе с текстом также могут помочь методы <span class="Term">ПолучитьЭлементы()</span> и <span class="Term">СформироватьЭлементы()</span>. Эти методы возвращают
массив элементов форматированного документа. Чтобы увидеть разницу в работе
этих методов, рассмотрим пример форматированного документа, содержащего
следующую строку: 012 456 890. Строка состоит из 11 символов, где на
месте символов 4 и 8 расположены пробелы. Необходимо получить элементы, которые
расположены между позициями 2 и 9 этого документа.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ПозицияНачала <span class="operator">=</span> Документ<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span><span class="number">2</span><span class="operator">)</span><span class="operator">;</span>
ПозицияОкончания <span class="operator">=</span> Документ<span class="operator">.</span>ПолучитьЗакладкуПоПозиции<span class="operator">(</span><span class="number">9</span><span class="operator">)</span><span class="operator">;</span>
Результат <span class="operator">=</span> Документ<span class="operator">.</span>ПолучитьЭлементы<span class="operator">(</span>ПозицияНачала<span class="operator">,</span> ПозицияОкончания<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">Для</span> <span class="keyword">каждого</span> Элемент <span class="keyword">Из</span> Результат <span class="keyword">Цикл</span>
 Сообщить<span class="operator">(</span><span class="string">&quot;Текст – &quot;</span> <span class="operator">+</span> Элемент<span class="operator">.</span>Текст<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span>
Результат <span class="operator">=</span> Документ<span class="operator">.</span>СформироватьЭлементы<span class="operator">(</span>ПозицияНачала<span class="operator">,</span> ПозицияОкончания<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">Для</span> <span class="keyword">каждого</span> Элемент <span class="keyword">Из</span> Результат <span class="keyword">Цикл</span>
    Сообщить<span class="operator">(</span><span class="string">&quot;Текст – &quot;</span> <span class="operator">+</span> Элемент<span class="operator">.</span>Текст<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span></pre>

<p class="MsoNormal">Разница в работе этих методов будет в том,
что метод <span class="Term">ПолучитьЭлементы()</span>
возвращает все элементы, которые попадают между заданными закладками (включая
все граничные элементы), т. е. рассматриваемом примере будет выведен
следующий текст:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">Текст – 012 456 890</pre>

<p class="MsoNormal">А при работе метода <span class="Term">СформироватьЭлементы()</span>
вывод будет следующий:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">Текст – 2 456 8</pre>

<p class="MsoNormalCxSpFirst">Другими словами, при использовании метода <span class="Term">СформироватьЭлементы()</span>
система формирует набор элементов таким образом, чтобы он включал в себя только
то содержимое форматированного документа, которое ограничено закладками.</p>

<p class="MsoNormalCxSpLast">Нужно помнить, что метод <span class="Term">СформироватьЭлементы()</span>
изменяет форматированный документ во время своего вызова и если (в
рассматриваемом примере) после вызова метода <span class="Term">СформироватьЭлементы()</span>
снова вызвать метод <span class="Term">ПолучитьЭлементы()</span>,
то результат работы будет такой:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">Текст – 2 456 8</pre>

<p class="MsoNormal">Такой
результат будет даже в том случае, если полученный, после вызова <span class="Term">СформироватьЭлементы()</span>, набор элементов никак
не изменялся.</p>

<a name="_ref389752968"></a><a id="TI000001458" class="bookmark" name="issogl2_7.3.3_планировщик"><h3>7.3.3. Планировщик</h3></a>

<a name="_ref390788495"></a><a id="TI000001459" class="bookmark" name="issogl3_7.3.3.1_общая_информация"><h4>7.3.3.1. Общая информация</h4></a>

<p class="MsoNormalCxSpFirst">Объект
<span class="Term">Планировщик</span> (далее планировщик) предназначен
для визуализации различных операций, привязанных к дате и времени, с
возможностью повторения этих событий с определенной периодичностью. Планировщик
предназначен для отображения информации и не хранит каких-либо данных в
информационной базе.</p>

<p class="MsoNormalCxSpLast">Общая
схема работы выглядит следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Из информационной базы получаются данные,
которые следует отобразить;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Эти данные (в виде элементов) отображаются в
планировщике;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Пользователь редактирует элементы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Данные измененных элементов актуализируются в
информационной базе.</p>

<p class="MsoNormal">Планировщик
предоставляет возможность переопределять формы, используемые для редактирования
элементов.</p>

<a id="TI000001460" class="bookmark" name="issogl3_7.3.3.2_устройство_планировщика"><h4>7.3.3.2. Устройство планировщика</h4></a>

<a id="TI000001461" class="bookmark" name="issogl4_7.3.3.2.1_измерения"><h5>7.3.3.2.1. Измерения</h5></a>

<p class="MsoNormal">В
планировщике всегда присутствует одно измерение – это <span class="Bold">шкала
времени</span>. Также прикладной разработчик может создать дополнительные <span class="Bold">измерения</span> (коллекция <span class="Term">Планировщик.Измерения</span>), которые позволят
конкретизировать назначение каждого элемента. Измерения не имеют приоритета
друг перед другом, но на форме они «вкладываются» друг в друга согласно порядку
добавления. Каждое измерение характеризуется значением произвольного типа, по
которому в дальнейшем можно выполнять поиск требуемого измерения.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ИзмерениеЗал <span class="operator">=</span> Планировщик<span class="operator">.</span>Измерения<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Зал&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементИзмерения <span class="operator">=</span> ИзмерениеЗал<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Перечисления<span class="operator">.</span>ВидЗала<span class="operator">.</span>Мужской<span class="operator">)</span><span class="operator">;</span>
ЭлементИзмерения <span class="operator">=</span> ИзмерениеЗал<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Перечисления<span class="operator">.</span>ВидЗала<span class="operator">.</span>Женский<span class="operator">)</span><span class="operator">;</span>
ИзмерениеМастер <span class="operator">=</span> Планировщик<span class="operator">.</span>Измерения<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Мастер&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементИзмерения <span class="operator">=</span> ИзмерениеМастер<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Иванов&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементИзмерения <span class="operator">=</span> ИзмерениеМастер<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Петров&quot;</span><span class="operator">)</span><span class="operator">;</span>
ЭлементИзмерения <span class="operator">=</span> ИзмерениеМастер<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Сидорова&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">В
этом примере планировщику добавляется два измерения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Зал</span> –
описывает тип зала некоторой парикмахерской. Для определения типа зала служит
перечисление <span class="Term">ВидЗала</span> с двумя значениями: <span class="Term">Мужской</span> и <span class="Term">Женский</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Мастер</span> –
фамилия мастера, работающего в том или ином зале. Типом значения будет являться
строка с фамилией мастера.</p>

<p class="Regularbeforepicture">На
форме планировщик будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00217.gif?_=1496848987" WIDTH="737" ALT HEIGHT="360"></p>

<p class="MsoCaption">Рис.
218. Два измерения</p>

<p class="Regularbeforepicture">Если
поменять порядок добавления измерений, то на форме это будет выглядеть
следующим образом:</p>

<p class="Picture"><IMG src="_img/img00218.gif?_=1496848987" WIDTH="800" ALT HEIGHT="398"></p>

<p class="MsoCaption">Рис.
219. Измененный порядок измерений</p>

<a name="_ref404182735"></a><a id="TI000001463" class="bookmark" name="issogl4_7.3.3.2.2_элементы"><h5>7.3.3.2.2. Элементы</h5></a>

<p class="MsoNormal">На
«пересечении» измерений и шкалы времени находится <span class="Bold">элемент</span>.
Элемент имеет следующие основные характеристики:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Описание элемента;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Дата и время начала и окончания действия или
события, описываемого элементом;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значения всех измерений, заданных для данного
экземпляра планировщика;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значение элемента;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Параметры повторения элемента (для повторяющихся
элементов).</p>

<p class="MsoNormal">В
простейшем случае элемент создается следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Элемент <span class="operator">=</span> Планировщик<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140606150000'</span><span class="operator">)</span><span class="operator">,</span> Дата<span class="operator">(</span><span class="date">'20140606154000'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
Элемент<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Постричь Василия&quot;</span><span class="operator">;</span>
Измерения <span class="operator">=</span> <span class="keyword">Новый</span> Соответствие<span class="operator">;</span>
Измерения<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Зал&quot;</span><span class="operator">,</span> Перечисления<span class="operator">.</span>ВидЗала<span class="operator">.</span>Мужской<span class="operator">)</span><span class="operator">;</span>
Измерения<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Мастер&quot;</span><span class="operator">,</span> <span class="string">&quot;Иванов&quot;</span><span class="operator">)</span><span class="operator">;</span>
Элемент<span class="operator">.</span>ЗначенияИзмерений <span class="operator">=</span> <span class="keyword">Новый</span> ФиксированноеСоответствие<span class="operator">(</span>Измерения<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">В
данном примере создается элемент, который описывает событие, начинающееся 6
июня 2014 года в 15:00 и заканчивающееся в тот же день в 15:40. Событие будет
происходить в мужском зале (значение измерения <span class="Interface">Зал</span> установлено
в значение <span class="Term">Мужской</span>) и мастером будет Иванов (значение
измерения <span class="Interface">Мастер</span> установлено
в значение <span class="Interface">Иванов</span>).</p>

<p class="Regularbeforepicture">В
результате элемент на форме будет отображаться следующим образом:</p>

<p class="Picture"><IMG src="_img/img00219.gif?_=1496848987" WIDTH="366" ALT HEIGHT="477"></p>

<p class="MsoCaption">Рис.
220. Элемент в планировщике</p>

<p class="MsoNormalCxSpFirst">У
созданного элемента есть недостаток: этот элемент невозможно найти в коллекции
элементов планировщика (коллекция <span class="Term">Планировщик.Элементы</span>) с помощью метода <span class="Term">Найти()</span>. Для того чтобы исправить недостаток,
необходимо при создании элемента указывать в качестве значения элемента
(свойство <span class="Term">Значение)</span> какое-либо уникальное значение,
которое в дальнейшем позволит однозначно идентифицировать элементы в
планировщике.</p>

<p class="MsoNormalCxSpLast">Одним
из вариантов такого уникального идентификатора является следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Создается справочник <span class="Term">События</span>, состав свойств которого позволяет
полностью описать сохраняемые элементы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Ссылка на элемент справочника <span class="Term">События</span> помещается в свойство <span class="Term">Значение</span> создаваемого элемента.</p>

<p class="MsoNormalCxSpFirst">Таким
образом, каждый элемент в планировщике будет однозначно идентифицироваться
ссылкой на элемент справочника <span class="Term">События</span>, из которого получены данные для
создания элемента.</p>

<p class="MsoNormalCxSpLast">Если
при создании элемента указаны не все значения измерений, то такой элемент не
будет отображаться в планировщике.</p>

<a id="TI000001462" class="bookmark" name="issogl4_7.3.3.2.3_шкала_времени"><h5>7.3.3.2.3. Шкала времени</h5></a>

<p class="Regularbeforepicture">В
некоторых случаях удобно, чтобы шкала времени располагалась не вертикально
справа, а вдоль какой-либо другой стороны элемента форма, отображающего
планировщик. Это можно сделать с помощью изменения свойства <span class="Term">Планировщик.ШкалаВремени.Положение</span>. Так, если
присвоить этому свойству значение <span class="Term">ПоложениеШкалыВремени.Верх</span>, то планировщик
будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00220.gif?_=1496848987" WIDTH="800" ALT HEIGHT="399"></p>

<p class="MsoCaption">Рис.
221. Горизонтальная шкала времени</p>

<p class="MsoNormal">Кроме
изменения положения, свойство шкалу времени можно различным образом
настраивать. Первым вариантом настройки является возможность задать, в каких
единицах будет измеряться шкала времени, и сколько таких единиц будет
помещаться на шкале перед тем, как произойдет перенос в следующую колонку (или
строку). Например, можно установить, что шкала времени будет измеряться в часах
и в одной колонке (строке) будет помещаться 6 часов. В этом случае отображение
в планировщике одного дня будет состоять из 4 колонок (строк), в зависимости от
режима отображения шкалы времени: в сутках 24 часа и 6 часов в одной колонке
(строке).</p>

<p class="Regularbeforepicture">При
отображении шкалы времени сверху, изображение будет выглядеть следующим
образом:</p>

<p class="Picture"><IMG src="_img/img00221.gif?_=1496848987" WIDTH="800" ALT HEIGHT="414"></p>

<p class="MsoCaption">Рис.
222. Кратность шкалы времени</p>

<p class="MsoNormal">На
встроенном языке такое поведение задается следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Планировщик<span class="operator">.</span>ЕдиницаПериодическогоВарианта <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>Час<span class="operator">;</span>
Планировщик<span class="operator">.</span>КратностьПериодическогоВарианта <span class="operator">=</span> <span class="number">6</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Положение <span class="operator">=</span> ПоложениеШкалыВремени<span class="operator">.</span>Верх<span class="operator">;</span></pre>

<p class="MsoNormal">Если
заголовки с отметкой часа не нужны над каждым 6-ти часовым фрагментом, то такие
перенесенные заголовки можно отключить, присвоив свойству <span class="Term">Планировщик.ОтображатьПеренесенныеЗаголовкиШкалыВремени</span>
значение <span class="Term">Ложь</span>.</p>

<p class="Regularbeforepicture">Следующим
вариантом настройки шкал времени является изменение текущей шкалы времени или
настройка дополнительных шкал времени (свойство <span class="Term">Планировщик.ШкалаВремени.Элементы</span>). Изменение
шкалы времени необходимо в тех случаях, когда стандартная шкала времени не
устраивает по каким-то причинам. Например, единицей шкалы времени выбран день,
кратность шкалы времени установлена в 7 (неделя), а планировщик отображает
интервал времени, больший 1 недели (например, месяц). В этом случае места
соприкосновения различных дней, в рамках кратности периодического варианта, не
будет визуально никак выделяться на форме:</p>

<p class="Picture"><IMG src="_img/img00222.gif?_=1496848987" WIDTH="510" ALT HEIGHT="550"></p>

<p class="MsoCaption">Рис.
223. Граница двух периодов</p>

<p class="MsoNormal">Для
того чтобы визуально отметить границу, необходимо добавить еще одну шкалу
времени. Добавляемая шкала времени должна описывать целиком один день:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ЭлементШкалыВремени <span class="operator">=</span> Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Единица <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Кратность <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">В
результате граница двух «соседних» дней станет более заметной:</p>

<p class="Picture"><IMG src="_img/img00223.gif?_=1496848987" WIDTH="683" ALT HEIGHT="548"></p>

<p class="MsoCaption">Рис.
224. Разделение двух периодов</p>

<p class="MsoNormal">В
данном примере можно сделать два улучшения: перенести дату перед временем и
сменить формат отображения даты:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ЭлементШкалыВремени <span class="operator">=</span> Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Единица <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Кратность <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Формат <span class="operator">=</span> <span class="string">&quot;Л=; ДЛФ=DD&quot;</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Сдвинуть<span class="operator">(</span>ЭлементШкалыВремени<span class="operator">,</span> <span class="operator">-</span><span class="number">1</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Порядок
следования шкал времени определяется их порядком в коллекции. В рассматриваемом
примере добавляемая шкала оказывается после шкалы, созданной по умолчанию,
поэтому созданная шкала будет сдвинута на 1 позицию ближе к началу коллекции. А
с помощью свойства <span class="Term">Формат</span> задается то, каким образом будет
отображаться время начала дня. В результате разделение периодов станет более
понятным и очевидным:</p>

<p class="Picture"><IMG src="_img/img00224.gif?_=1496848987" WIDTH="499" ALT HEIGHT="285"></p>

<p class="MsoCaption">Рис.
225. Изменен порядок шкал и формат представления</p>

<p class="MsoNormal">Также
следует помнить, что из коллекции <span class="Term">ШкалаВремени</span> невозможно удалить элемент, если
он единственный. Следовательно, вначале необходимо добавить новую шкалу
времени, и лишь затем можно удалить автоматически добавленную шкалу времени.</p>

<a id="TI000001464" class="bookmark" name="issogl4_7.3.3.2.4_периоды_отображения"><h5>7.3.3.2.4. Периоды отображения</h5></a>

<p class="MsoNormalCxSpFirst">Планировщик
может отображать различные периоды времени. Период времени может быть один или
несколько, периоды могут иметь произвольную длительность. Для установки
периодов отображения служит коллекция <span class="Term">Планировщик.ТекущиеПериодыОтображения</span>. Периоды
отображения следует задавать с учетом времени. Если задать период с помощью
конструкции <span class="Term">Планировщик.ТекущиеПериодыОтображения.Добавить(Дата('20140601'),
Дата('20140601'));</span>, то будет отображена первая секунда 1 июня
2014 года. Для того чтобы день окончания периода отображался целиком, следует
использовать функцию <span class="Term">КонецДня()</span> или явным образом указывать время
окончания периода.</p>

<p class="MsoNormalCxSpLast">Отдельного
внимания заслуживает взаимодействие заданных периодов отображения и кратности
временной шкалы. Все добавленные периоды считаются одной непрерывной шкалой, и
переносы шкалы времени обрабатываются именно по этой шкале. Допустим,
необходимо отобразить 7-дневные интервалы на временной шкале для следующего
набора периодов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
1 июня – 5 июня;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
10 июня – 19 июня;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
21 июня – 23 июня.</p>

<p class="MsoNormal">Планировщик
настраивается следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Планировщик<span class="operator">.</span>ЕдиницаПериодическогоВарианта <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
Планировщик<span class="operator">.</span>КратностьПериодическогоВарианта <span class="operator">=</span> <span class="number">7</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Добавить<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140601'</span><span class="operator">)</span><span class="operator">,</span> КонецДня<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140605'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Добавить<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140610'</span><span class="operator">)</span><span class="operator">,</span> КонецДня<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140619'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Добавить<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140621'</span><span class="operator">)</span><span class="operator">,</span> КонецДня<span class="operator">(</span>Дата<span class="operator">(</span><span class="date">'20140623'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ЭлементШкалыВремени <span class="operator">=</span> Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Единица <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Кратность <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Формат <span class="operator">=</span> <span class="string">&quot;Л=; ДЛФ=DD&quot;</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Удалить<span class="operator">(</span>Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">При
такой настройке форма планировщика будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00225.gif?_=1496848987" WIDTH="800" ALT HEIGHT="399"></p>

<p class="MsoCaption"><a name="_ref390773898">Рис. </a>226. Перенос шкалы
времени с дискретными интервалами</p>

<p class="MsoNormalCxSpFirst">На <a href="#_ref390773898">рис.
226</a> видно, что первые 7 дней целиком включили первый
интервал (5 дней, с 1 июня по 6 июня) и 2 дня от второго интервала. Вторые 7 дней
включили 7 дней второго интервала и третьи 7 дней включили остаток второго
интервала и целиком третий интервал.</p>

<p class="MsoNormalCxSpLast">Еще
одним способом задания отображения прерывистых интервалов служит задание
свойств ОтступСНачалаПереносаШкалыВремени
и <span class="Term">ОтступСКонцаПереносаШкалыВремени</span>. Данные свойства задаются в размерности
свойства <span class="Term">ЕдиницаПериодическогоВарианта</span>. Другими
словами, если единицей периодического варианта является день, то и отступ с
начала или конца шкалы времени будет вычисляться в днях. Например, необходимо отобразить
в планировщике июнь 2014 года таким образом, чтобы в каждом 7-дневном интервале
отображались только первые 5 (или менее) дней. Для этого используется следующий
код настройки планировщика (в примере не будет использоваться измерение <span class="Interface">Мастер</span> из предыдущих
примеров):</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Планировщик<span class="operator">.</span>ЕдиницаПериодическогоВарианта <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
Планировщик<span class="operator">.</span>КратностьПериодическогоВарианта <span class="operator">=</span> <span class="number">7</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ТекущиеПериодыОтображения<span class="operator">.</span>Добавить<span class="operator">(</span>НачалоМесяца<span class="operator">(</span><span class="date">'20140601'</span><span class="operator">)</span><span class="operator">,</span> КонецМесяца<span class="operator">(</span><span class="date">'20140601'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ОтступСКонцаПереносаШкалыВремени <span class="operator">=</span> <span class="number">2</span><span class="operator">;</span>
ЭлементШкалыВремени <span class="operator">=</span> Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Единица <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>День<span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Кратность <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
ЭлементШкалыВремени<span class="operator">.</span>Формат <span class="operator">=</span> <span class="string">&quot;Л=; ДЛФ=DD&quot;</span><span class="operator">;</span>
Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Удалить<span class="operator">(</span>Планировщик<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">[</span><span class="number">0</span><span class="operator">]</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">При
такой настройке форма планировщика будет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00226.gif?_=1496848987" WIDTH="800" ALT HEIGHT="406"></p>

<p class="MsoCaption">Рис.
227. Отступ с конца переноса шкалы времени</p>

<p class="MsoNormal">В
данном случае весь июнь разбивается на следующие периоды:</p>

<p class="MsoListNumberCxSpFirst">1.  1
июня – 7 июня;</p>

<p class="MsoListNumberCxSpMiddle">2. 
8 июня – 14 июня;</p>

<p class="MsoListNumberCxSpMiddle">3. 
15 июня – 21 июня;</p>

<p class="MsoListNumberCxSpMiddle">4. 
22 июня – 28 июня;</p>

<p class="MsoListNumberCxSpLast">5. 
29 июня – 30 июня.</p>

<p class="MsoNormalCxSpFirst">Затем
из каждого интервала будет удалено то количество дней (с начала и конца
интервала), которые заданы в свойствах <span class="Term">ОтступСНачалаПереносаШкалыВремени</span> и <span class="Term">ОтступСКонцаПереносаШкалыВремени</span>
(соответственно) и получившиеся интервалы будут отображены. Последний интервал
поглощается отступом целиком, но начало интервала все равно будет отображено
(по аналогии с поведением при задании текущих периодов отображения).</p>

<p class="MsoNormalCxSpLast">Прикладной
разработчик имеет возможность самостоятельно изменять периоды отображения при
навигации пользователя по планировщику (например, с помощью колеса мыши). Для
этого следует обработать событие ПриСменеТекущегоПериодаОтображения. Если параметр <span class="Term">СтандартнаяОбработка</span> в обработчике этого
события будет установлен в значение <span class="Term">Ложь</span>, то периоды отображения, заданные в
параметре <span class="Term">ТекущиеПериодыОтображения</span>, не будут применены
и не произойдет смена периода отображения.</p>

<a id="TI000001465" class="bookmark" name="issogl4_7.3.3.2.5_переопределение_форм_редактирования_элементов"><h5>7.3.3.2.5. Переопределение форм редактирования элементов</h5></a>

<p class="MsoNormal">Для
редактирования элементов в планировщике существуют две формы: форма быстрого
редактирования и форма редактирования события. Для переопределения форм
редактирования используются следующие события:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ПередСозданием</span> – в данном событии можно
переопределить форму, которая будет использоваться при создании нового события.
По умолчанию используется форма быстрого редактирования события.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ПередНачалоБыстрогоРедактирования</span> – в
данном событии можно переопределить форму, которая используется для быстрого
редактирования события. По умолчанию используется форма быстрого редактирования
события.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ПередНачаломРедактирования</span> – в данном
событии можно переопределить форму, которая используется для обычного
редактирования события. Событие срабатывает в следующих случаях:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
В системной форме быстрого редактирования
элемента нажата специальная кнопка. Если форма быстрого редактирования
переопределена, то прикладному разработчику необходимо самому реализовать
механизм открытия формы обычного редактирования события. В этом случае событие <span class="Term">ПередНачаломРедактирования</span> не используется.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
В контекстном меню элемента выбрана команда <span class="Interface">Редактировать</span>;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
На элементе, отображаемом в планировщике,
выполнен двойной щелчок мыши.</p>

<p class="MsoNormalCxSpFirst">Для
того чтобы получить параметры редактирования события следует воспользоваться
свойством <span class="Term">ВыделенныеЭлементы</span> у элемента формы,
отображающего планировщик.</p>

<p class="MsoNormalCxSpLast">Собственно
переопределение формы выполняется следующим образом:</p>

<p class="MsoListNumberCxSpFirst">1.  В
обработчике нужного события открывается требуемая форма;</p>

<p class="MsoListNumberCxSpLast">2. 
Параметр используемого обработчика <span class="Term">СтандартнаяОбработка</span> устанавливается в
значение <span class="Term">Ложь</span>.</p>

<a id="TI000001467" class="bookmark" name="issogl4_7.3.3.2.6_повторяющиеся_элементы"><h5>7.3.3.2.6. Повторяющиеся элементы</h5></a>

<p class="MsoNormalCxSpFirst">Элементы
(см. <a href="#_ref404182735">здесь</a>) бывают однократные и повторяющиеся. Повторяющиеся
элементы обладают расписанием (или правилами повторения элементов). Расписание
задается с помощью одноименного свойства (<span class="Term">Расписание</span>). Несколько элементов, образованных
в результате задания расписания, образуют серию элементов. В рамках серии
возможно как изменение параметров всей серии, так и изменение параметров
одного, конкретного, элемента серии.</p>

<p class="MsoNormalCxSpMiddle">Повторяющиеся
элементы по-разному представлены в коллекции элементов и при отображении на
форме. В коллекции элементов повторяющийся элемент будет представлен в
единственном числе и у этого элемента будет заполнено свойство <span class="Term">Расписание</span>.</p>

<p class="MsoNormalCxSpMiddle">При
отображении на форме будут присутствовать все повторяющиеся элементы, однако
возможность их перебрать система не предоставляет. В тоже время, при попытке
отредактировать какой-либо элемент, образующий серию, свойство элемента формы <span class="Term">ВыделенныеЭлементы</span> будет содержать коллекцию
из элементов планировщика, которые образуют серию для элемента с расписанием. У
таких элементов не будет установлено свойство <span class="Term">Расписание</span>, но будет заполнено свойство <span class="Term">Родитель</span>.</p>

<p class="MsoNormalCxSpMiddle">Свойство
<span class="Term">Родитель</span> будет ссылать на элемент, расписание
которого привело к созданию серии, часть которой предполагается редактировать.</p>

<p class="MsoNormalCxSpMiddle">Если
в форме планировщика выполнить ручное редактирование одного из элементов серии
повторяющихся элементов, то в родительском событии серии станет заполнено
свойство <span class="Term">ЗамещающиеЭлементы</span>. В данной коллекции будут
указаны те элементы серии, для которых были изменены параметры (относительно
родительского события). При создании структуры хранения данных об элементах,
следует помнить о том, что в этой структуре необходимо хранить не только
родительские элементы, но и элементы, для которых некоторые параметры
отличаются от заданных для серии в целом.</p>

<p class="MsoNormalCxSpLast">Если
редактируется элемент из серии, который является замещающим, то свойство <span class="Term">ДатаЗамещения</span> указывает на ту дату и время,
которые были получены в результате первоначального создания серии системой.</p>

<a id="TI000001466" class="bookmark" name="issogl3_7.3.3.3_общая_схема_редактирования_данных_планировщика"><h4>7.3.3.3. Общая схема редактирования данных планировщика</h4></a>

<p class="MsoNormalCxSpFirst">Как
было сказано ранее (см. <a href="#_ref390788495">здесь</a>), планировщик не является средством хранения данных.
Он является средством их (данных) отображения. Поэтому для хранения информации
о событиях в информационной базе должна быть создана соответствующая структура
данных, например, справочник.</p>

<p class="MsoNormalCxSpLast">Общая
схема работы выглядит следующим образом:</p>

<p class="MsoListNumberCxSpFirst">1.  Определяются
общие параметры планировщика, количество измерений, настройки шкалы времени и т. д.</p>

<p class="MsoListNumberCxSpMiddle">2. 
Определяется текущий период отображения
планировщика;</p>

<p class="MsoListNumberCxSpMiddle">3. 
В соответствии с установленным периодом
отображения из информационной базы получаются данные об отображаемой
информации, и выполняется создание нужных событий в элементе формы. В качестве значения
свойства <span class="Term">Значение</span> для элемента планировщика
используется ссылка на элемент справочника, хранящего данные.</p>

<p class="MsoListNumberCxSpLast">4. 
При редактировании или удалении элементов
запоминаются свойство <span class="Term">Значение</span> для событий, которые были изменены
или удалены. Это можно сделать с помощью реквизитов формы, в которых будут
сохраняться значения свойства <span class="Term">Значение</span> измененных или удаленных элементов.</p>

<p class="Indentlist">Новые
элементы можно будет определить по незаполненному свойству <span class="Term">Значение</span> у элемента. Для этого необходимо перебрать
всю коллекцию <span class="Term">Планировщик.Элементы</span>.</p>

<p class="MsoListNumberCxSpFirst">5. 
При смене периода отображения выполняется
создание элементов, которые принадлежат новому периоду отображения.</p>

<p class="MsoListNumberCxSpLast">6. 
При успешном завершении работы с планировщиком,
выполняется синхронизация данных планировщика и справочника, в котором хранятся
данные элементов.</p>

<a name="_ref423694245"></a><a name="_ref427316654"></a><a name="_ref427316653"></a><a id="TI000001665" class="bookmark" name="issogl2_7.3.4_диаграммы"><h3>7.3.4. Диаграммы</h3></a>

<a id="TI000001666" class="bookmark" name="issogl3_7.3.4.1_общие_сведения"><h4>7.3.4.1. Общие сведения</h4></a>

<p class="Regularbeforepicture">Диаграммой
называют способ графического представления данных. Простой разновидностью
диаграммы является график. График используется для отображения
последовательного изменения величин во времени или в зависимости от изменения
других величин. Например, с помощью графика можно продемонстрировать изменение
цены товара в течение года.</p>

<p class="Picture"><IMG src="_img/img00227.gif?_=1496848987" WIDTH="633" ALT HEIGHT="348"></p>

<p class="MsoCaption">Рис.
228. Пример графика</p>

<p class="Regularbeforepicture">По
вертикальной оси графика отмечены значения показываемой величины (цена), по
горизонтальной оси – точки графика (месяцы). В случае необходимости
отображения различных показателей на одном графике их величины показывают в
виде отдельных серий.</p>

<p class="Picture"><IMG src="_img/img00228.gif?_=1496848987" WIDTH="633" ALT HEIGHT="348"></p>

<p class="MsoCaption">Рис.
229. Пример графика c 2 сериями</p>

<p class="MsoNormalCxSpFirst">В
приведенном примере <span class="Interface">Яблоки</span> и <span class="Interface">Яйца</span> –
серии диаграммы, месяцы – точки диаграммы.</p>

<p class="MsoNormalCxSpLast">Для
наглядного отображения данных разного вида используют различные типы диаграмм.
Доступны три типа данных для работы с диаграммами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Диаграмма (см. <a href="#_ref423094550">здесь</a>). Диаграмма доступна для размещения в форме,
табличном документе и системе компоновки данных.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Диаграмма Ганта (см. <a href="#_ref423094556">здесь</a>). Диаграмма Ганта доступна для размещения в форме и
табличном документе.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Дендрограмма (см. <a href="#_ref423094562">здесь</a>). Дендрограмма доступна для размещения в форме и
табличном документе.</p>

<p class="MsoNormal">Далее
каждый из основных видов диаграмм будет рассмотрен более подробно.</p>

<a name="_ref423094550"></a><a name="_ref466373913"></a><a name="_ref466561243"></a><a id="TI000001875" class="bookmark" name="issogl3_7.3.4.2_интерактивное_редактирование_свойств_диаграмм"><h4>7.3.4.2. Интерактивное редактирование свойств диаграмм</h4></a>

<a id="TI000001876" class="bookmark" name="issogl4_7.3.4.2.1_общая_информация"><h5>7.3.4.2.1. Общая информация</h5></a>

<p class="MsoNormal">Конфигуратор
позволяет редактировать свойства четырех основных областей диаграммы:</p>

<p class="MsoListNumberCxSpFirst">1. 
Всей диаграммы в целом.</p>

<p class="MsoListNumberCxSpMiddle">2. 
Область построения диаграммы – та область,
где отображается собственно диаграмма.</p>

<p class="MsoListNumberCxSpMiddle">3. 
Область заголовка диаграммы – область, где
отображается заголовок диаграммы.</p>

<p class="MsoListNumberCxSpLast">4. 
Область легенды – область, где отображается
легенда диаграммы: как называются отображаемые данные и каким образом они отображаются
на диаграмме.</p>

<p class="MsoNormalCxSpFirst">Пример расположения областей диаграммы
приведен на <a href="#_ref465945118">рис.236</a>.</p>

<p class="MsoNormalCxSpLast">Для редактирования свойств диаграммы
необходимо выполнить следующие действия:</p>

<p class="MsoListBullet">&#9679; 
В форме:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Выделить реквизит формы требуемого типа: <span class="Term">Диаграмм</span>,
<span class="Term">ДиаграммаГанта</span> или
<span class="Term">Дендрограмма</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Для данного реквизита выбрать команду <span class="Interface">Перейти</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
В открывшемся диалоге выбрать объект перехода <span class="Interface">Данные – Тип диаграммы – Настройка</span>.</p>

<p class="MsoListBullet">&#9679; 
В табличном документе:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Выбрать рисунок необходимого типа (вставка
рисунка осуществляется с помощью команд меню <span class="Interface">Главное меню – Таблица – Рисунки</span>).</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Открыть палитру свойств рисунка.</p>

<p class="MsoNormal">В зависимости от выделенной области, палитра
свойств будет отображать свойства соответствующей области диаграммы. Чтобы
перейти от редактирования свойств какой-либо области к редактированию свойств
всей диаграммы в целом, следует нажать на редактируемой области левой кнопкой
мышью еще раз.</p>

<a id="TI000001877" class="bookmark" name="issogl4_7.3.4.2.2_редактирование_свойств_диаграммы"><h5>7.3.4.2.2. Редактирование свойств диаграммы</h5></a>

<a name="_ref466045171"></a><a id="TI000001878" class="bookmark" name="issogl5_общая_информация"><h6>Общая информация</h6></a>

<p class="MsoNormalCxSpFirst">Набор
свойств, редактируемых для диаграммы в целом, существенно зависит от вида самой
диаграммы.</p>

<p class="MsoNormalCxSpMiddle">В
общем случае, в свойствах диаграммы редактируется доступность самой диаграммы,
необходимость отображения заголовка диаграммы и параметры отображения. В панели
свойств эти параметры сгруппированы в группы <span class="Interface">Основные</span>, <span class="Interface">Характеристики</span> и <span class="Interface">Оформление</span>.</p>

<p class="MsoNormalCxSpLast">Также
имеется возможность настроить параметры отображения серий. Эти параметры
зависят от вида диаграммы, но имеется три общих параметра:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Отображать графическое
представление данных в диаграмме</span> – этот параметр указывает, каким
образом выбранная серия будет отображаться в диаграмме:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Отображать</span> –
данная серия будет всегда отображаться в диаграмме.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Не отображать</span> –
выбранная серия не будет отображаться в диаграмме и не будет участвовать в
формировании объединенной серии.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Авто</span> (значение по умолчанию) –
выбранная серия отображается в диаграмме, если не включено ограничений по количеству
серий.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Отображать в легенде</span> –
определяет, каким образом выбранная серия будет отображаться в легенде
диаграммы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Отображать</span> –
серия отображается в легенде.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Не отображать</span> –
серия не отображается в легенде.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Авто</span> (значение по
умолчанию) – отображение серии в легенде управляется свойством <span class="Interface">Отображать графическое представление данных в диаграмме</span>.
Серия будет отображаться в легенде в том случае, если она отображается в диаграмме.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Линии тренда</span> –
позволяет указать параметры построения линий тренда для серии. <span class="Bold">Линия тренда</span> представляет собой геометрическое отображение
средних значений анализируемых показателей, полученное с помощью какой-либо
математической функции. Система «1С:Предприятие» предоставляет возможность
выполнять построение линий тренда с помощью следующих функций:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Линейная. Используется уравнение вида <span class="Term">y=a*x+b</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Экспоненциальная. Используется уравнение вида: <span class="Term">y=b*e^(a*x)</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Логарифмическая. Используется уравнение вида: <span class="Term">y=a*ln(x)+b</span>.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Степенная. Используется уравнение: <span class="Term">y=a*x^b</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полиномиальная. Используется уравнение вида: <span class="Term">a0+a1*x+…+aN*(x^N)</span>,
где <span class="Term">N</span>
больше 2.</p>

<p class="Note"><span class="Note">ПРИМЕЧАНИЕ</span>. Описание используемых
функций и их особенностей выходит за рамки данной документации. Особенности поведения
используемых функций и их (функций) параметризацию следует искать в
соответствующих учебных материалах.</p>

<p class="Regularbeforepicture">Редактирование линий тренда осуществляется в
специальном диалоге.</p>

<p class="Picture"><IMG src="_img/img00229.gif?_=1496848987" WIDTH="700" ALT HEIGHT="275"></p>

<p class="MsoCaption">Рис. 230. Настройка линий
тренда</p>

<p class="MsoNormal">Для одной серии можно указать более одной
линии тренда. Для этого нужно добавить новую линию тренда в данном диалоге. При
добавлении указываются:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Тип</span> – какая
функция будет использоваться для построения линии тренда. Список функций
приведен выше.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Порядок аппроксимации</span> –
определяет значение N в том случае, если типом
линии тренда выбрана полиномиальная функция.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Фактор</span> – что
будет являться значением (фактором) для интерполяции:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Номер точки</span> –
фактором будет выступать порядковый номер точки на данной диаграмме (нумерация
начинается с 1).</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Значение точки</span> –
фактором будет являються свойство <span class="Interface">Значение</span> точки, приведённое к типу <span class="Term">Число</span>.
Если значениями серии или точек являются даты, и для линии тренда свойство <span class="Interface">Фактор</span> установлено в <span class="Interface">Значение точки</span>, то при расчёте тренда, даты переводятся
в числа как количество дней (суток), прошедшее с минимальной для данной
диаграммы даты. Количество дней может быть дробным.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Авто</span> (значение по
умолчанию) – фактором будет выступать либо как номер точки, либо ее
значение, в зависимости от значений всех точек.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Значение в биржевой
диаграмме</span> – в биржевой диаграмме и диаграмме биржевая «свеча»
каждая точка задаётся четырьмя значениями: цена открытия, максимальная,
минимальная, цена закрытия. Данное свойство указывает, какие значения будут
использоваться для интерполяции.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Цвет</span> –
определяет цвет линии тренда. Если в качестве цвета указано значение <span class="Interface">Авто</span> (для этого следует очистить заданное значение
кнопкой очистки значения), то цвет линии тренда будет:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
если выводится несколько серий – равен
цвету серии, для которой линия тренда была создана (соответственно, при смене
цвета серии, изменяется цвет линии тренда);</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
если выводится одна серия – чёрный.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Маркер</span> –
определяет форму маркера. Маркер отображается только в начале и конце линии
тренда.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Линия</span> –
определяет стиль линии, которой будет рисоваться линия тренда.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Текст</span> –
название линии тренда, которое будет оторажаться в легенде диаграммы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Область уравнения</span> –
свойство описывает, где и как будет отображаться фактическое уравнение,
описывающее построенную линию тренда (если это указано).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В группе свойств <span class="Interface">Отображать</span> указывается, как будут отображаться
характеристики линии тренда:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">В легенде</span> –
будет или нет линия тренда преставлена в легенде диаграммы.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Уравнение</span> –
будет или нет отображаться в диаграмме фактическое уравнение интерполяции.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Коэффициент детерминации</span> –
управляет отображением коэффициента детерминации. Коэффициент детерминации оценку
интерполяционной функции на использованных заданных данных и позволяет оценить
адекватность использованной функции для использованных данных.</p>

<p class="MsoNormal">В том случае, если для диаграммы в значение <span class="Term">Истина</span>
установлено свойство <span class="Interface">Пропускать базовые значения</span>, то в расчет линий тренда не
попадают точки с базовым значением. В диаграммах с накоплением и нормированных
диаграммах линии тренда отображаются «как есть», т. е. без
накопления.</p>

<a id="TI000001879" class="bookmark" name="issogl5_диаграмма"><h6>Диаграмма</h6></a>

<p class="MsoNormalCxSpFirst">Для
объектов типа <span class="Term">Диаграмма</span>, в свойствах самой диаграммы редактируется
тип диаграммы, область данных, характеристики отображения и т. д.
Также для объекта <span class="Term">Диаграмма</span> имеется возможность редактировать параметры
отображения каждой серии диаграммы и характеристики отображения точек. При
необходимости сменить настраиваемую серию, следует использовать свойство
диаграммы <span class="Interface">Текущая серия</span>. Если в диаграмме используется ограничение
по количеству серий (см. <a href="#_ref465952951">здесь</a>), сводная серия настраивается при выборе в свойстве <span class="Interface">Текущая серия</span> значения <span class="Interface">Сводная</span>.</p>

<p class="MsoNormalCxSpLast">Свойство
<span class="Interface">Порядок серий в легенде</span> определяет, каким образом будет
отображаться списко серий в легенде диаграммы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Прямой</span> – порядок
следования серий в легенде соответствует порядку добавления серий.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Обратный</span> – порядок
следования серий в легенде соответствует обратному порядку добавления серий.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Авто</span> (значение по
умолчанию) – в этом случае пордок следования серий в легенде зависит от
вида диаграммы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Обратный порядок используется для следующих
диаграмм: гистрограмма горизонтальная, гистрограмма горизонтальная объемная,
график с накоплением, график с областями и накоплением, график с областями
нормированный, гистограмма с накоплением, гистограмма с накоплением объемная,
гистрограмма нормированная, гистрограмма нормированная объемная.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Прямой порядок используется для остальных
диаграмм.</p>

<p class="MsoNormalCxSpFirst">Группа
свойств <span class="Interface">Ось значений</span> описывает параметры, с помощью которых можно
указать базовое значение диаграммы (свойство <span class="Interface">Базовое значение</span>) и правила вычисления максимального и
минимального значений диаграммы.</p>

<p class="MsoNormalCxSpLast">Для
указания максимального и минимального значения диаграммы предоставляется
несколько различных вариантов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Автоопределение</span>
(значение по умолчанию) – в этом случае максимальное/минимальное значение
определяется исходя из данных, установленных для отображения диаграммой.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Использовать значение</span> –
в этом случае конкретные значения максимального/минимального значения задаются
значениями в свойстсвах <span class="Interface">Максимальное значение</span>/<span class="Interface">Минимальное значение</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Использовать значение с
ограничением</span> – в этом случае максимальное/минимальное значение
задается в свойствах <span class="Interface">Максимальное значение</span>/<span class="Interface">Минимальное значение</span>, но если фактические
максимальные/минимальные значения отображаемых данных превышают (по модулю)
указанные значения – будут использоваться реальные
максимальные/минимальные значения.</p>

<p class="MsoNormal">Если
максимальное и минимальное значения для диаграммы указаны таким образом, что
минимальное значение больше максимального (например, в результате ошибки в
явной установке значений), то расчет фактических максимального и минимального
значений, выполняется следующим образом:</p>

<p class="MsoListBullet">&#9679; 
Если значение свойства <span class="Interface">Расчет максимального значения диаграммы</span> равно <span class="Interface">Использовать значение</span>, и значение свойства <span class="Interface">Расчет минимального значения диаграммы</span> не равно <span class="Interface">Использовать значение</span>, то при расчёте интервала:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Минимальное значение рассчитывается по формуле <span class="Term">МаксимальноеЗначениe*2–МинимальноеЗначение</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Минимальное значение корректируется (в меньшую сторону)
таким образом, чтоб получить «красивое» деление шкалы.</p>

<p class="MsoListBullet">&#9679; 
Если значение свойства <span class="Interface">Расчет минимального значения диаграммы</span> равно <span class="Interface">Использовать значение</span>, и значение свойства <span class="Interface">Расчет максимального значения диаграммы</span> не равно <span class="Interface">Использовать значение</span>, то при расчёте интервала:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Максимальное значение расчитывается по формуле <span class="Term">МинимальноеЗначение*2–МаксимальноеЗначениe</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Максимальное значение корректируется (в меньшую
сторону) таким образом, чтоб получить «красивое» деление шкалы.</p>

<p class="MsoListBullet">&#9679; 
Если значение свойства <span class="Interface">Расчет минимального значения диаграммы</span> равно <span class="Interface">Использовать значение</span>, и значение свойства <span class="Interface">Расчет максимального значения диаграммы</span> равно <span class="Interface">Использовать значение</span>, то при расчёте интервала:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Маскимальное значение рассчитывается по формуле <span class="Term">МинимальноеЗначение*2–МаксимальноеЗначениe</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Максимальное значение корректируется (в меньшую
сторону) таким образом, чтоб получить «красивое» деление шкалы. Следует
отметить, что корректировка максимального значения выполняется несмотря на то,
что алгоритм расчета максимального значения задан как <span class="Interface">Использовать значение</span>. Эта коррекция выполняется потому,
что заданы некорректные максимальное и минимальное значения.</p>

<p class="MsoNormalCxSpFirst">Если
на оси значений откладываются числовые значения, а в качестве
максимального/минимального значени указано значение типа <span class="Term">Дата</span>, то соответствующее установленное значение
игнорируется, и расчёт максимума/минимума выполняется автоматически.</p>

<p class="MsoNormalCxSpMiddle">Для
диаграмм, расположенных в табличном документе, имеется возможность указать
область ячеек табличного документа, которая будет являться источником данных
для диаграммы. Для этого предназначено свойство <span class="Interface">Область данных</span>. В этом случае имеется возможность указать,
каким образом расположены серии данных: в строках или в столбцах (свойство <span class="Interface">Серии в строках</span>).</p>

<p class="MsoNormalCxSpLast">Так,
если в качестве примера рассмотреть тестовый набор данных (см. <a href="#_ref466040500">здесь</a>), который используется далее в данной главе, то:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если свойство <span class="Interface">Серии в строках</span> установлено, то в качестве серий будут
использованы значения из строк <span class="Interface">14.03</span>, <span class="Interface">15.03</span>, <span class="Interface">16.03</span>, <span class="Interface">17.03</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Если свойство <span class="Interface">Серии в строках</span> сброшено, то в качестве серий будут
использованы значения из колонок <span class="Interface">Оптовые покупатели</span>, <span class="Interface">Розничные покупатели</span> и <span class="Interface">Дилеры</span>.</p>

<a id="TI000001880" class="bookmark" name="issogl4_7.3.4.2.3_редактирование_свойств_области_построения"><h5>7.3.4.2.3. Редактирование свойств области построения</h5></a>

<p class="MsoNormal">При
редактировании свойств области построения имеется возможность описать, каким
образом будет отображаться шкала точек, серий и значений. Такая настройка
производится с помощью одноименных свойств области построения: <span class="Interface">Шкала точек</span>, <span class="Interface">Шкала серий</span> и <span class="Interface">Шкала значений</span>.</p>

<p class="Regularbeforepicture">Каждая из шкал настраивается с помощью
редактора шкалы диаграммы.</p>

<p class="Picture"><IMG src="_img/img00230.gif?_=1496848987" WIDTH="370" ALT HEIGHT="193"></p>

<p class="MsoCaption">Рис. 231. Редактор шкалы
диаграммы</p>

<p class="MsoNormal">Более
подробно рассмотрим возможности редактора:</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Interface">Отображение заголовка</span> определяет, как будет отображаться
заголовок шкалы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Авто</span> (значение по
умолчанию) – в этом случае заголовок отображается в том случае, если он не
пустой.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Отображать</span> – заголовок
отображается в любом случае.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Не отображать</span> –
заголовок не отображается в любом случае.</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Interface">Формирование заголовка</span> определяет, откуда будет
получаться заголовок соответствующей шкалы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Авто</span> (значение по
умолчанию) – заголовок шкалы получается из свойства <span class="Interface">Текст заголовка</span>. Если свойства не заполнено, то значение
получается в автоматическом режиме.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Использовать текст</span> –
в этом случае используется значение, заданное в свойстве <span class="Interface">Текст заголовка</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Автотекст</span> – в
этом случае заголовок формируется автоматически.</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Interface">Расположение заголовка</span> определяет, в какой части
диаграммы будет расположен заголовок:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Рядом с осью</span> –
в этом случае заголовок расположен непосредственно рядом со «своей» осью.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">В области построения</span> –
в этом случае заголовок располагается в любом месте области построения
диаграммы (выбирается системой автоматически).</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">В выделенной области</span> –
для заголовка выделяется место ниже/левее горизонтальной/вертикальной оси. Для
заголовка выделяется отдельное место, для избежания пересечения с метками
шкалы.</p>

<p class="Picture"><IMG src="_img/img00231.gif?_=1496848987" WIDTH="396" ALT HEIGHT="478"></p>

<p class="MsoCaption">Рис. 232. Настройка области
подписи</p>

<p class="MsoListBullet">&#9679; 
Свойство <span class="Interface">Область заголовка</span> позволяет точно настроить параметры
области отображения заголовка. При этом следует учитывать следующие правила
расположения заголовка, в зависимости от свойства <span class="Interface">Расположение заголовка</span> и свойства <span class="Interface">Положение</span> настройки области заголовка:</p>

<p class="MsoListBullet2">&#9679; 
Свойство <span class="Interface">Расположение заголовка</span> установлено в значение <span class="Interface">В выделенной области</span>. Значение <span class="Interface">Положение</span> области настройки заголовка:</p>

<p class="MsoListBullet3">&#9679; 
Если ось расположена горизонтально:</p>

<p class="MsoListBullet4CxSpFirst">&#9679; 
<span class="Interface">Авто</span>, <span class="Interface">Центр</span>, <span class="Interface">Свободное место</span>, <span class="Interface">Край</span>, <span class="Interface">Край авто</span> или <span class="Interface">Край внутри</span> – подпись распологается в выделенной
области, по центру.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Лево верх</span> или <span class="Interface">Лево низ</span> – подпись располагается в выделенной
области, слева.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Право верх</span> или <span class="Interface">Право низ</span> – то подпись располагается в выделенной
области, справа.</p>

<p class="MsoListBullet4CxSpLast">&#9679; 
<span class="Interface">Координаты</span> – подпись
располагается в выделенной области, а свойства <span class="Interface">Верх</span> и <span class="Interface">Лево</span> указывает смещение внутри выделенной области. При
этом <span class="Interface">0</span> – это минимальное значение по соответствующей
координате, а <span class="Interface">1</span> – максимальное значение. Таким образом, значение <span class="Interface">0,5</span> является серединой области, выделенно для
отображения заголовка.</p>

<p class="MsoListBullet3">&#9679; 
Если ось расположена вертикально:</p>

<p class="MsoListBullet4CxSpFirst">&#9679; 
<span class="Interface">Авто</span>, <span class="Interface">Центр</span>, <span class="Interface">Свободное место</span>, <span class="Interface">Край</span>, <span class="Interface">Край авто</span> или <span class="Interface">Край внутри</span> – подпись распологается в выделенной
области, по центру.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Лево верх</span> или <span class="Interface">Право верх</span> – подпись располагается в выделенной
области, сверху.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Лево низ</span> или <span class="Interface">Право низ</span> – подпись располагается в выделенной
области, снизу.</p>

<p class="MsoListBullet4CxSpLast">&#9679; 
<span class="Interface">Координаты</span> – подпись
располагается в выделенной области, а свойства <span class="Interface">Верх</span> и <span class="Interface">Лево</span> указывает смещение внутри выделенной области. При
этом <span class="Interface">0</span> – это минимальное значение по соответствующей
координате, а <span class="Interface">1</span> – максимальное значение. Таким образом, значение <span class="Interface">0,5</span> является серединой области, выделенно для
отображения заголовка.</p>

<p class="MsoListBullet3">&#9679; 
Свойство <span class="Interface">Расположение заголовка</span> установлено в значение <span class="Interface">В области построения</span>. Значение <span class="Interface">Положение</span> области настройки заголовка:</p>

<p class="MsoListBullet4CxSpFirst">&#9679; 
<span class="Interface">Край</span> и <span class="Interface">Край авто</span> – подпись для вертикальной оси
располагается слева области построения, подпить горизонтальной оси
располагается сверху области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Край внутри</span> – подпись
для вертикальной оси располагается слева области построения, подпить
горизонтальной оси располагается снизу области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Центр</span> – подпись
располагается по центру области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Авто</span> – аналогично
<span class="Interface">Свободное
место</span>.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Верх лево</span> – подпись
располагается в верхнем левом углу области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Низ лево</span> – подпись
располагается в нижнем левом углу области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Верх право</span> – подпись
располагается в верхнем правом углу области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Низ право</span> – подпись
располагается в нижнем правом углу области построения.</p>

<p class="MsoListBullet4CxSpMiddle">&#9679; 
<span class="Interface">Координаты</span> – подпись
располагается в выделенной области, а свойства <span class="Interface">Верх</span> и <span class="Interface">Лево</span> указывает смещение внутри выделенной области. При
этом <span class="Interface">0</span> – это минимальное значение по соответствующей
координате, а <span class="Interface">1</span> – максимальное значение. Таким образом, значение <span class="Interface">0,5</span> является серединой области, выделенно для
отображения заголовка.</p>

<p class="MsoListBullet4CxSpLast">&#9679; 
<span class="Interface">Свободное место</span> –
автоматически ищется подходящее место внутри области построения.</p>

<p class="MsoListBullet3">&#9679; 
Свойство <span class="Interface">Расположение заголовка</span> установлено в значение <span class="Interface">Рядом с осью</span>. В этом случае поведение аналогично поведению,
если расположение заголовка указано в значение <span class="Interface">В области построения</span>, но вместо области построения выбирается
область непосрдественно рядом с соответствующей осью. В зависимости от
расподложения оси, область имеет следующие размер и положение:</p>

<p class="MsoListBullet4CxSpFirst">&#9679; 
Ось расположена горизонтально: область является
прямоугольником, ширина которого равна длине оси, а высота – две высоты
подписи.</p>

<p class="MsoListBullet4CxSpLast">&#9679; 
Ось расположена вертикально: область является
прямоугольником, ширина которого равна двум высотам подписи, а высота –
длине оси.</p>

<a name="_ref437342774"></a><a id="TI000001667" class="bookmark" name="issogl3_7.3.4.3_диаграмма"><h4>7.3.4.3. Диаграмма</h4></a>

<a id="TI000001668" class="bookmark" name="issogl4_7.3.4.3.1_общие_сведения"><h5>7.3.4.3.1. Общие сведения</h5></a>

<p class="Regularbeforepicture">Реквизит
формы типа <span class="Interface">Диаграмма</span>
отображается на управляемой форме с помощью поля формы вида <span class="Interface">Поле диаграммы</span>.</p>

<p class="Picture"><IMG src="_img/img00232.gif?_=1496848987" WIDTH="580" ALT HEIGHT="452"></p>

<p class="MsoCaption">Рис.
233. Диаграмма на форме</p>

<p class="Regularbeforepicture">Для
настройки свойств диаграммы предназначена специальная форма, вызов которой
осуществляется либо из панели свойств (нажатием на гиперссылку <span class="Interface">Открыть</span> с
свойства <span class="Interface">Настройка</span>) или
с помощью команды <span class="Interface">Перейти</span>
контекстного меню элемента формы вида <span class="Interface">Поле диаграммы</span>.
Если форма настройки открывается с помощью команды перехода, то в диалоге <span class="Interface">Объект перехода</span>
следует выбрать не саму диаграмму, а форму настройки.</p>

<p class="Picture"><IMG src="_img/img00233.gif?_=1496848987" WIDTH="451" ALT HEIGHT="142"></p>

<p class="MsoCaption">Рис.
234. Переход к настройкам диаграммы</p>

<p class="Regularbeforepicture">Окно
настройки позволяет детально настроить как диаграмму в целом, так и отдельные
ее области.</p>

<p class="Picture"><IMG src="_img/img00234.gif?_=1496848987" WIDTH="731" ALT HEIGHT="351"></p>

<p class="MsoCaption">Рис.
235. Форма настройки</p>

<p class="MsoNormal">Свойство
<span class="Interface">Тип диаграммы</span> определяет способ
отображения данных. От выбора типа диаграммы зависит доступность отдельных ее
свойств. Поле диаграммы состоит из трех областей:</p>

<p class="MsoListNumberCxSpFirst">1.  область
построения,</p>

<p class="MsoListNumberCxSpMiddle">2. 
область легенды</p>

<p class="MsoListNumberCxSpLast">3. 
область заголовка.</p>

<p class="Regularbeforepicture">По
умолчанию эти области расположены следующим образом:</p>

<p class="Picture"><IMG src="_img/img00235.gif?_=1496848987" WIDTH="647" ALT HEIGHT="440"></p>

<p class="MsoCaption"><a name="_ref465945118">Рис. </a>236. Области
диаграммы</p>

<p class="MsoNormal">Область
построения может содержать следующие элементы:</p>

<p class="MsoListNumberCxSpFirst">1.  шкала
точек,</p>

<p class="MsoListNumberCxSpMiddle">2. 
шкала серий,</p>

<p class="MsoListNumberCxSpMiddle">3. 
шкала значений,</p>

<p class="MsoListNumberCxSpLast">4. 
таблица данных.</p>

<p class="Regularbeforepicture">На
диаграмме эти элементы могут располагаться следующим образом:</p>

<p class="Picture"><IMG src="_img/img00236.gif?_=1496848987" WIDTH="800" ALT HEIGHT="476"></p>

<p class="MsoCaption">Рис.
237. Элементы диаграммы</p>

<p class="MsoNormal">Для
отображения таблицы данных следует включить признак <span class="Term">ОтображатьТаблицуДанных</span> области построения
диаграммы. Использование этого свойства доступно не для всех типов диаграмм.</p>

<a id="TI000001669" class="bookmark" name="issogl4_7.3.4.3.2_работа_с_диаграммами_средствами_встроенного_языка"><h5>7.3.4.3.2. Работа с диаграммами средствами встроенного языка</h5></a>

<a id="TI000001670" class="bookmark" name="issogl5_работа_с_данными_диаграммы"><h6>Работа с данными диаграммы</h6></a>

<p class="MsoNormalCxSpFirst">Связь
объекта <span class="Term">Диаграмма</span> с данными может быть организована
двумя способами.</p>

<p class="MsoNormalCxSpLast">Первый
способ основан на возможности создавать серии и точки диаграммы, а также
устанавливать их значения из встроенного языка. В следующем примере для
диаграммы создается серия из десяти точек со случайными данными.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Генератор <span class="operator">=</span> <span class="keyword">Новый</span> ГенераторСлучайныхЧисел<span class="operator">;</span>
Диаграмма<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Диаграмма<span class="operator">.</span>Обновление <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
Серия <span class="operator">=</span> Диаграмма<span class="operator">.</span>Серии<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Серия&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">Для</span> Сч <span class="operator">=</span> <span class="number">1</span> <span class="keyword">По</span> <span class="number">10</span> <span class="keyword">Цикл</span>
    Точка <span class="operator">=</span> Диаграмма<span class="operator">.</span>Точки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Точка № &quot;</span> <span class="operator">+</span> Строка<span class="operator">(</span>Сч<span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    Значение <span class="operator">=</span> Генератор<span class="operator">.</span>СлучайноеЧисло<span class="operator">(</span><span class="number">1</span><span class="operator">,</span> <span class="number">10</span><span class="operator">)</span><span class="operator">;</span>
    Диаграмма<span class="operator">.</span>УстановитьЗначение<span class="operator">(</span>Точка<span class="operator">,</span> Серия<span class="operator">,</span> Значение<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span>
Диаграмма<span class="operator">.</span>Обновление <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">При
таком способе заполнения данных доступен метод <span class="Term">Транспонировать()</span>, позволяющий поменять
местами серии и точки диаграммы. Возможность транспонирования может быть
полезна при изменении типа диаграммы. Например, круговая диаграмма отображает
значения, представленные в виде одной точки и набора серий. Чтобы показать те
же данные на графике потребуется поменять местами серии и точки. Свойство <span class="Term">Автотранспонирование</span> позволяет включить режим,
в котором необходимость транспонирования определяется автоматически в
зависимости от типа диаграммы и структуры данных.</p>

<p class="MsoNormalCxSpLast">Второй
способ заполнения данных диаграммы связан с использованием свойства <span class="Term">ИсточникДанных</span>. В качестве источника может
быть использована таблица значений или область ячеек табличного документа.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Запрос <span class="operator">=</span> <span class="keyword">Новый</span> Запрос<span class="operator">;</span>
Запрос<span class="operator">.</span>Текст <span class="operator">=</span> 
    <span class="string">&quot;ВЫБРАТЬ</span>
<span class="string">    |    ПродажиОбороты.Период КАК Период,</span>
<span class="string">    |    ПродажиОбороты.СуммаОборот КАК Выручка</span>
<span class="string">    |ИЗ</span>
<span class="string">    |    РегистрНакопления.Продажи.Обороты(, , Месяц, ) КАК ПродажиОбороты</span>
<span class="string">    |</span>
<span class="string">    |УПОРЯДОЧИТЬ ПО</span>
<span class="string">    |    Период&quot;</span><span class="operator">;</span>
РезультатЗапроса <span class="operator">=</span> Запрос<span class="operator">.</span><span class="keyword">Выполнить</span><span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ТаблицаИсходныхДанных <span class="operator">=</span> РезультатЗапроса<span class="operator">.</span>Выгрузить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Диаграмма<span class="operator">.</span>СерииВСтроках <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
Диаграмма<span class="operator">.</span>ИсточникДанных <span class="operator">=</span> ТаблицаИсходныхДанных<span class="operator">;</span></pre>

<p class="MsoNormal">Если
при создании серии или точки задано ее ключевое значение, то впоследствии можно
выполнить поиск этой серии и точки. Ключевое значение содержится в свойстве <span class="Term">Значение</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Точка<span class="operator">.</span>Значение <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
Серия<span class="operator">.</span>Значение <span class="operator">=</span> <span class="string">&quot;Серия1&quot;</span><span class="operator">;</span></pre>

<p class="MsoNormal">Методы
<span class="Term">УстановитьТочку()</span>/<span class="Term">УстановитьСерию()</span> позволяют найти точку или
серию диаграммы по ключевому значению. Определив серию и точку, можно прочитать
текущее значение в точке методом <span class="Term">ПолучитьЗначение()</span> или установить новое
значение методом <span class="Term">УстановитьЗначение()</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Поиск точки</span>
Точка <span class="operator">=</span> Диаграмма<span class="operator">.</span>УстановитьТочку<span class="operator">(</span><span class="number">4</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Поиск серии</span>
Серия <span class="operator">=</span> Диаграмма<span class="operator">.</span>УстановитьСерию<span class="operator">(</span><span class="string">&quot;Серия1&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Определение значения точки диаграммы</span>
Значение <span class="operator">=</span> Диаграмма<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>Точка<span class="operator">,</span> Серия<span class="operator">)</span><span class="operator">.</span>Значение<span class="operator">;</span>
<span class="comment">// Изменение значения точки диаграммы</span>
Диаграмма<span class="operator">.</span>УстановитьЗначение<span class="operator">(</span>Точка<span class="operator">,</span> Серия<span class="operator">,</span> Значение <span class="operator">+</span> <span class="number">10</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Методы
<span class="Term">УстановитьТочку()</span>/<span class="Term">УстановитьСерию()</span> создает новую точку (серию)
диаграммы, если точка (серия) с указанным ключевым значением не найдена. Для
новой серии заполняется свойство <span class="Term">Значение</span>. Эту особенность удобно использовать
при заполнении диаграммы данными.</p>

<p class="MsoNormalCxSpLast">Пусть
требуется показать на графике данные о продажах различных товаров помесячно.
Товары образуют серии диаграммы, а периоды представляют точки. При обходе
полученных запросом данных ссылка на один товар может встречаться многократно,
если продажи этого товара имели место в различные месяцы. В такой ситуации
удобно использовать методы <span class="Term">УстановитьСерию()</span>/<span class="Term">УстановитьТочку()</span> с указанием ключевых
значений, чтобы избежать повторного создания элементов диаграммы:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Пока</span> Выборка<span class="operator">.</span>Следующий<span class="operator">(</span><span class="operator">)</span> <span class="keyword">Цикл</span>
    Серия <span class="operator">=</span> Диаграмма<span class="operator">.</span>УстановитьСерию<span class="operator">(</span>Выборка<span class="operator">.</span>Товар<span class="operator">)</span><span class="operator">;</span>
    Точка <span class="operator">=</span> Диаграмма<span class="operator">.</span>УстановитьТочку<span class="operator">(</span>Выборка<span class="operator">.</span>Период<span class="operator">)</span><span class="operator">;</span>
    Диаграмма<span class="operator">.</span>УстановитьЗначение<span class="operator">(</span>Точка<span class="operator">,</span> Серия<span class="operator">,</span> Выборка<span class="operator">.</span>Выручка<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецЦикла</span><span class="operator">;</span></pre>

<a name="_ref465952951"></a><a id="TI000001671" class="bookmark" name="issogl5_ограничение_количества_отображаемых_серий"><h6>Ограничение количества отображаемых серий</h6></a>

<p class="MsoNormalCxSpFirst">Количество
серий, используемых в диаграмме, может быть ограничено свойством <span class="Term">МаксимумСерий</span>. Данные тех серий, которые не
отображаются диаграммой из-за ограничения количества, суммируются и
показываются в отдельной сводной серии. Ограничение на количество серий
задается свойствами <span class="Term">МаксимумСерийКоличество</span> или <span class="Term">МаксимумСерийПроцент</span>, в зависимости от
значения свойства <span class="Term">МаксимумСерий</span>.</p>

<p class="MsoNormalCxSpLast">Например,
на графике требуется показать изменение объемы продаж нескольким покупателям.
При этом выручка по двум покупателям значительно превышает выручку по
остальным. В этом случае количество серий диаграммы может быть ограничено
тремя:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Диаграмма<span class="operator">.</span>МаксимумСерий <span class="operator">=</span> МаксимумСерий<span class="operator">.</span>Ограничено<span class="operator">;</span>
Диаграмма<span class="operator">.</span>МаксимумСерийКоличество <span class="operator">=</span> <span class="number">3</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Для
каждой из десяти серий будет определено максимальное значение по всем точкам, а
на графике будут отображаться только две серии с наибольшими из определенных
значений. Все оставшиеся данные будут показаны в виде одной сводной серии:</p>

<p class="Picture"><IMG src="_img/img00237.gif?_=1496848987" WIDTH="630" ALT HEIGHT="303"></p>

<p class="MsoCaption">Рис.
238. Сводная серия</p>

<a id="TI000001672" class="bookmark" name="issogl5_настройка_областей_диаграммы"><h6>Настройка областей диаграммы</h6></a>

<p class="MsoNormalCxSpFirst">Для
работы с диаграммой в целом предназначен объект <span class="Term">Диаграмма</span>. Для настройки свойств отдельных
областей диаграммы используются его свойства <span class="Term">ОбластьЗаголовка</span>, <span class="Term">ОбластьЛегенды</span> и <span class="Term">ОбластьПостроения</span>, а также свойства <span class="Term">ОтображатьЗаголовок</span> и <span class="Term">ОтображатьЛегенду</span>.</p>

<p class="MsoNormalCxSpMiddle">Свойства
объекта <span class="Term">ОбластьПостроенияДиаграммы</span> позволяют
настраивать отображение шкалы диаграммы, таблицы данных и выводимых значений.
Оформление области заголовка и области легенды осуществляется с помощью свойств
объектов <span class="Term">ОбластьЗаголовкаДиаграммы</span> и <span class="Term">ОбластьЛегендыДиаграммы</span>.</p>

<p class="MsoNormalCxSpLast">Например,
формат шкалы значений может быть установлен следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Диаграмма<span class="operator">.</span>ОбластьПостроения<span class="operator">.</span>ФорматШкалыЗначений <span class="operator">=</span> <span class="string">&quot;ЧДЦ=2; ЧРД=.; ЧРГ=' '; ЧГ=3,0&quot;</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Формат
шкалы значений, как и другие свойства, можно настроить, используя палитру
свойств области построения диаграммы:</p>

<p class="Picture"><IMG src="_img/img00238.gif?_=1496848987" WIDTH="788" ALT HEIGHT="363"></p>

<p class="MsoCaption">Рис.
239. Свойства области построения</p>

<a id="TI000001673" class="bookmark" name="issogl5_режим_сглаживания"><h6>Режим сглаживания</h6></a>

<p class="MsoNormal">Способ
построения соединительной линии графика зависит от значения свойств <span class="Term">РежимСглаживания</span> и <span class="Term">НатяжениеСглаживания</span>.</p>

<p class="Regularbeforepicture">По
умолчанию значения в области построения диаграммы соединяются прямыми линиями.
В режиме сглаживания <span class="Term">ГладкаяКривая</span> для соединения значений
используются «гладкие кривые».</p>

<p class="Picture"><IMG src="_img/img00239.gif?_=1496848987" WIDTH="561" ALT HEIGHT="323"></p>

<p class="MsoCaption"><a name="_ref423614566">Рис. </a>240. Сглаживание</p>

<p class="MsoNormal">В
верхней части <a href="#_ref423614566">рис.
240</a> изображена диаграмма с отключенным режимом
сглаживания, а в нижней – с включенным режимом сглаживания и стандартным
натяжением сглаживания.</p>

<a name="_ref466373953"></a><a name="_ref466561244"></a><a id="TI000001881" class="bookmark" name="issogl5_линии_тренда"><h6>Линии тренда</h6></a>

<p class="MsoNormal">Добавить
линию тренда к серии можно следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_res">
Серия = Диаграмма.Серии.Добавить();
ЛинияТренда = Серия.ЛинииТренда.Добавить();
ЛинияТренда.ТипАппроксимации = ТипАппроксимацииЛинииТрендаДиаграммы.Экспоненциальный;
ЛинияТренда.Маркер = ТипМаркераДиаграммы.Нет;
</pre>

<p class="MsoNormalCxSpFirst">Для
добавления используется специальный объект <span class="Term">ЛинияТрендаДиаграммы</span>. Для одной серии можно
одновременно создать несколько линий тренда.</p>

<p class="MsoNormalCxSpLast">Для
линии тренда имеется возможность указать следующие параметры:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Цвет линии тренда (свойство <span class="Term">Цвет</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Необходимость отображения линии тренда в легенде
диаграммы (свойство <span class="Term">ОтображатьВЛегенде</span>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Необходимость отображения фактического
уравнения, которое используется для построения линии тренда (свойство <span class="Term">ОтображатьУравнение</span>).</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Настроить режим отображения уравнения, если оно
отображется (свойство <span class="Term">ОбластьУравнения</span>) и т. д.</p>

<p class="MsoNormal">Подробнее
о редактировании линий тренда см. <a href="#_ref466045171">здесь</a>.</p>

<a id="TI000001674" class="bookmark" name="issogl5_настройка_полупрозрачности"><h6>Настройка полупрозрачности</h6></a>

<p class="MsoNormalCxSpFirst">Для
отдельных видов диаграмм реализованы свойства <span class="Term">РежимПолупрозрачности</span> и <span class="Term">ПроцентПолупрозрачности</span>, которые позволяют
управлять режимом и степенью прозрачности диаграммы.</p>

<p class="MsoNormalCxSpMiddle">Если
в свойстве диаграммы <span class="Term">РежимПолупрозрачности</span> задан режим <span class="Term">Использовать</span>, то прозрачность диаграммы
определяется значением свойства <span class="Term">ПроцентПолупрозрачности</span>. Если процент
полупрозрачности установлен равным нулю, то используется процент
полупрозрачности по умолчанию для данного вида диаграммы.</p>

<p class="MsoNormalCxSpLast">В
режиме <span class="Term">Авто</span>
прозрачность устанавливается автоматически с учетом значения свойства <span class="Term">ПроцентПолупрозрачности</span>, вида диаграммы и
других факторов.</p>

<a id="TI000001675" class="bookmark" name="issogl5_обработка_событий"><h6>Обработка событий</h6></a>

<p class="MsoNormalCxSpFirst">Для
поля диаграммы реализована возможность обработки событий. Событие <span class="Term">Выбор</span> возникает при выборе элемента диаграммы.
Событие <span class="Term">ОбработкаРасшифровки</span> возникает при выборе
элемента диаграммы, при условии, что для этого элемента задано значение
свойства <span class="Term">Расшифровка</span>.</p>

<p class="MsoNormalCxSpLast">При
стандартной обработке в отдельном окне отображается значение расшифровки.
Например, в свойстве <span class="Term">Расшифровка</span> серии диаграммы может быть
записана ссылка на элемент справочника <span class="Term">Покупатели</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Серия <span class="operator">=</span> Диаграмма<span class="operator">.</span>Серии<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Серия<span class="operator">.</span>Расшифровка <span class="operator">=</span> ТаблицаДанныхСтрока<span class="operator">.</span>Покупатель<span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">В
этом случае при двойном щелчке мыши на названии серии будет открыта форма
соответствующего элемента справочника.</p>

<p class="MsoNormalCxSpLast">Существует
возможность реализовать произвольную «расшифровку» выбранного элемента.
Например, показать список всех документов продажи по выбранному покупателю. Для
этого событие <span class="Term">ОбработкаРасшифровки</span> может быть обработано,
например, так:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ДиаграммаОбработкаРасшифровки<span class="operator">(</span>Элемент<span class="operator">,</span> Расшифровка<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    ПараметрыФормы <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
    <span class="comment">// Передача ссылки на элемент справочника Покупатели </span>
    <span class="comment">// в общую форму ДокументыПоПокупателю.</span>
    ПараметрыФормы<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Покупатель&quot;</span><span class="operator">,</span> Расшифровка<span class="operator">)</span><span class="operator">;</span>
    ОткрытьФорму<span class="operator">(</span><span class="string">&quot;ОбщаяФорма.ДокументыПоПокупателю&quot;</span><span class="operator">,</span> ПараметрыФормы<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Аналогично
расшифровка может быть задана и обработана для точки или значения диаграммы.</p>

<a name="_ref466040500"></a><a id="TI000001676" class="bookmark" name="issogl4_7.3.4.3.3_данные_для_диаграмм"><h5>7.3.4.3.3. Данные для диаграмм</h5></a>

<p class="Regularbeforetable">Для
демонстрации различных видов диаграмм используются следующий набор данных:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"> </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Оптовые покупатели</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Розничные покупатели</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Дилеры</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">14.03</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">6</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">8</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">6</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">15.03</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">5</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">9</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">4</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">16.03</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">9</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">8</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">6</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">17.03</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">5</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">4</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">7</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">В
зависимости от типа диаграммы, серии могут располагаться как в строках, так и в
столбцах.</p>

<p class="MsoNormalCxSpLast">Если
диаграмма строится на другом наборе данных, этот набор данных приводится
непосредственно в том разделе, где демонстрируется диаграмма. Как правило, в
диаграммах (в примерах далее) отключается флажок <span class="Interface">Серии в строках</span>.</p>

<a id="TI000001677" class="bookmark" name="issogl4_7.3.4.3.4_график"><h5>7.3.4.3.4. График</h5></a>

<p class="Regularbeforepicture">График
использует способ отображения, при котором соседние значения внутри серии
соединяются линией.</p>

<p class="Picture"><IMG src="_img/img00240.gif?_=1496848987" WIDTH="593" ALT HEIGHT="313"></p>

<p class="MsoCaption">Рис.
241. График</p>

<a id="TI000001678" class="bookmark" name="issogl4_7.3.4.3.5_график_по_шагам"><h5>7.3.4.3.5. График по шагам</h5></a>

<p class="MsoNormal">График
по шагам отличается от обычного графика тем, что соседние значения соединяются
не прямыми линиями, а ступенями.</p>

<p class="Regularbeforepicture">Такой
тип графика удобно использовать, чтобы подчеркнуть прерывистый характер
изменения величины. Например, изменение остатков товаров на конец дня:</p>

<p class="Picture"><IMG src="_img/img00241.gif?_=1496848987" WIDTH="625" ALT HEIGHT="248"></p>

<p class="MsoCaption">Рис.
242. График по шагам</p>

<a id="TI000001679" class="bookmark" name="issogl4_7.3.4.3.6_график_с_накоплением"><h5>7.3.4.3.6. График с накоплением</h5></a>

<p class="Regularbeforepicture">Особенностью
графика с накоплением является то, что каждое выводимое значение учитывает в
себе значения предыдущих серий в той же точке. Удобен, когда требуется оценить
вклад каждой серии в общую сумму. Например, можно проследить изменение вклада
каждой группы покупателей в общую сумму выручки.</p>

<p class="Picture"><IMG src="_img/img00242.gif?_=1496848987" WIDTH="595" ALT HEIGHT="315"></p>

<p class="MsoCaption">Рис.
243. График с накоплением</p>

<a id="TI000001680" class="bookmark" name="issogl4_7.3.4.3.7_график_с_областями"><h5>7.3.4.3.7. График с областями</h5></a>

<p class="Regularbeforepicture">График
с областями показывает закрашенной область между линией графика и осью базового
значения.</p>

<p class="Picture"><IMG src="_img/img00243.gif?_=1496848987" WIDTH="595" ALT HEIGHT="315"></p>

<p class="MsoCaption">Рис.
244. График с областями</p>

<a id="TI000001681" class="bookmark" name="issogl4_7.3.4.3.8_график_с_областями_и_накоплением"><h5>7.3.4.3.8. График с областями и накоплением</h5></a>

<p class="Regularbeforepicture">График
с областями аналогичен графику с накоплением, области между линиями графика и
осью закрашиваются.</p>

<p class="Picture"><IMG src="_img/img00244.gif?_=1496848987" WIDTH="595" ALT HEIGHT="316"></p>

<p class="MsoCaption">Рис.
245. График с областями и накоплением</p>

<a id="TI000001682" class="bookmark" name="issogl4_7.3.4.3.9_график_с_областями_нормированный"><h5>7.3.4.3.9. График с областями нормированный</h5></a>

<p class="Regularbeforepicture">Нормированный
график показывает вклад каждой серии в общую сумму значений в точке. Например,
в первой точке значения серий 6, 8 и 6. Общая сумма равна 20, вклад первой
серии составит 30%, второй – 40%, третьей – 30%.</p>

<p class="Picture"><IMG src="_img/img00245.gif?_=1496848987" WIDTH="595" ALT HEIGHT="315"></p>

<p class="MsoCaption">Рис.
246. График с областями, нормированный</p>

<a id="TI000001683" class="bookmark" name="issogl4_7.3.4.3.10_гистограмма_гистограмма_объемная_гистограмма_горизонтальная_гистограмма_горизонтальная_объемная"><h5>7.3.4.3.10. Гистограмма, гистограмма объемная, гистограмма горизонтальная, гистограмма горизонтальная объемная</h5></a>

<p class="Regularbeforepicture">Гистограмма
используется для визуализации тех же данных, что и график, однако использует
иной способ их отображения. Данные на гистограмме показаны в виде
прямоугольников, размеры которых позволяют сопоставить значения разных серий в
одной точке.</p>

<p class="Picture"><IMG src="_img/img00246.gif?_=1496848987" WIDTH="595" ALT HEIGHT="316"></p>

<p class="MsoCaption">Рис.
247. Гистограмма</p>

<p class="Regularbeforepicture">Серия
гистограммы может быть отмечена с помощью свойства <span class="Term">Индикатор</span>. Такая серия показывается как график
и не учитывается при создании сводных серий. Пример – отображение среднего
значения показываемых величин.</p>

<p class="Picture"><IMG src="_img/img00247.gif?_=1496848987" WIDTH="593" ALT HEIGHT="313"></p>

<p class="MsoCaption">Рис.
248. Гистограмма с индикатором</p>

<a id="TI000001684" class="bookmark" name="issogl4_7.3.4.3.11_гистограмма_с_накоплением_объемная_горизонтальная_горизонтальная_объемная"><h5>7.3.4.3.11. Гистограмма с накоплением, объемная, горизонтальная, горизонтальная объемная</h5></a>

<p class="Regularbeforepicture">Гистограмма
с накоплением, как и график с накоплением (см. выше), позволяет включить в
значение каждой серии значения всех предыдущих серий.</p>

<p class="Picture"><IMG src="_img/img00248.gif?_=1496848987" WIDTH="595" ALT HEIGHT="316"></p>

<p class="MsoCaption">Рис.
249. Гистограмма с накоплением</p>

<p class="MsoNormal">Следует
учитывать возможность гистограмм с накоплением соединять соседние значения
внутри серии для удобства чтения отображаемых данных:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Диаграмма<span class="operator">.</span>СоединениеЗначенийПоСериям <span class="operator">=</span> ТипСоединенияЗначенийПоСериямДиаграммы<span class="operator">.</span>СоединениеКраев<span class="operator">;</span>
Диаграмма<span class="operator">.</span>ЛинииСоединенияЗначенийПоСериям <span class="operator">=</span> <span class="keyword">Новый</span> Линия<span class="operator">(</span>ТипЛинииДиаграммы<span class="operator">.</span>Пунктир<span class="operator">,</span> <span class="number">2</span><span class="operator">)</span><span class="operator">;</span>
Диаграма<span class="operator">.</span>ЦветСоединенияЗначенийПоСериям <span class="operator">=</span> WebЦвета<span class="operator">.</span>Красный<span class="operator">;</span></pre>

<p class="Regularbeforepicture">В
результате получается диаграмма следующего вида:</p>

<p class="Picture"><IMG src="_img/img00249.gif?_=1496848987" WIDTH="595" ALT HEIGHT="315"></p>

<p class="MsoCaption">Рис.
250. Гистограмма с накоплением и соединением краев</p>

<p class="MsoNormal">Серия
гистограммы с накоплением также может быть отмечена с помощью свойства <span class="Term">Индикатор</span>. Такая серия показывается как график
и не учитывается при создании сводных серий.</p>

<a id="TI000001685" class="bookmark" name="issogl4_7.3.4.3.12_гистограмма_нормированная_объемная_горизонтальная_горизонтальная_объемная"><h5>7.3.4.3.12. Гистограмма нормированная, объемная, горизонтальная, горизонтальная объемная</h5></a>

<p class="Regularbeforepicture">Нормированная
гистограмма, как и нормированный график, показывает вклад каждой серии в общую
сумму значений в точке.</p>

<p class="Picture"><IMG src="_img/img00250.gif?_=1496848987" WIDTH="595" ALT HEIGHT="315"></p>

<p class="MsoCaption">Рис.
251. Гистограмма нормированная</p>

<p class="MsoNormal">Для
нормированных диаграмм доступно соединение значений внутри серии.</p>

<a id="TI000001686" class="bookmark" name="issogl4_7.3.4.3.13_круговая_круговая_объемная"><h5>7.3.4.3.13. Круговая, круговая объемная</h5></a>

<p class="Regularbeforepicture">Данный
тип диаграммы позволяет показать долю отдельного значения в общей сумме
значений. Круговая диаграмма строится по данным одной точки и набора серий.</p>

<p class="Picture"><IMG src="_img/img00251.gif?_=1496848987" WIDTH="652" ALT HEIGHT="280"></p>

<p class="MsoCaption">Рис.
252. Круговая</p>

<p class="MsoNormal">Если
в данных круговой диаграммы присутствует несколько точек, то будут показаны
значения той точки, которая указана в свойстве <span class="Term">АктивнаяТочка</span> диаграммы.</p>

<a id="TI000001687" class="bookmark" name="issogl4_7.3.4.3.14_биржевая_биржевая_свеча"><h5>7.3.4.3.14. Биржевая, биржевая «свеча»</h5></a>

<p class="MsoNormalCxSpFirst">Биржевая
диаграмма позволяет показать в одной точке четыре значения, характеризующие
изменение показателя в течение периода времени. Набор показателей включает
самое высокое значение показателя за период, самое низкое значение, а также максимальное
и минимальное значения показателя в течение периода.</p>

<p class="MsoNormalCxSpLast">Биржевая
диаграмма показывает данные одной серии. При этом значение первой точки
используется как начальное значение показателя, значение второй точки –
минимальное значение, третьей точки – максимальное, четвертой –
значение на конец периода.</p>

<p class="Regularbeforepicture">Таким
образом, данные первых четырех точек отображаются в виде одной точки диаграммы.
В качестве названия объединенной точки используется название первой точки
группы. Аналогично объединяются данные следующих четырех точек.</p>

<p class="Picture"><IMG src="_img/img00252.gif?_=1496848987" WIDTH="790" ALT HEIGHT="327"></p>

<p class="MsoCaption">Рис.
253. Биржевая</p>

<p class="MsoNormal">Биржевая
диаграмма может содержать данные нескольких серий. В таком случае отображаются
значения той серии, которая указана в свойстве <span class="Term">АктивнаяСерия</span> диаграммы.</p>

<a id="TI000001688" class="bookmark" name="issogl4_7.3.4.3.15_изометрическая_обычная_непрерывная_лента_пирамида_водопад"><h5>7.3.4.3.15. Изометрическая обычная, непрерывная, лента, пирамида, водопад</h5></a>

<p class="Regularbeforepicture">Обычная
изометрическая диаграмма аналогична графику, однако значения внутри серии
показываются в виде прямоугольных параллелепипедов различной высоты. Позволяет
отобразить динамику показателя в различных разрезах.</p>

<p class="Picture"><IMG src="_img/img00253.gif?_=1496848987" WIDTH="740" ALT HEIGHT="322"></p>

<p class="MsoCaption">Рис.
254. Изометрическая</p>

<p class="MsoNormalCxSpFirst">Изометрическая
пирамида показывает значения в виде пирамид различной высоты. Изометрическая
лента отображает изменение значений серии в виде ленты. Непрерывная
изометрическая диаграмма представляет собой изометрическую ленту с заполненной
областью под лентой. Водопад – разновидность изометрической диаграммы, у
которой серии не имеют толщины.</p>

<p class="MsoNormalCxSpMiddle">Для
диаграмм вида <span class="Interface">Изометрическая
непрерывная</span>, <span class="Interface">Изометрическая лента</span>
и <span class="Interface">Водопад</span> допустимо использование
свойств <span class="Term">РежимСглаживания</span> и <span class="Term">НатяжениеСглаживания</span>.</p>

<p class="MsoNormalCxSpLast">При
отключенном режиме сглаживания для диаграммы вида <span class="Interface">Изометрическая лента</span>
возможно использование свойства <span class="Term">Индикатор</span> серии диаграммы. Серия с
установленным признаком <span class="Term">Индикатор</span> отображается полупрозрачно, образуя
пересечения с другими сериями.</p>

<a id="TI000001689" class="bookmark" name="issogl4_7.3.4.3.16_поверхность_каркасная_поверхность_выпуклая_поверхность_вогнутая_поверхность_затененная_поверхность_сотовая"><h5>7.3.4.3.16. Поверхность, каркасная поверхность, выпуклая поверхность, вогнутая поверхность, затененная поверхность, сотовая</h5></a>

<p class="Regularbeforepicture">Поверхностные
диаграммы позволяют не только наблюдать изменение значения внутри серии, но и
проследить зависимость значения от серии в одной точке.</p>

<p class="Picture"><IMG src="_img/img00254.gif?_=1496848987" WIDTH="800" ALT HEIGHT="279"></p>

<p class="MsoCaption">Рис.
255. Поверхность</p>

<a id="TI000001690" class="bookmark" name="issogl4_7.3.4.3.17_радарный_график_с_областями_с_накоплением_с_областями_и_накоплением_с_областями_нормированный"><h5>7.3.4.3.17. Радарный график, с областями, с накоплением, с областями и накоплением, с областями нормированный</h5></a>

<p class="Regularbeforepicture">Радарный
график использует радарную шкалу для отображения данных. Точки расположены на
окружности, значения обозначаются точками, находящимися на разном расстоянии от
центра круга.</p>

<p class="Picture"><IMG src="_img/img00255.gif?_=1496848987" WIDTH="666" ALT HEIGHT="248"></p>

<p class="MsoCaption">Рис.
256. Радарный</p>

<p class="MsoNormal">Назначение
прочих разновидностей радарного графика аналогично соответствующим случаям с
диаграммой типа <span class="Term">График</span>.</p>

<a id="TI000001691" class="bookmark" name="issogl4_7.3.4.3.18_измерительная"><h5>7.3.4.3.18. Измерительная</h5></a>

<p class="MsoNormal">Измерительная
диаграмма строится аналогично круговым диаграммам. Отличительная особенность
измерительной диаграммы – в изображении шкалы в виде измерительной панели.</p>

<p class="Regularbeforepicture">Использование
измерительной панели позволяет наглядно отнести значение показателя к
определенной группе.</p>

<p class="Picture"><IMG src="_img/img00256.gif?_=1496848987" WIDTH="672" ALT HEIGHT="291"></p>

<p class="MsoCaption">Рис.
257. Измерительная</p>

<p class="MsoNormal">Выделение
диапазонов значений производится добавлением полос измерительной панели.
Коллекция полос доступна через свойство <span class="Term">ПолосыИзмерительнойДиаграммы</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Полоса <span class="operator">=</span> Диаграмма<span class="operator">.</span>ПолосыИзмерительнойДиаграммы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Полоса<span class="operator">.</span>Начало <span class="operator">=</span> <span class="number">5</span><span class="operator">;</span>
Полоса<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> <span class="number">10</span><span class="operator">;</span>
Полоса<span class="operator">.</span>ЦветФона <span class="operator">=</span> WebЦвета<span class="operator">.</span>Зеленый<span class="operator">;</span>
Полоса<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Хорошо&quot;</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Измерительная
диаграмма может показывать значения двумя способами: с помощью стрелки или в
виде секторов. Требуемый способ задается в свойстве <span class="Term">ОтображениеЗначенияИзмерительнойДиаграммы</span>.
Ниже приведен пример отображения диаграммы в виде секторов.</p>

<p class="Picture"><IMG src="_img/img00257.gif?_=1496848987" WIDTH="672" ALT HEIGHT="293"></p>

<p class="MsoCaption">Рис.
258. Измерительная, секторами</p>

<a id="TI000001692" class="bookmark" name="issogl4_7.3.4.3.19_воронка_объемная_нормированная_нормированная_объемная"><h5>7.3.4.3.19. Воронка, объемная, нормированная, нормированная объемная</h5></a>

<p class="MsoNormal">Вид
диаграммы <span class="Interface">Воронка</span> похож
на горизонтальную гистограмму. Значения отображаются в виде сегментов,
образующих форму воронки при соответствующем наборе значений данных.</p>

<p class="Regularbeforepicture">Для
диаграмм <span class="Interface">Воронка</span> и <span class="Interface">Воронка объемная</span>
значения отображаются шириной сегмента воронки. В диаграммах <span class="Interface">Воронка нормированная</span>
и <span class="Interface">Воронка нормированная объемная</span>
значения отображаются высотой сегмента воронки.</p>

<p class="Picture"><IMG src="_img/img00258.gif?_=1496848987" WIDTH="704" ALT HEIGHT="312"></p>

<p class="MsoCaption">Рис.
259. Воронка продаж</p>

<p class="MsoNormalCxSpFirst">На
оформление воронки влияют значения следующих свойств диаграммы: <span class="Term">ПробелыВоронки</span>, <span class="Term">ВысотаГорлаВоронки</span> и <span class="Term">ШиринаГорлаВоронки</span>.</p>

<p class="MsoNormalCxSpLast">Для
диаграмм вида <span class="Interface">Воронка</span>, и <span class="Interface">Воронка объемная</span>
допустимо использование свойств <span class="Term">РежимСглаживания</span> и <span class="Term">НатяжениеСглаживания</span>.</p>

<a name="_ref466374080"></a><a name="_ref466561245"></a><a id="TI000001882" class="bookmark" name="issogl4_7.3.4.3.20_точечная_диаграмма"><h5>7.3.4.3.20. Точечная диаграмма</h5></a>

<p class="Regularbeforepicture">Точечная
диаграмма представляет значения из различных мер по одному измерению в виде
совокупности точек. В большинстве диаграмм измерение располагается по одной из
осей, но в точечной диаграмме измерение представляется точками на диаграмме, а
меры находятся на каждой из двух осей.</p>

<p class="Picture"><IMG src="_img/img00259.gif?_=1496848987" WIDTH="586" ALT HEIGHT="292"></p>

<p class="MsoCaption"><a name="_ref466389967">Рис. </a>260. Точечная
диаграмма</p>

<p class="Regularbeforetable">Данная
диаграмма построена на основании следующего набора данных:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst"> </p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Август</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Сентябрь</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Октябрь</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ноябрь</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Декабрь</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Лыжы</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">90</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">330</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">610</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1 050</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">1 380</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Лыжные
  ботинки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">40</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">280</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">290</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">830</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">970</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Перчатки
  лыжные</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">20</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">210</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">610</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">730</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">810</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Велосипеды</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">700</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">540</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">100</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">50</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">20</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpLast">Какие
данные будут откладываться по осям диаграммы, определяется свойством <span class="Interface">Источник значения оси
точек</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Серия</span> – в этом
случае в свойстве <span class="Interface">Серия на оси точек</span>
указывается та серия, которая будет откладываться на оси точек.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Точки</span> – в этом
случае по оси точек откладываются значения точек.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Авто</span> – в этом
случае:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
серия одна – на оси точек откладываются
точки.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
серий более одной – поведение аналогично
явному указанию значения <span class="Interface">Серия</span>.</p>

<p class="MsoNormal">Пример
на <a href="#_ref466389967">рис.260</a> отображается со следующими настройками:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Флаг <span class="Interface">Серии в строках</span>
установлен;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Свойство <span class="Interface">Источник значения оси
точек</span> установлено в значение <span class="Interface">Точки</span>.</p>

<p class="MsoNormal">Если
несколько изменить настройки диаграммы, а именно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Свойство<span class="Interface"> Источник значения оси
точек</span> установлено в значение <span class="Interface">Серия</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Свойство <span class="Interface">Серия на оси точек</span>
установлено в значение <span class="Interface">Лыжы</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для серии <span class="Interface">Велосипеды</span> добавлена
линия тренда, заданная линейным уравнением.</p>

<p class="Regularbeforepicture">В
результате будет получен следующий график:</p>

<p class="Picture"><IMG src="_img/img00260.gif?_=1496848987" WIDTH="586" ALT HEIGHT="292"></p>

<p class="MsoCaption">Рис.
261. Точечная диаграмма и линия тренда</p>

<p class="MsoNormal">В
данном случае можно видеть, что продажи лыж и велосипедов находятся в обратной
зависимости: чем больше продается лыж, тем меньше велосипедов. Для повышения
наглядности данного заключения на продажи велосипедов наложена линия тренда.</p>

<a name="_ref466374094"></a><a name="_ref466561246"></a><a id="TI000001883" class="bookmark" name="issogl4_7.3.4.3.21_пузырьковая_диаграмма"><h5>7.3.4.3.21. Пузырьковая диаграмма</h5></a>

<p class="Regularbeforepicture">Пузырьковая
диаграмма – это разновидность точечной диаграммы, где точка имеет не
фиксированный, а переменный размер. Причем размер точки (пузырька) служит
третьим измерением для такой диаграммы. Таким образом, пузырьковая диаграмма позволяет
отобразить на плоскости данные по трем измерениям.</p>

<p class="Picture"><IMG src="_img/img00261.gif?_=1496848987" WIDTH="514" ALT HEIGHT="303"></p>

<p class="MsoCaption"><a name="_ref466465503">Рис. </a>262. Пузырьковая
диаграмма</p>

<p class="Regularbeforetable">Диаграмма
построена на основании следующего набора данных:</p>

<table class="MsoNormalTable" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpFirst">Товар</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Продажи</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Доля
  рынка</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Ботинки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">5 500</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">3</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Брюки</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">12 200</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">12</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Костюм</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">60 000</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">33</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Пиджак</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">24 400</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">10</p>
  </td>
  
 </tr>
 <tr>
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">Рубашка</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">32 000</p>
  </td>
  
  <td valign="top">
  <p class="MsoNormalCxSpMiddle">42</p>
  </td>
  
 </tr>
</table>

<p class="MsoNormalCxSpMiddle">Аналогично
точечной диаграмме, назначение данных на оси диаграммы выполняется с помощью
свойства <span class="Interface">Источник значения оси
точек</span>. Логика системы при этом полностью совпадает с таковой для
точечной диаграммы.</p>

<p class="MsoNormalCxSpLast">Для
пузырьковой диаграммы следует обратить внимание на следующие свойства:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Источник значения размера
пузырька</span> – определяет, откуда брать значение, определяющее размер
пузырька на диаграмме:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Нет</span> – в этом
случае поведение диаграммы полностью эквивалентно точечной диаграмме.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Общая серия</span> –
указывается серия, значения которой будут использоваться в качестве размера
пузырька. Указание серии выполняется с помощью свойства <span class="Interface">Общая серия размера
пузырька</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Следующая серия –</span>
в этом случае размер пузырька будет определяться серией, следующей за серией с
данными. Для примера на <a href="#_ref466465503">рис.262</a> размер пузырька задает колонка <span class="Interface">Доля рынка</span>.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Отображение отрицательных
значений пузырьковой диаграммы</span> – определяет, каким образом
диаграмма будет «реагировать» на отрицательные значения в данных:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Нет</span> (значение по умолчанию) –
если значение меньше нуля, то пузырек не отображается.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">По модулю</span> – все
значения учитываются по модулю.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Прозрачный фон</span> –
для расчета размера пузырька все значения используются по модулю, но пузырьки,
значения для которых меньше нуля, не будут закрашиваться цветом.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Инвертированный цвет фона</span> –
в этом случае пузырек будет закрашиваться цветом, который является инверсией
текущего цвета серии.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Влияние размера на пузырек</span> –
описывает, каким образом значение, описывающее размер пузырька, будет влиять на
размер:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Увеличение/уменьшение
диаметра</span> – в этом случае диаметр пузырька будет изменяться
прямо/обратно пропорционально значению размера.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Увеличение/уменьшение
площади</span> – в этом случае площадь пузырька будет изменяться
прямо/обратно пропорционально значению размера.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
В любом случае размер пузырька будет ограничен
свойствами <span class="Interface">Максимальный размер
пузырька</span> и <span class="Interface">Минимальный размер
пузырька</span>.</p>

<a name="_ref423094556"></a><a name="_ref437342801"></a><a id="TI000001693" class="bookmark" name="issogl3_7.3.4.4_диаграмма_ганта"><h4>7.3.4.4. Диаграмма Ганта</h4></a>

<a id="TI000001694" class="bookmark" name="issogl4_7.3.4.4.1_общие_сведения"><h5>7.3.4.4.1. Общие сведения</h5></a>

<p class="MsoNormalCxSpFirst">Диаграмма
Ганта является способом отражения длительности и последовательности процессов,
которые показываются в виде полос, расположенных вдоль оси времени.</p>

<p class="MsoNormalCxSpLast">В
поле диаграммы по умолчанию отображается область построения, область заголовка
и область легенды. Для настройки свойств и управления видимостью областей предназначены
свойства <span class="Term">ОбластьЗаголовка</span>, <span class="Term">ОбластьЛегенды</span>, <span class="Term">ОбластьПостроения</span>, <span class="Term">ОтображатьЗаголовок</span> и <span class="Term">ОтображатьЛегенду</span>.</p>

<p class="Regularbeforepicture">В
области построения диаграммы по горизонтали расположена шкала времени, по
вертикали – шкала точек (процессов).</p>

<p class="Picture"><IMG src="_img/img00262.gif?_=1496848987" WIDTH="713" ALT HEIGHT="339"></p>

<p class="MsoCaption">Рис.
263. Общий вид</p>

<a id="TI000001695" class="bookmark" name="issogl4_7.3.4.4.2_добавление_данных"><h5>7.3.4.4.2. Добавление данных</h5></a>

<p class="MsoNormalCxSpFirst">Для
управления составом серий и точек используют свойства диаграммы <span class="Term">Серии</span> и <span class="Term">Точки</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
работы со значениями диаграммы предназначен объект <span class="Term">ЗначениеДиаграммыГанта</span>, который может быть
получен методом <span class="Term">ПолучитьЗначение()</span>. Значение предоставляет
доступ к коллекции интервалов.</p>

<p class="MsoNormalCxSpLast">Значение
диаграммы Ганта отображается в виде одного или нескольких интервалов.
Рассмотрим пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Добавление серии.</span>
СерияПлан <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>Серии<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
СерияПлан<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;План&quot;</span><span class="operator">;</span>
<span class="comment">// Добавление точки.</span>
ТочкаСтроительствоОфиса <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>Точки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ТочкаСтроительствоОфиса<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Строительство офиса&quot;</span><span class="operator">;</span>
<span class="comment">// Получение значения.</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаСтроительствоОфиса<span class="operator">,</span> СерияПлан<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Добавление интервала.</span>
Интервал <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Интервал<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20130125'</span><span class="operator">;</span>
Интервал<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20130206'</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Построенная
таким образом диаграмма Ганта отображает единственный интервал, показывающий
продолжительность процесса <span class="Interface">Строительство офиса</span>:</p>

<p class="Picture"><IMG src="_img/img00263.gif?_=1496848987" WIDTH="690" ALT HEIGHT="62"></p>

<p class="MsoCaption">Рис.
264. Один интервал</p>

<p class="MsoNormal">Точки
и серии диаграммы Ганта могут образовывать иерархическую структуру. Например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Создание точек</span>
ТочкаПланирование <span class="operator">=</span> ТочкаСтроительствоОфиса<span class="operator">.</span>Точки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ТочкаПланирование<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Планирование строительства&quot;</span><span class="operator">;</span>
ТочкаЗакупка <span class="operator">=</span> ТочкаСтроительствоОфиса<span class="operator">.</span>Точки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ТочкаЗакупка<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Закупка материалов&quot;</span><span class="operator">;</span>
ТочкаРасчистка <span class="operator">=</span> ТочкаСтроительствоОфиса<span class="operator">.</span>Точки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ТочкаРасчистка<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Расчистка территории&quot;</span><span class="operator">;</span>
<span class="comment">// Создание интервалов</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаПланирование<span class="operator">,</span> СерияПлан<span class="operator">)</span><span class="operator">;</span>
ИнтервалПланированиеПлан <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ИнтервалПланированиеПлан<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20130125'</span><span class="operator">;</span>
ИнтервалПланированиеПлан<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20130201'</span><span class="operator">)</span><span class="operator">;</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаЗакупка<span class="operator">,</span> СерияПлан<span class="operator">)</span><span class="operator">;</span>
ИнтервалЗакупкаПлан <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ИнтервалЗакупкаПлан<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20130202'</span><span class="operator">;</span>
ИнтервалЗакупкаПлан<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20130204'</span><span class="operator">)</span><span class="operator">;</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаРасчистка<span class="operator">,</span> СерияПлан<span class="operator">)</span><span class="operator">;</span>
ИнтервалРасчисткаПлан <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ИнтервалРасчисткаПлан<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20130128'</span><span class="operator">;</span>
ИнтервалРасчисткаПлан<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20130206'</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Настройка отображения</span>
Диаграммаганта<span class="operator">.</span>РазвернутьТочку<span class="operator">(</span>ТочкаСтроительствоОфиса<span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">В
результате на диаграмме будет отмечена продолжительность трех этапов процесса
строительства, а также общая продолжительность строительства.</p>

<p class="Picture"><IMG src="_img/img00264.gif?_=1496848987" WIDTH="733" ALT HEIGHT="133"></p>

<p class="MsoCaption">Рис.
265. Несколько интервалов</p>

<p class="MsoNormal">Для
заполнения диаграммы Ганта данными удобно использовать методы <span class="Term">УстановитьТочку()</span> и <span class="Term">УстановитьСерию()</span>. Метод <span class="Term">УстановитьТочку()</span> (<span class="Term">УстановитьСерию()</span>) возвращает точку (серию)
диаграммы, у которой в свойстве <span class="Term">Значение</span> содержится заданное ключевое
значение, например, ссылка на элемент справочника. Если точка (серия) с таким
ключевым значением не найдена, то создается новая точка (серия) и заполняется
свойство <span class="Term">Значение</span>.</p>

<p class="Note"><span class="Note">Примечание.</span> Вторым параметром в методы <span class="Term">УстановитьТочку()</span> и <span class="Term">УстановитьСерию()</span> может быть передано ключевое
значение родительской точки (серии). Если этот параметр не задан, то в качестве
родителя создаваемой точки (серии) может быть автоматически установлена
существующая точка (серия) с незаполненным свойством <span class="Term">Значение</span>.</p>

<a id="TI000001696" class="bookmark" name="issogl4_7.3.4.4.3_связи_интервалов"><h5>7.3.4.4.3. Связи интервалов</h5></a>

<p class="MsoNormal">Интервалы
диаграммы Ганта могут быть связаны при необходимости отражения факта
зависимости процессов. Объект <span class="Term">ИнтервалДиаграммыГанта</span> позволяет добавлять
элементы в коллекцию связей диаграммы:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Связь <span class="operator">=</span> ИнтервалПланированиеПлан<span class="operator">.</span>Добавить<span class="operator">(</span>ИнтервалЗакупкаПлан<span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">В
результате диаграмма примет следующий вид:</p>

<p class="Picture"><IMG src="_img/img00265.gif?_=1496848987" WIDTH="730" ALT HEIGHT="172"></p>

<p class="MsoCaption">Рис.
266. Связи интервалов</p>

<p class="MsoNormal">По
умолчанию связь отображается линей, направленной от окончания первого интервала
в начало второго. При необходимости тип связи может быть изменен в свойстве <span class="Term">ТипСвязи</span>.</p>

<a id="TI000001697" class="bookmark" name="issogl4_7.3.4.4.4_настройка_шкалы_времени"><h5>7.3.4.4.4. Настройка шкалы времени</h5></a>

<p class="MsoNormal">Полный
интервал времени диаграммы определяется автоматически по продолжительности всех
показываемых интервалов, если свойство диаграммы <span class="Term">АвтоОпределениеПолногоИнтервала</span> содержит
значение <span class="Term">Истина</span>. При выключении автоматическом
определении следует использовать метод <span class="Term">УстановитьПолныйИнтервал()</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ДиаграммаГанта<span class="operator">.</span>АвтоОпределениеПолногоИнтервала <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
ДиаграммаГанта<span class="operator">.</span>УстановитьПолныйИнтервал<span class="operator">(</span><span class="date">'20150124'</span><span class="operator">,</span> <span class="date">'20150209'</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Шкала
времени может быть дополнена новыми строками, для каждой из которых можно
задать периодичность, формат отображения периода и другие свойства. Добавление
новой шкалы времени для отображения недельных отметок выглядит следующим
образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">НедельнаяШкалы <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ОбластьПостроения<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Вставить<span class="operator">(</span><span class="number">0</span><span class="operator">)</span><span class="operator">;</span>
НедельнаяШкалы<span class="operator">.</span>Единица <span class="operator">=</span> ТипЕдиницыШкалыВремени<span class="operator">.</span>Неделя<span class="operator">;</span>
НедельнаяШкалы<span class="operator">.</span>Кратность <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Диаграмма
примет следующий вид:</p>

<p class="Picture"><IMG src="_img/img00266.gif?_=1496848987" WIDTH="732" ALT HEIGHT="202"></p>

<p class="MsoCaption">Рис.
267. Недельная шкала времени</p>

<p class="MsoNormalCxSpFirst">Следует
учитывать, что в диаграмме Ганта заголовок элемента шкалы отображается только в
начале соответствующего деления. Если начало деления не отображается (оказалось
«левее» отображаемого диапазона), то заголовок не будет отображен на диаграмме.</p>

<p class="MsoNormalCxSpLast">На
шкале времени могут быть размещены метки, доступные через коллекцию <span class="Term">Метки</span> элемента шкалы времени. Однако, надо
помнить, что добавленная метка будет отображаться внутри той временной шкалы,
для которой добавлялась метка. Рассмотрим пример добавления метки в недельную
шкалу, добавленную ранее:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Метка <span class="operator">=</span> ЭлементШкалы<span class="operator">.</span>Метки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="date">'20150204'</span><span class="operator">)</span><span class="operator">;</span>
Метка<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Контроль&quot;</span><span class="operator">;</span>
Метка<span class="operator">.</span>ЦветЛинии <span class="operator">=</span> WebЦвета<span class="operator">.</span>Красный<span class="operator">;</span></pre>

<p class="Regularbeforepicture">При
этом диаграмма станет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00267.gif?_=1496848987" WIDTH="732" ALT HEIGHT="202"></p>

<p class="MsoCaption">Рис.
268. Метка внутри шкалы</p>

<p class="MsoNormal">Такое размещение метки снижает
наглядность восприятия метки и времени по выбранной шкале. Для улучшения
восприятия можно добавить «фиктивную» шкалу, которая не будет иметь
периодических меток, а уже для этого интервала добавлять метку (вместо
предыдущего примера):</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ФиктивнаяШкала <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ОбластьПостроения<span class="operator">.</span>ШкалаВремени<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
ФиктивнаяШкала<span class="operator">.</span>ОтображатьПериодическиеМетки <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
Метка <span class="operator">=</span> ФиктивнаяШкала<span class="operator">.</span>Метки<span class="operator">.</span>Добавить<span class="operator">(</span><span class="date">'20150204'</span><span class="operator">)</span><span class="operator">;</span>
Метка<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Контроль&quot;</span><span class="operator">;</span>
Метка<span class="operator">.</span>ЦветЛинии <span class="operator">=</span> WebЦвета<span class="operator">.</span>Красный<span class="operator">;</span></pre>

<p class="Regularbeforepicture">Тогда
диаграмма пример следующий вид:</p>

<p class="Picture"><IMG src="_img/img00268.gif?_=1496848987" WIDTH="728" ALT HEIGHT="223"></p>

<p class="MsoCaption">Рис.
269. Метка внутри шкалы</p>

<p class="MsoNormal">Доступна
возможность изменить цвет фона фрагмента диаграммы за указанный период.
Например, можно выделить выходные дни:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ИнтервалФона <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ИнтервалыФона<span class="operator">.</span>Добавить<span class="operator">(</span><span class="date">'20150124'</span><span class="operator">,</span> КонецДня<span class="operator">(</span><span class="date">'20150125'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ИнтервалФона<span class="operator">.</span>Цвет <span class="operator">=</span> WebЦвета<span class="operator">.</span>БледноМиндальный<span class="operator">;</span>
ИнтервалФона <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ИнтервалыФона<span class="operator">.</span>Добавить<span class="operator">(</span><span class="date">'20150131'</span><span class="operator">,</span> КонецДня<span class="operator">(</span><span class="date">'20150201'</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ИнтервалФона<span class="operator">.</span>Цвет <span class="operator">=</span> WebЦвета<span class="operator">.</span>БледноМиндальный<span class="operator">;</span></pre>

<p class="Regularbeforepicture">Диаграмма
примет следующий вид:</p>

<p class="Picture"><IMG src="_img/img00269.gif?_=1496848987" WIDTH="732" ALT HEIGHT="223"></p>

<p class="MsoCaption">Рис.
270. Выделенные интервалы</p>

<a id="TI000001698" class="bookmark" name="issogl4_7.3.4.4.5_интерактивное_редактирование_интервалов"><h5>7.3.4.4.5. Интерактивное редактирование интервалов</h5></a>

<p class="MsoNormalCxSpFirst">Данные
диаграммы Ганта могут быть изменены как из встроенного языка, так и
интерактивно. Для того чтобы пользователю была доступна возможность изменения
расположения и размеров интервалов, необходимо использовать свойство <span class="Term">Редактирование</span> значения диаграммы.</p>

<p class="MsoNormalCxSpLast">В
качестве примера добавим к данным диаграммы серию <span class="Interface">Факт</span> и разрешим
редактирование ее значения в точке <span class="Interface">Расчистка территории</span>:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">СерияФакт <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>Серии<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
СерияФакт<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Факт&quot;</span><span class="operator">;</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаСтроительствоОфиса<span class="operator">,</span> СерияФакт<span class="operator">)</span><span class="operator">;</span>
Интервал <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Интервал<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20150125'</span><span class="operator">;</span>
Интервал<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20150206'</span><span class="operator">)</span><span class="operator">;</span>
Значение <span class="operator">=</span> ДиаграммаГанта<span class="operator">.</span>ПолучитьЗначение<span class="operator">(</span>ТочкаРасчистка<span class="operator">,</span> СерияФакт<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Разрешено интерактивное редактирование интервалов.</span>
Значение<span class="operator">.</span>Редактирование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
Интервал <span class="operator">=</span> Значение<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Интервал<span class="operator">.</span>Начало <span class="operator">=</span> <span class="date">'20150127'</span><span class="operator">;</span>
Интервал<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">=</span> КонецДня<span class="operator">(</span><span class="date">'20150206'</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">На
диаграмме станет доступно редактирование фактического значения:</p>

<p class="Picture"><IMG src="_img/img00270.gif?_=1496848987" WIDTH="738" ALT HEIGHT="362"></p>

<p class="MsoCaption">Рис.
271. Редактируемый интервал</p>

<p class="MsoNormal">Интервал
будет помечен (как на рисунке) после того, как попытаться изменить положение
интервала с помощью мыши.</p>

<a id="TI000001699" class="bookmark" name="issogl4_7.3.4.4.6_обработка_событий"><h5>7.3.4.4.6. Обработка событий</h5></a>

<p class="MsoNormalCxSpFirst">Интерактивное
изменение интервалов диаграммы Ганта приводит к появлению события <span class="Term">ПриОкончанииРедактированияИнтервала</span>. В
обработчике события доступны свойства измененного интервала.</p>

<p class="MsoNormalCxSpLast">Например,
в обработчике события можно реализовать проверку на выход интервала <span class="Interface">Расчистка территории</span>
за полный интервал диаграммы и отказ от редактирования, если продолжительность
фактических данных вышла за полный интервал:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ДиаграммаГантаПриОкончанииРедактированияИнтервала<span class="operator">(</span>Элемент<span class="operator">,</span> Интервал<span class="operator">,</span> ОтменаРедактирования<span class="operator">)</span>
    <span class="keyword">Если</span> Интервал<span class="operator">.</span><span class="keyword">Конец</span> <span class="operator">&gt;</span> ДиаграммаГанта<span class="operator">.</span>КонецПолногоИнтервала <span class="keyword">Тогда</span>
        ОтменаРедактирования <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="_ref423094562"></a><a name="_ref437342813"></a><a id="TI000001700" class="bookmark" name="issogl3_7.3.4.5_дендрограмма"><h4>7.3.4.5. Дендрограмма</h4></a>

<p class="Regularbeforepicture">Дендрограмма
представляет собой графический способ отображения степени сходства объектов.
Поле дендрограммы содержит область построения и область заголовка. По умолчанию
в области построения на горизонтальной оси перечислены сравниваемые объекты, по
вертикали отмечена величина отличия между объектами.</p>

<p class="Picture"><IMG src="_img/img00271.gif?_=1496848987" WIDTH="498" ALT HEIGHT="229"></p>

<p class="MsoCaption">Рис.
272. Дендрограмма</p>

<p class="MsoNormal">Разница
в значениях элементов показана расположением соединительной линии.</p>

<p class="Regularbeforepicture">В
качестве примера представим на дендрограмме различия в цене двух товаров:
яблоки – 10 рублей, груши – 12 рублей.</p>

<p class="Picture"><IMG src="_img/img00272.gif?_=1496848987" WIDTH="511" ALT HEIGHT="233"></p>

<p class="MsoCaption">Рис.
273. 2 объекта</p>

<p class="MsoNormal">Данная
дендрограмма из встроенного языка может быть сформирована следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Яблоки <span class="operator">=</span> Дендрограмма<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Яблоки<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Яблоки (10 руб.)&quot;</span><span class="operator">;</span>
Груши <span class="operator">=</span> Дендрограмма<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Груши<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Груши (12 руб.)&quot;</span><span class="operator">;</span>
Связь <span class="operator">=</span> Дендрограмма<span class="operator">.</span>Связи<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Связь<span class="operator">.</span>ПервыйЭлемент <span class="operator">=</span> Яблоки<span class="operator">;</span>
Связь<span class="operator">.</span>ВторойЭлемент <span class="operator">=</span> Груши<span class="operator">;</span>
Связь<span class="operator">.</span>Расстояние <span class="operator">=</span> <span class="number">2</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Коллекция
<span class="Term">Элементы</span>
дендрограммы содержит перечень объектов, в нашем случае – товаров. Связи
между объектами задаются в коллекции <span class="Term">Связи</span>.</p>

<p class="MsoNormalCxSpLast">Теперь
добавим к сравнению третий товар: <span class="Interface">Апельсины</span>,
стоимостью 20 рублей. Для этого должен быть создан еще один элемент
дендрограммы и установлена еще одна связь:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Апельсины <span class="operator">=</span> Дендрограмма<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Апельсины<span class="operator">.</span>Текст <span class="operator">=</span> <span class="string">&quot;Апельсины (20 руб)&quot;</span><span class="operator">;</span>
Связь <span class="operator">=</span> Дендрограмма<span class="operator">.</span>Связи<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Связь<span class="operator">.</span>ПервыйЭлемент <span class="operator">=</span> Яблоки<span class="operator">;</span>
Связь<span class="operator">.</span>ВторойЭлемент <span class="operator">=</span> Апельсины<span class="operator">;</span>
Связь<span class="operator">.</span>Расстояние <span class="operator">=</span> <span class="number">8</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Дендрограмма
будет иметь следующий вид:</p>

<p class="Picture"><IMG src="_img/img00273.gif?_=1496848987" WIDTH="511" ALT HEIGHT="233"></p>

<p class="MsoCaption">Рис.
274. 3 объекта</p>

<p class="Regularbeforepicture">Следует
отметить, что расположение связей соответствует порядку их добавления.
Добавление первой связи привело к объединению в группу элементов <span class="Interface">Яблоки</span> и <span class="Interface">Груши</span>. При
создании второй связи автоматически учтено наличие связи, созданной ранее,
поэтому вторая линия связывает элемент <span class="Interface">Апельсины</span> с
элементом, который образован связью элементов <span class="Interface">Яблоки</span> и <span class="Interface">Груши</span>:</p>

<p class="Picture"><IMG src="_img/img00274.gif?_=1496848987" WIDTH="511" ALT HEIGHT="233"></p>

<p class="MsoCaption">Рис.
275. Объединение элементов</p>

<p class="MsoNormal">Настройка
областей дендрограммы может быть выполнена с помощью свойств <span class="Term">ОбластьЗаголовка</span> и <span class="Term">ОбластьПостроения</span>. Например, может быть
изменен формат шкалы значений:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Дендрограмма<span class="operator">.</span>ОбластьПостроения<span class="operator">.</span>ФорматШкалыЗначений <span class="operator">=</span> <span class="string">&quot;ЧДЦ=2;&quot;</span><span class="operator">;</span></pre>

<p class="Regularbeforepicture">Дендрограмма
примет следующий вид:</p>

<p class="Picture"><IMG src="_img/img00275.gif?_=1496848987" WIDTH="511" ALT HEIGHT="233"></p>

<p class="MsoCaption">Рис.
276. Формат шкалы значений</p>

<p class="MsoNormal">Режим
автоматической настройки масштаба дендрограммы при изменении размеров формы
определяется свойством <span class="Term">ПоддержкаМасштаба</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ВсеЭлементы</span> – все элементы отображаются в
поле дендрограммы независимо от размеров формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">КоличествоЭлементов</span> – в видимой части
дендрограммы отображается то количество элементов, которое задано в свойстве <span class="Term">КоличествоЭлементовШкалы</span>. Остальные элементы
доступны при использовании полосы прокрутки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">МинимальнаяШирина</span> – при уменьшении
размеров формы размеры элементов могут уменьшиться до ширины, заданной в
свойстве <span class="Term">МинимальнаяШиринаЭлемента</span>. Если в видимой
части недостаточно места для отображения всех элементов, используется полоса
прокрутки.</p>

<a name="_ref425411623"></a><a id="TI000000399" class="bookmark" name="issogl1_7.4_параметры_формы"><h2>7.4. Параметры формы</h2></a>

<a id="TI000001655" class="bookmark" name="issogl2_7.4.1_общая_информация"><h3>7.4.1. Общая информация</h3></a>

<p class="MsoNormal">Параметры формы
(закладка <span class="Interface">Параметры</span>) служат двум целям:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Описать набор данных, которые будут влиять на
открытие формы (параметризация формы). Для этого нужно перечислить все необходимые
параметры и указать их типы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Определить параметры, которые будут влиять на
ключ уникальности формы. Для этого необходимо установить свойство <span class="Interface">Ключевой параметр</span>
у тех параметров, которые должны участвовать в формировании ключа уникальности
формы. При попытке открыть форму система производит поиск существующей формы с
помощью сформированного ключа уникальности формы. Если в системе существует
форма с полученным ключом уникальности, возвращается именно эта форма; если
нет – создается новая форма.</p>

<p class="MsoNormalCxSpFirst">При вызове
формы значения параметров, созданных разработчиком, можно указывать в структуре
параметров наряду с системными параметрами форм (если таковые имеются).</p>

<p class="MsoNormalCxSpLast">Параметры
формы можно передать в форму в момент ее создания. Анализ переданных параметров
можно выполнить в событии <span class="Term">ПриСозданииНаСервере()</span>
(коллекция <span class="Term">Параметры</span> является
свойством объекта <span class="Term">УправляемаяФорма</span>):</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// В месте вызова.</span>
<span class="comment">// Формируем параметр формы.</span>
Параметры <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
Параметры<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;Важность&quot;</span><span class="operator">,</span> ПредопределенноеЗначение<span class="operator">(</span><span class="string">&quot;Перечисление.Важность.Важно&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Открываем форму с указанием параметров.</span>
ОткрытьФорму<span class="operator">(</span><span class="string">&quot;ОбщаяФорма.ФормаПросмотра&quot;</span><span class="operator">,</span> Параметры<span class="operator">)</span><span class="operator">;</span>
…
<span class="comment">// В модуле формы.</span>
<span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
 <span class="keyword">Если</span> Параметры<span class="operator">.</span>Важность <span class="operator">=</span> Перечисления<span class="operator">.</span>Важность<span class="operator">.</span>Важно <span class="keyword">Тогда</span>
 …
 <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="NoteCxSpFirst"><span class="Note">ВНИМАНИЕ!</span> После вызова обработчика события <span class="Term">ПриСозданииНаСервере</span> все неключевые параметры
формы удаляются из коллекции <span class="Term">Параметры</span>.</p>

<p class="NoteCxSpLast"><span class="Note">Совет.</span> Неключевые параметры формы, необходимые для
дальнейшей работы, нужно сохранять в данных формы.</p>

<a id="TI000000400" class="bookmark" name="issogl2_7.4.2_стандартные_параметры_формы"><h3>7.4.2. Стандартные параметры формы</h3></a>

<p class="MsoNormalCxSpFirst">Для того
чтобы поддерживать автоматическое взаимодействие между формами, система
предоставляет ряд стандартных параметров, которые используются для управления
формами при их открытии. С помощью этих параметров системой реализуется в полях
форм выбор из форм выбора, открытие форм объектов, работа стандартных команд и т. д.
То есть они обеспечивают различные заложенные в систему сценарии работы
интерфейса. Но разработчик также может использовать эти параметры во встроенном
языке, передавая их при вызове метода <span class="Term">ОткрытьФорму()</span>.</p>

<p class="MsoNormalCxSpLast">Перечень стандартных
параметров форм в зависимости от вида расширения формы можно посмотреть в
разделах <span class="Interface">Встроенный
язык – Интерфейс (управляемый) – Управляемая форма – Расширение…</span>
встроенной справки.</p>

<a id="TI000000401" class="bookmark" name="issogl2_7.4.3_пример_работы_с_параметрами_формы"><h3>7.4.3. Пример работы с параметрами формы</h3></a>

<p class="MsoNormalCxSpFirst">Для
демонстрации работы параметров формы рассмотрим реализацию выбора элемента в
поле ввода. Сутью примера будет реализация механизма выбора элемента из списка
на встроенном языке.</p>

<p class="MsoNormalCxSpLast">К моменту
начала работы с примером нужно иметь конфигурацию, обладающую следующими свойствами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
имеется справочник <span class="Term">Товары</span> с иерархией групп и элементов;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
имеется справочник <span class="Term">Аналоги</span> с реквизитом <span class="Term">ВыбранныйТовар</span> типа <span class="Term">СправочникСсылка.Товары</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
оба справочника имеют формы элементов.</p>

<p class="MsoNormal">Теперь реализуем в
этой конфигурации все механизмы, которые использует платформа для выбора
элемента из списка, на встроенном языке. При этом мы увидим:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
как происходит использование стандартных
параметров формы;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
каким образом их использует сама система;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
как их может использовать разработчик.</p>

<p class="MsoNormalCxSpFirst">Добавим
дополнительный параметр, который будет управлять закрытием формы выбора после
выбора элемента. Назовем этот параметр <span class="Term">ЗакрыватьПослеВыбора</span>
(тип <span class="Term">Булево</span>). Добавим
его в качестве параметра формы <span class="Term">ФормаВыбора</span>
справочника <span class="Term">Товары</span>.</p>

<p class="MsoNormalCxSpLast">Для того
чтобы открыть форму выбора элемента, необходимо в форме элемента справочника <span class="Term">Аналоги</span> создать обработчик события <span class="Term">НачалоВыбора</span> у элемента формы <span class="Term">ВыбранныйТовар</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ВыбранныйТоварНачалоВыбора<span class="operator">(</span>Элемент<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    СтруктураПараметров <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
    СтруктураПараметров<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;РежимВыбора&quot;</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
    СтруктураПараметров<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ВыборГруппИЭлементов&quot;</span><span class="operator">,</span> ИспользованиеГруппИЭлементов<span class="operator">.</span>Элементы<span class="operator">)</span><span class="operator">;</span>
    СтруктураПараметров<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;РазрешитьВыборКорня&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span>
    СтруктураПараметров<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ТекущаяСтрока&quot;</span><span class="operator">,</span> Объект<span class="operator">.</span>ВыбранныйТовар<span class="operator">)</span><span class="operator">;</span>
    СтруктураПараметров<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЗакрыватьПослеВыбора&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span>
    ОткрытьФорму<span class="operator">(</span><span class="string">&quot;Справочник.Товары.ФормаВыбора&quot;</span><span class="operator">,</span> СтруктураПараметров<span class="operator">,</span> Элементы<span class="operator">.</span>ВыбранныйТовар<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Следует отдельно
остановиться на третьем параметре метода <span class="Term">ОткрытьФорму()</span>.
Этот параметр определяет, кто будет владельцем формы выбора и кому будет
приходить оповещение о сделанном выборе. В данном случае мы указали владельцем
формы выбора сам элемент формы, но также мы можем указать этим параметром и
саму форму. В этом случае будет необходимо реализовывать обработчик <span class="Term">ОбработкаВыбора</span> модуля формы и в нем решать, в
какой реквизит формы помещать выбранные данные.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если мы не будем реализовывать обработчик события <span class="Term">НачалоВыбора</span>, то его действия выполнит сама
система. Это справедливо и для всех дальнейших обработчиков, которые использованы
в примере.</p>

<p class="MsoNormal">Теперь необходимо
обработать переданные параметры в форме выбора. Сделаем это в обработчике <span class="Term">ПриСозданииНаСервере()</span> модуля формы выбора.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    Элементы<span class="operator">.</span>Список<span class="operator">.</span>ВыборГруппИЭлементов <span class="operator">=</span> Параметры<span class="operator">.</span>ВыборГруппИЭлементов<span class="operator">;</span>
    Элементы<span class="operator">.</span>Список<span class="operator">.</span>РазрешитьВыборКорня <span class="operator">=</span> Параметры<span class="operator">.</span>РазрешитьВыборКорня<span class="operator">;</span>
    Элементы<span class="operator">.</span>Список<span class="operator">.</span>ТекущаяСтрока <span class="operator">=</span> Параметры<span class="operator">.</span>ТекущаяСтрока<span class="operator">;</span>
    ЗакрыватьПриВыборе <span class="operator">=</span> Параметры<span class="operator">.</span>ЗакрыватьПослеВыбора<span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Для того чтобы
проверить работоспособность установленных нами параметров формы, установим, с
помощью конфигуратора, у таблицы формы выбора <span class="Term">Список</span>
свойство <span class="Term">ВыборГруппИЭлементов</span>
в значение <span class="Term">Группы</span> (без
применения параметра не будет доступен выбор элементов справочника).</p>

<p class="Note"><span class="Note">Примечание.</span>
Если у таблицы <span class="Term">Список</span>,
отображающей список товаров, свойство <span class="Term">РежимВыбора</span>
не будет установлено в значение <span class="Term">Истина</span>,
то выбор товаров будет недоступен.</p>

<p class="MsoNormal">Теперь нам
необходимо обработать выбор желаемого элемента в форме выбора. Для этого нужно
определить обработчик события <span class="Term">ВыборЗначения</span>
таблицы формы.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> СписокВыборЗначения<span class="operator">(</span>Элемент<span class="operator">,</span> СтандартнаяОбработка<span class="operator">,</span> Значение<span class="operator">)</span>
    СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    ОповеститьОВыборе<span class="operator">(</span>Значение<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Нам осталось
реализовать обработку выбора элемента в самом поле ввода. Для этого необходимо
обработать событие <span class="Term">ОбработкаВыбора</span>
нашего поля ввода <span class="Term">ВыбранныйТовар</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ВыбранныйТоварОбработкаВыбора<span class="operator">(</span>Элемент<span class="operator">,</span> ВыбранноеЗначение<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    Объект<span class="operator">.</span>ВыбранныйТовар <span class="operator">=</span> ВыбранноеЗначение<span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Мы самостоятельно
реализовали системный механизм выбора значения в поле ввода на форме.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
Данный пример не является законченным. Его единственным назначением является
демонстрация механизмов работы с параметрами формы.</p>

<p class="MsoNormal">Если при создании
параметров (обработчик <span class="Term">ВыбранныйТоварНачалоВыбора()</span>)
заменить строку:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">    ПараметрыВыбора<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЗакрыватьПослеВыбора&quot;</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">на строку:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">    ПараметрыВыбора<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЗакрыватьПослеВыбора&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">то форма выбора
перестанет закрываться после того, как будет осуществлен выбор. Это можно
использовать, например, для реализации формы подбора (выбор нескольких товаров
без закрытия формы выбора).</p>

<a name="_ref217219499"></a><a name="_ref391303985"></a><a name="_ref391303984"></a><a id="TI000000402" class="bookmark" name="issogl1_7.5_команды_формы"><h2>7.5. Команды формы</h2></a>

<a name="_ref423704668"></a><a name="_ref423704667"></a><a id="TI000001469" class="bookmark" name="issogl2_7.5.1_общая_информация"><h3>7.5.1. Общая информация</h3></a>

<p class="MsoNormal">Действия в форме
выполняются с помощью команд формы. Сами команды служат лишь описанием выполняемых
действий. Для того чтобы команда стала выполнять свою функцию, она должна быть
привязана к элементу формы (типа <span class="Term">Кнопка</span>).
Можно выделить несколько групп команд, которые присутствуют в форме:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Команды, создаваемые
разработчиком</span> в процессе проектирования формы. Для них необходимо создавать
обработчик непосредственно в модуле формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Стандартные команды</span>,
которые предоставляются расширением основного реквизита формы и расширениями
реквизитов, которые являются списками (например, табличная часть объекта,
динамический список, набор записей регистра сведений и т. д.), если с
этим реквизитом есть связанный элемент формы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Глобальные команды</span> –
команды, предоставленные глобальным командным интерфейсом (подробнее про
командный интерфейс см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 2. работа с конфигурацией.htm?_=1496848987#_ref215985627">здесь</a>). Такие команды могут быть непараметризованными и
параметризованными. Параметризованные глобальные команды будут предоставлены
форме только в том случае, если на форме есть источники параметров с соответствующими
типами.</p>

<p class="MsoNormalCxSpFirst">Доступность
стандартных команд формы и элементов формы определяется свойством <span class="Interface">Состав команд</span>
соответствующего элемента формы.</p>

<p class="MsoNormalCxSpMiddle">Команды,
которые предоставляет глобальный командный интерфейс (закладка <span class="Interface">Глобальные команды</span>),
могут быть размещены в любом месте формы, точно так же, как и команды формы.</p>

<p class="MsoNormalCxSpMiddle">В
свойстве <span class="Interface">Действие</span>
указывается обработчик, который реализует действие, выполняемое командой. Если
обработчик не задан, то команда будет недоступна для использования. К выбору в
этом поле доступны только процедуры и функции без параметров, которые являются
клиентскими (подробнее см. <a href="#_ref216510534">здесь</a>).</p>

<p class="MsoNormalCxSpLast">Если
команда изменяет данные формы, то следует указать на это установкой свойства <span class="Interface">Изменяет сохраняемые
данные</span>. Тогда при попытке выполнения команды будут выполняться следующие
действия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Попытка выполнить блокировку основного реквизита
формы. Если попытка закончится неудачей – команда не будет выполнена.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Установлен признака изменения у формы (флаг <span class="Term">Модифицированность</span>).</p>

<p class="MsoNormalCxSpFirst">Если для
команды установлено свойство <span class="Interface">Изменяет сохраняемые данные</span> и форма находится в режиме <span class="Interface">Только просмотр</span>,
то все элементы формы, связанные с этой командой, также будут находиться в
состоянии <span class="Interface">Только просмотр</span>.</p>

<p class="MsoNormalCxSpLast">Кроме того,
исполнение параметризованной глобальной команды, для которой параметр
предоставляется реквизитом с установленным свойством <span class="Interface">Сохраняемые данные</span>,
для нового и несохраненного объекта приведет к попытке записать объект. При
этом пользователю будет задан вопрос о необходимости записи. Если ответ будет
отрицательный – команда не будет выполнена.</p>

<p class="Note"><span class="Note">Примечание.</span>
При автоматическом заполнении командных панелей и контекстных меню, для которых
указан источник команд, стандартные команды не добавляются, если в данном элементе
есть кнопки, добавленные вручную с такими же командами. Данная логика не распространяется
на команды, добавляемые из фрагмента глобального командного интерфейса.</p>

<p class="MsoNormal">Для упрощения
разработки различных диалогов в стандартные команды формы добавлены команды <span class="Interface">Да</span>, <span class="Interface">Нет</span>, <span class="Interface">ОК</span>, <span class="Interface">Отмена</span>, <span class="Interface">Повторить</span>, <span class="Interface">Прервать</span>, <span class="Interface">Игнорировать</span>.
Если такая команда добавлена в форму, то при нажатии пользователем этой кнопки
будут выполнены следующие действия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для формы, открытой в модальном режиме,
выполняется закрытие формы и возвращается соответствующее значение типа <span class="Term">КодВозвратаДиалога</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для формы, открытой в немодальном режиме,
выполняется только закрытие формы.</p>

<p class="MsoNormalCxSpFirst">При
формировании имени обработчика выполнения команды будет использоваться свойство
команды <span class="Interface">Имя</span>.</p>

<p class="MsoNormalCxSpLast">Стандартная
команда формы <span class="Interface">Справка</span> служит для открытия справочной информации по
форме/объекту конфигурации. Расположение этой кнопки на командной панели формы
определяется свойством <span class="Term">ТолькоВоВсехДействиях</span>
этой кнопки. Если данное свойство установлено в значение <span class="Term">Авто</span> (и для командной панели с автоматическим
заполнением), то фактическое расположение будет следующим:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Интерфейс <span class="Interface">Такси</span> – если у формы или родительского объекта
конфигурации имеется справочная информация, то кнопка будет располагаться на
командной панели. В противном случае кнопка будет располагаться только в меню <span class="Interface">Еще</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Другие интерфейсы – кнопка всегда
располагается на командной панели формы.</p>

<p class="MsoNormalCxSpFirst"><span class="Interface">Использование</span> – подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref200447246">здесь</a>.</p>

<p class="MsoNormalCxSpLast"><span class="Interface">Функциональные опции</span> – определяет, с какими
функциональными опциями связан данный реквизит формы. Подробнее про
функциональные опции см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref213664543">здесь</a>.</p>

<span class="Hidden"></span><a name="_ref391304041"></a><a id="TI000001470" class="bookmark" name="issogl2_7.5.2_особенности_применения_различных_команд"><h3>7.5.2. Особенности применения различных команд</h3></a>

<p class="MsoNormalCxSpFirst">Для
расширений управляемой формы для объекта, справочника, документа, плана видов
характеристик, бизнес-процесса, задачи и записи регистра сведений существует
стандартная команда <span class="Interface">Показать в списке</span>, которая предназначена для отображения
формы списка соответствующего объекта с позиционированием открываемого списка
на объекте, из которого выполняется команда. В интерфейсе команда будет
недоступна, если ключевой реквизит формы равен пустой ссылке (или пустому ключу
записи), т. е. редактируется новый объект.</p>

<p class="MsoNormalCxSpMiddle">Если
команда используется в форме документа, то для такой команды доступно свойство <span class="Term">Параметр</span>, в котором можно выбрать форму,
которая будет использоваться для отображения списка. Для выбора доступен
собственно документ и все журналы, в состав которых входит используемый
документ. Кнопка, связанная с командой <span class="Term">ПоказатьВСписке</span>,
отображается на форме вне зависимости от заполненности свойства <span class="Term">Параметр</span>. Если значение свойства <span class="Term">Параметр</span> задано, то в качестве заголовка по
умолчанию у кнопки, связанной с командой <span class="Term">ПоказатьВСписке</span>,
используется представление списка соответствующего объекта конфигурации
(документа или журнала).</p>

<p class="MsoNormalCxSpLast">При автоматическом
заполнении командной панели формы документа анализируются журналы, в которые
входит документ, при этом на эти журналы текущий пользователь должен иметь
право <span class="Term">Просмотр</span>
(см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 6. описание прав доступа.htm?_=1496848987#_ref391302583">здесь</a>) и они (журналы) должны быть включены функциональным
опциям (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref418598738">здесь</a>). Если есть хотя бы один такой журнал, то в командной
панели вместо кнопки <span class="Interface">Показать в списке</span> размещается группа кнопок с заголовком
<span class="Interface">Показать
в списке</span>. Подменю содержит:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Команду <span class="Term">ПоказатьВСписке</span>,
для которой свойство <span class="Term">Параметр</span>
заполняется ссылкой на документ, в форме которого формируется командная панель;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Команды <span class="Term">ПоказатьВСписке</span>
(по одной на каждый подходящий журнал), для которых свойство <span class="Term">Параметр</span> заполняется ссылкой на
соответствующий журнал документов.</p>

<p class="MsoNormalCxSpFirst">Если нет
доступных журналов, то в командной панели размещается команда <span class="Term">ПоказатьВСписке</span>, у кнопки которой свойство <span class="Term">Параметр</span> не задано.</p>

<p class="MsoNormalCxSpMiddle">Для
отображения используется основная форма списка (с учетом возможности
переопределения, подробнее см. <a href="#_ref391302200">здесь</a>) соответствующего объекта конфигурации.</p>

<p class="MsoNormalCxSpMiddle">Если
необходимо обеспечить функциональность команды <span class="Term">ПоказатьВСписке</span>
в рамках реализации какого-то другого алгоритма, то для этого следует
использовать метод <span class="Term">ВыполнитьПереход()</span>,
существующий для объекта <span class="Term">УправляемаяФорма</span>.</p>

<p class="MsoNormalCxSpLast">Пример
реализации:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Форма <span class="operator">=</span> ПолучитьФорму<span class="operator">(</span><span class="string">&quot;Справочник.Контрагенты.ФормаСписка&quot;</span><span class="operator">)</span><span class="operator">;</span>
Форма<span class="operator">.</span>ВыполнитьПереход<span class="operator">(</span>Объект<span class="operator">.</span>Ссылка<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Если необходимо
каким-то образом обработать открытие формы с позиционированием на нужном
объекте, то это можно сделать с помощью обработчика события <span class="Term">ОбработкаПерехода</span> (событие вызывается для
управляемой формы). Если после исполнения обработчик события <span class="Term">ОбработкаПерехода</span> требуется выполнить
стандартные действия (значение параметра <span class="Term">СтандартнаяОбработка</span>
равна значению <span class="Term">Истина</span>),
то у первой таблицы управляемой формы, связанной с основным реквизитом формы
типа <span class="Term">ДинамическийСписок</span>
(см. <a href="#_ref391306060">здесь</a>) текущая строка устанавливается в значение,
переданное в качестве параметра <span class="Term">Объект</span>
обработчика события. Если основным реквизитом открываемой формы выступает не
динамический список – никаких действий выполнено не будет.</p>

<a name="_ref216510534"></a><a id="TI000000403" class="bookmark" name="issogl1_7.6_модуль_формы"><h2>7.6. Модуль формы</h2></a>

<p class="MsoNormalCxSpFirst">Модуль
формы состоит из набора процедур и функций. Допускаются переменные и тело
модуля.</p>

<p class="MsoNormalCxSpLast">Каждая
процедура, функция или объявление переменной модуля формы должны предваряться
одной из следующих директив компиляции:</p>

<p class="MsoListBullet">&#9679; 
<span class="Term">НаКлиенте</span> – означает, что метод выполняется
на стороне клиента, а переменная существует все время жизни клиентской части
формы.</p>

<p class="Indentlist">Из клиентского
метода допустимыми являются вызовы любых методов.</p>

<p class="MsoListBullet">&#9679; 
<span class="Term">НаСервере</span> – означает, что метод выполняется
на стороне сервера, а переменная существует только во время вызова выполнения
серверного вызова.</p>

<p class="Indentlist">Для серверных
методов допустимыми являются вызовы серверных, серверных внеконтекстных и
клиент-серверных внеконтекстных методов.</p>

<p class="MsoListBullet">&#9679; 
<span class="Term">НаСервереБезКонтекста</span> – означает, что
метод исполняется на сервере вне контекста формы. Переменные не могут
предваряться такой директивой компиляции.</p>

<p class="IndentlistCxSpFirst">В таких
методах недоступен контекст формы. При вызове этих методов не выполняется
передача данных формы на сервер и обратно. Применение внеконтекстных методов
позволяет существенно уменьшить объем передаваемых данных при вызове серверной
процедуры из среды клиентского приложения.</p>

<p class="IndentlistCxSpLast">Из
серверных внеконтекстных методов формы допускается вызов серверных методов
общих модулей.</p>

<p class="MsoListBullet">&#9679; 
<span class="Term">НаКлиентеНаСервереБезКонтекста</span> – означает,
что метод исполняется как на клиенте, так и на сервере, вне контекста формы.
Переменные не могут предваряться такой директивой компиляции.</p>

<p class="IndentlistCxSpFirst">Также
такой метод не имеет доступа к переменным модуля формы.</p>

<p class="IndentlistCxSpLast">Из
клиент-серверного внеконтекстного метода можно вызывать методы неглобальных
серверных общих модулей, а также методы неглобальных общих модулей с флажками <span class="Interface">Сервер</span> и <span class="Interface">Клиент (управляемое
приложение)</span>.</p>

<p class="MsoNormalCxSpFirst">Отсутствие
директивы компиляции перед процедурой означает использование директивы по
умолчанию. Директивой по умолчанию является <span class="Term">НаСервере</span>.</p>

<p class="MsoNormalCxSpMiddle">При
передаче управления с клиента на сервер с помощью <span class="Bold">контекстного
вызова</span> нужно учитывать следующую особенность: перед началом вызова
данные формы передаются на сторону сервера, затем происходит выполнение
серверного вызова, и потом данные формы передаются обратно на клиента. Это
может занимать достаточно существенное время. В то же время <span class="Bold">внеконтекстный
серверный вызов</span> не выполняет таких преобразований, поэтому выполняется
быстрее.</p>

<p class="MsoNormalCxSpLast">В
программном модуле формы (т. е. фрагменте кода, размещенном вне процедур и
функций) допустимо использование инструкций препроцессора для явного выделения
участков кода инициализации соответствующих переменных.</p>

<p class="Note"><span class="Note">ВНИМАНИЕ!</span>
В серверной переменной формы невозможно сохранить данные между двумя вызовами
серверной стороны формы.</p>

<p class="MsoNormalCxSpFirst">Не
допускается использование нескольких директив компиляции перед одним методом
или переменной. Не допускается наличие одноименных методов или переменных,
отличающихся только директивами компиляции.</p>

<p class="MsoNormalCxSpMiddle">Обработчики
команд формы, созданных разработчиком, могут располагаться только в клиентских
методах модуля формы.</p>

<p class="MsoNormalCxSpLast">В модуле
формы рекомендуется использовать директивы препроцессора только внутри процедур
и функций.</p>

<p class="Note"><span class="Note">Примечание</span>.
Для понимания результата<span class="Interface"> </span>при «пересечении» инструкциями препроцессора границ
процедур следует учитывать, что обработка инструкций препроцессора выполняется
до обработки директив компиляции.</p>

<p class="MsoNormalCxSpFirst">Полный
перечень директив компиляции и инструкций препроцессора см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 4. встроенный язык.htm?_=1496848987#_ref231122751">здесь</a>.</p>

<p class="MsoNormalCxSpLast">Приведем
пример использования директив компиляции:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Перем</span> СервернаяПеременная<span class="operator">;</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Перем</span> КлиентскаяПеременная<span class="operator">;</span>
<span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> Серверная<span class="operator">(</span><span class="operator">)</span>
    Сообщить<span class="operator">(</span>СервернаяПеременная<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> Команда1Выполнить<span class="operator">(</span><span class="operator">)</span>
    Сообщить<span class="operator">(</span>КлиентскаяПеременная<span class="operator">)</span><span class="operator">;</span>
    Серверная<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">#Если Сервер Тогда</span>
    СервернаяПеременная <span class="operator">=</span> <span class="string">&quot;Сервер&quot;</span><span class="operator">;</span>
<span class="preprocessor">#КонецЕсли</span>
<span class="preprocessor">#Если НаКлиенте Тогда</span>
    КлиентскаяПеременная <span class="operator">=</span> <span class="string">&quot;Клиент&quot;</span><span class="operator">;</span>
<span class="preprocessor">#КонецЕсли</span></pre>

<a name="_ref216268390"></a><a name="_ref377996576"></a><a name="_ref377996572"></a><a id="TI000000404" class="bookmark" name="issogl1_7.7_элементы_формы"><h2>7.7. Элементы формы</h2></a>

<a id="TI000001573" class="bookmark" name="issogl2_7.7.1_общая_информация"><h3>7.7.1. Общая информация</h3></a>

<p class="MsoNormal">Визуальное представление
управляемой формы описывается набором элементов. Элементы формы образуют
иерархическую коллекцию. Иерархия элементов формы определяет внешний вид и
состав отображаемых на форме элементов управления. Существует несколько типов
элементов формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
форма – корневой элемент дерева элементов
(см. <a href="#_ref419713193">здесь</a>), существует в единственном экземпляре;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле формы (см. <a href="#_ref414549603">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
декорация формы (см. <a href="#_ref419713205">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
таблица формы (см. <a href="#_ref416780510">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
кнопка формы (см. <a href="#_ref374441213">здесь</a>);</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
группа формы (см. <a href="#_ref419713226">здесь</a>);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
дополнение элемента формы (см. <a href="#_ref377996546">здесь</a>).</p>

<p class="MsoNormalCxSpFirst">Элементы
формы типа поле формы и таблица формы всегда связаны с данными формы. Если
связанный реквизит не указан, или он недоступен на клиенте ввиду ограничения по
правам, или исключен из состава (свойства <span class="Interface">Просмотр</span> и <span class="Interface">Редактирование</span>
реквизитов формы), поля не будет видно на форме, и оно будет автоматически удалено
при создании формы в режиме исполнения.</p>

<p class="MsoNormalCxSpLast">Каждый
элемент формы описывается некоторым набором свойств, которые определяют его
поведение на форме, включая особенности отображения и трансформации –
изменения размеров элемента при изменении размеров формы или окружающих элементов
(включая исчезновение или появление элементов).</p>

<a id="TI000000405" class="bookmark" name="issogl2_7.7.2_общие_свойства_элементов_формы"><h3>7.7.2. Общие свойства элементов формы</h3></a>

<p class="MsoNormal">Данный раздел
описывает общие свойства элементов формы. Свойства, специфичные для конкретных
элементов, будут описаны ниже.</p>

<a name="_ref461036678"></a><a id="TI000000406" class="bookmark" name="issogl3_7.7.2.1_группа_свойств_основные"><h4>7.7.2.1. Группа свойств «Основные»</h4></a>

<p class="MsoNormal">Свойство <span class="Interface">Положение заголовка</span>
определяет, каким образом будет выводиться заголовок элемента. Заголовком
выступает синоним реквизита формы, связанного с выбранным элементом формы, если
не указано свойство <span class="Interface">Заголовок</span> у элемента формы. Заголовок всегда
оканчивается символом &quot;<span class="Interface">:</span>&quot; (добавляется системой автоматически). Заголовки
элементов и групп могут динамически переноситься (с автоматическим увеличением
высоты формы) при выполнении всех следующих условий:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Заголовок состоит из нескольких слов,
разделенных пробелами.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Элемент с заголовком не является:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Любым элементом, подчиненным таблице управляемой
формы;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Меню, кнопкой (вида <span class="Interface">Обычная кнопка</span>
или <span class="Interface">Кнопка
командной панели</span>);</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Заголовком страницы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Заголовком группы, если заголовок содержит
дополнительные элементы оформления (оформление групп в интерфейсе версии 8.2).</p>

<p class="MsoNormalCxSpFirst">Если в
заголовке группы отображаются данные, и вышеуказанные условия выполнены, то
перенос текста будет выполняться, но минимальная ширина текста не может быть
меньше размера, отведенного для отображения данных заголовка.</p>

<p class="MsoNormalCxSpMiddle">При
добавлении элемента в свойстве <span class="Interface">Данные</span>
необходимо указать ссылку на реквизит формы, с которым этот элемент связан.
Если элемент формы не связан с реквизитом формы, то он не будет отображен на
форме. Если на форму добавляется кнопка, то в свойстве <span class="Interface">Команда</span> необходимо
указать ссылку на команду, которая будет выполняться при нажатии кнопки. Если
кнопка не связана с командой, то она не будет отображена на форме.</p>

<p class="MsoNormalCxSpMiddle">Элемент
формы может находиться в режиме <span class="Interface">Только просмотр</span> (запрещающем любые изменения), если у
него установлено свойство <span class="Interface">Только просмотр</span> (в конфигураторе или с помощью
встроенного языка), или у группы, в которую он входит, установлено свойство <span class="Interface">Только просмотр</span>,
или связанный с ним реквизит формы имеет признак <span class="Interface">Сохраняемые данные</span> и у формы
установлен режим <span class="Interface">Только просмотр</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
управления видимостью элементов формы существуют два свойства: <span class="Interface">Видимость</span> и <span class="Interface">Пользовательская
видимость</span>. Первое свойство можно изменять как в редакторе формы (в конфигураторе),
так и программно. Свойство <span class="Interface">Пользовательская видимость</span> настраивается только в конфигураторе
и задает начальную видимость элемента формы в разрезе ролей. Результирующая видимость
элемента формы образуется сложением «по И» свойств <span class="Interface">Видимость</span> и <span class="Interface">Пользовательская
видимость</span> для конкретного пользователя. Описание редактирования свойства
<span class="Interface">Пользовательская
видимость</span> см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 27. инструменты разработки.htm?_=1496848987#_ref200447246">здесь</a>. Кроме того, изменяя видимость элементов формы в
диалоге <span class="Interface">Настройка
формы</span>, пользователь фактически выполняет изменение свойства <span class="Interface">Пользовательская видимость</span>
конкретного элемента формы.</p>

<p class="MsoNormalCxSpLast">Изменение
видимости (свойство элемента <span class="Interface">Видимость</span>) с помощью встроенного языка, в большинстве
случае, не требует обращения к серверу. Однако в следующих ситуациях серверный
вызов все равно будет выполнен:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
при изменении видимости с помощью функциональных
опций;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
при изменении видимости элемента <span class="Interface">Группа</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
при изменении видимости таблицы управляемой
формы, отображающей динамический список, а также при изменении видимости
колонок в такой таблице.</p>

<p class="MsoNormalCxSpFirst">Описание
свойств <span class="Interface">Высота</span>
и <span class="Interface">Ширина</span>
(или <span class="Interface">Количество
строк</span>) см. <a href="#_ref414372742">здесь</a>.</p>

<p class="MsoNormalCxSpLast">С помощью
свойства <span class="Interface">Пропускать
при вводе</span> можно задать пропуск элемента формы при обходе формы с помощью
клавиши Enter.
Если свойство установлено в значение <span class="Interface">Да</span>, то элемент будет пропущен при обходе по <span class="Interface">Enter</span> (но
доступен при обходе с помощью клавиши <span class="Interface">Tab</span> или указания элемента мышью). Если свойство
установлено в значение <span class="Interface">Нет</span>, то элемент не будет пропущен при обходе с помощью
клавиши <span class="Interface">Enter</span>.
Также существует возможность указать автоматическое определение необходимости
пропуска элемента формы. Для этого необходимо установить значение этого
свойства равным <span class="Interface">Авто</span>. В этом случае будет использоваться следующий
алгоритм работы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Элемент типа <span class="Interface">Поле</span> будет пропускаться в случае
поля вида, поля надписи или поля картинки, а также в зависимости от значения
свойства <span class="Interface">Отображение
предупреждения при редактировании</span> (см. <a href="#_ref253572301">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Элемент типа <span class="Interface">Кнопка</span> не будет пропускаться в том
случае, если кнопка является кнопкой по умолчанию.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Элемент типа <span class="Interface">Декорация</span> будет пропускаться.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Элемент типа <span class="Interface">Таблица</span> не будет пропускаться.</p>

<a name="_ref322367385"></a><a id="TI000000407" class="bookmark" name="issogl3_7.7.2.2_связь_элементов_с_реквизитами_формы"><h4>7.7.2.2. Связь элементов с реквизитами формы</h4></a>

<a id="TI000001656" class="bookmark" name="issogl4_7.7.2.2.1_общая_информация"><h5>7.7.2.2.1. Общая информация</h5></a>

<p class="MsoNormal">Любой элемент,
отображающий какие-либо данные, должен быть связан с реквизитом формы. Можно
выделить «обычную» связь – когда элемент формы отображает данные
какого-либо реквизита формы, и «специальные» режимы связи.</p>

<a id="TI000001657" class="bookmark" name="issogl4_7.7.2.2.2_связь_с_обычным_реквизитом_формы"><h5>7.7.2.2.2. Связь с обычным реквизитом формы</h5></a>

<p class="MsoNormalCxSpFirst">В простейшем
случае элемент формы отображает значение, сохраненное в каком-либо реквизите
формы. В зависимости от типа реквизита, система автоматически определяет, какой
элемент формы будет использоваться для отображения данных, и какого вида будет
этот элемент (если такое возможно).</p>

<p class="MsoNormalCxSpLast">В этом
случае свойство <span class="Interface">Путь к данным</span> содержит имя реквизита формы, чьи данные
будут отображены этим элементом.</p>

<a id="TI000000408" class="bookmark" name="issogl4_7.7.2.2.3_связь_с_текущими_данными_таблиц"><h5>7.7.2.2.3. Связь с текущими данными таблиц</h5></a>

<p class="MsoNormalCxSpFirst">Элемент формы может быть связан с
реквизитом, представляющим собой колонку таблицы, размещенной на форме. При
этом в данном элементе отображаются данные поля текущей строки таблицы. Такая
связь допускается как для полей, так и для таблиц, при этом не требуется, чтобы
в таблице отображалась соответствующая колонка. Элемент, связанный с текущими
данными, может находиться как в режиме <span class="Interface">Только
просмотр</span>, так и в режиме редактирования.</p>

<p class="MsoNormalCxSpLast">Например, необходимо расположить на форме
поле, которое отображает цену для текущей строки товара. Для этого в нужное место
иерархии элементов формы добавляем поле (вид поля ввода может быть как <span class="Interface">Поле надписи</span>, так и <span class="Interface">Поле ввода</span>), для которого в качестве данных выбираем (в
диалоге <span class="Interface">Выбор реквизита</span>)
<span class="Term">Объект.Товары.Цена</span>.
Здесь <span class="Term">Объект</span> – это реквизит формы типа <span class="Term">Документ</span>
конкретного вида, <span class="Term">Товары</span> – это табличная часть документа, а
<span class="Term">Цена</span> –
реквизит табличной части.</p>

<a id="TI000000409" class="bookmark" name="issogl4_7.7.2.2.4_связь_с_определенной_строкой_таблицы"><h5>7.7.2.2.4. Связь с определенной строкой таблицы</h5></a>

<p class="MsoNormal">Элемент формы может
быть связан с реквизитом, представляющим собой колонку указанной строки таблицы,
являющейся реквизитом формы. Такая связь допускается как для полей, так и для
таблиц, при этом не требуется, чтобы в таблице отображалась соответствующая
колонка. Конкретная строка задается индексом строки (например, <span class="Term">ТаблицаЗначений[1]</span>) или последовательностью
индексов для иерархических таблиц (например, <span class="Term">ТаблицаЗначений[2].СписокИтогов[4]</span>).
Элемент, связанный с текущими данными, может находиться как в режиме <span class="Interface">Только просмотр</span>,
так и в режиме редактирования.</p>

<p class="Note"><span class="Note">Примечание.</span>
Данная связь не поддерживается для динамических списков.</p>

<p class="MsoNormalCxSpFirst">Например,
необходимо расположить на форме поле, которое отображает значение поля <span class="Term">Долг</span> из 4-й строки таблицы значений <span class="Term">Контрагенты</span>. Для этого в нужное место иерархии
элементов формы добавляем поле (вид поля ввода может быть как <span class="Interface">Поле надписи</span>,
так и <span class="Interface">Поле
ввода</span>), для которого в качестве данных выбираем (в диалоге <span class="Interface">Выбор реквизита</span>)
<span class="Term">Контрагенты[3].Долг</span>.
Здесь <span class="Term">Контрагенты</span> –
это реквизит формы типа <span class="Term">(ТаблицаЗначений)</span>,
а <span class="Term">Долг</span> –
колонка таблицы значений.</p>

<p class="MsoNormalCxSpMiddle">Если
данные поля ссылаются на отсутствующую строку – редактировать такое поле
будет нельзя, даже если выбрано поле ввода, в противном случае изменение,
выполненное в поле ввода, будет выполнено и в таблице, на которую ссылается
поле ввода.</p>

<p class="MsoNormalCxSpLast">В примере
выше, если пользователь изменит поле ввода, значение из этого поля попадет в
колонку <span class="Term">Долг</span> 4-й строки таблицы
значений <span class="Term">Контрагенты</span>.</p>

<a id="TI000000410" class="bookmark" name="issogl4_7.7.2.2.5_связь_с_реквизитами_через_ссылку"><h5>7.7.2.2.5. Связь с реквизитами через ссылку</h5></a>

<p class="MsoNormal">Если в данных формы
есть реквизиты ссылочных типов (например, <span class="Term">СправочникСсылка</span>),
то элемент формы можно связать с реквизитом, полученным по этой ссылке. Данные
для таких элементов будут получаться автоматически и обновляться при изменении
ссылки. Связь с реквизитами через ссылку может быть любой глубины. Элементы,
связанные с такими реквизитами, всегда находятся в режиме <span class="Interface">Только просмотр</span>.</p>

<p class="Note"><span class="Note">Примечание.</span>
Для реквизитов составного типа (включая типы <span class="Term">СправочникСсылка</span>,
<span class="Term">ДокументСсылка</span> и т. д.)
недоступно получение реквизитов через ссылку.</p>

<p class="MsoNormal">Например, нужно
расположить на форме поле, которое отображает артикул текущей строки товара.
Для этого нам необходимо добавить в нужное место иерархии элементов формы поле
с видом <span class="Interface">Поле
надписи</span>, для которого в качестве данных выбрать (в диалоге <span class="Interface">Выбор реквизита</span>)
<span class="Term">Объект.Товары.Товар.Артикул</span>.
Здесь <span class="Term">Объект</span> – это
реквизит формы типа <span class="Term">Документ</span>
конкретного вида, <span class="Term">Товары</span> –
это табличная часть документа, <span class="Term">Товар</span> –
это реквизит табличной части, а <span class="Term">Артикул</span> –
реквизит справочника <span class="Term">Товары</span>.</p>

<a id="TI000000411" class="bookmark" name="issogl4_7.7.2.2.6_связь_с_итогами_коллекций"><h5>7.7.2.2.6. Связь с итогами коллекций</h5></a>

<p class="MsoNormal">Элемент формы может
быть связан с реквизитами, представляющим собой итоговые значения некоторых коллекций:
табличные части, наборы записей, список значений (только количество строк в
коллекции). Такими реквизитами могут быть:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
итоги по числовым полям,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
количество строк в коллекции.</p>

<p class="MsoNormalCxSpFirst">Элементы,
связанные с такими реквизитами, всегда находятся в режиме <span class="Interface">Только просмотр</span>.</p>

<p class="MsoNormalCxSpMiddle">В
качестве примера поместим на форму поле, отображающее суммовой итог для
табличной части <span class="Term">Товары</span>.
Для этого в качестве данных поля формы укажем <span class="Term">Объект.Товары.ИтогСумма</span>,
где <span class="Term">Объект</span> – это
основной реквизит формы, <span class="Term">Товары</span> –
табличная часть документа, а <span class="Term">ИтогСумма</span> –
специальный реквизит. Связь может быть установлена не только для самого
элемента. Также поддерживается установка связи для отображения данных в подвале
таблицы и в заголовке закладки (группы вида <span class="Term">Страница</span>).</p>

<p class="MsoNormalCxSpLast">В
зависимости от типа данных, которые отображает элемент формы (поле ввода,
кнопка и группа), с помощью свойства <span class="Interface">Вид</span> можно задать способ отображения данных.</p>

<a name="_ref329019637"></a><a name="_ref380051354"></a><a id="TI000000412" class="bookmark" name="issogl3_7.7.2.3_группа_свойств_использование"><h4>7.7.2.3. Группа свойств «Использование»</h4></a>

<p class="MsoNormalCxSpFirst">Подробнее
про использование свойства <span class="Interface">Быстрый выбор</span> см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215985342">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle">Описание
свойства <span class="Interface">Связи
параметров выбора</span> см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref271726534">здесь</a>. Описание свойства <span class="Interface">Параметры выбора</span>
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref271716125">здесь</a>. Если значения свойств <span class="Interface">Связи параметров выбора</span> и <span class="Interface">Параметры выбора</span>
заданы и в свойствах реквизита объекта метаданных, и в свойствах элемента
формы, то значения свойства будут объединены. Объединение будет выполняться «по
ИЛИ» (по именам параметров).</p>

<p class="MsoNormalCxSpLast">Имеется
возможность указывать расширенную подсказку для следующих элементов формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Поле;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Таблица;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Группа;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Кнопка;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Декорация.</p>

<p class="MsoNormalCxSpFirst">Расширенная
подсказка задается с помощью свойства <span class="Interface">Расширенная подсказка</span> соответствующего элемента формы.
Включается возможность указания данной подсказки с помощью команды <span class="Interface">Показать расширенную
подсказку</span> контекстного меню элемента формы. При этом сама расширенная
подсказка представляет собой декорацию формы типа <span class="Interface">Текст</span>. Текст
расширенной подсказки задается с помощью свойства декорации <span class="Interface">Заголовок</span>. При
это имеется возможность управлять некоторыми параметрами отображения подсказки
с помощью свойств раздела <span class="Interface">Оформление</span> у декорации. Если требуется специальным
образом оформлять сам текст подсказки, то для этого необходимо выбрать в окне
редактирования расширенной подсказки значение переключателя <span class="Interface">Форматированная строка</span>.
При этом будут доступны расширенные возможности оформления (подобные
форматированному документу). Также у вышеперечисленных элементов формы можно
задать отображение подсказки: вокруг элемента формы, кнопкой рядом с элементом
формы, всплывающим окном или отображение будет выбираться автоматически. Если задан
режим отображения подсказки <span class="Interface">Кнопка</span>, то отображаться будет свойство <span class="Interface">Заголовок</span>
расширенной подсказки с форматированием. Если задан режим отображения <span class="Interface">Всплывающий</span>, то
будет отображаться свойство <span class="Interface">Заголовок</span> расширенной подсказки, но в виде обычной
строки (с убранным форматированием).</p>

<p class="MsoNormalCxSpLast">Если заданы
одновременно свойства <span class="Interface">Подсказка</span> и свойство <span class="Interface">Заголовок</span> расширенной
подсказки – отображаться будет текст из расширенной подсказки.</p>

<a name="_ref359930215"></a><a id="TI000000413" class="bookmark" name="issogl3_7.7.2.4_группа_свойств_события"><h4>7.7.2.4. Группа свойств «События»</h4></a>

<p class="MsoNormalCxSpFirst">В данной
группе собраны ссылки на обработчики, которые предоставляет тот или иной
элемент формы.</p>

<p class="MsoNormalCxSpLast">Следует понимать, что вызов какого-либо обработчика
события (не обязательно события элемента формы) из кода на встроенном языке не
является аналогом вызова этого же обработчика самой платформой, в рамках
выполнения последовательности событий, связанных с тем или иным действием
пользователя. Так, например, программный вызов обработчика события <span class="Term">ПриЗаписиНаСервере()</span>
модуля формы справочника не означает, что будет открыта транзакция и произойдет
запись элемента справочника. При таком вызове будет исполнен только код
обработчика, причем, возможно, что код будет исполнен некорректно или в
процессе исполнения этого кода возникнут ошибки. Ошибки могут возникнуть
потому, что разработчик, который создавал этот обработчик, исходил из того, что
этот обработчик будет вызван только самой платформой и при этом платформа же
обеспечит некоторое окружение.</p>

<a id="TI000000414" class="bookmark" name="issogl3_7.7.2.5_картинки_элементов"><h4>7.7.2.5. Картинки элементов</h4></a>

<p class="MsoNormal">Элементы формы
позволяют использовать для своего оформления картинки. Задание картинки
возможно двумя способами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
из конфигуратора,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
программным способом.</p>

<p class="MsoNormalCxSpFirst">В случае
если картинка задается программным способом, может быть установлена либо пустая
картинка, либо картинка из библиотеки картинок конфигурации.</p>

<p class="MsoNormalCxSpLast">Если
картинка задается из конфигуратора, то возможен еще один вариант – задание
картинки из файла на диске (внешняя картинка). Использование таких картинок
рекомендуется только в тех случаях, когда разрабатываются внешние отчеты или
обработки, которые могут использоваться в различных конфигурациях, и картинка
является значимым элементом оформления. В остальных случаях использование таких
картинок является нежелательным. Для команд формы и глобальных команд выбрать
внешнюю картинку невозможно.</p>

<a name="_ref367284766"></a><a name="_ref367284765"></a><a name="_ref353105897"></a><a name="_ref352078526"></a><a name="_ref339642710"></a><a name="_ref339642709"></a><a name="_ref419713193"></a><a id="TI000000415" class="bookmark" name="issogl2_7.7.3_форма"><h3>7.7.3. Форма</h3></a>

<p class="MsoNormalCxSpFirst">Описывает
визуальные свойства формы. Элемент такого типа всегда существует в единственном
числе и находится в корне иерархии элементов. Также в свойствах формы
описываются обработчики событий формы.</p>

<p class="MsoNormalCxSpLast">При
открытии формы имеется возможность прервать этот процесс в нескольких местах:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
обработчик события <span class="Term">ПриСозданииНаСервере</span> – отказ от открытия
в этой обработчике приведет к тому, что форма вообще не будет создана.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
обработчик события <span class="Term">ПриОткрытии</span> – отказ от открытия в этом
обработчике может привести к различным последствиям.</p>

<p class="IndentlistCxSpFirst">Если форма
открывается так, что получившийся объект типа <span class="Term">УправляемаяФорма</span>
не будет удерживаться в какой-либо переменной, то в результате отказа от
открытия сама форма, и все связанные с формой данные, будут освобождены из
памяти и, в частности, перестанут выполняться обработчики ожидания формы,
которые могли быть установлены к этому времени.</p>

<p class="IndentlistCxSpLast">Если
открытая форма удерживается в какой-либо переменной, то форма будет создана,
все связанные данные не будут удаляться (останутся доступными для
использования) и продолжат работу установленные обработчики ожидания формы. При
этом сохранится возможность повторно попытаться открыть созданную форму.</p>

<p class="MsoNormal">Режим открытия
формы управляется специальным свойством – <span class="Interface">Режим открытия окна. </span>Данное
свойство описывает, каким образом будет открыто окно:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Независимый</span> – форма
открывается:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Режим <span class="Interface">Формы в отдельных окнах</span>. Форма открывается в немодальном
окне, которое является вспомогательным окном приложения.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Режим <span class="Interface">Формы в закладках</span>. Форма открывается в отдельной
закладке.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Режим <span class="Interface">Такси</span>. Форма открывается в рабочей области основного
окна приложения.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Блокировать окно владельца</span> –
форма открывается в немодальном окне, в режиме, когда работа с формой, из
которой инициировано открытие текущей формы, блокируется. Данный режим
предназначен для форм, в которых вводится мало информации и работа с которыми
не требует длительного времени, например, для ввода элементов справочников, содержащих
небольшое количество реквизитов. Этот режим внешне аналогичен модальному
открытию формы, однако при открытии из встроенного языка работа модуля не останавливается
на время работы открываемой формы. При этом все остальное взаимодействие с
формой выполняется как с другими немодальными формами. Такая форма также открывается
во вспомогательном окне.</p>

<p class="IndentlistCxSpFirst">Форма,
открытая в таком режиме, не участвует в поиске уже открытых форм. Если
попытаться открыть точно такую же форму (даже с параметром уникальности,
установленным в значение <span class="Term">Ложь</span>),
то форма, открытая в режиме <span class="Interface">Блокировать окно владельца</span>, не будет найдена и будет
открыта новая форма.</p>

<p class="IndentlistCxSpLast">Этот режим
по умолчанию установлен у следующих форм:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
элемент и группа справочника,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
узел плана обмена,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
элемент и группа плана видов характеристик,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
счет,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
вид расчета,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
задача,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
запись независимого регистра сведений.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Блокировать весь интерфейс</span> –
аналогично форме, которая открывается в режиме <span class="Interface">Блокировать окно владельца</span>, но блокируется
работа не только с родительской формой, но со всем интерфейсом прикладного
решения. Такой режим открытия не используется в качестве установки «по
умолчанию».</p>

<p class="MsoNormal">При открытии формы в
блокирующем режиме используется следующий алгоритм определения блокируемого
окна:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если в свойстве <span class="Term">ВладелецФормы</span>
задана форма и эта форма не закрыта, блокируется окно этой формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если в свойстве <span class="Term">ВладелецФормы</span>
задан элемент формы, и эта форма не закрыта, то блокируется окно формы, которой
принадлежит этот элемент.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В остальных случаях, если в свойстве <span class="Term">ВладелецФормы</span> задано значение <span class="Term">Неопределено</span> или форма владельца закрыта,
блокируется окно, которое является текущим окном клиентского приложения на
момент открытия формы.</p>

<p class="MsoNormal">Свойство <span class="Interface">Режим открытия окна</span>
не оказывает влияния на открытие формы в следующих случаях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если она открывается в модальном режиме. В этом
случае форма будет открыта модально и в отдельном окне.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
При открытии в уже существующем основном или
вспомогательном окне. В этом случае форма будет открыта в существующем основном
или вспомогательном окне.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В том случае, если форма открывается из формы,
блокирующей интерфейс. В этом случае также будет игнорироваться параметр <span class="Term">РежимОткрытияОкна</span> метода <span class="Term">ОткрытьФорму()</span>. Форма будет открыта в
отдельном окне, в неблокирующем режиме.</p>

<p class="MsoNormal">Каждая форма имеет
заголовок. Заголовок может устанавливаться вручную, формироваться автоматически
и быть комбинированным. Если свойство формы <span class="Interface">Заголовок</span> не задано и установлено
свойство <span class="Interface">Автоматический
заголовок</span>, то заголовок формы будет сформирован автоматически (описание
правил формирования автоматического заголовка см. <A href="/db/content/v8310doc/src/руководство разработчика/приложение 3. правила формирования текстов стандартных команд и автоматических заголовков форм.htm?_=1496848987#_ref476214152">здесь</a>). Явное указание свойства <span class="Interface">Заголовок</span> (при
установленном свойстве <span class="Interface">Автоматический заголовок</span>) приведет к тому, что заголовок
формы будет формироваться из значения свойства <span class="Interface">Заголовок</span>, затем через &quot;<span class="Interface">:</span>&quot; будет
выведен автоматический заголовок формы. Если у формы указано только свойство <span class="Interface">Заголовок</span>, а
свойство <span class="Interface">Автоматический
заголовок</span> сброшено, то в качестве заголовка формы будет использоваться
только значение свойства <span class="Interface">Заголовок</span>.</p>

<p class="Regularbeforepicture">Свойство
<span class="Interface">Отображать
заголовок</span> позволяет управлять отображением заголовка формы (включая
признак модификации данных формы). Свойство можно изменять из встроенного языка
в режиме «1С:Предприятие». Свойство используется только при работе в интефейсе <span class="Interface">Такси</span>. Если
используется обычный режим основного окна, то данное свойство применяется
только для форм, расположенных на начальной странице основного окна.</p>

<p class="Picture"><IMG src="_img/img00276.gif?_=1496848987" WIDTH="684" ALT HEIGHT="481"></p>

<p class="MsoCaption">Рис. 277. Управление заголовоком</p>

<p class="MsoNormal">Если для основного
окна указан один из следующих режимов – <span class="Interface">Рабочее место</span>, <span class="Interface">Полноэкранное рабочее
место</span> или <span class="Interface">Киоск</span>, то свойство отображать заголовок применяется для
всех управляемых форм прикладного решения.</p>

<p class="Regularbeforepicture">Свойство
<span class="Interface">Отображать
кнопку закрытия</span> управляет наличием на форме кнопки закрытия (если способ
открытия формы подразумевает наличие кнопки закрытия) и поведением клавиши <span class="Interface">ESC</span>. Свойство
можно изменять из встроенного языка в режиме «1С:Предприятие». Свойство
используется только при работе в интефейсе <span class="Interface">Такси</span>. Данное свойство не управляет
кнопкой закрытия окна, которая находится в заголовоке вспомогательного окна.</p>

<p class="Picture"><IMG src="_img/img00277.gif?_=1496848987" WIDTH="684" ALT HEIGHT="441"></p>

<p class="MsoCaption">Рис. 278. Управление кнопкой закрытия</p>

<p class="MsoNormalCxSpFirst">Свойство <span class="Interface">Отображать кнопку
закрытия</span> применяется только в том случае, если для основного окна указан
один из следующих режимов – <span class="Interface">Рабочее место</span>, <span class="Interface">Полноэкранное рабочее место</span> или <span class="Interface">Киоск</span>.</p>

<p class="MsoNormalCxSpLast">Свойство
формы <span class="Interface">Вертикальная
прокрутка</span> определяет расположение элементов формы при начальном
отображении, а также то, как будут вести себя элементы формы в том случае, если
форма будет сжиматься по вертикали:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Значение <span class="Term">Использовать</span> –
полоса вертикальной прокрутки появится после того, как вертикальный размер
элементов формы достигнет размера, который был задан при редактировании формы в
конфигураторе (это относится и к элементам с автоматически определением высоты
элемента).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значение <span class="Term">ИспользоватьБезРастягивания</span> –
при растягивании формы элементы формы не реагируют на изменение размера формы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Значение <span class="Term">ИспользоватьПриНеобходимости</span> –
перед появлением полосы прокрутки элементы формы будут сжиматься по вертикали
до своего минимального размера.</p>

<p class="Regularbeforepicture">Рассмотрим
пример: имеется форма с реквизитом <span class="Term">Список</span>
типа <span class="Term">ДинамическийСписок</span>.
Этот реквизит отображается на форме таблицей <span class="Term">Список</span>,
для которой высота указана в 8 строк таблицы. Если свойство формы <span class="Interface">Вертикальная прокрутка</span>
установить в значение <span class="Term">Использовать</span>,
то форма практически не будет сжиматься:</p>

<p class="Picture"><IMG src="_img/img00278.gif?_=1496848987" WIDTH="685" ALT HEIGHT="283"></p>

<p class="MsoCaption">Рис. 279. Вертикальная прокрутка формы –
использовать</p>

<p class="MsoNormal">В этом случае
полоса вертикальной прокрутки появилась сразу, как только форму попытались
сжать по вертикали.</p>

<p class="Regularbeforepicture">Если
свойство формы <span class="Interface">Вертикальная прокрутка</span> установить в значение <span class="Term">ИспользоватьПриНеобходимости</span>, то форма вначале
максимально уменьшит свой размер по вертикали, и лишь потом появится
вертикальная полоса прокрутки:</p>

<p class="Picture"><IMG src="_img/img00279.gif?_=1496848987" WIDTH="685" ALT HEIGHT="283"></p>

<p class="MsoCaption">Рис. 280. Вертикальная прокрутка формы –
использовать при необходимости</p>

<p class="MsoNormal">При установке
свойства в значение <span class="Term">Авто</span>,
поведение формы определяется системой на основании типа основного реквизита формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если основной реквизит формы имеет тип <span class="Term">ДинамическийСписок</span>, или основной реквизит
формы имеет тип <span class="Term">ОтчетОбъект</span>,
и для расширения формы отчета заполнено свойство <span class="Term">РезультатОтчета</span>,
то значение <span class="Term">Авто</span> трактуется
как значение <span class="Term">ИспользоватьПриНеобходимости</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В остальных случаях значение <span class="Term">Авто</span> трактуется как <span class="Term">Использовать</span>.</p>

<p class="MsoNormalCxSpFirst">В том
случае, если форма имеет вертикальную прокрутку, то активизация любого элемента
формы, который представлен в видимой области формы не целиком, приводит к тому,
что форма пытается сделать так, чтобы активизируемый элемент целиком (или большей
частью) располагался в видимой части формы, а это может приводить к прокрутке
формы.</p>

<p class="MsoNormalCxSpLast">Свойство <span class="Interface">Вариант масштаба</span>
определяет, каким образом управляемая форма будет отображаться в интерфейсе <span class="Interface">Такси</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Авто</span> – система
автоматически определяет режим отображения формы. В этом случае анализируется
свойство <span class="Term">ВариантМасштабаФормКлиентскогоПриложения</span>
объекта <span class="Term">НастройкиКлиентскогоПриложения</span>.
Если в данном свойстве не указано конкретное значение варианта масштаба, то в
интерфейсе <span class="Interface">Такси</span> значение <span class="Interface">Авто</span> будет трактоваться как <span class="Interface">Обычный</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Обычный</span> –
форма выглядит стандартно для интерфейса <span class="Interface">Такси</span>. Свойство <span class="Interface">Масштаб</span> оказывает влияние на размер формы.</p>

<p class="Picture"><IMG src="_img/img00280.gif?_=1496848987" WIDTH="637" ALT HEIGHT="728"></p>

<p class="MsoCaption">Рис. 281. Обычный вариант масштаба</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Компактный</span> – в
этом случае форма выглядит «почти» как в интерфейсе версии 8.2. Свойство <span class="Interface">Масштаб</span> не
оказывает влияние на размер формы.</p>

<p class="Picture"><IMG src="_img/img00281.gif?_=1496848987" WIDTH="517" ALT HEIGHT="616"></p>

<p class="MsoCaption">Рис. 282. Компактный вариант масштаба</p>

<p class="MsoNormal">С технической точки
зрения, форма, для которой значение свойства <span class="Interface">Вариант масштаба</span> установлено в
значение <span class="Interface">Компактный</span>,
имеет следующие особенности:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В качестве шрифта формы используется системный
шрифт <span class="Interface">Шрифт
диалогов и меню</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Элементы формы имеют размеры, максимально
соответствующие таковым в интерфейсе версии 8.2;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Расстояния между элементами формы максимально
соответствуют расстояниям в интерфейсе версии 8.2;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Табличный документ, диаграмма, диаграмма Ганта,
дендрограмма, графическая схема и географическая схема отображаются без увеличения
масштаба.</p>

<p class="MsoNormalCxSpFirst">Данное
свойство предназначено для того, чтобы упростить использование сложных
(насыщенных) форм в интерфейсе <span class="Interface">Такси</span> без переработки этих форм. Данная возможность не
является основной, т. к. получающийся в результате интерфейс не
вполне соответствует интерфейсу <span class="Interface">Такси</span>.</p>

<p class="MsoNormalCxSpMiddle">Также
можно управлять масштабом сразу всех форм прикладного решения. Для этого
следует соответствующим образом установить значение свойства <span class="Term">ВариантМасштабаФормКлиентскогоПриложения</span>
объекта <span class="Term">НастройкиКлиентскогоПриложения</span>.
Значение этого свойства будет использоваться для всех форм, у которых значение
свойства <span class="Interface">Вариант
масштаба</span> установлено в значение <span class="Interface">Авто</span>.</p>

<p class="MsoNormalCxSpLast">Если для
формы установлен обычный режим отображения, то форма позволяет управлять
масштабом своего отображения с помощью свойства <span class="Interface">Масштаб</span>. Данное свойство указывает,
каким должен быть масштаб данной формы относительно ее базового размера (в
процентах). Значение свойства может изменяться от 10 до 400. В том случае, если
в режиме «1С:Предприятия» будет выполнено изменение масштаба всего приложения
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 3. интерфейс приложения.htm?_=1496848987#_ref468890999">здесь</a>), то масштаб, установленный в приложении, будет
рассчитываться от масштаба, указанного с помощью свойства <span class="Interface">Масштаб</span>. Так,
установив у формы масштаб 200% (через свойство <span class="Interface">Масштаб</span>), размер формы станет в 2
раза (по каждой координате) больше базового размера. Если в режиме «1С:Предприятия»
для такой формы указать масштаб 50% (с помощью диалога настройки масштаба), то
итоговый масштаб формы будет 100%, т. е. форма примет свой обычный
вид.</p>

<p class="Regularbeforepicture">При
отображении на форме одновременно списка групп и собственно содержимого
справочника, возникает задача синхронизации этих списков, чтобы при выборе
группы в списке групп, в списке элементов отображалось содержимое выбранной
группы. Для облегчения этой синхронизации предназначено свойство расширения
формы для динамического списка <span class="Interface">Список групп</span>. Это свойство становится доступным в том
случае, если основным реквизитом формы выступает реквизит типа <span class="Term">ДинамическийСписок</span>. В свойстве <span class="Interface">Список групп</span>, в
этом случае, следует указать таблицу управляемой формы, отображающей
динамический список, который отображает только иерархию групп отображаемого
справочника. В этом случае система обеспечивает автоматическую синхронизацию
списков при навигации по любому из них.</p>

<p class="Picture"><IMG src="_img/img00282.gif?_=1496848987" WIDTH="682" ALT HEIGHT="492"></p>

<p class="MsoCaption">Рис. 283. Список групп</p>

<p class="MsoNormalCxSpFirst">Для формы
можно отобразить командную панель (ее расположением на форме можно управлять с
помощью свойства <span class="Interface">Положение командной панели</span>). Состав стандартных команд
формы можно регулировать через свойство формы <span class="Interface">Состав команд</span>.</p>

<p class="MsoNormalCxSpMiddle">Если
свойство <span class="Interface">Разрешить
изменять форму</span> снято, то пользователь не может изменить состав и
относительное положение элементов формы в режиме 1С:Предприятие.</p>

<p class="MsoNormalCxSpMiddle">Свойство <span class="Interface">Проверять заполнение
автоматически</span> отвечает за проверку заполнения данных формы. Подробнее о
проверке заполнения см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref216684443">здесь</a>.</p>

<p class="MsoNormalCxSpLast">Если
свойство формы <span class="Interface">Сохранение данных формы в настройках</span> установлено в
значение <span class="Interface">Использовать
список</span>, то в списке реквизитов становится доступной колонка <span class="Interface">Сохранение</span>.
Значения реквизиты, у которых свойство <span class="Interface">Сохранение</span> установлено в значение <span class="Term">Истина</span>, будут сохраняться в хранилище данных
формы (подробнее см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref215641659">здесь</a>). Для сохранения будет использовано либо хранилище,
указанное в свойстве формы <span class="Interface">Хранилище настроек</span>, либо хранилище, указанное в свойстве
<span class="Interface">Хранилище
настроек данных форм</span> конфигурации.</p>

<p class="Note"><span class="Note">Примечание.</span>
Недоступно указание флажка <span class="Interface">Сохранение</span> для табличных частей объектов.</p>

<p class="MsoNormal">Для установки
режима <span class="Interface">Только
просмотр</span> у формы существует свойство <span class="Term">ТолькоПросмотр</span>,
доступное только для программного изменения. В случае установки этого свойства
в состояние <span class="Term">Истина</span> следующие
стандартные команды станут недоступны (в том числе и при попытке использовать
для вызова этих команд сочетания клавиш):</p>

<p class="MsoListBullet">&#9679; 
Для всех форм:</p>

<p class="MsoListBullet2">&#9679; 
<span class="Interface">Восстановить параметры</span>.</p>

<p class="MsoListBullet">&#9679; 
Для табличного поля:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Добавить</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Скопировать</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Удалить</span>.</p>

<p class="MsoListBullet">&#9679; 
Для расширения формы объекта, записи регистра
сведений, константы:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Записать</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Записать и закрыть</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Провести</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Провести и закрыть</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Отменить проведение</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Старт</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Выполнено</span>.</p>

<p class="MsoListBullet">&#9679; 
Для расширения формы выбора/настроек:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Завершить редактирование</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Выбрать настройки</span>.</p>

<p class="MsoListBullet">&#9679; 
Для расширения табличного поля для динамического
списка:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Пометить на удаление</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Провести</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Отменить проведение</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Создать группу</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Переместить в группу</span>.</p>

<p class="MsoListBullet">&#9679; 
Для расширения табличного поля для списка
значений:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Изменить</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Переместить вверх</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Переместить вниз</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Сортировать по убыванию</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Сортировать по возрастанию</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Подбор</span>.</p>

<p class="MsoListBullet">&#9679; 
Все команды изменения следующих коллекций системы
компоновки данных:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
коллекций настроек,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
коллекций доступных полей.</p>

<p class="MsoListBullet">&#9679; 
Для расширения табличного поля для <span class="Term">ДанныеФормыКоллекция</span>, <span class="Term">ДанныеФормыДерево</span>, <span class="Term">ДанныеФормыСтруктураИКоллекция</span>:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Изменить</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Переместить вверх</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Переместить вниз</span>,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Сортировать по убыванию</span>,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Сортировать по возрастанию</span>.</p>

<p class="MsoNormalCxSpFirst">Также
будут недоступны элементы формы, связанные с этими командами.</p>

<p class="MsoNormalCxSpLast">Если для
формы установлено свойство <span class="Interface">Только просмотр</span> и основным реквизитом формы является
динамический список, то все таблицы, связанные с этим списком, также перейдут в
режим просмотра. Кроме того, если заполнено свойство <span class="Interface">Список групп</span>,
то элемент формы, указанный в этом свойстве, также перейдет в режим просмотра.
При этом свойство элементов формы <span class="Interface">Только просмотр</span> не будет изменено.</p>

<a name="_ref341871153"></a><a name="_ref341871152"></a><a name="_ref329019650"></a><a name="_ref329019649"></a><a name="_ref310422541"></a><a name="_ref310422540"></a><a name="_ref253572301"></a><span class="Hidden"></span><a name="_ref414549604"></a><a name="_ref414549603"></a><a id="TI000000416" class="bookmark" name="issogl2_7.7.4_поле"><h3>7.7.4. Поле</h3></a>

<a name="_ref452563445"></a><a id="TI000001764" class="bookmark" name="issogl3_7.7.4.1_общая_информация"><h4>7.7.4.1. Общая информация</h4></a>

<p class="MsoNormal">Элемент формы <span class="Interface">Поле</span>
предназначен для отображения и редактирования какого-либо реквизита формы. Поле
формы может быть нескольких видов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
поле ввода,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле надписи,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле флажка,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле картинки,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле переключателя,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле текстового документа,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле табличного документа,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле календаря,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле индикатора,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле полосы регулирования,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле диаграммы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле диаграммы Ганта,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле дендрограммы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле графической схемы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле географической схемы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле HTML-документа,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле форматированного документа;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
поле планировщика.</p>

<p class="MsoNormal">Если поле является
подчиненным элементом для элемента формы <span class="Interface">Таблица</span>, то оно может принимать следующие типы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
поле ввода,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле картинки,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле надписи,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
поле флажка.</p>

<p class="MsoNormalCxSpFirst">Для того
чтобы разместить на форме поле ввода с видами: поле табличного документа, поле
диаграммы (см. <a href="#_ref437342774">здесь</a>), поле диаграммы Ганта (см. <a href="#_ref437342801">здесь</a>), поле дендрограммы (см. <a href="#_ref437342813">здесь</a>), поле графической схемы, поле географической схемы,
необходимо создать реквизит формы соответствующего типа и указать этот реквизит
в качестве данных элемента формы.</p>

<p class="MsoNormalCxSpLast">Для того
чтобы разместить на форме поле HTML-документа, необходимо создать реквизит
формы типа <span class="Term">Строка</span>, затем
создать поле ввода вида <span class="Interface">Поле HTML документа</span> и указать созданный реквизит в
качестве данных для этого поля. В качестве значения реквизита формы может
выступать навигационная ссылка или текст HTML-документа.</p>

<p class="Note"><span class="Note">Примечание.</span>
Следует учитывать, что при использовании поля HTML-документа может не
обеспечиваться поддержка всей функциональности HTML. В частности, не
поддерживаются скрипты с состоянием (переменные, хранящие значения, необходимые
в различных обработчиках событий), работа с языком разметки SVG, свойство
HTML-документа <span class="Term">parentWindow</span>,
переходы по ссылке внутри отображаемой страницы. Ограничения могут быть
обусловлены специфическими особенностями функционирования HTML (в том числе и
неидентичное функционирование) в формах «1С:Предприятия» в клиентских
приложениях и в различных веб-браузерах.</p>

<p class="MsoNormalCxSpFirst">Чтобы
разместить на форме поле форматированного документа, необходимо создать реквизит
формы типа <span class="Term">ФорматированныйДокумент</span>,
затем создать поле ввода вида <span class="Interface">Поле форматированного документа</span> и указать созданный реквизит
в качестве данных для этого поля. Подробнее про форматированный документ
см. <a href="#_ref414546361">здесь</a>.</p>

<p class="MsoNormalCxSpLast">Свойство
поля ввода <span class="Interface">Подсказка ввода</span> позволяет указывать подсказку, которая
будет формироваться непосредственно «внутри» поля ввода, если выполняются
следующие условия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Тип связанного реквизита не является типом <span class="Term">Число</span> или <span class="Term">Дата</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Значение связанного реквизита не содержит
значение по умолчанию для данного типа.</p>

<p class="MsoNormal">Если поле ввода
отображает данные типа <span class="Term">СписокЗначений</span>,
то форма редактирования списка значений, открываемая из такого поля, получает
от поля ввода следующие свойства:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">Маска</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ФормаВыбора</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ФорматРедактирования</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">БыстрыйВыбор</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ВыборГруппИЭлементов</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Term">ПараметрыВыбора</span> (дополненное значениями, в
соответствии со свойством <span class="Term">СвязиПараметровВыбора</span>);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">СвязьПоТипу</span> – передача ограничения типа
выполняетися только для случая редактирования элемента отбора компоновки
данных; если это свойство задано у поля ввода, редактирующего правое значение в
котором содержится <span class="Term">СписокЗначений</span>,
то, это ограничение типа устанавливается списку значений.</p>

<p class="MsoNormal">Поле ввода будет
игнорировать свойство <span class="Term">ЦветФона</span>
в том случае, если для этого поля свойство <span class="Term">Доступность</span>
установлено в значение <span class="Term">Ложь</span>
или свойство <span class="Term">ТолькоПросмотр</span>
установлено в значение <span class="Term">Истина</span>.</p>

<a name="_ref437345741"></a><a id="TI000001765" class="bookmark" name="issogl3_7.7.4.2_обновление_отображаемых_данных"><h4>7.7.4.2. Обновление отображаемых данных</h4></a>

<p class="MsoNormal">При работе с полем
ввода следует помнить об особенности, связанной с изменением данных формы или
ее (формы) структуры во время работы с данными поля ввода. Особенность
заключается в нежелательном обновлении данных в поле ввода, которое происходит
при выполнении следующих условий:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
В поле ввода находятся данные, которые не
зафиксированы в реквизите формы, связанного с полем ввода. Например, при вводе
текста.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
В это время срабатывает обработчик ожидания или
внешнего события.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В обработчике события изменяются данные формы
или состав элементов формы.</p>

<p class="MsoNormal">В описанном случае
текст, отображаемый полем ввода, будет заменен представлением тех данных,
которые получены в данных формы после завершения контекстного вызова. Изменить
такое поведение можно несколькими способами.</p>

<p class="Lang-parameter">Свойство
ОбновлениеТекстаРедактирования</p>

<p class="MsoNormal">Если в
вышеописанной ситуации необходимо заблокировать изменение только одного (или
небольшого количества) поля ввода, то такую блокировку можно установить с
помощью свойства поля ввода <span class="Term">ОбновлениеТекстаРедактирования</span>.
Если установить это свойство в значение <span class="Term">ПриИзмененииЗначения</span>,
то содержимое поля ввода будет обновляться только в том случае, когда в
связанный реквизит формы будет помещено значение, отличающееся от текущего
значения реквизита. Если свойство <span class="Term">ОбновлениеТекстаРедактирования</span>
поля ввода установить в значение <span class="Term">Никогда</span>,
то текст в поле ввода не будет изменяться даже при изменении значения
связанного реквизита.</p>

<p class="Lang-parameter">Метод
ОбновитьОтображениеДанных()</p>

<p class="MsoNormalCxSpFirst">Если в
вышеописанной ситуации присутствует обратная ситуация: требуется обновить
только ограниченное количество полей, а остальные поля оставить без изменения,
то для обновления можно использовать метод <span class="Term">ОбновитьОтображениеДанных()</span>,
указав в качестве параметра метода список полей формы, которые следует
обновить. Если параметр задан, то установка значений и обновление отображаемой
информации будет выполняться только для указанного поля (или списка полей).
Если в качестве параметра передан пустой массив, то установка значений не будет
выполняться для всех элементов управляемой формы.</p>

<p class="MsoNormalCxSpMiddle">Параметрами
метода могут выступать только следующие элементы формы: <span class="Term">ГруппаФормы</span>, <span class="Term">ТаблицаФормы</span>,
<span class="Term">ПолеФормы</span>.</p>

<p class="MsoNormalCxSpLast">Использование
метода <span class="Term">ОбновитьОтображениеДанных()</span>
имеет смысл только в следующих случаях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
из обработчика внешнего события;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
обработчика ожидания формы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
обработчика оповещения.</p>

<p class="MsoNormalCxSpFirst">В
обработчиках других событий поведение не изменяется: будут установлены значения
(и, как следствие, обновлено отображение данных) для всех элементов управляемой
формы (в веб-клиенте – только те значения, которые отличаются от текущих
данных формы).</p>

<p class="MsoNormalCxSpLast">В качестве
примера использования такого способа обновления данных можно привести следующий
вариант использования: в поле ввода вводится данные, идентифицирующие
контрагента. В обработчике ожидания выполняется проверка данных этого
контрагента, и изменяются некоторые элементы формы, отображающие результат
проверки. В этом случае рекомендуется в обработчике ожидания использовать метод
<span class="Term">ОбновитьОтображениеДанных()</span>
указав в качестве списка параметров элементы, связанные с результатами
проверки. Остальные элементы формы обновлены не будут. Также следует помнить,
что вызов контекстного серверного вызова, изменяющего данные формы, в
обработчике ожидания однозначно приведет к изменению всех данных формы, кроме
элементов с измененным значением свойства <span class="Term">ОбновлениеТекстаРедактирования</span>.</p>

<a id="TI000001766" class="bookmark" name="issogl3_7.7.4.3_предупреждение_при_редактировании"><h4>7.7.4.3. Предупреждение при редактировании</h4></a>

<p class="MsoNormalCxSpFirst">Если в
поле ввода формы редактируется реквизит, который заполняется автоматически, но,
тем не менее, может заполняться вручную (в крайне редких случаях), то такое
поведение можно реализовать с помощью свойств поля ввода <span class="Interface">Отображение предупреждения
при редактировании</span> и <span class="Interface">Предупреждение при редактировании</span>. Если значение
свойства <span class="Interface">Отображение
предупреждения при редактировании</span> равно <span class="Interface">Отображать</span>, то при попытке начать
редактирование поля «1С:Предприятие» выдаст предупреждение, которое состоит
либо из строки, указанной в свойстве <span class="Interface">Предупреждение при редактировании</span>, либо формируется
автоматически.</p>

<p class="MsoNormalCxSpLast">Для
стандартных полей <span class="Term">Код</span>
и <span class="Term">Номер</span> (для
объектов с автоматической нумерацией) автоматическая строка предупреждения будет
выглядеть как <span class="Interface">Номер заполняется при записи автоматически</span>, а для остальных
полей автоматическая строка будет выглядеть как <span class="Interface">Редактирование поля &quot;Имя поля&quot;
не рекомендуется</span>. Если значение свойства <span class="Interface">Отображение предупреждения при редактировании</span>
равно <span class="Interface">Авто</span>,
то для стандартных реквизитов <span class="Term">Код</span>
и <span class="Term">Номер</span> будет
использоваться значение <span class="Interface">Отображать</span>, а для остальных полей – <span class="Interface">Не отображать</span>.
Свойство <span class="Interface">Отображение
предупреждения при редактировании</span> также оказывает влияние на свойство
поля ввода <span class="Interface">Пропускать при вводе</span>. Если значение свойства <span class="Interface">Пропускать при вводе</span>
равно <span class="Interface">Авто</span>,
то поле будет пропускаться при вводе в том случае, если значение свойства <span class="Interface">Отображение
предупреждения при редактировании</span> равно <span class="Interface">Отображать</span> (или <span class="Interface">Авто</span> для
стандартных полей <span class="Term">Код</span>
и <span class="Term">Номер</span>).</p>

<a id="TI000001767" class="bookmark" name="issogl3_7.7.4.4_отметка_незаполненного"><h4>7.7.4.4. Отметка незаполненного</h4></a>

<p class="MsoNormal">Если свойство <span class="Term">АвтоОтметкаНезаполненного</span> поля ввода установлено
в значение <span class="Term">Истина</span>, то
свойство этого поля <span class="Term">ОтметкаНезаполненного</span>
будет автоматически актуализироваться при передаче значения из реквизита в поле
ввода.</p>

<a id="TI000001768" class="bookmark" name="issogl3_7.7.4.5_отображение_переключателя_и_флажка"><h4>7.7.4.5. Отображение переключателя и флажка</h4></a>

<p class="MsoNormal">Если вставляется
поле вида <span class="Interface">Поле переключателя</span>, то для него необходимо задать
свойство элемента формы <span class="Interface">Список выбора</span>, который определяет количество и значения
переключателей. По умолчанию используется горизонтальное расположение переключателей.
Для того чтобы расположить их по вертикали, необходимо изменить значение
свойства <span class="Interface">Количество
колонок</span>. В том случае, если количество колонок установлено в значение 0,
то система может расположить элементы переключателя в несколько строк, подбирая
количество элементов переключателя в строке, исходя из свободного места на
форме. Подбор выполняется не динамически, а в момент создания формы.</p>

<p class="Regularbeforepicture">Для
полей вида <span class="Interface">Поле флажка</span> и <span class="Interface">Поле переключателя</span> существует возможность указывать вид
отображения. Это делается с помощью свойства <span class="Interface">Вид флажка</span> у соответствующего
элемента формы. Для поля флажка можно выбрать представление в виде флажка или
тумблера.</p>

<p class="Picture"><IMG src="_img/img00283.gif?_=1496848987" WIDTH="336" ALT HEIGHT="64"></p>

<p class="MsoCaption"><a name="_ref352242492">Рис. </a>284. Флажок или
тумблер</p>

<p class="Regularbeforepicture">На <a href="#_ref352242492">рис.
284</a> представлены различные варианты отображения поля
флажка. В верхней части рисунка поле флажка представлено тумблером, а в
нижней – флажком. Для поля переключателя можно выбрать представление в
виде переключателя или тумблера.</p>

<p class="Picture"><IMG src="_img/img00284.gif?_=1496848987" WIDTH="480" ALT HEIGHT="71"></p>

<p class="MsoCaption"><a name="_ref352243028">Рис. </a>285. Переключатель
или тумблер</p>

<p class="MsoNormal">На <a href="#_ref352243028">рис.
285</a> представлены различные варианты отображения поля
переключателя. В верхней части рисунка поле переключателя представлено в виде
тумблера, а в нижней – в виде переключателя.</p>

<a id="TI000001769" class="bookmark" name="issogl3_7.7.4.6_редактирование_стандартных_периодов_и_дат"><h4>7.7.4.6. Редактирование стандартных периодов и дат</h4></a>

<p class="MsoNormal">Для реквизита формы
типа <span class="Term">СтандартныйПериод</span>
или <span class="Term">СтандартнаяДатаНачала</span>
существуют два способа редактирования:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
С использованием одного поля формы. В этом
случае можно разместить на форме поле, связанное непосредственно с редактируемым
реквизитом. Тогда все редактирование будет выполняться именно в этом поле.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
С использованием нескольких полей. При этом
можно разместить на форме поля, связанные со свойствами реквизита. В этом
случае разработчик может сам реализовывать необходимую логику взаимодействия
варианта стандартного периода и значений дат.</p>

<a name="_ref480457964"></a><a id="TI000001919" class="bookmark" name="issogl3_7.7.4.7_поле_табличного_документа"><h4>7.7.4.7. Поле табличного документа</h4></a>

<p class="MsoNormal">Для расширения поля
управляемой формы для табличного документа предоставляются возможности по
специальной настройке его представления:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Отображение выделения</span> –
позволяет управлять способом отображения выделения в табличном документе:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Всегда</span> – выделение
будет отображаться всегда, в том числе и в том случае, если поле табличного
документа не активно. Это значение устанавливается по умолчанию.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">При активности</span> –
выделение будет отображаться только в том случае, если поле табличного
документа активно.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Не отображать</span> –
выделение не будет отображаться никогда.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">При выделении нескольких
ячеек</span> – выделение отображается в том случае, если оно (выделение)
состоит более чем из одной ячейки табличного документа.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">При выделении нескольких
ячеек при активности</span> – выделение будет отображаться в том случае,
если выделение состоит более чем из одной ячейки и поле табличного документа
активно.</p>

<p class="Indentlist">Поведение клавиш
управления курсором в расширения поля управляемой формы для табличного
документа зависит от значения свойства <span class="Interface">Отображение выделения</span>. Когда данное свойство установлено
в значение <span class="Interface">Не показывать</span>, то клавиши управления курсором выполняют
функцию прокрутки табличного документа в направлении стрелок. Когда свойство
установлено в одно из значений <span class="Interface">При выделении нескольких ...</span>, то при нажатой клавише <span class="Interface">Shift</span> клавиши
управления курсором изменяют размер выделения, а без нажатой клавиши <span class="Interface">Shift</span> выполняют
прокрутку табличного документа в направлении стрелок (без снятия выделения
области).</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Вертикальная</span>/<span class="Interface">Горизонтальная полоса
прокрутки</span> – позволяет управлять наличием полос прокрутки у
табличного документа:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Не использовать</span> –
полосы прокрутки не будут использоваться.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Использовать всегда</span> –
полосы прокрутки всегда присутствуют в табличном документе.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Использовать автоматически</span> –
полосы прокрутки используются в табличном документе только тогда, когда содержимое
табличного документа по соответствующему измерению не помещается в видимой
области. Это значение устанавливается по умолчанию.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Тип курсоров</span> –
позволяет управлять видом курсора мыши, который находится над табличным
документом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Специальные</span> – курсор
мыши изменяется в зависимости от того, над какой областью табличного документа
курсор находится. Это значение устанавливается по умолчанию.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Обычные</span> – курсор
мыши всегда имеет вид стандартного курсора («стрелочка»).</p>

<a name="_ref419713205"></a><a id="TI000000417" class="bookmark" name="issogl2_7.7.5_декорация"><h3>7.7.5. Декорация</h3></a>

<p class="MsoNormalCxSpFirst">Представляет
собой оформительский элемент формы. Декорация не связана с данными (реквизитами
формы). Декорация может представлять собой надпись или картинку.</p>

<p class="MsoNormalCxSpLast">Текст,
отображаемый декорацией вида <span class="Interface">Текст</span>, может динамически переноситься (при сжатии или
растяжении формы) при одновременном выполнении следующих условий:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Текст содержит несколько слов, разделенных
пробелами;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значение свойства декорации <span class="Interface">Растягивать по
горизонтали</span> в явном виде не установлено в значение <span class="Interface">Нет</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Значение свойство декорации <span class="Interface">Высота</span>
установлено в значение 0;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Значение свойства декорации <span class="Interface">Растягивать по
вертикали</span> в явном виде не установлено в значение <span class="Interface">Нет</span>.</p>

<p class="MsoNormal">Декорация вида <span class="Interface">Картинка</span> будет
автоматически определять свой размер (по ширине и высоте) по установленной
картинке, если соответствующее свойство декорации (<span class="Interface">Ширина</span> или <span class="Interface">Высота</span>,
соответственно) установлено в значение 0.</p>

<p class="Note"><span class="Note">Совет.</span>
Рекомендуется использовать декорацию только для неизменяемых текстовых
пояснений. Текст, который может изменяться из встроенного языка, рекомендуется отображать
полем вида <span class="Interface">Поле надписи</span>.</p>

<a name="_ref322360894"></a><a name="_ref322360893"></a><a name="_ref273971653"></a><a name="_ref416780511"></a><a name="_ref416780510"></a><a id="TI000000418" class="bookmark" name="issogl2_7.7.6_таблица"><h3>7.7.6. Таблица</h3></a>

<p class="MsoNormalCxSpFirst">Элемент
формы <span class="Interface">Таблица</span>
предназначен для визуализации табличных данных. Это может быть динамический
список, табличная часть, список значений и т. д.</p>

<p class="MsoNormalCxSpMiddle">Положение
командной панели таблицы регулируется свойством <span class="Interface">Положение командной панели</span> элемента
формы. Состав стандартных команд, располагающихся в командной панели таблицы, регулируется
с помощью свойства <span class="Interface">Состав команд</span>. Команды, отключенные при редактировании
данного свойства, становятся недоступными.</p>

<p class="MsoNormalCxSpMiddle">Имеется
возможность группировать колонки с помощью элемента формы <span class="Interface">Группа</span>.
Подробнее об этом см. <a href="#_ref216676981">здесь</a>.</p>

<p class="MsoNormalCxSpMiddle">Свойства <span class="Term">ЦветРамки</span> и <span class="Term">Рамка</span>,
заданные для колонки таблицы, не оказывают влияния на отображение колонки.</p>

<p class="MsoNormalCxSpMiddle">Для
реквизита формы типа <span class="Term">СписокЗначений</span>
существует выбор, каким образом реквизит будет отображаться. Если выбирается
вариант <span class="Interface">Таблица</span>,
то список значений будет выглядеть как таблица с доступными колонками: <span class="Interface">Значение</span>, <span class="Interface">Представление</span>, <span class="Interface">Пометка</span> и <span class="Interface">Картинка</span>. При этом следует помнить об особенности отображения
значений в колонке <span class="Interface">Значение</span>. В
этой колонке будет отображено значение колонки <span class="Interface">Представление</span>. Само значение при этом остается
неизменным. Если будет выбран тип <span class="Interface">Поле ввода</span>, то для редактирования списка будет открыто
специальное окно.</p>

<p class="MsoNormalCxSpMiddle">Также для
таблицы, связанной с реквизитом типа <span class="Term">СписокЗначений</span>,
предоставляется стандартный набор команд редактирования, включая команды
установки и снятия пометок.</p>

<p class="MsoNormalCxSpMiddle">Если
таблица связана с реквизитом типа <span class="Term">ДинамическийСписок</span>,
у которого в настройках списка (свойство реквизита формы <span class="Interface">Настройка списка</span>)
задана группировка, то список всегда будет отображаться в режиме <span class="Interface">Дерево</span>
(свойство элемента формы <span class="Interface">Отображение</span>), вне зависимости от того, какой режим
отображения задан разработчиком. Если для табличного поля, связанного с
динамическим списком, установлено свойство <span class="Interface">Только просмотр</span>, то при открытии из
такого списка форм объектов им будет автоматически установлен параметр формы <span class="Term">ТолькоПросмотр</span>.</p>

<p class="MsoNormalCxSpMiddle">Также для
таблицы, связанной с динамическим списком, имеется возможность управлять
обновлением списка при изменении данных (в этом же клиентском приложении) с
помощью свойства <span class="Interface">Обновление при изменении данных</span>. Если свойство установлено
в значение <span class="Interface">Авто</span>, то список будет автоматически обновляться при
любых изменениях отображаемых данных. Если свойство имеет значение <span class="Interface">Не обновлять</span>,
то список не будет выполнять автоматическое обновление и для обновления списка
необходимо явно выполнить команду <span class="Term">Обновить()</span>.
Если для динамического списка задано автоматическое обновление с указанным интервалом
и свойство <span class="Interface">Обновление при изменении данных</span> установлено в значение <span class="Interface">Авто</span>, интервал
отсчитывается от ближайшего изменения данных, а если в значение <span class="Interface">Не обновлять</span> –
от последнего вызова автоматического обновления или выполнения команды <span class="Term">Обновить()</span>.</p>

<p class="MsoNormalCxSpMiddle">Для
таблицы, связанной с основным реквизитом формы типа динамический список,
имеется возможность управлять режимом множественного выбора с помощью
соответствующего параметра формы. Значение параметра формы <span class="Term">МножественныйВыбор</span> будет установлено в
одноименное свойство таблицы. При этом свойство <span class="Interface">Режим выделения</span> будет установлено в
значение <span class="Term">Множественный</span>,
если параметр формы <span class="Term">МножественныйВыбор</span>
имеет значение <span class="Term">Истина</span>.</p>

<p class="MsoNormalCxSpMiddle">При
открытии формы выполняется чтение данных только для видимых таблиц, связанных с
динамическими списками. Для таблиц, которые не видимы при открытии формы,
чтение данных выполняется в момент их (таблиц) отображения пользователю. В
частности, для невидимых таблиц, значение свойства <span class="Term">ТекущаяСтрока</span> будет равно <span class="Term">Неопределено</span>. Эту особенность следует
учитывать при разработке логики формы.</p>

<p class="MsoNormalCxSpMiddle">Для
динамического списка, находящегося в режиме выбора, при добавлении нового
объекта будет выполнена проверка на соответствие добавляемого объекта
установленным критериям отбора, и если новый объект удовлетворяет критериям
отбора, на него будет установлен курсор в таблице, отображающей динамический
список.</p>

<p class="MsoNormalCxSpLast">Если форма
списка плана счетов или справочника с иерархией элементов открывается с
установленными параметрами <span class="Term">РазрешитьВыборКорня</span>,
равным <span class="Term">Истина</span>, и <span class="Term">РежимВыбора</span>, равным <span class="Term">Истина</span>, то для всех таблиц формы, связанных с
основным реквизитом формы (типа <span class="Term">ДинамическийСписок</span>),
будут автоматически изменены значения следующих свойств:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
свойство <span class="Term">ОтображатьКорень</span>
будет установлено в значение <span class="Term">Истина</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
свойство <span class="Term">РазрешитьВыборКорня</span>
будет установлено в значение <span class="Term">Истина</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
свойство <span class="Term">Отображение</span>
будет установлено в значение <span class="Term">Дерево</span>.</p>

<p class="MsoNormalCxSpFirst">Стандартная
картинка строк формируется на основе стандартных полей таблиц, используемых для
определения состояния элемента (<span class="Term">ПометкаУдаления</span>,
<span class="Term">Предопределенный</span> и т. д.).
Если в тексте запроса списка есть поля, псевдонимы которых совпадают с именами
стандартных полей, но в них получаются другие данные – такие поля не будут
использоваться для формирования стандартной картинки.</p>

<p class="MsoNormalCxSpLast">В случае
необходимости подмены стандартной картинки, следует:</p>

<p class="MsoListNumberCxSpFirst">1.  Добавить
в библиотеку картинок требуемую коллекцию картинок;</p>

<p class="MsoListNumberCxSpMiddle">2.  Выбрать
добавленную картинку в свойстве <span class="Term">КартинкаСтрок</span>
таблицы, связанной с динамическим списком.</p>

<p class="MsoListNumberCxSpLast">3.  Добавить
в текст запроса поле, имеющее значение индекса картинки.</p>

<p class="Lang-subheader">Например:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБОР</span>
    <span class="keyword">КОГДА</span> Таблица<span class="operator">.</span>ПометкаУдаления <span class="keyword">ТОГДА</span> <span class="number">2</span>
    <span class="keyword">КОГДА</span> Таблица<span class="operator">.</span>Предопределенный <span class="keyword">ТОГДА</span> <span class="number">1</span>
    <span class="keyword">ИНАЧЕ</span> <span class="number">0</span>
<span class="keyword">КОНЕЦ</span> <span class="keyword">КАК</span> ИндексКартинки</pre>

<p class="MsoListNumber">4. 
Указать добавленное поле в свойстве <span class="Term">ПутьКДаннымКартинкиСтроки</span> таблицы, связанной с
динамическим списком.</p>

<p class="MsoNormal">Картинка строк
будет отображаться у первого (считая слева) видимого поля динамического списка вида
поле ввода или поле надписи. Если в процессе редактирования состава колонок
таблицы произойдет изменение порядка колонок, то картинка также будет
отображаться у той колонки, которая стала крайней левой (с указанного выше
вида). Однако если отключение видимости колонок выполняется с помощью условного
оформления, то поведение системы становится несколько другим: если скрывается
колонка, к которой привязана картинка (или символ иерархии), то картинка (или
символ иерархии) в этой строке отображаться не будет.</p>

<p class="Note"><span class="Note">Примечание.</span>
Если таблица отображает динамический список (см. <a href="#_ref221603703">здесь</a>) и свойство <span class="Interface">Начальное отображение дерева</span> установлено в значение <span class="Interface">Раскрывать все уровни</span>,
то при создании формы на сервере будет получен только список строк, отображаемых
на первом уровне, а затем, при открытии формы, будут получены остальные
отображаемые строки. Причем для каждой отображаемой группы будет выполнен
отдельный запрос к серверу.</p>

<p class="MsoNormalCxSpFirst">При
разработке форм возникают ситуации, когда необходимо в таблице предотвратить
прокрутку некоторых колонок. Например, в табличной части нужно зафиксировать
колонки <span class="Interface">Номер</span>,
<span class="Interface">Номенклатура</span>
и <span class="Interface">Сумма</span>.
При этом колонки <span class="Interface">Номер</span> и <span class="Interface">Номенклатура</span> требуется прижать к левому краю таблицы, а <span class="Interface">Сумма</span> – к
правому.</p>

<p class="MsoNormalCxSpMiddle">Для
выполнения такой операции предназначено свойство <span class="Term">ФиксацияВТаблице</span>.
Данное свойство доступно у поля, размещенного в таблице, и у группы вида <span class="Interface">Группа колонок</span>
(см. <a href="#_ref256161094">здесь</a>). В нашем примере необходимо для колонок <span class="Interface">Номер</span> и <span class="Interface">Номенклатура</span>
установить свойство <span class="Term">ФиксацияВТаблице</span>
в значение <span class="Term">Лево</span>, а для
колонки <span class="Interface">Сумма</span> –
в значение <span class="Term">Право</span>. Колонки
будут прижаты к соответствующему краю таблицы вне зависимости от того, где эти
колонки были расположены в редакторе формы, однако зафиксированные колонки
располагаются в том порядке, в котором они расположены в редакторе формы.</p>

<p class="MsoNormalCxSpMiddle">Если
признак фиксации указан у группы, то прижата будет вся группа (вместе со всеми
подчиненными элементами формы), при этом значение свойства <span class="Term">ФиксацияВТаблице</span> для подчиненных элементов
игнорируется. Если признак фиксации указан у колонки, входящей в группу, для
которой свойство <span class="Term">ФиксацияВТаблице</span>
установлено в значение <span class="Term">Нет</span>,
то колонка будет обрабатываться как отдельная колонка, не входящая в группу.</p>

<p class="MsoNormalCxSpMiddle">Если в
вертикальной группе колонок в некоторой строке ширина колонок превышает ширину
колонок из других строк, то в более узких строка строках последняя колонка группы
растягивается до ширины максимально широкой строки. Растягивание выполняется даже
в том случае, если у этой колонки установлено свойство <span class="Interface">Растягивать по
горизонтали</span> в значение <span class="Term">Ложь</span>.
Если растягивание колонки необходимо избежать, то следует вынести колонку растягиваемую
колонку из группы и расположить отдельно.</p>

<p class="MsoNormalCxSpLast">Свойство <span class="Interface">Поиск при вводе
символов</span> отвечает за то, каким образом система будет обрабатывать набор
символов с клавиатуры, если активным элементом является таблица и в колонку
невозможен непосредственный ввод данных:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Авто</span> – в этом
случае окно поиска открывается для таблицы, связанной с динамическим списком,
для остальных таблиц окно поиска не открывается.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Использовать</span> –
окно поиска открывается для любых типов реквизитов, связанных с таблицей, если
у колонки, в которой осуществляется ввод символов, свойство <span class="Interface">Режим редактирования</span>
установлено в значение <span class="Interface">Вход</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Не использовать</span> –
окно поиска не открывается для любых типов реквизитов, связанных с таблицей.</p>

<p class="MsoNormal">Для управления
высотой таблицы управляемой формы предназначено свойство <span class="Term">ВариантУправленияВысотойЭлемента</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">В строках формы</span> –
в этом случае высота таблицы задается с помощью свойства <span class="Term">Высота</span> таблицы управляемой формы. Если
значение этого свойства равно 0, то высота таблицы будет равна 16 единицам для
таблицы, отображающей динамический список и 8 единицам – во всех остальных
случаях. Для ограничения максимальной высоты таблицы используются свойства <span class="Term">АвтоМаксимальнаяВысота</span> и <span class="Term">МаксимальнаяВысота</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">В строках таблицы</span> –
в этом случае высота таблицы задается с помощью свойства <span class="Term">ВысотаВСтрокахТаблицы</span> таблицы управляемой
формы. Если значение этого свойства равно 0, то высота таблицы будет равна 15
строкам для таблицы, отображающей динамический список и 7 строкам – во
всех остальных случаях. Для ограничения максимальной высоты таблицы
используются свойства <span class="Term">АвтоМаксимальнаяВысотаВСтрокахТаблицы</span>
и <span class="Term">МаксимальнаяВысотаВСтрокахТаблицы</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">По содержимому</span> –
если таблица связана с динамическим списком, то высота таблицы задается
значением свойства <span class="Term">ВысотаВСтрокахТаблицы</span>.
Если значение этого свойства равно 0, то высота таблицы определяется значением
свойства <span class="Term">Высота</span>.</p>

<p class="IndentlistCxSpFirst">Если
таблица не связана с динамическим списком, то полностью отображаются все строки
таблицы, но не менее 3.</p>

<p class="IndentlistCxSpMiddle">Если
свойство <span class="Term">АвтоМаксимальнаяВысотаВСтрокахТаблицы</span>
установлено в значение <span class="Term">Истина</span>,
то таблица отображает не более 50 строк. Если свойство <span class="Term">АвтоМаксимальнаяВысотаВСтрокахТаблицы</span> установлено
в значение <span class="Term">Ложь</span>, то количество
отображаемых строк в таблице ограничено значением свойства <span class="Term">МаксимальнаяВысотаВСтрокахТаблицы</span>. Если
значение свойства <span class="Term">МаксимальнаяВысотаВСтрокахТаблицы</span>
равно 0, то таблица не имеет ограничений по количеству отображаемых строк.</p>

<p class="IndentlistCxSpLast">При
установке такого варианта управления высотой таблицы, системой игнорируется
значение свойства <span class="Term">РастягиватьПоВертикали</span>
и считается, что у данного свойства установлено значение <span class="Term">Ложь</span>.</p>

<a name="_ref367965084"></a><a name="_ref367965083"></a><a name="_ref374441214"></a><a name="_ref374441213"></a><a id="TI000000419" class="bookmark" name="issogl2_7.7.7_кнопка"><h3>7.7.7. Кнопка</h3></a>

<p class="MsoNormalCxSpFirst">На форме
команда отображается элементом формы <span class="Interface">Кнопка</span>. Кнопка может отображаться в командной панели и
просто на форме. В случае своего отображения на форме кнопка может также иметь
вид гиперссылки (для этого нужно изменить свойство <span class="Interface">Вид</span>).</p>

<p class="MsoNormalCxSpMiddle">Команда,
к которой будет происходить обращение по нажатию кнопки, устанавливается с
помощью свойства <span class="Interface">Команда</span>. Кнопка будет отображаться запрещенной, если у команды,
связанной с этой кнопкой, свойство <span class="Interface">Изменяет сохраняемые данные</span> имеет значение <span class="Term">Истина</span>, а свойство <span class="Term">ТолькоПросмотр</span> установлено в значение <span class="Term">Истина</span> для этой кнопки или формы в целом.</p>

<p class="MsoNormalCxSpMiddle">Установленное
свойство <span class="Interface">Только
во &quot;Все действия&quot;</span> означает, что по умолчанию кнопка будет
находиться в меню <span class="Interface">Еще</span> (<span class="Interface">Все действия</span>), однако пользователь может сделать кнопку
доступной на панели, воспользовавшись специальным редактором.</p>

<p class="MsoNormalCxSpMiddle">Для
кнопки, связанной с командой <span class="Interface">Создать по параметру</span>, имеется возможность указать тип
документа, который будет создаваться при нажатии на кнопку. Это можно сделать с
помощью свойства кнопки <span class="Interface">Параметр</span>.</p>

<p class="MsoNormalCxSpLast">Если для
команды формы не задано свойство <span class="Interface">Подсказка</span>, то для кнопки, связанной с этой командой, не
будет отображаться всплывающая подсказка. Если
заголовок кнопки не может быть целиком отображен на кнопке, то полный текст
заголовка отображается во всплывающей подсказке первой (или единственной, если
для кнопки не задана подсказка) строкой.</p>

<p class="Regularbeforepicture">Кнопка
может иметь несколько режимов отображения (свойство <span class="Interface">Отображение</span>).
Если выбрано отображение <span class="Interface">Картинка и текст</span>, то картинка, расположенная на кнопке,
может располагаться слева или справо относительно текста кнопки. Для управления
этим расположением предназначено свойство кнопки <span class="Interface">Положение картинки</span> (доступно для
кнопки формы и кнопки командной панели). Если данное свойство установлено в
значение <span class="Interface">Авто</span>,
то картинка будет рсполагаться с левой стороны текста.</p>

<p class="Picture"><IMG src="_img/img00285.gif?_=1496848987" WIDTH="204" ALT HEIGHT="40"></p>

<p class="MsoCaption">Рис. 286. Положение картинки кнопки</p>

<p class="MsoNormal">В том случае, если
для кнопки выбрано отображение <span class="Interface">Картинка</span>, картинка всегда будет располагаться по центру
кнопки.</p>

<p class="Regularbeforepicture">Кнопка
управляемой формы может отображаться различными способами. Для этого предназначено
свойство кнопки <span class="Interface">Фигура кнопки</span>.</p>

<p class="Picture"><IMG src="_img/img00286.gif?_=1496848987" WIDTH="196" ALT HEIGHT="38"></p>

<p class="MsoCaption"><a name="_ref436237750">Рис. </a>287. Фигура кнопки</p>

<p class="MsoNormal">Данное свойство
может принимать следующие значения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Авто</span> – в этом
случае для стандартных команд используется значение, указанное для команды. Для
остальных команд значение трактуется как <span class="Interface">Обычная</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Обычная</span>, <span class="Interface">Овал</span> – форма
кнопки соответствует значению (<a href="#_ref436237750">рис.287</a>).</p>

<p class="MsoNormal">Задавать фигуру
кнопки можно для кнопок, расположенных на форме и в командной панели. Свойство
не действует на команды, расположенные в подменю.</p>

<p class="Regularbeforepicture">Для
кнопки, отображаемой на форме, имеется возможность управлять отображением
фигуры этой кнопки. Это осуществляется с помощью свойства <span class="Interface">Отображение фигуры</span>.</p>

<p class="Picture"><IMG src="_img/img00287.gif?_=1496848987" WIDTH="541" ALT HEIGHT="103"></p>

<p class="MsoCaption"><a name="_ref436232886">Рис. </a>288. Отображение
фигуры кнопки</p>

<p class="MsoNormal">Для отображения
фигуры кнопки можно указать несколько различных способов:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Авто</span> – в этом
случае для стандартных кнопок используется вариант отображения, заданный для
команды. В остальных случаях трактуется как <span class="Interface">Всегда</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Всегда</span> – в
этом случае фигура кнопки отображается всегда (первая строка в примере на <a href="#_ref436232886">рис.288</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">При активности</span> –
в этом случае в обычном состоянии кнопка отображается без фона и рамки (вторая
строка в примере на <a href="#_ref436232886">рис.
288</a>). В том случае, если курсор мыши указывает на кнопку,
на ней установлен фокус ввода или у кнопки установлено свойство <span class="Term">Пометка</span> – отображается стандартная кнопка
с заданными цветами рамки и фона.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Нет</span> – в этом
случае в обычном состоянии кнопка отображается без фона и рамки. При наведении
курсора у текста появляется подчеркивание (третья строка в примере на <a href="#_ref436232886">рис.
288</a>) и изменяется курсор мыши. Свойство <span class="Term">Пометка</span> никак не отображается в этом варианте
отображения.</p>

<p class="MsoNormalCxSpFirst">Свойство
определяет отображение для кнопок, расположеных на форме и в командных панелях.
Свойство <span class="Interface">Отображение
фигуры</span> не действует на команды, расположенные в подменю.</p>

<p class="MsoNormalCxSpLast">Еще одним
способом управления внешним видом кнопки является задание свойства <span class="Interface">Вид</span>. В
зависимости от того, где расположена кнопка, это свойство может принимать
значения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Обычная кнопка</span>, <span class="Interface">Кнопка командной панели</span> –
в этом случае кнопка отображается обычным образом;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Гиперссылка</span>, <span class="Interface">Гиперссылка командной
панели</span> – в этом случае кнопка отображается в виде гиперссылки.</p>

<p class="MsoNormal">При перетаскивании
кнопки между формой и командной панелью, значение свойства <span class="Interface">Вид</span>
сохраняется, адаптируясь к расположению команды.</p>

<a name="_ref350941832"></a><a name="_ref350941831"></a><a name="_ref256161094"></a><span class="Hidden"></span><a name="_ref419713226"></a><a id="TI000000420" class="bookmark" name="issogl2_7.7.8_группа"><h3>7.7.8. Группа</h3></a>

<p class="MsoNormalCxSpFirst">При
разработке формы имеется возможность различного объединения элементов. Можно
объединять поля, страницы формы, команды, колонки.</p>

<p class="MsoNormalCxSpMiddle">На форме
могут находиться группы элементов управления. Это могут быть группы полей,
страницы, группы команд. Также для элементов типа <span class="Interface">Таблица</span> можно
создавать группы колонок.</p>

<p class="MsoNormalCxSpLast">В редакторе
можно создать группы следующих видов:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Обычная группа</span> –
предназначена для объединения элементов формы. Такая группа может обладать различными
вариантами обрамления:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Нет</span> – группа
специально никак не выделяется;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Слабое выделение</span> –
заголовок группы отображается большим шрифтом зеленого цвета;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Interface">Обычное выделение</span> –
заголовок группы отображается большим шрифтом зеленого
цвета. Вокруг элементов группы (с каждой стороны) формируются отступы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Сильное выделение</span> –
заголовок группы отображается большим шрифтом зеленого цвета. С левой стороны
(на всю высоту группы) формируется полоса зеленого цвета. Снизу формируется
отступ.</p>

<p class="IndentlistCxSpFirst">Если у обычной
группы задан цвет фона, отличный от <span class="Interface">Авто</span>, то у группы со всех сторон появляются внутренние
отступы. Отступ у обычной группы определяется для каждого края (лево, право,
верх, низ), однако данный отступ не применяется, если группа данным краем
касается края формы.</p>

<p class="IndentlistCxSpMiddle">Обычную
группу можно настроить таким образом, что пользователь (в режиме
«1С:Предприятия») сможет сворачивать или разворачивать такую группу. Например,
можно разместить в сворачиваемой группе информацию, которая не важна при регулярной
работе с формой, но иногда может потребоваться для просмотра и анализа.</p>

<p class="IndentlistCxSpMiddle">Поведение
группы (обычная или сворачиваемая) определяется свойством <span class="Interface">Поведение</span>.
Начальное состояние группы определяется флажком <span class="Interface">Свернута</span>. Группа не может быть
свернута или развернута, если у нее не отображается заголовок или заголовок не
заполнен. Прикладной разработчик не может определить текущее состояние группы
из встроенного языка. Также он не может принудительно свернуть или развернуть
группу.</p>

<p class="IndentlistCxSpLast">Пользователь
может управлять состоянием группы (свернутая или развернутая) с помощью
специальной картинки или гиперссылки. Для задания элемента, управляющего
состоянием, служит свойство <span class="Interface">Отображение управления</span>. Также можно задать заголовок
группы (свойство <span class="Interface">Свернутый заголовок</span>), который будет отображаться в том
случае, если группа находится в свернутом состоянии. Если свойство <span class="Interface">Свернутый заголовок</span>
не заполнено, то в свернутом состоянии будет отображаться обычный заголовок
группы.</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Командная панель</span> –
элемент формы, предназначенный для размещения кнопок и групп. Свойство командной
панели <span class="Interface">Источник
команд</span> определяет элемент формы (<span class="Interface">Форма</span>, а также элементы формы типа <span class="Interface">Таблица</span> и поля
вида <span class="Interface">Поле
табличного документа</span> или <span class="Interface">Поле графической схемы</span>), который предоставит «свои»
команды для отображения в командной панели. Состав команд для отображения в
командной панели регулируется свойством <span class="Interface">Состав</span> команд элемента формы, являющегося источником
команд.</p>

<p class="IndentlistCxSpFirst">В том
случае, когда в командной панели у всех кнопок свойство <span class="Term">ТолькоВоВсехДействиях</span> имеет значение <span class="Term">Ложь</span> и не все кнопки могут быть размещены на командной
панели (по ширине), в командной панели автоматически формируется кнопка <span class="Interface">Еще</span> (с
подменю). В это подменю размещаются все команды командной панели.</p>

<p class="IndentlistCxSpLast">Группа,
добавляемая в командную панель, может быть одного из следующих видов:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Interface">Подменю</span> – группа,
которая позволяет делать выпадающие меню.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Interface">Группа кнопок</span> –
позволяет создать группу кнопок, которые будут обладать следующими свойствами:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
группа кнопок отделяется разделителями слева и
справа;</p>

<p class="MsoListBullet3CxSpMiddle">&#9679; 
каждая группа кнопок может обладать собственным
источником команд;</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
имеется возможность задать плотность
расположения кнопок в группе: компактно или обычно (свойство <span class="Interface">Отображение</span>).
Значение свойства <span class="Interface">Авто</span> трактуется как <span class="Interface">Обычное</span>.</p>

<p class="Picture"><IMG src="_img/img00288.gif?_=1496848987" WIDTH="176" ALT HEIGHT="204"></p>

<p class="MsoCaption">Рис. 289. Расположение кнопок группы</p>

<p class="Indentlist3">Свойство <span class="Interface">Отображение</span>
действует только на те кнопки командной панели, для которых свойство <span class="Interface">Отображение фигуры</span>
трактуется как <span class="Interface">Всегда</span> (см. <a href="#_ref374441213">здесь</a>).</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Страницы</span> – данная
группа предназначена для организации панели с закладками. Закладки могут
располагаться как по вертикали, так и по горизонтали. Для того чтобы добавить
на такую панель страницы, необходимо добавить столько вложенных групп, сколько
страниц должно быть у панели. Внутри группы вида <span class="Interface">Страницы</span> могут располагаться только
группы вида <span class="Interface">Страница</span> – группы специального вида, которая предназначена
для формирования страниц панели. Данная группа может содержать другие вложенные
элементы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Группа колонок</span> –
позволяет объединять колонки в таблице. С помощью группы этого вида можно
изменять правило группировки колонок (вертикальная или горизонтальная группировка).</p>

<p class="MsoNormalCxSpFirst">Группы
могут быть вложенными.</p>

<p class="MsoNormalCxSpMiddle">Элементы
формы можно перемещать между группами. При этом автоматически определяется
допустимость такого переноса. В случае если перенос требует изменения
каких-либо свойств элемента (например, <span class="Interface">Вид</span>), изменение осуществляется автоматически. Если в результате
изменились требования к подчиненным элементам, они либо автоматически изменяются,
либо удаляются.</p>

<p class="MsoNormalCxSpMiddle">Свойство <span class="Interface">Только просмотр</span>
группы влияет на все элементы, подчиненные группе.</p>

<p class="MsoNormalCxSpMiddle">Свойство
группы <span class="Interface">Разрешить
изменение состава</span> управляет возможностью изменять состав группы в
процессе настройки формы пользователем. Если свойство выключено, то
пользователь не может изменять состав и менять порядок элементов внутри группы.
Однако свойство не влияет на возможность пользователя изменить видимость
элементов, входящих в состав группы.</p>

<p class="MsoNormalCxSpMiddle">Если у
группы указано свойство <span class="Interface">Данные заголовка</span>, то эти данные будут автоматически
отображаться в заголовке группы. Если у группы установлено свойство <span class="Interface">Заголовок</span>, то данные<span class="Interface"> заголовка</span>
отображаются в скобках после заголовка: <span class="Interface">Заголовок (Данные заголовка)</span>.</p>

<p class="MsoNormalCxSpLast">Любая
группа кнопок (командная панель, подменю, группа кнопок, контекстное меню)
заполняется по одинаковым правилам. Кнопки будут отображены в следующем
порядке:</p>

<p class="MsoListNumberCxSpFirst">1.  Кнопки,
предоставляемые источником команд, с которым связана данная группа.</p>

<p class="MsoListNumberCxSpMiddle">2. 
Кнопки командного интерфейса, если источник
команд подразумевает его включение.</p>

<p class="MsoListNumberCxSpMiddle">3. 
Пользовательские команды, добавленные в данную
группу.</p>

<p class="MsoListNumberCxSpMiddle">4. 
Команды меню <span class="Interface">Еще</span> (<span class="Interface">Все действия</span>) (только для командной
панели).</p>

<p class="MsoListNumberCxSpLast">5. 
Последней будет размещена <span class="Interface">Справка</span> (в том
случае если она была предоставлена источником команд).</p>

<p class="MsoNormal">Если
вышеприведенный автоматический порядок расположения кнопок в группе не
устраивает, то можно воспользоваться следующими возможностями:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Снять флажок <span class="Interface">Автозаполнение</span> для командной панели
формы, контекстного меню или командной панели элемента и добавить нужные
команды (в нужном порядке) вручную.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Отключить источник команд командной панели,
затем добавить нужные команды (в нужном порядке) вручную, затем добавить группу
типа <span class="Interface">Группа
кнопок</span> и установить для добавленной группы источник команд.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Можно вручную поместить кнопку, связанную со
стандартной командой источника команд, в необходимое место командной панели. В
этом случае соответствующая команда не будет использоваться при автоматическом
размещении команд источника в текущей командной панели, а останется на том
месте, куда ее разместили вручную.</p>

<a name="_ref198979081"></a><span class="Hidden"></span><a name="_ref377996546"></a><a id="TI000001338" class="bookmark" name="issogl2_7.7.9_дополнение_элемента_формы"><h3>7.7.9. Дополнение элемента формы</h3></a>

<p class="MsoNormal">Дополнение
элемента формы предназначено для отображения дополнительных свойств элемента
формы (дополнения элемента формы) и управления этими элементами. Существуют
следующие дополнения:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Отображение строки поиска. Позволяет настроить
отображение строки поиска (см. <a href="#_ref377645922">здесь</a>).</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Состояние просмотра. Позволяет настроить
отображение перечня примененных поисковых запросов (см. <a href="#_ref377645922">здесь</a>). Не может располагаться в командной панели.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Управление поиском. Позволяет настроить внешний
вид кнопки управления поиском (см. <a href="#_ref377645922">здесь</a>).</p>

<a name="_ref416782882"></a><a name="_ref416782881"></a><a id="TI000000421" class="bookmark" name="issogl2_7.7.10_специальные_командные_панели"><h3>7.7.10. Специальные командные панели</h3></a>

<p class="MsoNormal">Кроме создания
собственных командных панелей (элемент формы <span class="Interface">Группа</span> вида <span class="Interface">Командная панель</span>)
редактор форм предоставляет возможность работать со специализированными
командными панелями:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Командная панель формы</span> –
система предоставляет командную панель формы. Ее видимостью, положением и
наполнением можно управлять. Видимость и положение панели управляются с помощью
свойства командной панели <span class="Interface">Выравнивание</span>, а содержимое управляется свойством <span class="Interface">Автозаполнение</span>.
Кроме стандартных команд, которые могут быть добавлены на командную панель
формы, туда автоматически добавляются команды из раздела <span class="Interface">Командная панель формы</span>
глобального командного интерфейса.</p>

<p class="Indentlist">Если основным
реквизитом формы является динамический список и у командной панели формы
установлено свойство <span class="Interface">Автозаполнение</span>, то в нее автоматически будут добавлены
команды, предоставляемые этим динамическим списком. Если на форме также
присутствует элемент формы, отображающий дерево, то командная панель формы
будет дополнена командами, которые предоставлены реквизитом, связанным с таким
элементом.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Командная панель таблицы</span> –
системой автоматически предоставляется командная панель для элемента формы вида
<span class="Interface">Таблица</span>.
Ее видимостью, положением и наполнением можно управлять. Видимость и положение
панели управляются с помощью свойства командной панели <span class="Interface">Выравнивание</span>, а
содержимое управляется свойством <span class="Interface">Автозаполнение</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Контекстное меню элемента</span> –
имеется возможность модифицировать стандартное контекстное меню элемента формы.
Для этого контекстное меню необходимо отобразить в дереве элементов формы с
помощью команды контекстного меню <span class="Interface">Показать</span> <span class="Interface">контекстное меню</span> элемента формы.</p>

<p class="Indentlist">Если в контекстное
меню элемента добавить элемент вида <span class="Interface">Группа</span> и указать у этой группы в качестве источника
команд другой элемент формы, то добавленная группа будет заполнена командами (в
режиме 1С:Предприятие) по тем же правилам, что и контекстное меню элемента,
выбранного в качестве источника команд.</p>

<p class="MsoNormalCxSpFirst">Во все
вышеперечисленные командные панели можно добавлять собственные команды, которые
создаются с помощью редактора команд.</p>

<p class="MsoNormalCxSpLast">Если есть
необходимость поместить команды, расположенные в командной панели формы
(см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 3. интерфейс приложения.htm?_=1496848987#_ref229132814">здесь</a>), в какую-либо командную панель, то необходимо
выполнить следующее:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Разместить в командной панели элемент <span class="Interface">Группа – Командная
панель</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Выбрать у этой группы в качестве источника
команд <span class="Interface">Глобальные
команды командной панели формы</span>.</p>

<p class="MsoNormalCxSpFirst">Если в
командной панели или контекстном меню, содержащем группу с источником команд <span class="Interface">Глобальные команды
командной панели формы</span>, есть группа, для которой установлен источник
команд <span class="Interface">Форма</span>,
то при заполнении этой группы команды, относящиеся к командному интерфейсу
формы, не добавляются.</p>

<p class="MsoNormalCxSpMiddle">При
установке (из встроенного языка) в качестве текущего элемента кнопки какой-либо
командной панели, следует помнить, что фокус будет установлен на первую кнопку
командной панели, а не на ту кнопку, которую используют в операции установки текущего
элемента: <span class="Term">ЭтотОбъект.ТекущийЭлемент =
Элементы.КнопкаКоманднойПанели;</span>. Также следует помнить, что
свойство кнопки <span class="Term">АктивизироватьПоУмолчанию</span>
игнорируется при размещении кнопки в командной панели. Если пользователь
перемещает кнопку из командной панели на форму, то данное свойство начинает
использоваться.</p>

<p class="MsoNormalCxSpLast">Если в процессе контекстного серверного вызова в форме
выполнены следующие изменения: изменена структура данных; добавлены или удалены
команды формы; добавлены, удалены или перемещены элементы формы; изменены параметры
таблиц управляемой формы, то будет выполнено перезаполнение стандартных
командных панелей и групп. При этом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
все пользовательские команды, вставленные в
такие панели и группы, будут удалены;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
измененные параметры стандартных команд будут
установлены в значения по умолчанию.</p>

<a name="_ref216594487"></a><a name="_ref366671376"></a><a name="_ref366671375"></a><a name="_ref310422530"></a><a name="_ref310422529"></a><a name="_ref454533564"></a><a name="_ref454533563"></a><a name="_ref428274665"></a><a name="_ref428274664"></a><a id="TI000000397" class="bookmark" name="issogl2_7.7.11_условное_оформление_формы"><h3>7.7.11. Условное оформление формы</h3></a>

<p class="MsoNormalCxSpFirst">Форма позволяет устанавливать условное
оформление элементов формы. Настройка условного оформления выполняется аналогично
настройке условного оформления системы компоновки данных. Вызов настройки
условного оформления доступен из панели свойств корневого элемента формы. Не
рекомендуется использовать условное оформление формы для оформления динамических
списков, если такое оформление можно получить за счет настройки условного
оформления самого списка.</p>

<p class="MsoNormalCxSpLast">Доступны следующие виды условного
оформления:</p>

<p class="MsoListBullet">&#9679; 
<span class="Bold">Цвет фона</span> –
позволяет изменять цвет фона и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: поле ввода, поле текстового
документа, таблица, обычная кнопка.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле надписи, поле ввода, поле
переключателя, поле картинки.</p>

<p class="MsoListBullet">&#9679; 
<span class="Bold">Цвет текста</span> –
позволяет изменять цвет текста и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: поле надписи, поле ввода, поле
текстового документа, поле картинки, поле переключателя, таблица, обычная
кнопка, гиперссылка, декорация-текст, декорация-картинка.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле надписи, поле ввода, поле
переключателя.</p>

<p class="MsoListBullet">&#9679; 
<span class="Bold">Шрифт</span> – позволяет
изменять шрифт и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: поле надписи, поле ввода, поле
текстового документа, поле картинки, поле переключателя, поле календаря, таблица,
обычная кнопка, гиперссылка, декорация-текст, декорация-картинка.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле надписи, поле ввода.</p>

<p class="Note"><span class="Note">Примечание.</span> Изменение шрифта
элемента формы, выполненное с помощью условного оформления, не учитывается при
определении размера элементов.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Выделять отрицательные</span> –
позволяет задать выделение отрицательных значений. Применяется для следующих
элементов формы: поле надписи, поле ввода и поля таблицы: поле надписи, поле
ввода.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Горизонтальное положение</span> –
задает горизонтальное положение значения и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: поле надписи, поле ввода, декорация-текст.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле надписи, поле ввода.</p>

<p class="MsoListBullet">&#9679; 
<span class="Bold">Отметка незаполненного</span> –
позволяет задать отметку незаполненного значения и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: поле ввода, таблица.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле ввода.</p>

<p class="Note"><span class="Note">Совет.</span> Если управление свойством <span class="Interface">Отметка незаполненного</span> выполняется с помощью условного
оформления, то рекомендуется для оформляемого поля установить свойство <span class="Interface">Автоотметка незаполненного</span> в значение <span class="Term">Нет</span>.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Текст</span> –
используется для задания текста и применяется для полей таблицы: поле надписи,
поле ввода.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Формат</span> – позволяет
изменить формат вывода значения и применяется для:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Элементов формы: группа вида <span class="Interface">Страница</span>, группа вида <span class="Interface">Обычная группа</span>.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полей таблицы: поле надписи, поле ввода.</p>

<p class="MsoListBullet">&#9679; 
<span class="Bold">Видимость</span> – используется только для отключения отображения полей
таблицы: поле надписи, поле ввода, поле переключателя, поле картинки. Место
ячеек с отключенным отображением занимается за счет изменения размера соседних
ячеек. Алгоритм растягивания ячеек может различаться в различных клиентских
приложениях.</p>

<p class="IndentlistCxSpFirst">Не рекомендуется
использовать условное оформление для скрытия в таблице строк целиком.
Использование условного оформления для скрытия строк может негативно влиять на
производительность и приводить к некорректному отображению содержимого таблицы.</p>

<p class="IndentlistCxSpLast">При
управлении видимостью на мобильной платформе следует помнить о следующей
особенности: в том случае, когда видимость поля таблицы зависит от данных
текущей строки, то при отсутствии текущей строки (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 25. разработка решений для мобильной платформы.htm?_=1496848987#_ref423086378">здесь</a>) отображение заголовка колонок может не
соответствовать ни одной видимой строке таблицы. Заголовки станут
соответствовать текущей строке только при появлении текущей строки в таблице,
для которой задано условное оформление. При использовании условного оформления,
зависящего от данных текущей строки, на мобильной платформе не рекомендуется
отображать заголовки такой таблицы.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">Доступность</span> –
используется только для отключения доступности полей таблицы: поле надписи, поле
ввода, поле переключателя, поле картинки.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Bold">Только просмотр</span> –
используется только для включения режима <span class="Interface">Только просмотр</span> для полей таблицы: поле надписи, поле
ввода, поле переключателя, поле картинки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">Отображать</span> –
используется только для отключения видимости значений полей таблицы: поле надписи,
поле ввода, поле переключателя, поле картинки.</p>

<p class="Note"><span class="Note">Примечание.</span> Для условного
оформления используется текущая дата компьютера, скорректированная с учетом
часового пояса сеанса «1С:Предприятия». Подробнее про часовые пояса
см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref224451032">здесь</a>.</p>

<p class="MsoNormalCxSpFirst">Если с помощью условного оформления
оформляется колонка таблицы формы, а в условии есть поле реквизита,
отображаемого оформляемой таблицей, то при вычислении условия используются
текущие данные той таблицы, к которой относится оформляемая колонка. Если
оформляемое поле не относится к таблице, то для вычисления условия используются
текущие данные первой (по порядку размещения в редакторе формы) таблицы формы.</p>

<p class="MsoNormalCxSpMiddle">Условное оформление позволяет задавать
некоторые виды оформления элементов формы в зависимости от значений реквизитов
формы, при этом оформление формы будет динамическим, т. е. будет
учитывать изменение данных формы. Для изменения оформления формы не требуется
никаких специальных действий. Если для условного оформления формы используются
поля динамического списка, то для этих полей следует установить свойство <span class="Interface">Использовать всегда</span>.</p>

<p class="MsoNormalCxSpMiddle">Рассмотрим пример условного оформления.</p>

<p class="MsoNormalCxSpMiddle">Допустим, нам необходимо в документе <span class="Interface">Расход товара</span> выделить те строки табличной части, в
которых количество менее 10 штук.</p>

<p class="MsoNormalCxSpLast">Для этого нужно в условном оформлении формы
задать следующие условия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Вид условного оформления – цвет текста. В
качестве значения цвета выберем <span class="Interface">Особый текст</span> из стиля.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
В качестве условия выберем следующее выражение: <span class="Interface">Объект.Товары.Количество Меньше &quot;10&quot;</span>. В этом
выражении <span class="Interface">Объект</span> –
основной реквизит формы, <span class="Interface">Товары</span> –
табличная часть, <span class="Interface">Количество</span> –
реквизит табличной части.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В качестве оформляемых полей выберем всю
табличную часть <span class="Interface">Товары</span>.</p>

<p class="Picture"><IMG src="_img/img00289.gif?_=1496848987" WIDTH="495" ALT HEIGHT="209"></p>

<p class="MsoCaption">Рис. 290. Настройка условного
оформления</p>

<p class="Regularbeforepicture">Результат работы условного оформления можно
увидеть на <a href="#_ref226292376">рис.
291</a>.</p>

<p class="Picture"><IMG src="_img/img00290.gif?_=1496848987" WIDTH="800" ALT HEIGHT="381"></p>

<p class="MsoCaption"><a name="_ref226292376">Рис. </a>291. Результат условного оформления</p>

<p class="MsoNormalCxSpFirst">Таким образом, цвет шрифта первой строки
табличной части стал красным, т. к. количество товара в этой строке
меньше 10.</p>

<p class="MsoNormalCxSpMiddle">Однако выделять особым цветом всю строку не
всегда нужно, а нужно выделять непосредственно ячейку табличной части с количеством.</p>

<p class="MsoNormalCxSpLast">Для этого изменим заданное условное
оформление: в качестве оформляемых полей выберем не всю табличную часть <span class="Interface">Товары</span>, а конкретное поле: <span class="Interface">Количество</span>.</p>

<p class="Regularbeforepicture">В этом случае будет выделено только одно
поле:</p>

<p class="Picture"><IMG src="_img/img00291.gif?_=1496848987" WIDTH="800" ALT HEIGHT="379"></p>

<p class="MsoCaption">Рис. 292. Оформление одного
поля табличной части</p>

<p class="MsoNormal">Также следует отметить возможность
использовать значения колонок, не связанных с данными информационной базы, в
выражениях условий.</p>

<a name="_ref370741234"></a><a name="_ref370741233"></a><a id="TI000000422" class="bookmark" name="issogl2_7.7.12_особенности_поведения_элементов_формы"><h3>7.7.12. Особенности поведения элементов формы</h3></a>

<p class="MsoNormalCxSpFirst">Если в заголовках полей или декорациях типа <span class="Interface">Надпись</span> используются символы алфавита, не поддерживаемые
шрифтом, который установлен для этих элементов формы, то возможен некорректный
расчет длины отображаемых строк. Как следствие – строки в этих элементах
формы могут выводиться не полностью.</p>

<p class="MsoNormalCxSpLast">При необходимости использования в решениях
шрифтов, отличных от шрифта, определяемого значением <span class="Interface">Авто</span> соответствующего свойства, рекомендуется
ограничиваться следующими шрифтами:</p>

<p class="MsoListBullet">&#9679; 
Стилевые шрифты системы «1С:Предприятие»:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Мелкий шрифт текста,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Обычный шрифт текста,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Крупный шрифт текста,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Очень крупный шрифт текста.</p>

<p class="MsoListBullet">&#9679; 
Векторные шрифты из состава пакета «MS Core
Fonts»:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Andale
Mono,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Arial,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Arial
Black,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Comic
Sans MS,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Courier
New,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Georgia,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Impact,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Times
New Roman,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Trebuchet MS,</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Verdana,</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Webdings.</p>

<p class="MsoNormalCxSpFirst">При использовании других шрифтов не
гарантируется корректное отображение элементов формы в различных клиентских приложениях
или операционных системах.</p>

<p class="MsoNormalCxSpMiddle">Поведение полей формы вида надпись,
картинка, декорация-надпись, декорация-картинка не зависят от установки режима <span class="Term">ТолькоПросмотр</span>
(как для конкретных элементов формы, так и для формы в целом).</p>

<p class="MsoNormalCxSpMiddle">Если у реквизита
формы типа <span class="Term">Число</span>
свойства <span class="Interface">Длина</span> и <span class="Interface">Точность</span> заданы одинаковыми
значениями, то поле ввода позволяет ввести любое число, но при попытке покинуть
поле ввода будет выдано сообщение о некорректном вводе, если введенное значение
не находится в диапазоне от <span class="Interface">-1</span> до <span class="Interface">1</span> (исключая <span class="Interface">-1</span> и <span class="Interface">1</span>).</p>

<p class="MsoNormalCxSpMiddle">Если в обработчике <span class="Term">ПриИзменении</span>
поля, расположенного в таблице формы, выполняются действия, которые ведут к
вызову сервера и перестроению формы, то обработчики событий этой таблицы <span class="Term">ПриОкончанииРедактирования</span>
и <span class="Term">ПередОкончаниемРедактирования</span> не будут
вызваны.</p>

<p class="MsoNormalCxSpMiddle">Табличный документ, расположенный на форме,
по вертикали прокручивается построчно.</p>

<p class="MsoNormalCxSpMiddle">Если для поля ввода
или поля надписи свойство <span class="Interface">Высота</span> установлено в значение большее, чем 1, и свойство
<span class="Interface">Растягивать по вертикали</span> установлено в значение <span class="Interface">Авто</span>, то это
значение будет трактоваться как <span class="Term">Истина</span>, т. е.
указанные элементы формы будут растягиваться по вертикали.</p>

<p class="MsoNormalCxSpLast">Выпадающий
список поля ввода подстраивает свою ширину под ширину отображаемых в нем
элементов. Минимальная ширина выпадающего списка определяется как максимальное
значение из следующих значений:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
фиксированного значения, заданного в платформе;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
значение свойства <span class="Term">ШиринаВыпадающегоСписка</span> расширения поля
управляемой формы для поля ввода.</p>

<p class="MsoNormal">Если
один из элементов, отображаемых в выпадающем списке шире, чем рассчитанная
минимальная ширина списка, то ширина выпадающего списка равняется ширине самого
широкого отображаемого элемента, но не больше:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
размер экрана для тонкого клиента;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
размер формы для веб-клиента.</p>

<p class="MsoNormal">В
том случае, если при открытии формы выполняется динамическое изменение
видимости элемента формы, то в открывшейся форме фокус ввода получит элемент,
следующий за элементом, для которого выполнялось изменение видимости. При
необходимости установить фокус ввода на другой элемент – это следует
выполнить самостоятельно.</p>

<a name="_ref414372742"></a><a id="TI000000423" class="bookmark" name="issogl2_7.7.13_правила_размещения_элементов_формы"><h3>7.7.13. Правила размещения элементов формы</h3></a>

<a name="_ref442116947"></a><a id="TI000001594" class="bookmark" name="issogl3_7.7.13.1_общая_информация"><h4>7.7.13.1. Общая информация</h4></a>

<p class="Regularbeforepicture">Элементы
формы размещаются в прямоугольной логической сетке. Данная сетка является
иерархической, при этом самым верхним уровнем логической сетки выступает сетка,
заданная для формы, а в ячейке логической сетки формы может образовываться своя
логическая сетка, если элементом формы, который находится в этой ячейке, является
группа типа <span class="Interface">Обычная группа</span> или группа типа <span class="Interface">Страница</span>. Собственно
форма, группа типа <span class="Interface">Обычная группа</span> и группа типа <span class="Interface">Страница</span> далее будут
называть <span class="Bold">группирующим элементом формы</span>. Ширина ячейки
логической сетки определяется шириной элемента формы, расположенной в этой
ячейке, а высота – логической строкой. Понятие «логическая строка» не
описывается определенными числовыми параметрами. Проще всего показать это
понятие на примере. Для этого создадим форму со следующей структурой</p>

<p class="Picture"><IMG src="_img/img00292.gif?_=1496848987" WIDTH="700" ALT HEIGHT="406"></p>

<p class="MsoCaption">Рис. 293. Структура формы</p>

<p class="MsoNormal">В редакторе видны следующие элементы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Собственно форма с установленной вертикальной
группировкой и отключенной командной панелью формы.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Группа без отображения <span class="Interface">Группа1</span> с
горизонтальной группировкой. В этой группе размещены элементы <span class="Interface">Элемент1</span> и <span class="Interface">Элемент3</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Группа без отображения <span class="Interface">Группа2</span> с
горизонтальной группировкой. В этой группе размещены элементы <span class="Interface">Элемент2</span> и <span class="Interface">Элемент4</span>.</p>

<p class="Regularbeforepicture">Для
некоторого уменьшения размера рисунка, для таблицы <span class="Interface">Элемент3</span>
уменьшена высота таблицы. На работу алгоритма размещения элементов (в данном
примере) данное изменение не влияет.</p>

<p class="Picture"><IMG src="_img/img00293.gif?_=1496848987" WIDTH="671" ALT HEIGHT="195"></p>

<p class="MsoCaption"><a name="_ref423540053">Рис. </a>294. Понятие логической
сетки</p>

<p class="MsoNormalCxSpFirst">На <a href="#_ref423540053">рис.
294</a> изображены 2 строки логической сетки. В первой строке
расположены элементы <span class="Interface">Элемент 1</span> и <span class="Interface">Элемент 3</span>, а во второй – <span class="Interface">Элемент 2</span> и <span class="Interface">Элемент 4</span>.
Легко заметить, что каждая из описанных строк будет иметь разную высоту. Но,
тем не менее, в логической сетке формы будет использоваться именно две строки.
Таким образом, высота строки логической сетки вычисляется по высоте самого
высокого элемента из всех, которые расположены на одной горизонтали. Для первой
строки высота будет определяться по высоте элементов <span class="Interface">Элемент 1</span> и <span class="Interface">Элемент 3</span>, а
для второй строки – по высоте элементов <span class="Interface">Элемент 2</span> и <span class="Interface">Элемент 4</span>.</p>

<p class="MsoNormalCxSpMiddle">Также
необходимо отметить, что каждая строка у формы имеет свою ширину ячейки. Это
происходит потому, что элементы <span class="Interface">Элемент 1</span> и <span class="Interface">Элемент 3</span> располагаются в одном группирующем элементе, а
<span class="Interface">Элемент 2</span>
и <span class="Interface">Элемент
4</span> – в другом группирующем элементе. В рамках каждого группирующего
элемента размещение элементов выполняется обособленно.</p>

<p class="MsoNormalCxSpLast">Таким
образом, видно, что в данном примере имеется три логических сетки:</p>

<p class="MsoListNumberCxSpFirst">1.  Логическая
сетка формы. Для данного примера задается сетка 2 x 1: два элемента (группы) с вертикальной
группировкой, заданной для формы.</p>

<p class="MsoListNumberCxSpMiddle">2. 
Логическая сетка группы с элементами <span class="Interface">Элемент 1</span> и <span class="Interface">Элемент 3</span>. Эта
группа определяет сетку 1 x 2:
два элемента (<span class="Interface">Элемент 1</span> и <span class="Interface">Элемент 3</span>) в группе с горизонтальной группировкой для
группы. Эта сетка вложена в логическую сетку уровня формы.</p>

<p class="MsoListNumberCxSpLast">3.  Логическая
сетка группы с элементами <span class="Interface">Элемент 2</span> и <span class="Interface">Элемент 4</span>. Эта группа определяет сетку 1 x 2: два элемента (<span class="Interface">Элемент 2</span> и <span class="Interface">Элемент 4</span>) в
группе с горизонтальной группировкой для группы. Эта сетка также вложена в
логическую сетку уровня формы.</p>

<p class="MsoNormal">В дальнейшем, при
упоминании размещения элементов, будет пониматься описанная выше логическая
сетка. При разработке формы следует придерживаться следующих простых
рекомендаций, которые обеспечат работоспособность разрабатываемой формы на всех
поддерживаемых экранах и разрешениях:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
По возможности использовать значения по
умолчанию для свойств элементов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Минимизировать явное указание размеров элементов
формы.</p>

<p class="MsoNormal">В общем случае
можно определить правила размещения элементов формы следующим образом:</p>

<p class="MsoListBullet">&#9679; 
Элементы формы размещаются по двум направлениям:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Горизонтальное направление – каждый новый
элемент формы располагается правее предыдущего. Такую группу можно представить
как матрицу 1 x N, где N – количество элементов
в группе.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Вертикальное направление – каждый новый
элемент формы располагается ниже предыдущего. Такую группу можно представить
как матрицу N x 1, где N – количество элементов
в группе.</p>

<p class="IndentlistCxSpFirst">Направление
размещения зависит от свойства <span class="Interface">Группировка</span> группирующего элемента форма: форма или
группа. При размещении не накладывается ограничений по количеству отображаемых
элементов.</p>

<p class="IndentlistCxSpLast">Таким
образом, комбинируя группы с разными настройками группировки и вкладывая группы
одна в другую, можно создавать достаточно сложные (по структуре) формы. При
этом система предоставляет возможность управлять выравниванием элементов как
внутри одного группирующего элемента, так и между ними (подробнее
см. <a href="#_ref442116378">здесь</a>).</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Порядок отображения элементов определяется
порядком их следования на закладке <span class="Interface">Элементы</span> редактора формы.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Имеется возможность влиять на размещение
элементов с помощью следующих параметров:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Горизонтальный и вертикальный интервал
размещения элементов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Размер элементов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Выравнивание элементов;</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Возможность растягивать элементы по горизонтали
и вертикали;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
И т. д.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Область размещения элементов ограничена размером
окна, в котором формируется форма. Размер окна ограничен размерами рабочей
области основного окна или параметрами экрана. Если в результате размещения
совокупный размер элементов превысит размер окна, отведенного форме по
соответствующей координате (вертикальной или горизонтальной), то в форме
появятся линейки прокрутки.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Правила размещения элементов внутри группы
эквивалентны правилам размещения внутри формы.</p>

<p class="MsoNormalCxSpFirst">На
размещение элементов одновременно оказывают влияние как общие правила
размещения (описанные выше), так и особенности обработки различных параметров,
влияющих на размещение. Общее количество сочетаний всех влияющих параметров
крайне велико, поэтому далее будет рассмотрена работа наборов подобных свойств.
Сочетания всех влияющих свойств рассмотрено не будет. Описание свойств,
влияющих на расположение элементов, а также алгоритмов размещения, будет
приведено далее в этом разделе.</p>

<p class="MsoNormalCxSpLast">Формирование
формы, в том виде, как она отображается пользователю, состоит из двух этапов:</p>

<p class="MsoListNumber">1.  На
сервере:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Система получает дерево элементов формы.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Из дерева элементов исключаются элементы,
которые отключены функциональными опциями (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref418598712">здесь</a>), правами доступа (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref423696928">здесь</a>) и пользователем (с помощью диалога настройки формы).</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Получившееся дерево элементов используется для
формирования описания формы – внутреннего представления формы, которое еще
не пригодно для непосредственного отображения. В этом описании определены
реальные значения для свойств, установленные в значения <span class="Term">Авто</span>. Никаких других расчетов в данный момент
не выполняется (размеры элементов формы, видимость элементов и т. д.)</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Получившееся описание формы передается на
сторону клиента.</p>

<p class="MsoListNumber">2. 
На клиенте:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Клиентское приложение определяет характеристики
экрана, на котором будет отображаться форма: ориентация, размеры, используемые
шрифты и т. д.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
На основании полученной информации определяются
размеры элементов формы, обрабатывается видимость элементов и т. д. Из
описания формы также исключаются группы и таблицы, для которых не осталось видимых
подчиненных элементов. В результате получается описание формы, которое
практически полностью соответствует тому, как это будет видеть пользователь:
элементы размещены в ячейках используемой сетки, рассчитаны размеры элементов.
При этом следует понимать, что размер элементов зависит от текущего шрифта,
особенностей самого элемента и используемого клиентского приложения.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Полученная «почти форма» преобразуется в
реальный набор элементов управления целевой платформы (тонкий клиент, толстый
клиент, веб-клиент, мобильное устройство) и отображается пользователю.</p>

<p class="MsoNormal">Особенности
размещения элементов формы в режиме совместимости с версией 8.3.6 и ниже,
рассмотрены в документации к «1С:Предприятию» версии 8.3.6 (<a href="/db/v836doc/bookmark/dev/TI000000404" target="_top">http://its.1c.ru/db/v836doc#bookmark:dev:TI000000404</a>).</p>

<a name="_ref216676981"></a><a id="TI000000424" class="bookmark" name="issogl3_7.7.13.2_группы_и_объединение_элементов_формы"><h4>7.7.13.2. Группы и объединение элементов формы</h4></a>

<p class="MsoNormal">Элементы формы
можно объединять в группы, для чего служит специальный элемент формы <span class="Interface">Группа</span>.
Объединение в группы позволяет упростить управление элементами, визуально
выделять элементы на форме и управлять группировкой элементов (с помощью
свойства <span class="Interface">Группировка</span>).
Доступны несколько видов элемента формы <span class="Interface">Группа</span>, каждый из которых имеет свои особенности по
управлению группировкой:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Командная панель</span> –
управление группировкой недоступно.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Страница</span> – позволяет
управлять группировкой элементов.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Обычная группа</span> –
позволяет управлять группировкой элементов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Группа колонок</span> –
позволяет управлять группировкой элементов (колонок таблицы формы).</p>

<p class="Regularbeforepicture">Для
группы вида <span class="Interface">Обычная группа</span> или <span class="Interface">Страница</span> можно задавать группировку
(свойство <span class="Interface">Группировка</span>) элементов. Опишем пример использования
такой группировки.</p>

<p class="Picture"><IMG src="_img/img00294.gif?_=1496848987" WIDTH="620" ALT HEIGHT="405"></p>

<p class="MsoCaption">Рис. 295. Вертикальная группировка</p>

<p class="MsoNormal">Рассмотрим создание
формы документа. При этом группировка элементов формы выбрана как <span class="Interface">Вертикальная</span>,
но мы хотим, чтобы реквизиты документа <span class="Interface">Дата</span> и <span class="Interface">Номер</span> располагались не в двух строках, а в одной.</p>

<p class="Regularbeforepicture">Для
этого мы создадим группу с именем <span class="Interface">ДатаИНомер</span>, установим свойство <span class="Interface">Группировка</span> в
значение <span class="Interface">Горизонтальная</span>
и поместим туда элементы формы <span class="Interface">Номер</span> и <span class="Interface">Дата</span>.</p>

<p class="Picture"><IMG src="_img/img00295.gif?_=1496848987" WIDTH="620" ALT HEIGHT="405"></p>

<p class="MsoCaption">Рис. 296. Горизонтальная группировка</p>

<p class="MsoNormal">Комбинацией
вышеперечисленных способов является способ <span class="Interface">Горизонтальная если возможно</span>. В
этом случае элементы будут располагаться горизонтально, если размеры
родительского группирующего элемента позволят разместить все подчиненные элементы
горизонтально. В противном случае элементы будут размещены вертикально. Такое
размещение выполняется системой автоматически.</p>

<p class="Regularbeforepicture">Имеется
возможность аналогичным образом изменять расположение колонок в таблице формы.
В качестве примера рассмотрим форму списка, в которой имеются колонки <span class="Interface">Код</span> и <span class="Interface">Артикул</span>.</p>

<p class="Picture"><IMG src="_img/img00296.gif?_=1496848987" WIDTH="783" ALT HEIGHT="468"></p>

<p class="MsoCaption">Рис. 297. Исходное расположение колонок</p>

<p class="Regularbeforepicture">Однако в
нашем списке необходимо сделать так, чтобы код и артикул располагались в две
строки, один под другим. Для этого необходимо создать группу колонок,
подчиненную элементу <span class="Interface">Список</span>, и задать ему имя <span class="Term">КодИАртикул</span>
(например). Затем для группы колонок следует задать вертикальную группировку.</p>

<p class="Picture"><IMG src="_img/img00297.gif?_=1496848987" WIDTH="783" ALT HEIGHT="468"></p>

<p class="MsoCaption">Рис. 298. Вертикальная группировка колонок</p>

<p class="MsoNormal">Но есть
необходимость, чтобы код и артикул имели общий заголовок (например, <span class="Interface">Коды</span>). Для
этого необходимо выполнить следующие действия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для группы колонок <span class="Term">КодИАртикул</span> задать свойство <span class="Interface">Заголовок</span>;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Затем для этой же группы установить свойство <span class="Interface">Отображать в шапке</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Последним шагом следует установить свойство <span class="Interface">Отображать заголовок</span>.</p>

<p class="Regularbeforepicture">В
результате получится следующая форма:</p>

<p class="Picture"><IMG src="_img/img00298.gif?_=1496848987" WIDTH="783" ALT HEIGHT="468"></p>

<p class="MsoCaption">Рис. 299. Заголовок группы</p>

<p class="MsoNormal">Теперь необходимо
сделать так, чтобы на форме не отображались заголовки колонок <span class="Interface">Код</span> и <span class="Interface">Артикул</span> (чтобы
не увеличивалась высота шапки таблицы). Для этого необходимо выполнить
следующие действия:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Необходимо выделить элементы <span class="Interface">Код</span> и <span class="Interface">Артикул</span>;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Сбросить флажок <span class="Interface">Отображать в шапке</span>. Эту операцию
можно проделать и для каждого элемента отдельно (без выделения сразу двух
элементов).</p>

<p class="Regularbeforepicture">В
результате получится следующая форма:</p>

<p class="Picture"><IMG src="_img/img00299.gif?_=1496848987" WIDTH="783" ALT HEIGHT="468"></p>

<p class="MsoCaption">Рис. 300. Отображение только заголовка группы</p>

<p class="MsoNormal">Таким образом, в
рамках таблицы имеется возможность гибко изменять расположение колонок и их
оформление для того, чтобы получить нужный вид таблицы.</p>

<p class="Note"><span class="Note">Примечание.</span>
Следует отметить, что группы могут иметь неограниченную вложенность. При этом
свойство <span class="Interface">Группировка</span>
может быть разным для каждой вложенной группы.</p>

<a name="_ref442116988"></a><a id="TI000000425" class="bookmark" name="issogl3_7.7.13.3_размеры_элементов_формы"><h4>7.7.13.3. Размеры элементов формы</h4></a>

<p class="MsoNormal">При определении
реального размера каждого элемента формы система ориентируется на ограничения,
которые прикладной разработчик установил при разработке формы. Имеется
возможность управлять следующими свойствами элементов:</p>

<p class="MsoListBullet">&#9679; 
Для управления шириной элемента:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Term">Ширина</span> – ширина элемента.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">АвтоМаксимальнаяШирина</span> – признак того,
что система автоматически рассчитывает максимальную ширину данного элемента.
Существует не у всех элементов.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Term">МаксимальнаяШирина</span> – максимальная ширина
элемента, указанная прикладным разработчиком. Существует не у всех элементов.</p>

<p class="MsoListBullet">&#9679; 
Для управления высотой элемента:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
<span class="Term">Высота</span> – высота элемента.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
<span class="Term">АвтоМаксимальнаяВысота</span> – признак того,
что система автоматически рассчитывает максимальную высоту данного элемента.
Существует не у всех элементов.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
<span class="Term">МаксимальнаяВысота</span> – максимальная высота
элемента, указанная прикладным разработчиком. Существует не у всех элементов.</p>

<p class="MsoListBullet">&#9679; 
Также следует упомянуть, что на линейные размеры
элемента оказывает влияние значения свойств <span class="Term">РастягиватьПоГоризонтали</span>
и <span class="Term">РастягиватьПоВертикали</span>.</p>

<p class="MsoNormalCxSpFirst">Ширина и
высота элемента формы задается в абстрактных величинах, зависящих от шрифта,
установленного для данного элемента, с учетом особенностей отображения данного
элемента и клиентского приложения. Нужно также помнить, что при явном указании
ширины (или высоты) элемента, фактические размеры будут зависеть от
используемой операционной системы, ее настроек и клиентского приложения. Кроме
того, что фактические размеры элементов зависят от вида клиентского приложения
(тонкий клиент, толстый клиент или веб-клиент), эти размеры также зависят от
используемого веб-браузера и его версии. Следует понимать, что ширина и высота
элемента формы не описывают размер области данных элемента (см. <a href="#_ref442116822">здесь</a>). Эти параметры описывают общие размеры элемента, исключающие
заголовок, командные панели и т. д.</p>

<p class="MsoNormalCxSpLast">Реальный
размер элемента формы в режиме 1С:Предприятие может не совпадать с указанными
размерами. При определении размеров элементов система учитывает шрифт (и его
размеры), указанный в свойствах элементов формы.</p>

<p class="Note"><span class="Note">Примечание.</span>
Изменение шрифта элемента формы, выполненное с помощью условного оформления, не
учитывается при определении размера элементов.</p>

<p class="MsoNormal">Вычисление размера
элемента по любой оси зависит от состояния растягивания по этой оси:</p>

<p class="MsoListBullet">&#9679; 
Растягивание выключено:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Явно указанное свойство <span class="Term">Ширина</span> (<span class="Term">Высота</span>)
определяет размер элемента. В этом случае свойства, определяющие максимальный
размер элемента, игнорируются.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
Свойство <span class="Term">Ширина</span>
(<span class="Term">Высота</span>)
установлено в значение 0. Это означает автоматическое определение размера
элемента. В этом случае размер элемента по соответствующему измерению
определяется по содержимому элемента. При этом размер элемента не может быть
больше максимального размера. Максимальный размер элемента по соответствующей
оси может быть указан как вычисляемый автоматически (свойства <span class="Term">АвтоМаксимальная…</span>) так и явно задан вручную
(свойства <span class="Term">Максимальная…</span>).</p>

<p class="MsoListBullet">&#9679; 
Растягивание включено:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
Явно указанное свойство <span class="Term">Ширина</span> (<span class="Term">Высота</span>)
определяет «весовой» коэффициент растягивания/сжатия.</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Свойство <span class="Term">Ширина</span>
(<span class="Term">Высота</span>)
установлено в значение 0. Это означает автоматическое определение размера
элемента. Система подберет подходящий размер исходя из типа данных, содержимого
и других параметров. При этом размер элемента не может быть больше
максимального размера. Максимальный размер элемента по соответствующей оси
может быть указан как вычисляемый автоматически (свойства <span class="Term">АвтоМаксимальная…</span>) так и явно задан вручную
(свойства <span class="Term">Максимальная…</span>).</p>

<p class="MsoListBullet2CxSpMiddle">&#9679; 
Если максимальная ширина или высота элемента установлена
в значение 0, то по соответствующему измерению элемент может изменять размер
неограниченно.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
При определении ширины поля ввода действуют
следующие особенности:</p>

<p class="MsoListBullet3CxSpFirst">&#9679; 
Если свойство <span class="Term">МаксимальнаяШирина</span>
задано явно (свойство <span class="Term">АвтоМаксимальнаяШирина</span>
выключено), то оно определяет максимальную ширину в символах. При этом,
например, кнопки поля ввода входят в эту ширину.</p>

<p class="MsoListBullet3CxSpLast">&#9679; 
Если свойство <span class="Term">АвтоМаксимальнаяШирина</span>
включено, то максимальная ширина определяется в зависимости от типа поля ввода,
и кнопки также входят в неё для лучшего выравнивания по правой границе.
Свойство <span class="Term">Ширина</span> в этом
случае работает по-другому: если оно равно 0, то определяется ширина в
зависимости от типа поля ввода, и к ней прибавляется количество включенных
кнопок.</p>

<p class="MsoNormal">При определении
размеров элементов ограничивающим фактором «сверху» выступают размеры
родительских группирующих элементов: формы, группы, страницы. Размер
группирующего элемента ограничивает изменение размеров вложенных элементов.
Другими словами, если у группы задана ширина и запрещено растягивание, то для
всех подчиненных элементов заданная ширина группы будет выступать ограничением
при вычислении ширины этих элементов.</p>

<a id="TI000001658" class="bookmark" name="issogl3_7.7.13.4_растягивание_групп"><h4>7.7.13.4. Растягивание групп</h4></a>

<p class="MsoNormal">Изменение
размеров обычной группы (растягивание) зависит от значения свойств <span class="Interface">Растягивать по
вертикали</span> и <span class="Interface">Растягивать по горизонтали</span>:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Авто</span> –
растягиваемость определяется подчиненными элементами группы. Если есть хотя бы
один подчиненный элемент, для которого возможно растягиванием означает, что
группа также может растягиваться.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
<span class="Interface">Да</span> – группа
растягивается без ограничений. Если у группы свойство <span class="Interface">Выравнивание элементов
и заголовков</span> установлено в значение <span class="Interface">Элементы право, …</span>,
то такие элементы будут двигаться вместе с правой границей группы, если сами
элементы не могут растягиваться.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Нет</span> – группа
не растягивается. Размер определяется вложенными элементами или свойством
группы <span class="Interface">Ширина</span>.</p>

<p class="MsoNormal">Растягивание
обычной группы формы не влияет на растягивание подчиненных элементов в рамках
текущих размеров группы элементов.</p>

<a id="TI000001659" class="bookmark" name="issogl3_7.7.13.5_управление_расстоянием_между_элементами"><h4>7.7.13.5. Управление расстоянием между элементами</h4></a>

<p class="MsoNormalCxSpFirst">Для
некоторых специфических форм может возникать потребность размещать элементы
более плотно или, наоборот, более разрежено. Такое требование может возникать
как для всей формы, так и для некоторых ее фрагментов. Причем изменять расстояние
между элементами может потребоваться как по вертикали, так и по горизонтали.</p>

<p class="MsoNormalCxSpMiddle">Для
решения этой задачи у группирующих элементов существуют свойства <span class="Interface">Горизонтальный
интервал</span> и <span class="Interface">Вертикальный интервал</span>. Изменяя эти свойства, можно
добиться необходимой плотности элементов формы.</p>

<p class="MsoNormalCxSpLast">Значение
<span class="Term">Авто</span>,
установленное у любого из этих свойств, означает, что интервал будет
определяться по родительскому группирующему элементу. Для формы значение
интервала <span class="Term">Авто</span>
определяет платформа.</p>

<p class="Regularbeforepicture">На
рисунке ниже приведен пример двух предельных вариантов установки вертикального
интервала между элементами.</p>

<p class="Picture"><IMG src="_img/img00300.gif?_=1496848987" WIDTH="425" ALT HEIGHT="274"></p>

<p class="MsoCaption">Рис.
301.
Различный вертикальный интервал</p>

<a name="_ref442116378"></a><a id="TI000000427" class="bookmark" name="issogl3_7.7.13.6_выравнивание_элементов_формы"><h4>7.7.13.6. Выравнивание элементов формы</h4></a>

<a name="_ref442116822"></a><a id="TI000001660" class="bookmark" name="issogl4_7.7.13.6.1_общая_информация"><h5>7.7.13.6.1. Общая информация</h5></a>

<p class="MsoNormal">Элемент
формы состоит из <span class="Bold">области данных</span> – области элемента
формы, в которой отображаются данные, и <span class="Bold">области заголовка
(заголовок)</span> – области элемента формы, которая отображает заголовок
(см. <a href="#_ref276451067">рис.
302</a>). С<span class="Bold">тандартная ширина области данных </span>определяет
ширину области данных и обладает следующими свойствами:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
определяется типом данных реквизита, связанных с
элементом формы или свойством <span class="Interface">Ширина</span> элемента формы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
не зависит от свойства элемента формы <span class="Interface">Растягивать по
горизонтали</span>.</p>

<p class="Picture"><IMG src="_img/img00301.gif?_=1496848987" WIDTH="437" ALT HEIGHT="102"></p>

<p class="MsoCaption"><a name="_ref276451067">Рис. </a>302. Структура
элемента формы</p>

<p class="Regularbeforepicture">При
осуществлении выравнивания, ориентация заголовков и областей данных формируется
относительно воображаемой линии, которая проходит по границе между заголовками
и данными всех элементов, расположенных в группирующем элементе. При этом
размер области заголовков рассчитывается по максимальной ширине заголовка всех
элементов.</p>

<p class="Picture"><IMG src="_img/img00302.gif?_=1496848987" WIDTH="437" ALT HEIGHT="308"></p>

<p class="MsoCaption">Рис.
303.
Базовая линия для выравнивания</p>

<a id="TI000000428" class="bookmark" name="issogl4_7.7.13.6.2_выравнивание_в_рамках_группы"><h5>7.7.13.6.2. Выравнивание в рамках группы</h5></a>

<p class="MsoNormal">В
рамках группирующего элемента выравнивание границ компонентов элемента формы
определяется свойством <span class="Interface">Выравнивание элементов и заголовков</span>. Данное свойство
позволяет задать следующие варианты выравнивания:</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Нет</span>. В этом случае
область данных располагается сразу после окончания заголовка. Никакого
выравнивания не выполняется.</p>

<p class="Picture"><IMG src="_img/img00303.gif?_=1496848987" WIDTH="437" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
304.
Выравнивание: нет</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Элементы лево, заголовки
лево</span>. Это режим выравнивания, который применялся в «1С:Предприятие»
версии 8.3.6 и младше. В этом случае заголовки полей выравниваются по левой
границе группирующего элемента. Области данных также выравниваются по левой
границе.</p>

<p class="Picture"><IMG src="_img/img00304.gif?_=1496848987" WIDTH="437" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
305.
Выравнивание: лево-лево</p>

<p class="MsoListBullet">&#9679; 
<span class="Interface">Элементы право, заголовки
лево</span>. В этом случае заголовки полей выравниваются по своей левой
границе, а данные – по правой границе.</p>

<p class="Picture"><IMG src="_img/img00305.gif?_=1496848987" WIDTH="437" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
306.
Выравнивание: право-лево</p>

<p class="MsoListBullet">&#9679; 
Элементы лево, заголовки право. В этом случае
заголовки выравниваются по правой границе, а данные – по левой.</p>

<p class="Picture"><IMG src="_img/img00306.gif?_=1496848987" WIDTH="437" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
307.
Выравнивание: лево-право</p>

<p class="MsoListBullet">&#9679; 
Элементы право, заголовки право. В этом случае
все части элемента формы выравниваются по правой границе «своей» области.</p>

<p class="Picture"><IMG src="_img/img00307.gif?_=1496848987" WIDTH="437" ALT HEIGHT="164"></p>

<p class="MsoCaption">Рис.
308.
Выравнивание: право-право</p>

<p class="Regularbeforepicture">Как
уже было сказано выше, выравнивание границ осуществляется в рамках текущего
группирующего элемента. В связи с этим, результирующее выравнивание элементов
может оказать не вполне удовлетворительным.</p>

<p class="Picture"><IMG src="_img/img00308.gif?_=1496848987" WIDTH="437" ALT HEIGHT="406"></p>

<p class="MsoCaption">Рис.
309.
Сквозное выравнивание по умолчанию</p>

<p class="Regularbeforepicture">Однако
в конкретном случае может оказаться, что флажки в группе <span class="Interface">ABC-классификация</span>
необходимо выравнивать относительно той же воображаемой линии, что и первые три
элемента (<span class="Interface">Код</span>, <span class="Interface">Наименование</span>, <span class="Interface">Дата</span>). Для
управления таким поведением существует свойство <span class="Interface">Сквозное выравнивание</span>
(доступно для группы управляемой формы). Если у группы <span class="Interface">ABC-классификация</span>
установить данное свойство в значение <span class="Interface">Использовать</span>,
то выравнивание несколько изменится:</p>

<p class="Picture"><IMG src="_img/img00309.gif?_=1496848987" WIDTH="437" ALT HEIGHT="406"></p>

<p class="MsoCaption">Рис.
310.
Сквозное выравнивание. Снизу «Использовать»</p>

<p class="MsoNormalCxSpFirst">Видно,
что группа <span class="Interface">ABC-классификация</span> стала использовать для выравнивания ту
же линию, что и первые три элемента. Данное поведение касается только первых
левых элементов, которые располагаются в группе. Собственно выравнивание
реализуется путем установки одинаковой ширины для заголовков элементов, которые
(заголовки) расположены слева. Если данное свойство установлено в значение <span class="Interface">Авто</span>, то
сквозное выравнивание определяется платформой самостоятельно. Явное указание
для данного свойства значения <span class="Interface">Не использовать</span> приведет к тому,
что в таком группирующем элементе не будет выполняться выравнивание с учетом
элементов, не входящих в группу.</p>

<p class="MsoNormalCxSpLast">Сквозное
выравнивание не используется для групп, свойство <span class="Interface">Поведение</span>
которых установлено в значение, отличное от <span class="Interface">Обычная</span>.</p>

<a id="TI000001661" class="bookmark" name="issogl4_7.7.13.6.3_выравнивание_между_группами"><h5>7.7.13.6.3. Выравнивание между группами</h5></a>

<p class="MsoNormalCxSpFirst">При
разработке сложных форм могут возникать проблемы, связанные с взаимным
выравниванием элементов формы в том случае, если эти элементы расположены в
разных группах.</p>

<p class="MsoNormalCxSpLast">Предположим,
что необходимо создать форму, которая содержит флажки выбора действий и
пояснений к этим действиям. Флажки реализованы собственно флажками (элементами
формы), а пояснения – декорациями вида текст. Флажки расположены в одной
группе, пояснения – в другой. Для упрощения примера, у групп отключены отображения
заголовков и выделение собственно групп.</p>

<p class="Regularbeforepicture">В
результате получается следующая форма:</p>

<p class="Picture"><IMG src="_img/img00310.gif?_=1496848987" WIDTH="523" ALT HEIGHT="444"></p>

<p class="MsoCaption"><a name="_ref420947759">Рис. </a>311. Выравнивание
между группами</p>

<p class="MsoNormalCxSpFirst">В
примере очевидно видна проблема: вертикальное выравнивание элементов в группах
не соответствует желаемому – декорации явно имеют меньшую высоту, нежели
флажки.</p>

<p class="MsoNormalCxSpMiddle">Для
решения этой проблемы предназначено свойство группы формы <span class="Interface">Объединенная группа</span>.
Рассмотрим, как действует данное свойство.</p>

<p class="MsoNormalCxSpLast">Когда
у группы установлено данное свойство, то в этом случае вся группа считается
единым элементом (так настроен механизм размещения элементов формы). Именно в
такое значение это свойство установлено при создании новой группы.</p>

<p class="Regularbeforepicture">Если
у группы выключить данное свойство, то механизм размещения элементов будет
анализировать все элементы такой группы как отдельные элементы. Так, если
отключить данное свойство у группы <span class="Interface">ГруппаДействий</span> (на <a href="#_ref420947759">рис.
311</a>), то форма приобретет следующий вид:</p>

<p class="Picture"><IMG src="_img/img00311.gif?_=1496848987" WIDTH="458" ALT HEIGHT="201"></p>

<p class="MsoCaption"><a name="_ref421006346">Рис. </a>312. Выравнивание
между группами</p>

<p class="MsoNormalCxSpFirst">Подробнее
остановимся на том, что изображено на <a href="#_ref421006346">рис.
312</a>. Основной вопрос заключается в следующем: почему
первая строка из элемента <span class="Interface">ГруппаДействие</span> по высоте заняла столько же, сколько и
весь элемент <span class="Interface">ГруппаОписаний</span>?</p>

<p class="MsoNormalCxSpMiddle">Как
было сказано в самом начале (см. <a href="#_ref442116947">здесь</a>), единицей измерения по горизонтали при размещении
элементов формы является строка. Высота строки определяется как максимальная
высота одного из элементов формы, которые расположены по одной горизонтали, и у
которых совпадают верхние границы (если предположить, что свойство <span class="Interface">Вертикальное положение
в группе</span> у всех элементов установлено в одинаковое значение). До тех
пор, пока у обеих групп были установлены флажки <span class="Interface">Объединенная группа</span>,
каждая группа воспринималась системой размещения элементов как один элемент.
Поэтому на форме группы располагались на одном уровне, а внутри каждой группы
выравнивание работало по-своему.</p>

<p class="MsoNormalCxSpLast">После
того, как у элемента <span class="Interface">ГруппаДействие</span> был сброшен флажок <span class="Interface">Объединенная группа</span>,
группа перестала восприниматься механизмом размещения как единое целое. Каждый
элемент группы учитывается отдельно. Но для элемента <span class="Interface">ГруппаОписание</span>
флажок <span class="Interface">Объединенная группа</span> по-прежнему установлен. Это значит,
что механизм размещения считает, что элемент <span class="Interface">Действие1</span> и
элемент <span class="Interface">ГруппаОписание</span> расположены в одной строке, и высота этой
строки соответствует высоте элемента <span class="Interface">ГруппаОписание</span>.</p>

<p class="Regularbeforepicture">Если
теперь сбросить флажок <span class="Interface">Объединенная группа</span> у элемента <span class="Interface">ГруппаОписание</span>,
то форма станет выглядеть следующим образом:</p>

<p class="Picture"><IMG src="_img/img00312.gif?_=1496848987" WIDTH="458" ALT HEIGHT="158"></p>

<p class="MsoCaption">Рис.
313.
Выравнивание между группами</p>

<p class="MsoNormalCxSpFirst">В
результате получилось желаемое поведение: размер декораций перестал оказывать
влияние на общее выравнивание элементов.</p>

<p class="MsoNormalCxSpLast">Таким
образом, с помощью свойства <span class="Interface">Объединенная группа</span>, имеется
возможность создавать группы, состоящие из нескольких колонок и строк
одновременно, с поддержкой выравнивания элементов во всех колонках и строках:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Свойство установлено – группа считается
единым элементом;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Свойство сброшено – каждый элемент,
входящий в состав группы со сброшенным свойством, считается отдельным элементом.</p>

<p class="MsoNormal">Кроме
этого, группа, у которой сброшено свойство <span class="Interface">Объединенная группа</span>
(группа становится «разъединенной»), обладает следующими особенностями:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Из всех свойств группы используются только
следующие свойства: <span class="Interface">Группировка</span>, <span class="Interface">Цвет фона</span>, <span class="Interface">Отображать заголовок</span>
и <span class="Interface">Отображение</span> (для определения параметров определения
заголовка группы). Свойство <span class="Interface">Группировка</span> используется для определения
порядка размещения элементов текущей группы в родительском группирующем
элементе.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если свойство <span class="Interface">Отображать заголовок</span>
установлено в значение <span class="Term">Истина</span>,
то заголовок группы помещается в группу более верхнего уровня в качестве
первого элемента с соблюдением группировки, т. е. для горизонтальной
группировки заголовок будет размещён слева от остальных элементов, для
вертикальной выше остальных элементов.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Не формируются разделители (см. <a href="#_ref423539198">здесь</a>).</p>

<a id="TI000001662" class="bookmark" name="issogl4_7.7.13.6.4_управление_относительным_расположением_элементов"><h5>7.7.13.6.4. Управление относительным расположением элементов</h5></a>

<p class="MsoNormalCxSpFirst">При
разработке различных форм возникает необходимость управления относительным
расположением элементов формы. Например, необходимо, чтобы одна или несколько
кнопок располагались по центру группы или формы.</p>

<p class="MsoNormalCxSpLast">Для
организации такого расположения существуют несколько свойств:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Горизонтальное положение
подчиненных</span>. Доступно для группирующих элементов (форма, обычная группа
и группа вида страница). Определяет, каково будут горизонтальное относительное
расположение подчиненных элементов в рамках группирующего элемента.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Вертикальное положение
подчиненных</span>. Доступно для группирующих элементов (форма, обычная группа
и группа вида страница). Определяет, каково будут вертикальное относительное
расположение подчиненных элементов в рамках группирующего элемента.</p>

<p class="Regularbeforepicture">Ниже
приведен пример, когда для группы с горизонтальным расположением элементов
кнопки располагаются по центру группы, а для группы с вертикальным
расположением элементов кнопки располагаются в нижней части группы.</p>

<p class="Picture"><IMG src="_img/img00313.gif?_=1496848987" WIDTH="732" ALT HEIGHT="242"></p>

<p class="MsoCaption">Рис.
314.
Управление относительным расположением</p>

<p class="MsoNormalCxSpFirst">В
том случае, если любое из описанных свойств, установлено в значение <span class="Interface">Авто</span>, то это
означает, что фактическое значение свойства определяется через одноименные
свойства всех родителей, а для формы значение свойства выбирается платформой
автоматически. Обход родительских элементов прекратится в тот момент, когда
нужное свойство будет установлено в значение, отличное от значения <span class="Interface">Авто</span>.</p>

<p class="MsoNormalCxSpLast">Также
следует помнить, что если у группирующего элемента значение свойства <span class="Interface">Горизонтальное
положение</span> отлично от <span class="Interface">Лево</span>, то у подчиненных элементов
перестает работать выравнивание заголовков.</p>

<a name="_ref423539198"></a><a id="TI000001663" class="bookmark" name="issogl3_7.7.13.7_разделители_элементов"><h4>7.7.13.7. Разделители элементов</h4></a>

<p class="Regularbeforepicture">В
ряде случаев платформа может сформировать на форме разделители. Это специальные
элементы формы, с помощью которых можно менять размеры смежных элементов формы.</p>

<p class="Picture"><IMG src="_img/img00314.gif?_=1496848987" WIDTH="383" ALT HEIGHT="238"></p>

<p class="MsoCaption">Рис.
315.
Разделитель</p>

<p class="MsoNormal">Разделитель
автоматически формируется при размещении элементов формы при соблюдении всех
нижеперечисленных условий:</p>

<p class="MsoListNumberCxSpFirst">1.  Оба
разделяемых элемента растягиваются в соответствующем направлении.</p>

<p class="MsoListNumberCxSpMiddle">2. 
Между разделяемыми элементами нет других
элементов (они располагаются рядом).</p>

<p class="MsoListNumberCxSpMiddle">3. 
Высота каждого их разделяемых элементов не менее
2 строк.</p>

<p class="MsoListNumberCxSpMiddle">4. 
Значение свойства <span class="Term">Ширина</span> (или <span class="Term">Высота</span>, в зависимости от ориентации
разделителя) каждого из разделяемых элементов формы больше минимальной ширины
(высоты) и меньше максимальной ширины (высоты) элемента формы. Максимальные
размеры задаются с помощью свойств <span class="Term">Максимальная…</span>
или <span class="Term">АвтоМаксимальная…</span>.
Минимальная ширина и высота автоматически определяются платформой.</p>

<p class="MsoListNumberCxSpMiddle">5. 
Ни один из разделяемых элементов не является
надписью с автоматическим переносом текста.</p>

<p class="MsoListNumberCxSpMiddle">6. 
Размер соответствующего интервала между
элементами родительской группы (или формы) достаточен для размещения разделителя.</p>

<p class="MsoListNumberCxSpLast">7. 
У родительской группы (или формы) нет дочерних
элементов типа <span class="Interface">Группа</span> вида <span class="Interface">Обычная группа</span> с выключенным
свойством <span class="Interface">Объединенная</span>.</p>

<a name="_ref343775740"></a><a id="TI000000434" class="bookmark" name="issogl1_7.8_командный_интерфейс_формы"><h2>7.8. Командный интерфейс формы</h2></a>

<p class="MsoNormal">Командный интерфейс
формы состоит:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
из панели навигации формы,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
командной панели самой формы.</p>

<p class="MsoNormalCxSpFirst">Имеется
возможность редактирования командного интерфейса формы: включение новых,
использование имеющихся команд и т. д.</p>

<p class="MsoNormalCxSpMiddle">Заметим,
что командный интерфейс формы редактируется на отдельной закладке в редакторе
формы и описывает состав панели навигации вспомогательного окна, в котором отображается
форма, и частично состав командной панели формы. В основном этот механизм нужен
для настройки команд глобального интерфейса, которые необходимо отображать в
форме в этих двух панелях. Состав командной панели формы определяется и
непосредственно в структуре элементов, и в редакторе командного интерфейса.</p>

<p class="MsoNormalCxSpMiddle">Команда
автоматически попадает в командный интерфейс формы, в случае если тип параметра
параметризованной команды совпадает с типом основного реквизита формы.</p>

<p class="MsoNormalCxSpMiddle">Кроме
того, можно принудительно добавить команду в нужную панель командного
интерфейса. Для этого достаточно просто перетащить ее в нужную группу нужной
командной панели.</p>

<p class="MsoNormalCxSpMiddle">Установленный
признак <span class="Interface">Автоположение</span>
показывает, что будет использована последовательность команд, формируемая системой
по умолчанию. Если его отключить, то можно редактировать порядок команд.</p>

<p class="MsoNormalCxSpLast">Для того
чтобы настроить видимость команд, которые расположены в панелях командного
интерфейса, можно снять флажок в колонке <span class="Interface">Автовидимость</span> и изменить значение в колонке <span class="Interface">Видимость</span>.</p>

<a name="_ref404170871"></a><a id="TI000000439" class="bookmark" name="issogl1_7.9_работа_с_формой_из_встроенного_языка"><h2>7.9. Работа с формой из встроенного языка</h2></a>

<a name="_ref349746410"></a><a name="_ref414274252"></a><a name="_ref414274251"></a><a id="TI000000440" class="bookmark" name="issogl2_7.9.1_открытие_формы"><h3>7.9.1. Открытие формы</h3></a>

<p class="MsoNormal">Для того чтобы
открыть форму, существуют два способа:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Воспользоваться методом <span class="Term">ОткрытьФорму()</span>/<span class="Term">ОткрытьФормуМодально()</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Воспользоваться комбинацией метода <span class="Term">ПолучитьФорму()</span> и метода <span class="Term">Открыть()</span> или <span class="Term">ОткрытьМодально()</span>
объекта <span class="Term">УправляемаяФорма</span>.</p>

<p class="MsoNormalCxSpFirst">В любом из
перечисленных случаев можно передать в открываемую форму параметры формы.</p>

<p class="MsoNormalCxSpMiddle">Использовать
метод <span class="Term">ОткрытьФорму()</span>
рекомендуется во всех случаях, кроме необходимости открыть форму в модальном режиме
и затем получить результат работы формы через реквизиты открываемой формы.</p>

<p class="MsoNormalCxSpLast">Такая
особенность связана с тем, что в качестве значения возврата модальной формы
будут выступать те данные, которые возвращает сама форма, и у разработчика не
будет доступа к объекту <span class="Term">УправляемаяФорма</span>,
чтобы получить реквизиты формы. Если предварительно получить форму методом <span class="Term">ПолучитьФорму()</span>, доступ к реквизитам можно
будет получить после завершения работы метода <span class="Term">ОткрытьМодально()</span>.</p>

<p class="Lang-subheader">Пример
1:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Откроем форму списка справочника товары</span>
<span class="comment">// в режиме &quot;только просмотр&quot;</span>
Параметры <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">(</span><span class="string">&quot;ТолькоПросмотр&quot;</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">)</span><span class="operator">;</span>
ОткрытьФорму<span class="operator">(</span><span class="string">&quot;Справочник.Товары.ФормаСписка&quot;</span><span class="operator">,</span> Параметры<span class="operator">)</span><span class="operator">;</span></pre>

<p class="Lang-subheader">Пример
2:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// Открыть модальную форму и после закрытия</span>
<span class="comment">// получить доступ к реквизитам формы</span>
Форма <span class="operator">=</span> ПолучитьФорму<span class="operator">(</span><span class="string">&quot;ОбщаяФорма.ВыборПериода&quot;</span><span class="operator">)</span><span class="operator">;</span>
Результат <span class="operator">=</span> Форма<span class="operator">.</span>ОткрытьМодально<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
<span class="keyword">Если</span> Результат <span class="operator">=</span> КодВозвратаДиалога<span class="operator">.</span>Да <span class="keyword">Тогда</span>
    ДатаНачала <span class="operator">=</span> Форма<span class="operator">.</span>ДатаНачала<span class="operator">;</span>
    ДатаОкончания <span class="operator">=</span> Форма<span class="operator">.</span>ДатаОкончания<span class="operator">;</span>
<span class="keyword">КонецЕсли</span><span class="operator">;</span></pre>

<p class="MsoNormal">Описание работы с
параметрами формы см. <a href="#_ref226351125">здесь</a>.</p>

<p class="Note">Примечание. Не следует выполнять программное открытие
и закрытие одной и той же формы в одном вызове встроенного языка.</p>

<p class="MsoNormal">Не рекомендуется размещать в обработчике события
формы <span class="Term">ПриОткрытии</span> программный код по открытию
какой-либо другой формы, так как это может привести к нарушению порядка
отображения окон. В этом случае рекомендуется использовать обработчик ожидания
на короткий интервал времени или открывать другие формы интерактивно, например,
по нажатию на кнопку.</p>

<a name="_ref391302200"></a><a id="TI000000441" class="bookmark" name="issogl2_7.9.2_переопределение_открываемой_формы"><h3>7.9.2. Переопределение открываемой формы</h3></a>

<p class="MsoNormalCxSpFirst">В прикладных системах может возникать задача
открытия различных форм при различных параметрах объекта (или текущего
окружения). Например, для элемента справочника <span class="Term">Номенклатура</span>
нужно открывать разные формы для собственно товара и для услуги. Или для
некоторого автоматизированного рабочего места нужно открывать разные формы в
зависимости от текущих настроек пользователя.</p>

<p class="MsoNormalCxSpMiddle">Для выполнения такой задачи в модуле
менеджера объекта следует создать обработчик события <span class="Term">ОбработкаПолученияФормы</span>.
В этом обработчике нужно выполнить все необходимые проверки и принять решение о
том, какую форму следует открывать. Данный обработчик вызывается только в том
случае, если происходит попытка открыть стандартную форму объекта с помощью
имен форм по умолчанию.</p>

<p class="MsoNormalCxSpLast">Так, при открытии формы элемента справочника
<span class="Term">Номенклатура</span>
в следующем случае обработчик будет вызван.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ОткрытьФорму<span class="operator">(</span><span class="string">&quot;Справочник.Номенклатура.ФормаОбъекта&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Однако обработчик не будет вызван, если
попытаться открыть форму следующим образом.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ОткрытьФорму<span class="operator">(</span><span class="string">&quot;Справочник.Товары.Форма.ФормаЭлемента&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Рассмотрим пример с разными формами формы
элемента справочника более подробно.</p>

<p class="MsoNormalCxSpLast">При открытии формы будет выполняться анализ
реквизита <span class="Term">Вид</span> справочника <span class="Term">Номенклатура</span>,
и в том случае, если значение этого свойства равно значению <span class="Term">Перечисления.ВидыТоваров.Услуга</span>,
открывать форму <span class="Term">ФормаУслуги</span> справочника <span class="Term">Номенклатура</span>.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Процедура</span> ОбработкаПолученияФормы<span class="operator">(</span>ВидФормы<span class="operator">,</span> Параметры<span class="operator">,</span> ВыбраннаяФорма<span class="operator">,</span> ДополнительнаяИнформация<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    <span class="keyword">Если</span> ВидФормы <span class="operator">=</span> <span class="string">&quot;ФормаОбъекта&quot;</span> <span class="keyword">И</span> Параметры<span class="operator">.</span>Ключ<span class="operator">.</span>Вид <span class="operator">=</span> Перечисления<span class="operator">.</span>ВидыТоваров<span class="operator">.</span>Услуга <span class="keyword">Тогда</span>
        ВыбраннаяФорма <span class="operator">=</span> Метаданные<span class="operator">.</span>Справочники<span class="operator">.</span>Товары<span class="operator">.</span>Формы<span class="operator">.</span>ФормаУслуги<span class="operator">;</span>
        СтандартнаяОбработка <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Данный обработчик следует разместить в
модуле менеджера справочника <span class="Term">Номенклатура</span>.</p>

<p class="Note"><span class="Note">Примечание.</span> Обработчик <span class="Term">ОбработкаПолученияФормы</span>
не вызывается при попытке открытия общих форм, форм констант, форм хранилищ
настроек, внешних отчетов и внешних обработок.</p>

<a id="TI000000442" class="bookmark" name="issogl2_7.9.3_модификация_свойств_элементов_формы"><h3>7.9.3. Модификация свойств элементов формы</h3></a>

<p class="MsoNormalCxSpFirst">В процессе
работы с формой возникают ситуации, когда необходимо изменять какие-либо
свойство элементов формы, например, доступность элементов.</p>

<p class="MsoNormalCxSpMiddle">Для
выполнения этих действий следует воспользоваться коллекцией <span class="Term">Элементы</span>. Данная коллекция предоставляет
доступ к списку всех элементов формы (без учета иерархии).</p>

<p class="MsoNormalCxSpMiddle">Для
доступа к иерархии элементов предназначены свойства <span class="Term">Родитель</span> и <span class="Term">ПодчиненныеЭлементы</span>
(для элементов группа, таблица и для собственно формы).</p>

<p class="MsoNormalCxSpLast">Так,
отключение доступности элемента формы <span class="Term">ВидЦены</span>
выполняется следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Элементы<span class="operator">.</span>ВидЦены<span class="operator">.</span>Доступность <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Следует
обратить внимание на особенность установки свойств <span class="Term">ТолькоПросмотр</span>, <span class="Term">Доступность</span>
и <span class="Term">Видимость</span> для
элементов, содержащих подчиненные элементы. Установка свойства для
родительского элемента оказывает влияние также на все подчиненные элементы
формы. При этом значение изменяемого свойства самого элемента не изменяется.
Другими словами, фактическое значение свойств <span class="Term">ТолькоПросмотр</span>,
<span class="Term">Доступность</span> и <span class="Term">Видимость</span> конкретного элемента формы
определяется как сложение «по И» значений этих свойств всех родителей данного
элемента.</p>

<p class="MsoNormalCxSpLast">Например,
мы имеем группу <span class="Term">ВалютаДокумента</span>,
которая состоит из полей ввода <span class="Term">Валюта</span>
и <span class="Term">КурсВалюты</span>. Если
необходимо сделать всю группу недоступной, достаточно выполнить следующее:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">Элементы<span class="operator">.</span>ВалютаДокумента<span class="operator">.</span>Доступность <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span></pre>

<p class="NoteCxSpFirst"><span class="Note">совет.</span> При программной модификации свойств элементов
формы следует избегать неоправданной модификации свойств, для которых в синтакс-помощнике
указано <span class="Interface">Изменение
свойства на клиенте требует обращения к серверу</span>. Это замедляет работу формы
и требует лишних обращений к серверу.</p>

<p class="NoteCxSpLast">Примечание. Если
модификация элементов формы приводит к изменению расположения элементов на
форме (например, при изменении видимости элементов формы), то возможны вызовы
различных обработчиков событий, связанных с активизацией элементов (например,
будет вызвано событие <span class="Term">ПриАктивизацииСтроки</span> у таблицы).</p>

<p class="MsoNormal">Программное изменение свойства <span class="Term">Вид</span>
у элемента формы, обладающего расширением (поле, таблица, группа, декорация),
приводит к созданию нового расширения элемента формы. Свойства элемента формы,
относящиеся к расширению, устанавливаются в значения по умолчанию и не
переносятся из расширения элемента, которое было до изменения свойства <span class="Term">Вид</span>.</p>

<p class="Note"><span class="Note">Примечание.</span> Следует помнить, что
свойства элементов формы, относящиеся к отображаемым данным (например, <span class="Term">ПутьКДанным</span>,
<span class="Term">ПутьКДаннымЗаголовка</span>
и т. д.), можно изменять только для новых элементов формы или после
смены вида элемента формы.</p>

<a id="TI000000443" class="bookmark" name="issogl2_7.9.4_модификация_формы"><h3>7.9.4. Модификация формы</h3></a>

<p class="MsoNormal">Существует
возможность программной модификации формы. Для модификации (создания, изменения
и удаления) доступны:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
реквизиты формы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
локальные команды формы,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
элементы формы.</p>

<p class="Note"><span class="Note">Примечание.</span>
Удалять можно только те объекты, которые созданы из встроенного языка.</p>

<p class="MsoNormal">Общую схему
программной работы с формой можно представить следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
изменение состава реквизитов формы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
изменение состава команд формы,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
изменение состава элементов формы.</p>

<p class="MsoNormalCxSpFirst">Отдельно
следует заметить, что работа по добавлению, изменению и удалению составных
частей формы возможна только на сервере. Также стоит обратить внимание на тот
факт, что на программную модель формы не оказывают влияния пользовательские
настройки и функциональные опции формы.</p>

<p class="MsoNormalCxSpMiddle">При
выполнении пользовательских настроек пользователь будет настраивать именно ту
форму, которую он видит (с учетом программных модификаций формы). Если
пользователь добавляет какие-либо элементы формы, то обращение к таким
элементам из встроенного языка невозможно. Об этой особенности следует помнить
и при разработке механизмов взаимодействия с пользователем. Так, например, если
в элемент формы <span class="Interface">Группа</span> вида <span class="Interface">Страницы</span> пользователь добавит страницу, то при переходе
на эту страницу свойство группы <span class="Term">ТекущаяСтраница</span>
станет равно <span class="Term">Неопределено</span>.
Свойство формы <span class="Term">ТекущийЭлемент</span>
также будет содержать значение <span class="Term">Неопределено</span>
в том случае, когда активным элементом формы является элемент, добавленный
пользователем.</p>

<p class="MsoNormalCxSpLast">Более
подробно рассмотрим все этапы модификации формы.</p>

<a name="_ref349747016"></a><a id="TI000000444" class="bookmark" name="issogl3_7.9.4.1_изменение_состава_реквизитов"><h4>7.9.4.1. Изменение состава реквизитов</h4></a>

<p class="MsoNormalCxSpFirst">Изменение
(добавление и удаление) реквизитов выполняется методом <span class="Term">ИзменитьРеквизиты()</span> объекта <span class="Term">УправляемаяФорма</span>. При этом действия удаления и
добавления выполняются за один вызов. Это позволяет выполнять операцию
изменения свойств реквизитов формы. При этом следует понимать, что операция
изменения состава реквизитов является ресурсоемкой операцией (фактически
происходит полное создание формы), именно поэтому операции изменения состава
реквизитов формы выполняются пакетным образом.</p>

<p class="MsoNormalCxSpMiddle">Рассмотрим
подробнее методику создания реквизитов.</p>

<p class="MsoNormalCxSpMiddle">Вначале
нам необходимо создать нужное количество объектов типа <span class="Term">РеквизитФормы</span>. При создании реквизита мы
указываем его имя, тип реквизита и то место в иерархии реквизитов формы
(см. <a href="#_ref222923530">здесь</a>), которое будет занимать создаваемый реквизит.</p>

<p class="MsoNormalCxSpLast">Так, если
мы создаем таблицу значений из двух колонок, то программный код для их создания
будет выглядеть следующим образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">МоиРеквизиты <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
МоиРеквизиты<span class="operator">.</span>Добавить<span class="operator">(</span><span class="keyword">Новый</span> РеквизитФормы<span class="operator">(</span><span class="string">&quot;ТаблицаДанных&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> ОписаниеТипов<span class="operator">(</span><span class="string">&quot;ТаблицаЗначений&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="operator">,</span> <span class="string">&quot;Таблица значений&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
МоиРеквизиты<span class="operator">.</span>Добавить<span class="operator">(</span><span class="keyword">Новый</span> РеквизитФормы<span class="operator">(</span><span class="string">&quot;Поставщик&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> ОписаниеТипов<span class="operator">(</span><span class="string">&quot;СправочникСсылка.Контрагенты&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;ТаблицаДанных&quot;</span><span class="operator">,</span> <span class="string">&quot;Кто поставляет&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
МоиРеквизиты<span class="operator">.</span>Добавить<span class="operator">(</span><span class="keyword">Новый</span> РеквизитФормы<span class="operator">(</span><span class="string">&quot;Товар&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> ОписаниеТипов<span class="operator">(</span><span class="string">&quot;СправочникСсылка.Товары&quot;</span><span class="operator">)</span><span class="operator">,</span> <span class="string">&quot;ТаблицаДанных&quot;</span><span class="operator">,</span> <span class="string">&quot;Имя товара&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormal">Следует обратить
внимание, что для двух последних реквизитов предпоследний параметр указывает,
для какого реквизита будут создаваться колонки. Другими словами, существует
возможность добавлять колонки для реквизитов тех типов, которые это позволяют.</p>

<p class="Regularbeforepicture">На <a href="#_ref222924593">рис.316</a> изображены реквизиты, созданные в редакторе формы,
аналог которых создает код, приведенный выше.</p>

<p class="Picture"><IMG src="_img/img00315.gif?_=1496848987" WIDTH="394" ALT HEIGHT="130"></p>

<p class="MsoCaption"><a name="_ref222924593">Рис. </a>316. Эквивалент программному
коду</p>

<p class="MsoNormal">После того как были
созданы все реквизиты, которые планировалось создать в форме, следует выполнить
изменение списка реквизитов:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ИзменитьРеквизиты<span class="operator">(</span>ДобавляемыеРеквизиты<span class="operator">,</span> УдаляемыеРеквизиты<span class="operator">)</span><span class="operator">;</span></pre>

<p class="MsoNormalCxSpFirst">Выполнение
данного кода приведет к тому, что система вначале удалит реквизиты,
перечисленные в массиве <span class="Term">УдаляемыеРеквизиты</span>,
а затем выполнит добавление реквизитов из массива <span class="Term">ДобавляемыеРеквизиты</span>. После чего произойдет
перестроение формы.</p>

<p class="MsoNormalCxSpMiddle">При
удалении реквизитов происходит потеря данных, которые в них содержатся, однако
если добавляемый и удаляемый реквизит имеют совместимые типы или добавляемый
реквизит отличается от удаляемого реквизита только свойствами (но не типом), то
данные, хранимые реквизитом, будут сохранены.</p>

<p class="MsoNormalCxSpMiddle">После
добавления реквизита обращение к нему в программном коде возможно только с
помощью конструкции Эт<span class="Term">отОбъект.ИмяРеквизита</span>. Выражение «<span class="Term">ЭтотОбъект.</span>» является обязательным для
программно добавляемых реквизитов.</p>

<p class="MsoNormalCxSpMiddle">Для того
чтобы изменить состав или свойства реквизитов, следует вначале получить изменяемые
реквизиты. Сделать это можно с помощью метода <span class="Term">ПолучитьРеквизиты()</span>.</p>

<p class="MsoNormalCxSpLast">Следует
обратить внимание на две особенности полученного списка:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
данный список не является динамическим и не
отслеживает изменения реквизитов, которые произошли после вызова метода;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
несмотря на то, что полученный список можно
изменять, эти изменения никак не отразятся на реальных свойствах реквизитов
формы.</p>

<p class="MsoNormalCxSpFirst">После того
как получен интересующий нас список реквизитов формы, можно выполнить с
полученными реквизитами какие-либо действия (например, изменить заголовки всех
реквизитов) и затем выполнить метод изменения реквизитов. Изменение реквизитов
следует делать с предварительным удалением.</p>

<p class="MsoNormalCxSpLast">Например,
если мы хотим изменить свойства реквизита <span class="Term">ПараметрЗаказа</span>,
то это следует делать таким образом:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">МассивРеквизитов <span class="operator">=</span> ПолучитьРеквизиты<span class="operator">(</span><span class="string">&quot;ПараметрЗаказа&quot;</span><span class="operator">)</span><span class="operator">;</span>
...
<span class="comment">// Выполним изменения реквизита</span>
...
УдаляемыеРеквизиты <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
УдаляемыеРеквизиты<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;ПараметрЗаказа&quot;</span><span class="operator">)</span><span class="operator">;</span>
ИзменитьРеквизиты<span class="operator">(</span>МассивРеквизитов<span class="operator">,</span> УдаляемыеРеквизиты<span class="operator">)</span><span class="operator">;</span></pre>

<a id="TI000000445" class="bookmark" name="issogl3_7.9.4.2_изменение_состава_команд"><h4>7.9.4.2. Изменение состава команд</h4></a>

<p class="MsoNormalCxSpFirst">Для того
чтобы управлять составом команд формы, у объекта <span class="Term">УправляемаяФорма</span>
существует специальная коллекция – <span class="Term">Команды</span>.
С помощью этой коллекции мы можем добавлять, удалять и изменять команды формы.</p>

<p class="MsoNormalCxSpLast">Так, для
добавления команды <span class="Term">КомандаУстановкиСтатуса</span>
с заголовком <span class="Interface">Установить статус</span>, которая будет вызывать обработчик с
именем <span class="Term">ОбработчикПрограммныхКоманд</span>,
необходимо выполнить следующий программный код:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    Команда <span class="operator">=</span> Команды<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;КомандаУстановкиСтатуса&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Команда<span class="operator">.</span>Действие <span class="operator">=</span> <span class="string">&quot;ОбработчикПрограммныхКоманд&quot;</span><span class="operator">;</span>
    Команда<span class="operator">.</span>Заголовок <span class="operator">=</span> <span class="string">&quot;Установить статус&quot;</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ОбработчикПрограммныхКоманд<span class="operator">(</span>Команда<span class="operator">)</span>
    ...
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">Обработчик команды
должен существовать в модуле формы и предваряться директивой компиляции <span class="Term">&amp;НаКлиенте</span>.</p>

<p class="Note"><span class="Note">Примечание.</span>
Один обработчик может обслуживать несколько программно добавляемых команд.</p>

<a name="_ref349747032"></a><a id="TI000000446" class="bookmark" name="issogl3_7.9.4.3_работа_с_элементами_формы"><h4>7.9.4.3. Работа с элементами формы</h4></a>

<p class="MsoNormalCxSpFirst">После того
как созданы все необходимые реквизиты и команды, можно добавлять элементы
управления.</p>

<p class="MsoNormalCxSpMiddle">Для
управления элементами формы у объекта <span class="Term">УправляемаяФорма</span>
существует коллекция <span class="Term">Элементы</span>,
с помощью которой можно добавлять, удалять, изменять свойства элементов формы,
а также перемещать элементы формы между родителями.</p>

<p class="MsoNormalCxSpMiddle">Коллекция
<span class="Term">Элементы</span>
предоставляет доступ к списку элементов формы, который не учитывает возможную
иерархию элементов. Для работы с иерархией у объекта коллекции <span class="Term">Элементы</span> существуют свойства <span class="Term">Родитель</span> и <span class="Term">ПодчиненныеЭлементы</span>.</p>

<p class="MsoNormalCxSpMiddle">Первое
свойство указывает на родительский элемент формы, например, для поля формы,
расположенного в группе, свойство <span class="Term">Родитель</span>
будет указывать на элемент формы типа <span class="Term">ГруппаФормы</span>.</p>

<p class="MsoNormalCxSpMiddle">Свойство <span class="Term">ПодчиненныеЭлементы</span> существует у тех элементов
формы, которые могут иметь подчиненные элементы. Например, для элемента формы
типа <span class="Term">ГруппаФормы</span>
коллекция <span class="Term">ПодчиненныеЭлементы</span>
будет содержать те элементы, которые расположены в этой группе.</p>

<p class="MsoNormalCxSpMiddle">Для
перемещения элемента из одной коллекции в другую (например, из одной группы в
другую) существует метод <span class="Term">Переместить()</span>.
Параметры данного метода описывают перемещаемый элемент, нового родителя
элемента и тот элемент формы, перед которым нужно поместить перемещаемый
элемент.</p>

<p class="MsoNormalCxSpLast">Если
последний параметр метода не указан, то перемещаемый элемент будет размещен в
конце коллекции элементов нового родителя.</p>

<p class="Note"><span class="Note">Примечание.</span>
При программном изменении состава элементов формы возможны вызовы различных
обработчиков событий, связанных с активизацией элементов (например, будет вызвано
событие <span class="Term">ПриАктивизацииСтроки</span>
у таблицы).</p>

<p class="MsoNormalCxSpFirst">Рассмотрим
подробнее способ добавления элемента управления.</p>

<p class="MsoNormalCxSpLast">В примере
показано, как разместить на форме два элемента:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
поле формы, связанное с реквизитом формы;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
кнопку, связанную с командой формы.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    МоиРеквизиты <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
    ТипСтрока <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеТипов<span class="operator">(</span><span class="string">&quot;Строка&quot;</span><span class="operator">,</span> <span class="operator">,</span> <span class="keyword">Новый</span> КвалификаторыСтроки<span class="operator">(</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    МоиРеквизиты<span class="operator">.</span>Добавить<span class="operator">(</span><span class="keyword">Новый</span> РеквизитФормы<span class="operator">(</span><span class="string">&quot;ОписаниеОбъекта&quot;</span><span class="operator">,</span> ТипСтрока<span class="operator">,</span> <span class="string">&quot;&quot;</span><span class="operator">,</span> <span class="string">&quot;Описание объекта&quot;</span><span class="operator">,</span> <span class="keyword">Ложь</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    ИзменитьРеквизиты<span class="operator">(</span>МоиРеквизиты<span class="operator">)</span><span class="operator">;</span>
    Команда <span class="operator">=</span> Команды<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;ИзменитьСтроку&quot;</span><span class="operator">)</span><span class="operator">;</span>
    Команда<span class="operator">.</span>Действие <span class="operator">=</span> <span class="string">&quot;ОбработчикПрограммныхКоманд&quot;</span><span class="operator">;</span>
    Команда<span class="operator">.</span>Заголовок <span class="operator">=</span> <span class="string">&quot;Изменить строку&quot;</span><span class="operator">;</span>
    Элемент <span class="operator">=</span> Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;ОписаниеОбъекта&quot;</span><span class="operator">,</span> Тип<span class="operator">(</span><span class="string">&quot;ПолеФормы&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    Элемент<span class="operator">.</span>Вид <span class="operator">=</span> ВидПоляФормы<span class="operator">.</span>ПолеВвода<span class="operator">;</span>
    Элемент<span class="operator">.</span>ПутьКДанным <span class="operator">=</span> <span class="string">&quot;ОписаниеОбъекта&quot;</span><span class="operator">;</span>
    Элемент <span class="operator">=</span> Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;ИзменитьСтроку&quot;</span><span class="operator">,</span> Тип<span class="operator">(</span><span class="string">&quot;КнопкаФормы&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    Элемент<span class="operator">.</span>ИмяКоманды <span class="operator">=</span> <span class="string">&quot;ИзменитьСтроку&quot;</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
...
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ОбработчикПрограммныхКоманд<span class="operator">(</span>Команда<span class="operator">)</span>
    ЭтотОбъект<span class="operator">.</span>ОписаниеОбъекта <span class="operator">=</span> <span class="string">&quot;Описание объекта, сформированное командой&quot;</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="Regularbeforepicture">Форма, в
которой будет размещен этот код, будет выглядеть как на <a href="#_ref222929041">рис.317</a>. Форма показана после того, как пользователь нажал
кнопку <span class="Interface">Изменить
строку</span>.</p>

<p class="Picture"><IMG src="_img/img00316.gif?_=1496848987" WIDTH="310" ALT HEIGHT="158"></p>

<p class="MsoCaption"><a name="_ref222929041">Рис. </a>317. Результат
программной модификации формы</p>

<a name="_ref391306060"></a><a id="TI000000447" class="bookmark" name="issogl2_7.9.5_работа_с_динамическим_списком"><h3>7.9.5. Работа с динамическим списком</h3></a>

<p class="MsoNormal">В данном разделе
приведены примеры выполнения некоторых операций по работе с динамическим
списком, размещенным в форме.</p>

<p class="Note"><a name="_ref270609623"></a>Примечание. Примеры, приведенные ниже, не являются
законченным. Они предназначены для демонстрации различных механизмов работы с
динамическим списком.</p>

<a id="TI000000448" class="bookmark" name="issogl3_7.9.5.1_параметр_запроса_динамического_списка"><h4>7.9.5.1. Параметр запроса динамического списка</h4></a>

<p class="MsoNormalCxSpFirst">В данном разделе приведен пример установки
параметра запроса динамического списка.</p>

<p class="MsoNormalCxSpLast">Предположим, что для динамического списка
указан следующий запрос к данным:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">ВЫБРАТЬ</span>
    Товары<span class="operator">.</span>Код <span class="keyword">КАК</span> Код<span class="operator">,</span>
    Товары<span class="operator">.</span>Наименование <span class="keyword">КАК</span> Наименование<span class="operator">,</span>
    Товары<span class="operator">.</span>Артикул <span class="keyword">КАК</span> Артикул<span class="operator">,</span>
    ТоварныеЗапасыОстатки<span class="operator">.</span>КоличествоОстаток <span class="keyword">КАК</span> Количество<span class="operator">,</span>
    ЦеныТоваровСрезПоследних<span class="operator">.</span>Цена <span class="keyword">КАК</span> Цена<span class="operator">,</span>
    Товары<span class="operator">.</span>ЭтоГруппа
<span class="keyword">ИЗ</span>
    Справочник<span class="operator">.</span>Товары <span class="keyword">КАК</span> Товары
        ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления<span class="operator">.</span>ТоварныеЗапасы<span class="operator">.</span>Остатки<span class="operator">(</span><span class="operator">,</span> Склад <span class="operator">=</span> &Склад<span class="operator">)</span> <span class="keyword">КАК</span> ТоварныеЗапасыОстатки
        <span class="keyword">ПО</span> <span class="operator">(</span>ТоварныеЗапасыОстатки<span class="operator">.</span>Товар <span class="operator">=</span> Товары<span class="operator">.</span>Ссылка<span class="operator">)</span>
        ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений<span class="operator">.</span>ЦеныТоваров<span class="operator">.</span>СрезПоследних<span class="operator">(</span><span class="operator">,</span> ВидЦен <span class="operator">=</span> &ВидЦен<span class="operator">)</span> <span class="keyword">КАК</span> ЦеныТоваровСрезПоследних
        <span class="keyword">ПО</span> Товары<span class="operator">.</span>Ссылка <span class="operator">=</span> ЦеныТоваровСрезПоследних<span class="operator">.</span>Товар</pre>

<p class="MsoNormal">Тогда для установки параметров данного
запроса (в обработчике <span class="Term">ПриСозданииНаСервере()</span>) нужно указать
параметры <span class="Term">Склад</span> и <span class="Term">ВидЦен</span> следующим
образом.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// СписокТоваров – реквизит формы типа ДинамическийСписок</span>
<span class="comment">// Параметры.Склад и Параметры.ВидЦен – параметры формы соответствующих типов</span>
<span class="preprocessor">&amp;НаСервере</span>
<span class="keyword">Процедура</span> ПриСозданииНаСервере<span class="operator">(</span>Отказ<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    СписокТоваров<span class="operator">.</span>Параметры<span class="operator">.</span>УстановитьЗначениеПараметра<span class="operator">(</span><span class="string">&quot;Склад&quot;</span><span class="operator">,</span> Параметры<span class="operator">.</span>Склад<span class="operator">)</span><span class="operator">;</span> 
    СписокТоваров<span class="operator">.</span>Параметры<span class="operator">.</span>УстановитьЗначениеПараметра<span class="operator">(</span><span class="string">&quot;ВидЦен&quot;</span><span class="operator">,</span> Параметры<span class="operator">.</span>ВидЦен<span class="operator">)</span><span class="operator">;</span> 
<span class="keyword">КонецПроцедуры</span></pre>

<a id="TI000000449" class="bookmark" name="issogl3_7.9.5.2_отбор"><h4>7.9.5.2. Отбор</h4></a>

<p class="MsoNormal">В данном разделе
приведены примеры установки и удаления отбора в динамическом списке.</p>

<p class="Lang">Установить</p>

<p class="MsoNormal">Функция добавляет
отбор в динамический список и возвращает созданный элемент отбора.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> ДобавитьОтбор<span class="operator">(</span>СписокОтборов<span class="operator">,</span> ИмяПоля<span class="operator">,</span> Значение<span class="operator">,</span> ВидСравнения <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">,</span> Использование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">)</span>
    НовыйЭлемент <span class="operator">=</span> СписокОтборов<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ЭлементОтбораКомпоновкиДанных&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>ЛевоеЗначение <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>ВидСравнения <span class="operator">=</span> <span class="operator">?</span><span class="operator">(</span>ВидСравнения <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">,</span> ВидСравненияКомпоновкиДанных<span class="operator">.</span>Равно<span class="operator">,</span> ВидСравнения<span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>ПравоеЗначение <span class="operator">=</span> Значение<span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Использование <span class="operator">=</span> Использование<span class="operator">;</span>
    <span class="keyword">Возврат</span> НовыйЭлемент<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">// В списке должна быть колонка &quot;Контрагент&quot;</span>
<span class="comment">//</span>
<span class="comment">// Выполняется установка отбора по полю &quot;Контрагент&quot;, значение</span>
<span class="comment">// отбора находится в переменной &quot;КонтрагентСсылка&quot;, отбор включен,</span>
<span class="comment">// условие отбора – равно.</span>
ДобавитьОтбор<span class="operator">(</span>ДинамическийСписок<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>ФиксированныеНастройки<span class="operator">.</span>Отбор<span class="operator">,</span> <span class="string">&quot;Контрагент&quot;</span><span class="operator">,</span> КонтрагентСсылка<span class="operator">)</span><span class="operator">;</span></pre>

<p class="Lang">Удалить</p>

<p class="MsoNormal">Процедура удаляет
отбор динамического списка и возвращает результат удаления. Если имя поля с
удаляемым отбором не указано, выполняется очистка списка отборов.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> УдалитьОтбор<span class="operator">(</span>СписокОтборов<span class="operator">,</span> ИмяПоля <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="operator">)</span>
    <span class="keyword">Если</span> ПустаяСтрока<span class="operator">(</span>ИмяПоля<span class="operator">)</span> <span class="keyword">Тогда</span>
        СписокОтборов<span class="operator">.</span>Элементы<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">Возврат</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    ОтборУдален <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> ЭлементОтбора <span class="keyword">Из</span> СписокОтборов<span class="operator">.</span>Элементы <span class="keyword">Цикл</span>
        <span class="keyword">Если</span> ЭлементОтбора<span class="operator">.</span>Использование <span class="keyword">И</span> ЭлементОтбора<span class="operator">.</span>ЛевоеЗначение <span class="operator">=</span> Поле <span class="keyword">Тогда</span>
            СписокОтборов<span class="operator">.</span>Элементы<span class="operator">.</span>Удалить<span class="operator">(</span>ЭлементОтбора<span class="operator">)</span><span class="operator">;</span>
            ОтборУдален <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
        <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> ОтборУдален<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">//             В списке должна быть колонка &quot;Контрагент&quot;</span>
<span class="comment">// Выполняется удаление отбора по полю &quot;Контрагент&quot;.</span>
Результат <span class="operator">=</span> УдалитьОтбор<span class="operator">(</span>ДинамическийСписок<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>ФиксированныеНастройки<span class="operator">.</span>Отбор<span class="operator">,</span> <span class="string">&quot;Контрагент&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<a id="TI000000450" class="bookmark" name="issogl3_7.9.5.3_группировка"><h4>7.9.5.3. Группировка</h4></a>

<p class="MsoNormal">В данном разделе
приведены примеры установки и удаления группировки в динамическом списке.</p>

<p class="Lang">Установка</p>

<p class="MsoNormal">Функция добавляет группировку
в динамический список и возвращает созданный элемент группировки.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> ДобавитьГруппировку<span class="operator">(</span>СписокГруппировок<span class="operator">,</span> ИмяПоля<span class="operator">,</span> Использование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">,</span> ТипГруппировки <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">)</span>
    Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент <span class="operator">=</span> СписокГруппировок<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ПолеГруппировкиКомпоновкиДанных&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Использование <span class="operator">=</span> Использование<span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Поле <span class="operator">=</span> Поле<span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>ТипГруппировки <span class="operator">=</span> <span class="operator">?</span><span class="operator">(</span>ТипГруппировки <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">,</span> ТипГруппировкиКомпоновкиДанных<span class="operator">.</span>Элементы<span class="operator">,</span> ТипГруппировки<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> НовыйЭлемент<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">// В списке должна быть колонка &quot;Контрагент&quot;</span>
<span class="comment">//</span>
<span class="comment">// Выполняется создание группировки по полю &quot;Контрагент&quot;, созданная</span>
<span class="comment">// группировка будет использоваться, тип группировки – только элементы</span>
Группировка <span class="operator">=</span> Список<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>Настройки<span class="operator">.</span>Структура<span class="operator">.</span>Добавить<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ГруппировкаКомпоновкиДанных&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ДобавитьГруппировку<span class="operator">(</span>Группировка<span class="operator">.</span>ПоляГруппировки<span class="operator">,</span> <span class="string">&quot;Контрагент&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<p class="Lang">Удаление</p>

<p class="MsoNormal">Процедура удаляет группировку
динамического списка и возвращает результат удаления. Если имя поля с удаляемой
группировкой не указано, выполняется очистка списка группировок.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> УдалитьГруппировку<span class="operator">(</span>СписокГруппировок<span class="operator">,</span> ИмяПоля <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="operator">)</span>
    <span class="keyword">Если</span> ПустаяСтрока<span class="operator">(</span>ИмяПоля<span class="operator">)</span> <span class="keyword">Тогда</span>
        СписокГруппировок<span class="operator">.</span>Элементы<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">Возврат</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    ГруппировкаУдалена <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    МассивЭлементовДляУдаления <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> ЭлементГруппировки <span class="keyword">из</span> СписокГруппировок<span class="operator">.</span>Элементы <span class="keyword">Цикл</span>
        <span class="keyword">Если</span> ЭлементГруппировки<span class="operator">.</span>Поле <span class="operator">=</span> Поле <span class="keyword">тогда</span>
            МассивЭлементовДляУдаления<span class="operator">.</span>Добавить<span class="operator">(</span>ЭлементГруппировки<span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> УдаляемыйЭлемент <span class="keyword">из</span> МассивЭлементовДляУдаления <span class="keyword">Цикл</span>
        СписокГруппировок<span class="operator">.</span>Элементы<span class="operator">.</span>Удалить<span class="operator">(</span>УдаляемыйЭлемент<span class="operator">)</span><span class="operator">;</span>
        ГруппировкаУдалена <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> ГруппировкаУдалена<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">//</span>
<span class="comment">// Выполняется удаление всех группировок в динамическом списке</span>
Результат <span class="operator">=</span> УдалитьГруппировку<span class="operator">(</span>ДинамическийСписок<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>ФиксированныеНастройки<span class="operator">.</span>Группировка<span class="operator">)</span><span class="operator">;</span></pre>

<a name="_ref458075055"></a><a id="TI000000451" class="bookmark" name="issogl3_7.9.5.4_порядок_сортировка"><h4>7.9.5.4. Порядок (сортировка)</h4></a>

<p class="MsoNormal">В данном разделе
приведены примеры установки и удаления упорядочивания динамического списка.</p>

<p class="Lang">Установка</p>

<p class="MsoNormal">Функция добавляет поле
сортировки в динамический список и возвращает созданный элемент порядка.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> ДобавитьПорядок<span class="operator">(</span>СписокПорядков<span class="operator">,</span> ИмяПоля<span class="operator">,</span> Использование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">,</span> ТипУпорядочивания <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">)</span>
    Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>Поле<span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент <span class="operator">=</span> СписокПорядков<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ЭлементПорядкаКомпоновкиДанных&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Использование <span class="operator">=</span> Использование<span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Поле <span class="operator">=</span> Поле<span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>ТипУпорядочивания <span class="operator">=</span> <span class="operator">?</span><span class="operator">(</span>ТипУпорядочивания <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">,</span> НаправлениеСортировкиКомпоновкиДанных<span class="operator">.</span>Возр<span class="operator">,</span> ТипУпорядочивания<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> НовыйЭлемент<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">// В списке должна быть колонка &quot;Наименование&quot;</span>
<span class="comment">//</span>
<span class="comment">// Выполняется установка сортировки по полю &quot;Наименование&quot;,</span>
<span class="comment">// направление сортировки – по убыванию, сортировка используется</span>
ДобавитьПорядок<span class="operator">(</span>ДинамическийСписок<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>Настройки<span class="operator">.</span>Порядок<span class="operator">,</span> <span class="string">&quot;Наименование&quot;</span><span class="operator">,</span> <span class="keyword">Истина</span><span class="operator">,</span> НаправлениеСортировкиКомпоновкиДанных<span class="operator">.</span>Убыв<span class="operator">)</span><span class="operator">;</span></pre>

<p class="Lang">Удаление</p>

<p class="MsoNormal">Процедура удаляет сортировку
динамического списка и возвращает результат удаления. Если имя поля упорядочивания
не указано, выполняется очистка списка упорядочивания.</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Функция</span> УдалитьПорядок<span class="operator">(</span>СписокПорядков<span class="operator">,</span> ИмяПоля <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="operator">)</span>
    <span class="keyword">Если</span> ПустаяСтрока<span class="operator">(</span>ИмяПоля<span class="operator">)</span> <span class="keyword">Тогда</span>
        СписокПорядков<span class="operator">.</span>Элементы<span class="operator">.</span>Очистить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">Возврат</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    ПорядокУдален <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    МассивЭлементовДляУдаления <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> ЭлементПорядка <span class="keyword">из</span> СписокПорядков<span class="operator">.</span>Элементы <span class="keyword">Цикл</span>
        <span class="keyword">Если</span> ЭлементПорядка<span class="operator">.</span>Поле <span class="operator">=</span> Поле <span class="keyword">тогда</span>
            МассивЭлементовДляУдаления<span class="operator">.</span>Добавить<span class="operator">(</span>ЭлементПорядка<span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> УдаляемыйЭлемент <span class="keyword">из</span> МассивЭлементовДляУдаления <span class="keyword">Цикл</span>
        СписокПорядков<span class="operator">.</span>Элементы<span class="operator">.</span>Удалить<span class="operator">(</span>УдаляемыйЭлемент<span class="operator">)</span><span class="operator">;</span>
        ПорядокУдален <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> ПорядокУдален<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
использования:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="comment">// ДинамическийСписок – реквизит формы типа &quot;ДинамическийСписок&quot;</span>
<span class="comment">//</span>
<span class="comment">// Выполняется удаление (не отключение) порядка по полю &quot;Наименование&quot;</span>
Результат <span class="operator">=</span> УдалитьПорядок<span class="operator">(</span>ДинамическийСписок<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>ФиксированныеНастройки<span class="operator">.</span>Порядок<span class="operator">,</span> <span class="string">&quot;Наименование&quot;</span><span class="operator">)</span><span class="operator">;</span></pre>

<a id="TI000000452" class="bookmark" name="issogl3_7.9.5.5_условное_оформление"><h4>7.9.5.5. Условное оформление</h4></a>

<p class="MsoNormal">В данном разделе
приведены примеры задания условного оформления динамического списка. В условном
оформлении используется динамический список <span class="Term">Список</span>,
в котором есть поля <span class="Term">Организация</span>
и <span class="Term">Сумма</span> (типа <span class="Term">Число</span>). В примере задаются три элемента
условного оформления:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
если значение поля <span class="Term">Сумма</span> меньше <span class="Interface">500</span>, то текст полей <span class="Term">Организация</span> и <span class="Term">Сумма</span>
оформляется красным цветом;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
если значение поля <span class="Term">Сумма</span> больше <span class="Interface">500</span>, но меньше <span class="Interface">10 000</span>, то для всех
полей строки текст оформляется синим цветом;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
если значение поля <span class="Term">Сумма</span> больше <span class="Interface">10 000</span>, то текст полей <span class="Term">Организация</span> и <span class="Term">Сумма</span>
оформляется зеленым цветом.</p>

<p class="MsoNormal">Также в примере
используется функция установки отбора (см. <a href="#_ref270609623">здесь</a>).</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="keyword">Функция</span> УстановитьУсловноеОформление<span class="operator">(</span>СписокОформления<span class="operator">,</span> ИменаОформляемыхПолей<span class="operator">,</span> СтруктураОформление<span class="operator">,</span> Использование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">)</span> <span class="keyword">Экспорт</span>
    НовыйЭлемент <span class="operator">=</span> СписокОформления<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    НовыйЭлемент<span class="operator">.</span>Использование <span class="operator">=</span> Использование<span class="operator">;</span>
    <span class="comment">// Зададим оформляемые поля, заданные массивом с именами полей</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> ИмяПоля <span class="keyword">Из</span> ИменаОформляемыхПолей <span class="keyword">Цикл</span>
        ОформляемоеПоле <span class="operator">=</span> НовыйЭлемент<span class="operator">.</span>Поля<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
        ОформляемоеПоле<span class="operator">.</span>Использование <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
        ОформляемоеПоле<span class="operator">.</span>Поле <span class="operator">=</span> <span class="keyword">Новый</span> ПолеКомпоновкиДанных<span class="operator">(</span>ИмяПоля<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="comment">// Зададим оформление, заданное структурой,</span>
    <span class="comment">// в которой – Ключ: имя параметра оформления,</span>
    <span class="comment">//    а Значение – значение параметра оформления</span>
    <span class="keyword">Для</span> <span class="keyword">каждого</span> ЭлементОформления <span class="keyword">Из</span> СтруктураОформление <span class="keyword">Цикл</span>
        НовыйЭлемент<span class="operator">.</span>Оформление<span class="operator">.</span>УстановитьЗначениеПараметра<span class="operator">(</span>ЭлементОформления<span class="operator">.</span>Ключ<span class="operator">,</span> ЭлементОформления<span class="operator">.</span>Значение<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЦикла</span><span class="operator">;</span>
    <span class="keyword">Возврат</span> НовыйЭлемент<span class="operator">;</span>
<span class="keyword">КонецФункции</span></pre>

<p class="Lang-subheader">Пример
задания условного оформления:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev">ЭлементыУсловногоОформления <span class="operator">=</span> Список<span class="operator">.</span>КомпоновщикНастроек<span class="operator">.</span>ФиксированныеНастройки<span class="operator">.</span>УсловноеОформление<span class="operator">;</span>
ОформляемыеПоля <span class="operator">=</span> <span class="keyword">Новый</span> Массив<span class="operator">;</span>
ОформляемыеПоля<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Сумма&quot;</span><span class="operator">)</span><span class="operator">;</span>
ОформляемыеПоля<span class="operator">.</span>Добавить<span class="operator">(</span><span class="string">&quot;Организация&quot;</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// ***** Установка красного цвета для суммы менее 500</span>
Оформление <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
Оформление<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЦветТекста&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> Цвет<span class="operator">(</span><span class="number">128</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
НовыйЭлемент <span class="operator">=</span> УстановитьУсловноеОформление<span class="operator">(</span>ЭлементыУсловногоОформления<span class="operator">,</span> ОформляемыеПоля<span class="operator">,</span> Оформление<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Зададим условие оформления: Сумма &lt; 500</span>
ДобавитьОтбор<span class="operator">(</span>НовыйЭлемент<span class="operator">.</span>Отбор<span class="operator">,</span> <span class="string">&quot;Сумма&quot;</span><span class="operator">,</span> <span class="number">500</span><span class="operator">,</span> ВидСравненияКомпоновкиДанных<span class="operator">.</span>Меньше<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// ***** Установка зеленого цвета для суммы более 10 000</span>
Оформление <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
Оформление<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЦветТекста&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> Цвет<span class="operator">(</span><span class="number">0</span><span class="operator">,</span><span class="number">128</span><span class="operator">,</span><span class="number">0</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
НовыйЭлемент <span class="operator">=</span> УстановитьУсловноеОформление<span class="operator">(</span>ЭлементыУсловногоОформления<span class="operator">,</span> ОформляемыеПоля<span class="operator">,</span> Оформление<span class="operator">)</span><span class="operator">;</span>
Зададим условие оформления: Сумма <span class="operator">&gt;</span> <span class="number">10</span> 000
ДобавитьОтбор<span class="operator">(</span>НовыйЭлемент<span class="operator">.</span>Отбор<span class="operator">,</span> <span class="string">&quot;Сумма&quot;</span><span class="operator">,</span> <span class="number">10000</span><span class="operator">,</span> ВидСравненияКомпоновкиДанных<span class="operator">.</span>Больше<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// установка синего цвета, если сумма в интервале от 500 до 10 000</span>
Оформление <span class="operator">=</span> <span class="keyword">Новый</span> Структура<span class="operator">;</span>
Оформление<span class="operator">.</span>Вставить<span class="operator">(</span><span class="string">&quot;ЦветТекста&quot;</span><span class="operator">,</span> <span class="keyword">Новый</span> Цвет<span class="operator">(</span><span class="number">0</span><span class="operator">,</span><span class="number">0</span><span class="operator">,</span><span class="number">128</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Передача пустого массива в качестве списка оформляемых полей</span>
<span class="comment">// означает оформление всех полей строки</span>
НовыйЭлемент <span class="operator">=</span> УстановитьУсловноеОформление<span class="operator">(</span>ЭлементыУсловногоОформления<span class="operator">,</span> <span class="keyword">Новый</span> Массив<span class="operator">,</span> Оформление<span class="operator">)</span><span class="operator">;</span>
<span class="comment">// Cоздадим группу условий &quot;И&quot;</span>
ГруппаОтборов <span class="operator">=</span> НовыйЭлемент<span class="operator">.</span>Отбор<span class="operator">.</span>Элементы<span class="operator">.</span>Добавить<span class="operator">(</span>Тип<span class="operator">(</span><span class="string">&quot;ГруппаЭлементовОтбораКомпоновкиДанных&quot;</span><span class="operator">)</span><span class="operator">)</span><span class="operator">;</span>
ГруппаОтборов<span class="operator">.</span>ТипГруппы <span class="operator">=</span> ТипГруппыЭлементовОтбораКомпоновкиДанных<span class="operator">.</span>ГруппаИ<span class="operator">;</span>
<span class="comment">// Зададим условие оформления: Сумма &gt; 500 И Сумма &lt; 10 000</span>
ДобавитьОтбор<span class="operator">(</span>ГруппаОтборов<span class="operator">,</span> <span class="string">&quot;Сумма&quot;</span><span class="operator">,</span> <span class="number">500</span><span class="operator">,</span> ВидСравненияКомпоновкиДанных<span class="operator">.</span>Больше<span class="operator">)</span><span class="operator">;</span>
ДобавитьОтбор<span class="operator">(</span>ГруппаОтборов<span class="operator">,</span> <span class="string">&quot;Сумма&quot;</span><span class="operator">,</span> <span class="number">10000</span><span class="operator">,</span> ВидСравненияКомпоновкиДанных<span class="operator">.</span>Меньше<span class="operator">)</span><span class="operator">;</span></pre>

<a name="_ref453774176"></a><a name="_ref453774175"></a><a id="TI000000433" class="bookmark" name="issogl2_7.9.6_механизм_перетаскивания"><h3>7.9.6. Механизм перетаскивания</h3></a>

<p class="MsoNormalCxSpFirst">В «1С:Предприятии»
поддерживается операция перетаскивания. С ее помощью можно осуществлять перенос
данных между разными элементами формы. Например, можно переносить элементы
списка справочника из одной группы в другую, переносить данные из табличного
поля в поле табличного документа или перенести список выделенных файлов из
проводника Microsoft Windows в какой-либо элемент формы.</p>

<p class="MsoNormalCxSpLast">Операции
перетаскивания поддерживают следующие элементы формы:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
таблица формы,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле табличного документа,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле календаря,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
поле картинки,</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
декорация-картинка,</p>

<p class="MsoListBulletCxSpLast">&#9679; 
поле планировщика.</p>

<p class="MsoNormal">При операциях
перетаскивания используются следующие термины:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Bold">источник данных</span> – элемент
формы, из которого можно перетаскивать данные;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Bold">приемник данных</span> – элемент
формы, в который можно перетаскивать данные.</p>

<p class="MsoNormal">Существует
возможность разрешать или запрещать элементам управления предоставлять или
принимать данные, т. е. быть источником или приемником данных. Для
этого у элементов формы существуют следующие свойства:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Interface">Разрешить начало
перетаскивания</span> – разрешает элементу формы предоставлять данные.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Interface">Разрешить перетаскивание</span> –
разрешает элементу формы принимать данные. Эти свойства можно устанавливать из
палитры свойств или из встроенного языка.</p>

<p class="MsoNormal">При нажатии кнопки
мыши на выделенной области элемента управления у элемента управления – источника
данных вызывается обработчик события <span class="Term">НачалоПеретаскивания</span>.
Если источником перетаскивания выступает поле планировщика, то событие <span class="Term">НачалоПеретаскивания</span> возникает тогда, когда
курсор мыши выходит за границы этого поля. В качестве параметров данного
события передаются объекты типа <span class="Term">ПараметрыПеретаскивания</span>
и <span class="Term">Выполнение</span>.
Параметр <span class="Term">ПараметрыПеретаскивания</span>
имеет следующие свойства:</p>

<p class="MsoListBullet">&#9679; 
<span class="Term">Значение</span> – содержит перетаскиваемое
значение, например, для таблицы управляемой формы это может быть ссылка на
объект, для табличного документа – область табличного документа, для
календаря – дата. Можно присвоить этому свойству свое значение (например,
какую-нибудь структуру), тогда это значение будет являться перетаскиваемым
объектом. Для таблицы управляемой формы, связанной с реквизитом формы типа <span class="Term">ДанныеФормыКоллекция</span>, <span class="Term">ДанныеФормыДерево</span> или <span class="Term">ДанныеФормыСтруктраСКоллекцией</span>, в качестве
значения перетаскивания передается:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
идентификатор строки (или массив
идентификаторов), если перетаскивание осуществляется в рамках одной таблицы;</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
элемент коллекции (или массив элементов), если
перетаскивание осуществляется между разными таблицами.</p>

<p class="Indentlist">При выполнении
операции перетаскивания из поля планировщика (см. <a href="#_ref389752968">здесь</a>), свойство <span class="Term">Значение</span>
содержит копии перетаскиваемых элементов.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">Действие</span> – указывает действие
перетаскивания и является значением типа <span class="Term">ДействиеПеретаскивания</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ДопустимыеДействия</span> – указывает допустимые
действия перетаскивания и является значением типа <span class="Term">ДопустимыеДействияПеретаскивания</span>. При помощи
этого свойства можно указать, какие операции возможны с данными источника
данных (например, только копирование).</p>

<p class="MsoNormalCxSpFirst">Параметр <span class="Term">Выполнение</span> позволяет разрешить или запретить
стандартную обработку операции перетаскивания из данного элемента управления.
Для события <span class="Term">НачалоПеретаскивания</span>
стандартной обработкой является начало перетаскивания данных.</p>

<p class="MsoNormalCxSpLast">Далее у
элемента формы – приемника данных вызывается обработчик события <span class="Term">ПроверкаПеретаскивания</span>. Данный обработчик
вызывается всякий раз, когда курсор попадает на новый объект в элементе формы –
приемнике данных (например, в новую ячейку таблицы или поля табличного
документа, при попадании в новую дату в поле календаря). Набор параметров
данного события зависит от элемента формы – приемника данных, но первые
два параметра у всех одинаковы. Это объекты типа <span class="Term">ПараметрыПеретаскивания</span>
и <span class="Term">СтандартнаяОбработка</span>.
Остальные параметры описывают объект под курсором. При обработке данного
события можно управлять видом курсора, т. е. например, указывать, что
перетаскивание в данный элемент управления запрещено или возможно только
копирование. Для этого нужно установить необходимое действие в свойстве <span class="Term">Действие</span> параметра <span class="Term">ПараметрыПеретаскивания</span>. Необходимо учитывать,
что устанавливаемое действие перетаскивания должно быть разрешенным, т. е.
не вступать в противоречие со значением свойства <span class="Term">ДопустимыеДействия</span>.
Например, действие <span class="Term">Копирование</span>
не вступает в противоречие со значением допустимых действий <span class="Term">КопированиеИПеремещение</span>, а значение <span class="Term">Перемещение</span> вступает в противоречие со
значением допустимых действий <span class="Term">Копирование</span>.
Параметр <span class="Term">СтандартнаяОбработка</span>
используется для указания возможности стандартной обработки элементом формы
данного события. Стандартная обработка перетаскивания зависит от типа элемента
управления:</p>

<p class="MsoListBullet">&#9679; 
Для таблицы проверяется возможность вставки значения, т. е.
проверяется тип значения, и, если он совпадает с типом отображаемых данных,
производятся стандартные действия. Стандартные действия для иерархических
динамических списков – перемещение в группу, для таблиц, отображающих
наборы записей или табличные части, – изменение порядка строк и
копирование.</p>

<p class="IndentlistCxSpFirst">Если у
таблицы свойство <span class="Term">ИзменятьПорядокСтрок</span>
установлено в значение <span class="Term">Ложь</span>,
то при перетаскивании внутри таблицы стандартная обработка отменяет перетаскивание
и событие <span class="Term">Перетаскивание</span>
вызвано не будет.</p>

<p class="IndentlistCxSpMiddle">Если свойство
<span class="Term">ИзменятьПорядокСтрок</span>
установлено в значение <span class="Term">Истина</span>
или перетаскивание осуществляется извне таблицы, стандартная обработка не
отменяет перетаскивание.</p>

<p class="IndentlistCxSpLast">Стандартная
обработка не отменяет перетаскивание, если у таблицы свойство <span class="Term">РежимВыделения</span> установлено в значение <span class="Term">Множественный</span>, свойство <span class="Term">ИзменятьПорядокСтрок</span> установлено в значение <span class="Term">Истина</span> или перетаскивание осуществляется извне
таблицы, и перетаскивается более одного элемента.</p>

<p class="MsoListBullet">&#9679; 
Для таблицы, отображающей дерево, стандартная
обработка перетаскивания осуществляется следующим образом:</p>

<p class="MsoListBullet2CxSpFirst">&#9679; 
При перетаскивании элементов дерева внутри
одного узла осуществляется изменение порядка следования элементов дерева внутри
узла.</p>

<p class="MsoListBullet2CxSpLast">&#9679; 
При перетаскивании элементов дерева между различными
узлами осуществляется перемещение элементов дерева в выбранный узел.</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Для поля табличного документа – проверка
возможности вставить передаваемое значение.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Для поля картинки и календаря стандартной
обработки нет.</p>

<p class="MsoNormalCxSpFirst">Если
отпустить клавишу мыши в элементе формы – приемнике данных, вызывается
обработчик события <span class="Term">Перетаскивание</span>.
Набор параметров этого события тот же, что и у события <span class="Term">ПроверкаПеретаскивания</span>. Параметр <span class="Term">СтандартнаяОбработка</span> позволяет разрешить или
запретить стандартную обработку события элементом формы. Стандартные действия
перетаскивания описаны выше.</p>

<p class="MsoNormalCxSpLast">Затем в
элементе управления – источнике данных вызывается обработчик события <span class="Term">ОкончаниеПеретаскивания</span>. При обработке этого события
элемент формы – приемник данных может, например, удалить перемещенные
данные или очистить какие-либо переменные.</p>

<a name="_ref351476908"></a><a name="_ref373333764"></a><a name="_ref373246737"></a><a name="_ref371695222"></a><a id="TI000000435" class="bookmark" name="issogl2_7.9.7_различные_подходы_к_модальности"><h3>7.9.7. Различные подходы к модальности</h3></a>

<a id="TI000000436" class="bookmark" name="issogl3_7.9.7.1_общая_информация"><h4>7.9.7.1. Общая информация</h4></a>

<p class="MsoNormal">В прикладных решениях, разрабатываемых с
помощью системы «1С:Предприятие», часто возникает необходимость открыть форму, которая
будет предоставлять одновременно несколько возможностей:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Блокировать работу с другими фрагментами
интерфейса прикладного решения;</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Позволять ввести какую-либо информацию (включая
ответ на вопрос);</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Останавливать исполнение кода прикладного
решения до момента, пока не будет завершена работа с открытой формой.</p>

<p class="MsoNormalCxSpFirst">Причем рассматриваемые формы могут быть
созданы прикладным разработчиком на встроенном языке «1С:Предприятие» и являться
частью самой платформы (например формы, которые открывают методы <span class="Term">Предупреждение()</span>,
<span class="Term">Вопрос()</span>
и т. д.).</p>

<p class="MsoNormalCxSpLast">В рамках системы «1С:Предприятие» существуют
две схемы использования таких форм:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Модальные окна;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Блокирующие окна.</p>

<p class="MsoNormalCxSpFirst">В рамках одного прикладного решения может
использовать или какой-либо один подход или смешанная модель. Для управления
такой возможностью существует специальное свойство конфигурации – <span class="Interface">Режим использования модальности</span> (см. <A href="/db/content/v8310doc/src/руководство разработчика/глава 5. объекты конфигурации.htm?_=1496848987#_ref351461437">здесь</a>).</p>

<p class="MsoNormalCxSpMiddle">Первая схема использования модальности
(модальные окна) предполагает использование особых типов окон операционной системы –
модальные окна. В случае использования этой схемы исполнение кода на встроенном
языке останавливается до тех пор, пока модальная форма не будет закрыта.
Значение возврата будет получено непосредственно в месте открытия модальной формы
и сразу после этого (в том же методе) можно выполнять какие-либо действия с
этим значением: проанализировать, использовать в алгоритме и т. д.
Модальные окна можно открыть с помощью методов <span class="Term">ОткрытьФормуМодально()</span>
или <span class="Term">Предупреждение()</span>. Однако, модальные окна не
поддерживаются при работе на устройствах iPad и плохо поддерживаются в
веб-клиенте.</p>

<p class="MsoNormalCxSpMiddle">В этих случаях рекомендуется использовать
схему использования модальности с помощью блокирующих окон. Основное отличие
блокирующего окна от модального заключается в том, что открытие блокирующего
окна не останавливает исполнение кода на встроенном языке. Получение результата
работы блокирующего окна выполняется с помощью специальной процедуры обратного
вызова. Следствием этой особенности является тот, что алгоритм, использующий
модальные вызовы для управления своей работой, будет необходимо полностью
переработать для использования с блокирующими окнами.</p>

<p class="MsoNormalCxSpLast">С точки зрения прикладного разработчика,
разница между двумя схемами использования модальных окон будет продемонстрирована
на следующем примере. Допустим, что есть некоторый клиентский обработчик,
который задает пользователю вопрос и в зависимости от данного ответа выполняет
одну или другую ветку прикладного кода.</p>

<p class="Lang-subheader">Пример с модальными окнами:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ВыполнитьАлгоритм<span class="operator">(</span><span class="operator">)</span>
    Результат <span class="operator">=</span> Вопрос<span class="operator">(</span><span class="string">&quot;Выполнить быстро или не медленно?&quot;</span><span class="operator">,</span> РежимДиалогаВопрос<span class="operator">.</span>ДаНет<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Если</span> Результат <span class="operator">=</span> КодВозвратаДиалога<span class="operator">.</span>Да <span class="keyword">Тогда</span>
        <span class="comment">// Первый вариант алгоритма</span>
    <span class="keyword">Иначе</span>
        <span class="comment">// Второй вариант алгоритма</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">В этом примере (модальные окна) работа
встроенного языка остановится на строке <span class="Term">Результат = Вопрос()</span>
и продолжится только после того, как пользователь ответит на заданный вопрос.</p>

<p class="Lang-subheader">Пример с блокирующими окнами:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ВыполнитьАлгоритм<span class="operator">(</span>Команда<span class="operator">)</span>
    ОбратныйВызов <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеОповещения<span class="operator">(</span><span class="string">&quot;ВыполнитьАлгоритмОбратныйВызов&quot;</span><span class="operator">,</span> ЭтотОбъект<span class="operator">)</span><span class="operator">;</span>
    ПоказатьВопрос<span class="operator">(</span>ОбратныйВызов<span class="operator">,</span> <span class="string">&quot;Выполнить быстро или не медленно?&quot;</span><span class="operator">,</span> РежимДиалогаВопрос<span class="operator">.</span>ДаНет<span class="operator">)</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ВыполнитьАлгоритмОбратныйВызов<span class="operator">(</span>Результат<span class="operator">,</span> ДополнительныеПараметры<span class="operator">)</span> <span class="keyword">Экспорт</span>
    <span class="keyword">Если</span> Результат <span class="operator">=</span> КодВозвратаДиалога<span class="operator">.</span>Да <span class="keyword">Тогда</span>
        <span class="comment">// Первый вариант алгоритма</span>
    <span class="keyword">Иначе</span>
        <span class="comment">// Второй вариант алгоритма</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">В этом примере (с использованием блокирующих
окон) алгоритм оказывается разделенным на две части:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Место, где отображается вопрос пользователю;</p>

<p class="MsoListBulletCxSpLast">&#9679; 
Место, где обрабатывается ответ пользователя.</p>

<p class="MsoNormalCxSpFirst">Но это разные фрагменты прикладного кода.
После вызова метода <span class="Term">ПоказатьВопрос()</span> исполнение кода на встроенном
языке не завершится. Однако, пользователь сможет ответить на заданный вопрос
только в том случае, когда исполнение кода на встроенном языке будет завершено
и управление будет передано системе «1С:Предприятие». Следовательно, в месте
вызова метода, отображающего форму с вопросом, невозможно получить результат
работы пользователя с открытой формой.</p>

<p class="MsoNormalCxSpMiddle">После того, как пользователь ответит на
вопрос, будет вызвана экспортная процедура, описание которой прикладной разработчик
должен передать в метод открытия блокирующего окна. Описание метода обратного
вызова создается с помощью объекта <span class="Term">ОписаниеОповещения</span>.
Метод обратного вызова может располагаться в модуле формы, модуле команды и
общем модуле. Если требуется указать, что метод обратного вызова находится в
том же модуле, что и вызов блокирующего окна, следует использовать значение <span class="Term">ЭтотОбъект</span>.
Также имеется возможность передать в обработчик обратного вызова различные
вспомогательные данные, которые в самом обработчике будут доступны через
формальный параметр <span class="Term">ДополнительныеПараметры</span>. Это могут быть
входные данные для работы алгоритма, различные параметры и т. д.</p>

<p class="MsoNormalCxSpMiddle">В общем случае, после вызова любого метода работы
с блокирующими окнами, метод, содержащий такой вызов, должен сразу завершаться,
а весь дальнейший код должен быть расположен в обработчике оповещения.</p>

<p class="MsoNormalCxSpLast">В том случае, если требуется организовать
каскадный вызов методов обратного вызова, следует использовать метод ВыполнитьОбработкуОповещения<span class="Term">()</span>.
Также этот метод можно использовать в тех случаях, когда реализация какого-либо
действия может произойти либо сразу, либо после задания вопроса о необходимости
действия. Например, при попытке перечитать файл с данными, проверяется текущее
состояние редактора, и если данные в редакторе изменены – задается вопрос
о возможности перечитать данные.</p>

<p class="Lang-subheader">Пример:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПеречитатьДанные<span class="operator">(</span>Команда<span class="operator">)</span>
    ОбратныйВызов <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеОповещения<span class="operator">(</span><span class="string">&quot;ПеречитатьДанныеЗавершение&quot;</span><span class="operator">,</span> ЭтотОбъект<span class="operator">,</span> ИмяФайлаСДанными<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Если</span> Модифицированность <span class="keyword">Тогда</span>
        ПоказатьВопрос<span class="operator">(</span>ОбратныйВызов<span class="operator">,</span> <span class="string">&quot;Данные изменены. Перечитать?&quot;</span><span class="operator">,</span> РежимДиалогаВопрос<span class="operator">.</span>ДаНет<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Иначе</span>
        ВыполнитьОбработкуОповещения<span class="operator">(</span>ОбратныйВызов<span class="operator">,</span> КодВозвратаДиалога<span class="operator">.</span>Да<span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПеречитатьДанныеЗавершение<span class="operator">(</span>Результат<span class="operator">,</span> ИмяФайла<span class="operator">)</span> <span class="keyword">Экспорт</span>
    <span class="keyword">Если</span> Результат <span class="operator">=</span> КодВозвратаДиалога<span class="operator">.</span>Да <span class="keyword">Тогда</span>
        <span class="comment">// выполним чтение данных</span>
        Модифицированность <span class="operator">=</span> <span class="keyword">Ложь</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<a name="_ref438049787"></a><a id="TI000001779" class="bookmark" name="issogl3_7.9.7.2_закрытие_вспомогательного_или_основного_окна_приложения_и_блокирующие_окна"><h4>7.9.7.2. Закрытие вспомогательного или основного окна приложения и блокирующие окна</h4></a>

<p class="MsoNormal">Закрытие формы может выполняться в двух
сценариях работы – когда закрывается единственная форма и когда закрывается
целиком все приложение (выполняется закрытие основного окна приложения). Для
того чтобы разделить эти сценарии, в системе реализован отдельный процесс
обработки закрытия всего приложения. Для указания, что форма закрывается во
время закрытия всего приложения в обработчиках событий <span class="Term">ПередЗакрытием</span>,
<span class="Term">ПриЗакрытии</span>
реализован специальный параметр <span class="Term">ЗавершениеРаботы</span>. Кроме того, в обработчике
события формы <span class="Term">ПередЗакрытием</span> и обработчике события <span class="Term">ПередЗавершениемРаботы</span>
модуля управляемого приложения, реализован параметр <span class="Term">ТекстПредупреждения</span>.
Рассмотрим данные параметры более подробно:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
<span class="Term">ЗавершениеРаботы</span> – данный параметр
устанавливается системой в значение <span class="Term">Истина</span> в том
случае, если пользователь пытается закрыть основное окно приложения (если этот
параметр существует для выбранного обработчика). При закрытии одной формы
данный параметр будет установлен в значение <span class="Term">Ложь</span>.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
<span class="Term">ТекстПредупреждения</span> – данный параметр
должен быть сформирован в обработчике события (если этот параметр существует
для выбранного обработчика).</p>

<p class="MsoNormal">Более подробно рассмотрим совместную работу
этих параметров во время закрытия приложения. Код на встроенном языке, который
обрабатывает закрытие формы с учетом указанных особенностей, будет иметь
следующий вид:</p>

<a class="copy_source" href="#_top" onClick="return false">Копировать в буфер обмена</a>
<pre class="src_dev"><span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Перем</span> ОтветПередЗакрытием<span class="operator">;</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПередЗакрытием<span class="operator">(</span>Отказ<span class="operator">,</span> ЗавершениеРаботы<span class="operator">,</span> ТекстПредупреждения<span class="operator">,</span> СтандартнаяОбработка<span class="operator">)</span>
    <span class="keyword">Если</span> <span class="keyword">НЕ</span> ЗавершениеРаботы <span class="keyword">Тогда</span>
        <span class="keyword">Если</span> ОтветПередЗакрытием <span class="operator">&lt;</span><span class="operator">&gt;</span> <span class="keyword">Истина</span> <span class="keyword">Тогда</span>
            Отказ <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
            ОбратныйВызов <span class="operator">=</span> <span class="keyword">Новый</span> ОписаниеОповещения<span class="operator">(</span><span class="string">&quot;ПередЗакрытиемЗавершение&quot;</span><span class="operator">,</span> ЭтотОбъект<span class="operator">)</span><span class="operator">;</span>
            ПоказатьВопрос<span class="operator">(</span>ОбратныйВызов<span class="operator">,</span> <span class="string">&quot;Закрыть форму?&quot;</span><span class="operator">,</span> РежимДиалогаВопрос<span class="operator">.</span>ДаНет<span class="operator">)</span><span class="operator">;</span>
        <span class="keyword">КонецЕсли</span><span class="operator">;</span>
    <span class="keyword">Иначе</span>
        Отказ <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
        ТекстПредупреждения <span class="operator">=</span> <span class="string">&quot;При закрытии формы все данные будут утеряны. Вы хотите&quot;</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span>
<span class="preprocessor">&amp;НаКлиенте</span>
<span class="keyword">Процедура</span> ПередЗакрытиемЗавершение<span class="operator">(</span>Результат<span class="operator">,</span> ДополнительныеПараметры<span class="operator">)</span> <span class="keyword">Экспорт</span>
    <span class="keyword">Если</span> Результат <span class="operator">=</span> КодВозвратаДиалога<span class="operator">.</span>Да <span class="keyword">Тогда</span>
        ОтветПередЗакрытием <span class="operator">=</span> <span class="keyword">Истина</span><span class="operator">;</span>
        Закрыть<span class="operator">(</span><span class="operator">)</span><span class="operator">;</span>
    <span class="keyword">Иначе</span>
        ОтветПередЗакрытием <span class="operator">=</span> <span class="keyword">Неопределено</span><span class="operator">;</span>
    <span class="keyword">КонецЕсли</span><span class="operator">;</span>
<span class="keyword">КонецПроцедуры</span></pre>

<p class="MsoNormal">В приведенном примере примера реализована
особая реакция на закрытие всего приложения. Обработка процесса закрытия
приложения работает следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Если форма закрывается в процессе завершения
работы приложения, то прикладной разработчик может определить это по состоянию
параметра <span class="Term">ЗавершениеРаботы</span> и определяет, нужно выдать
пользователю какое-либо сообщение, которое требует реакции пользователя:
завершить работу или все-таки продолжить работу, т. к. в форме есть
существенная информация.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если разработчик считает, что пользователю
необходимо выдать сообщение, то он может это сделать с помощью параметра <span class="Term">ТекстПредупреждения</span>
обработчика событий <span class="Term">ПередЗакрытием</span> или <span class="Term">ПередЗавершениемРаботыСистемы</span>.
Параметр <span class="Term">Отказ</span> также следует установить в значение <span class="Term">Истина</span>.</p>

<p class="MsoListBulletCxSpMiddle">&#9679; 
Если хотя бы одна форма или процедура обработчика
события <span class="Term">ПередЗавершениемРаботыСистемы</span> сообщит о том,
что она «не хочет» закрытия приложения, система будет формировать диалоги,
требующие реакции пользователя. Количество диалогов равно количеству отказов от
закрытия (включая обработчик модуля управляемого приложения). В веб-клиенте будет
отображен один диалог, который будет содержать все сообщения, которые были
установлены в управляемых формах и модуле управляемого приложения. При этом в
веб-браузере Mozilla Firefox диалог будет содержать только текст, установленный
самим веб-браузером и не будет отображаться текст, установленный в обработчиках
событий системы «1С:Предприятие».</p>

<p class="MsoListBulletCxSpLast">&#9679; 
В тонком клиенте в диалоге будет отображаться
текст предупреждения, который задал разработчик, и кнопки <span class="Interface">Завершить работу</span> и <span class="Interface">Продолжить
работу</span>. Если во всех диалогах выбрано <span class="Interface">Завершить работу</span> – работа приложения будет
завершена. Если хотя бы в одном диалоге было выбрано <span class="Interface">Продолжить работу</span> – приложение не будет завершено и
работа продолжится. В случае отказа от завершения работы на экране останется та
форма, в которой была нажата кнопка <span class="Interface">Продолжить
работу</span>.</p>

<p class="MsoNormal">Если параметр <span class="Term">ЗавершениеРаботы</span>
имеет значение <span class="Term">Ложь</span>, то это означает, что закрывается
единственная форма и в этом случае логика работы выглядит следующим образом:</p>

<p class="MsoListBulletCxSpFirst">&#9679; 
Вначале задается вопрос о необходимости
(возможности) закрытия формы и собственно закрытие формы отменяется.</p>

<p class="MsoListBulletCxSpLast">&#9679; 
После того, как пользователь ответил на вопрос,
в специальной клиентской переменной отмечается, что сейчас будет выполнено
«настоящее» закрытие формы и форма закрывается повторно.</p>

<p class="MsoNormalCxSpFirst">При обработке завершения работы приложения
(параметр <span class="Term">ЗавершениеРаботы</span> равен значению <span class="Term">Истина</span>)
в обработчиках <span class="Term">ПередЗакрытием</span>, <span class="Term">ПриЗакрытии</span>,
а также в обработчиках <span class="Term">ПередЗавершениемРаботыСистемы</span> и <span class="Term">ПриЗавершенииРаботыСистемы</span>
запрещено использование любых серверных вызовов и открытие любых форм. Из этого
следует рекомендация хранить в данных формы ту информацию, которая может
потребоваться для определения того, можно закрыть форму при завершении работы
приложения или нет. Для существующих форм может потребоваться переработка
механизмов, отвечающих за закрытие.</p>

<p class="MsoNormalCxSpMiddle">Таким образом, отображение диалога с
кнопками <span class="Interface">Завершить работу</span>
и <span class="Interface">Продолжить работу</span>
выполняется в том случае, если при покидании обработчиков <span class="Term">ПередЗакрытием</span>
параметры обработчика установлены следующим образом: параметр <span class="Term">ЗавершениеРаботы</span>
установлен в значение <span class="Term">Истина</span> и параметр <span class="Term">Отказ</span>
установлен в значение <span class="Term">Истина</span>. В этом случае в диалоге будет
отображаться текст, который установлен в параметре <span class="Term">ТекстПредупреждения</span>.
Если параметр <span class="Term">ТекстПредупреждения</span> не установлен, то в
качестве текста предупреждения в диалоге будет показана строка <span class="Interface">Работа в данном окне не завершена</span>.</p>

<p class="MsoNormalCxSpMiddle">Аналогичное поведение будет наблюдаться в
том случае, если в обработчике <span class="Term">ПередЗавершениемРаботыСистемы</span> параметр <span class="Term">Отказ</span>
будет установлен в значение <span class="Term">Истина</span>.</p>

<p class="MsoNormalCxSpLast">Во всех остальных случаях считается, что нет
причин, препятствующих закрытию форм и приложения.</p>

<a id="TI000000437" class="bookmark" name="issogl3_7.9.7.3_особенности_использования_блокирующих_окон"><h4>7.9.7.3. Особенности использования блокирующих окон</h4></a>

<p class="MsoNormalCxSpFirst">В тонком и толстом клиенте, в отличие от
веб-клиента, метод <span class="Term">НачатьПомещениеФайла()</span> останавливает
исполнение кода на встроенном языке. Тем не менее, после завершения операции
вызов процедуры обратного вызова, переданной в метод <span class="Term">НачатьПомещениеФайла()</span>,
все равно будет выполнен. Для того чтобы избежать различий в поведении при работе
в тонком клиенте и веб-клиенте, следует весь код, который должен быть выполнен
после помещения файла, размещать строго в обработчике обратного вызова.</p>

<p class="MsoNormalCxSpMiddle">Для объектов <span class="Term">ДиалогРедактированияСтандартногоПериода</span>,
<span class="Term">КонструкторФорматнойСтроки</span>,
<span class="Term">ДиалогВыбораШрифта</span>,
<span class="Term">ДиалогВыбораЦвета</span>,
<span class="Term">ДиалогРасписанияРегламентногоЗадания</span>
в обработчик обратного вызова, который передается при вызове метода <span class="Term">Показать()</span>,
в качестве первого параметра передается значение основного свойства
закрываемого диалога, если в диалоге нажата кнопка <span class="Interface">ОК</span> или <span class="Term">Неопределено</span> в остальных случаях. Например,
при редактировании стандартного периода, в качестве первого параметра
обработчика обратного вызова будет выступать объект <span class="Term">СтандартныйПериод</span>
(или <span class="Term">Неопределено</span>).</p>

<p class="MsoNormalCxSpMiddle"> </p>

<br>		<script type="text/javascript">listenCopy('zeroclipboard.swf');</script>
	</body>
</html>